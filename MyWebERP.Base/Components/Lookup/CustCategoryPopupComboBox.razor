@using MyWebERP.Model


@inherits CustCategoryComboBoxBase

    @* Ở đây không gọi @bind-value vì nó bị chồng lấn. Phải gọi Value và ValueChanged -> Lưu ý*@
<MyPopupComboBox Data="@Data"
            TValue="string"
            TItem="CustCategoryLookupModel"
            NullText="Chọn nhóm KH"
            Value="@Value"
                 CssClass="@CssClass"
            CustomFilter="CustomFilter ?? DefaultCustomFilter"
            ValueChanged="ValueChanged"
                        ItemTemplate="ItemTemplate ?? DefaultItemTemplate"
                 ValueFieldName="@nameof(CustCategoryLookupModel.cust_category_id)"
                 Language="@Language"
                 LocalStorageService="@LocalStorageService"
                 TextFieldName="@nameof(CustCategoryLookupModel.cust_category_name)">
    <ExtraButtons>
        <DxEditorButton IconCssClass="bi bi-plus-lg"
                        tabindex="-1"
                        Visible="@AllowAddNew"
                        Tooltip="@Language["Thêm nhóm khách hàng"]"
                        Click="@(_ => AddNewCategory())" />

        <DxEditorButton IconCssClass="bi bi-pencil-square"
                        tabindex="-1"
                        Visible="@AllowEdit"
                        Tooltip="@Language["Sửa nhóm khách hàng"]"
                        Click="@(_ => EditCategory())" />
    </ExtraButtons>
    <FooterTemplate>
        @* <div class="d-flex justify-content-end gap-2 p-2 border-top">
            <DxButton RenderStyle="ButtonRenderStyle.Primary"
                      IconCssClass="bi bi-plus-lg"
                      Text="Thêm"
                      Click="@AddNewCategory" />
            <DxButton RenderStyle="ButtonRenderStyle.Secondary"
                      IconCssClass="bi bi-pencil-square"
                      Text="Sửa"
                      Click="@EditCategory" />
            
        </div> *@

        @* <div class="d-flex position-sticky bottom-0 start-0 end-0 border-top bg-body p-2 gap-2">
            <button type="button"
                    class="btn btn-primary flex-fill d-flex align-items-center justify-content-center" onclick="@AddNewCategory">
                <i class="bi bi-plus-lg me-1"></i>@Language["Thêm"]
            </button>
            <button type="button"
                    class="btn btn-outline-primary flex-fill d-flex align-items-center justify-content-center" onclick="@EditCategory">
                <i class="bi bi-pencil-square me-1"></i>@Language["Sửa"]
            </button>
        </div> *@

        <div class="d-flex w-100 gap-2">
            <DxButton CssClass="flex-fill py-2 rounded-3 shadow-sm d-flex align-items-center justify-content-center"
                      RenderStyle="ButtonRenderStyle.Primary"
                      Text="@Language["Thêm"]"
                      Id="btnSubmit"
                      IconCssClass="bi bi-plus-lg me-1"
                      Click="@AddNewCategory" />
        </div>
    </FooterTemplate>
</MyPopupComboBox>
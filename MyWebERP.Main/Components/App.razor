@using Microsoft.AspNetCore.Mvc.ViewFeatures
@inject IFileVersionProvider FileVersionProvider

<!DOCTYPE html>
<html lang="en" >
<head>
    

    <meta charset="utf-8" />
    @* <meta name="viewport" content="width=device-width, initial-scale=1.0" /> *@
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <base href="/" />
    <link href=@AppendVersion("css/bootstrap/bootstrap.min.css") rel="stylesheet" />
    <link href=@AppendVersion("_content/DevExpress.Blazor.Themes/bootstrap-external.bs5.min.css") rel="stylesheet" />
    


    @DxResourceManager.RegisterScripts()
    <link href=@AppendVersion("css/site.css") rel="stylesheet" />
    <link href=@AppendVersion("MyWebERP.Main.styles.css") rel="stylesheet" />
    <HeadOutlet />
    <link href=@AppendVersion("_content/DevExpress.Blazor.RichEdit/dx-blazor-richedit.css") rel="stylesheet" />

    @*Sử dụng bootstrap5 - đang dùng cho dropdown ngôn ngữ.*@
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

    @* Icon chuẩn bootstrap*@
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">


    @*Đổi màu chủ đạo*@
    @* <style>
        :root {
            --bs-primary: #e74c3c; /* đỏ cam */
        }
    </style> *@

    <link href="css/custom.css" rel="stylesheet" />
    

    <HeadOutlet @rendermode="new InteractiveServerRenderMode(prerender: false)" />

    <title>DIP BMS</title>

</head>
<body>
    <script>
    // Tự động áp dụng các biến màu đã lưu
    (() => {
        const root = document.documentElement;
        const prefix = "theme-";
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key.startsWith(prefix)) {
                const varName = key.substring(prefix.length);
                const value = localStorage.getItem(key);
                root.style.setProperty(varName, value);
            }
        }
    })();

</script>

    <Routes @rendermode="new InteractiveServerRenderMode(prerender: false)" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="_framework/blazor.web.js"></script>
    <script src="js/focus-helper.js"></script>
    <script src="js/my-js.js"></script>
    <script src="js/site.js"></script>
    <script src="js/theme-v4.js"></script>
    <script src="js/apartment-helper.js"></script>
    <!--Tổng đài-->
    <script src="js/jssip.min.js"></script>
    <script src="js/sipinterop.js"></script>
</body>

</html>

@code{
    private string AppendVersion(string path) => FileVersionProvider.AddFileVersionToPath("/", path);
}
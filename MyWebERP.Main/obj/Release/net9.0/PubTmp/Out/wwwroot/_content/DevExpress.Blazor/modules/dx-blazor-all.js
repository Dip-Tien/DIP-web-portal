import{c as e,g as t,a as n}from"./_commonjsHelpers-f0e2db5e.js";class i{static setLoaded(e){this.setAttribute(e,i.loaded)}static removeLoaded(e){this.removeAttribute(e,i.loaded)}static hasLoaded(e){return null!==e.getAttribute(i.prefix+i.loaded)}static setAttribute(e,t,n=null){e.setAttribute(i.prefix+t,null!=n?n:"")}static removeAttribute(e,t){e.removeAttribute(i.prefix+t)}}i.prefix="data-qa-dxbl-",i.loaded="loaded";var s,r,o;!function(e){e[e.Default=-1]="Default",e[e.None=0]="None",e[e.Dragging=150]="Dragging"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.DblClick=2]="DblClick",e[e.Dragging=4]="Dragging"}(r||(r={})),function(e){e[e.Stopped=0]="Stopped",e[e.WaitingForDragging=1]="WaitingForDragging",e[e.Dragging=2]="Dragging"}(o||(o={}));class a extends CustomEvent{constructor(e){super(a.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}a.eventName="dxpointerdragstart";class l extends CustomEvent{constructor(e){super(l.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}l.eventName="dxpointerdragstop";class A extends Event{constructor(){super(A.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}A.eventName="dxpointerdragcancel";class d extends CustomEvent{constructor(e){super(d.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}d.eventName="dxclick";class c extends CustomEvent{constructor(e){super(c.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}c.eventName="dxdblclick";var h=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;var n=function(){function e(){}return e.IdentUserAgent=function(t,n){void 0===n&&(n=!1);var i=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],s="IE",r="Win",o={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(t&&0!==t.length){t=t.toLowerCase(),e.indentPlatformMajorVersion(t);try{for(var a={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},l="(?:/|\\s*)?",A="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",d="(?:"+A+")?",c={Safari:"applewebkit(?:.*?(?:version/"+A+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+l+d,Mozilla:"mozilla(?:.*rv:"+d+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+d,Firefox:"firefox"+l+d,Opera:"(?:opera|\\sopr)"+l+d,Opera10:"opera.*\\s*version"+l+d,IE:"msie\\s*"+d,Edge:"edge"+l+d},h=null,u=-1,p=0;p<i.length;p++){var m=i[p],g=new RegExp(c[m],"i").exec(t);if(g&&g.index>=0){if("IE"===h&&u>=11&&"Safari"===m)continue;"Opera10"===(h=m)&&(h="Opera"),u=e.GetBrowserVersion(t,g,"trident"+l+d,e.getIECompatibleVersionString()),"Mozilla"===h&&u>=11&&(h="IE")}}h||(h=s);var C=-1!==u;C||(u=o[h]);var f=null,v=Number.MAX_VALUE;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var w="!"===b.substr(0,1),y=t.indexOf((w?b.substr(1):b).toLowerCase());y>=0&&(y<v||w)&&(v=w?0:y,f=a[b])}var B=t.toUpperCase().match("SM-[A-Z]"),E=B&&B.length>0;"WinPhone"===f&&u<9&&(u=Math.floor(e.getVersionFromTrident(t,"trident"+l+d))),!n&&"IE"===h&&u>7&&document.documentMode<u&&(u=document.documentMode),"WinPhone"===f&&(u=Math.max(9,u)),f||(f=r),f!==a["cpu os"]||C||(u=4),e.fillUserAgentInfo(i,h,u,f,E)}catch(t){e.fillUserAgentInfo(i,s,o[s],r)}}else e.fillUserAgentInfo(i,s,o[s],r)},e.GetBrowserVersion=function(t,n,i,s){var r=e.getVersionFromMatches(n);if(s){var o=e.getVersionFromTrident(t,i);if("edge"===s||parseInt(s)===o)return o}return r},e.getIECompatibleVersionString=function(){if(document.compatible)for(var e=0;e<document.compatible.length;e++)if("IE"===document.compatible[e].userAgent&&document.compatible[e].version)return document.compatible[e].version.toLowerCase();return""},e.isTouchEnabled=function(){return e.hasTouchStart()||e.hasMaxTouchPoints()||e.hasMsMaxTouchPoints()},e.hasTouchStart=function(){return"ontouchstart"in window},e.hasMaxTouchPoints=function(){return navigator.maxTouchPoints>0},e.hasMsMaxTouchPoints=function(){return navigator.msMaxTouchPoints>0},e.hasNavigator=function(){return"undefined"!=typeof navigator},e.fillUserAgentInfo=function(t,n,i,s,r){void 0===r&&(r=!1);for(var o=0;o<t.length;o++){var a=t[o];e[a]=a===n}e.Version=Math.floor(10*i)/10,e.MajorVersion=Math.floor(e.Version),e.WindowsPlatform="Win"===s||"WinPhone"===s,e.MacOSMobilePlatform="MacMobile"===s||"Mac"===s&&e.isTouchEnabled(),e.MacOSPlatform="Mac"===s&&!e.MacOSMobilePlatform,e.AndroidMobilePlatform="Android"===s,e.WindowsPhonePlatform="WinPhone"===s,e.WebKitFamily=e.Safari||e.Chrome||e.Opera&&e.MajorVersion>=15,e.NetscapeFamily=e.Netscape||e.Mozilla||e.Firefox,e.WebKitTouchUI=e.MacOSMobilePlatform||e.AndroidMobilePlatform;var l=e.IE&&e.MajorVersion>9&&e.WindowsPlatform&&e.UserAgent.toLowerCase().indexOf("touch")>=0;if(e.MSTouchUI=l||e.Edge&&!!window.navigator.maxTouchPoints,e.TouchUI=e.WebKitTouchUI||e.MSTouchUI,e.MobileUI=e.WebKitTouchUI||e.WindowsPhonePlatform,e.AndroidDefaultBrowser=e.AndroidMobilePlatform&&!e.Chrome,e.AndroidChromeBrowser=e.AndroidMobilePlatform&&e.Chrome,r&&(e.SamsungAndroidDevice=r),e.MSTouchUI){var A=e.UserAgent.toLowerCase().indexOf("arm;")>-1;e.VirtualKeyboardSupported=A||e.WindowsPhonePlatform}else e.VirtualKeyboardSupported=e.WebKitTouchUI;e.fillDocumentElementBrowserTypeClassNames(t)},e.indentPlatformMajorVersion=function(t){var n=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(t);n&&(e.PlaformMajorVersion=n[1])},e.getVersionFromMatches=function(e){var t=-1,n="";return e&&(e[1]&&(n+=e[1],e[2]&&(n+="."+e[2])),""!==n&&(t=parseFloat(n),isNaN(t)&&(t=-1))),t},e.getVersionFromTrident=function(t,n){var i=new RegExp(n,"i").exec(t);return e.getVersionFromMatches(i)+4},e.fillDocumentElementBrowserTypeClassNames=function(t){for(var n="",i=t.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),s=0;s<i.length;s++){var r=i[s];e[r]&&(n+="dx"+r+" ")}n+="dxBrowserVersion-"+e.MajorVersion,"undefined"!=typeof document&&document&&document.documentElement&&(""!==document.documentElement.className&&(n=" "+n),document.documentElement.className+=n,e.Info=n)},e.getUserAgent=function(){return e.hasNavigator()&&navigator.userAgent?navigator.userAgent.toLowerCase():""},e.UserAgent=e.getUserAgent(),e._foo=e.IdentUserAgent(e.UserAgent),e}();t.Browser=n}));t(h);var u=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var n=function(){function e(){}return e.isAlpha=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},e.isDigit=function(e){return e>="0"&&e<="9"},e.stringHashCode=function(e){var t=0;if(0===e.length)return t;for(var n=e.length,i=0;i<n;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t},e.endsAt=function(e,t){var n=e.length-1,i=t.length-1,s=n-i;if(s<0)return!1;for(;n>=s;n--,i--)if(e[n]!==t[i])return!1;return!0},e.startsAt=function(e,t){return e.substr(0,t.length)===t},e.stringInLowerCase=function(e){return e.toLowerCase()===e},e.stringInUpperCase=function(e){return e.toUpperCase()===e},e.atLeastOneSymbolInUpperCase=function(t){for(var n=0,i=void 0;i=t[n];n++)if(e.stringInUpperCase(i)&&!e.stringInLowerCase(i))return!0;return!1},e.getSymbolFromEnd=function(e,t){return e[e.length-t]},e.trim=function(t,n){if(void 0===n)return e.trimInternal(t,!0,!0);var i=n.join("");return t.replace(new RegExp("(^["+i+"]*)|(["+i+"]*$)","g"),"")},e.trimStart=function(t,n){if(void 0===n)return e.trimInternal(t,!0,!1);var i=n.join("");return t.replace(new RegExp("^["+i+"]*","g"),"")},e.trimEnd=function(t,n){if(void 0===n)return e.trimInternal(t,!1,!0);var i=n.join("");return t.replace(new RegExp("["+i+"]*$","g"),"")},e.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},e.repeat=function(e,t){return new Array(t<=0?0:t+1).join(e)},e.isNullOrEmpty=function(e){return!e||!e.length},e.padLeft=function(t,n,i){return e.repeat(i,Math.max(0,n-t.length))+t},e.trimInternal=function(e,t,n){var i=e.length;if(!i)return e;if(i<764833){var s=e;return t&&(s=s.replace(/^\s+/,"")),n&&(s=s.replace(/\s+$/,"")),s}var r=0;if(n)for(;i>0&&/\s/.test(e[i-1]);)i--;if(t&&i>0)for(;r<i&&/\s/.test(e[r]);)r++;return e.substring(r,i)},e}();t.StringUtils=n}));t(u);var p=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.numberToStringHex=t.numberToStringBin=t.isOdd=t.isEven=t.isNonNullString=t.isString=t.isNumber=t.boolToString=t.boolToInt=t.isDefined=void 0,t.isDefined=function(e){return null!=e},t.boolToInt=function(e){return e?1:0},t.boolToString=function(e){return e?"1":"0"},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isNonNullString=function(e){return!!e},t.isEven=function(e){return e%2!=0},t.isOdd=function(e){return e%2==0},t.numberToStringBin=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(2),t,"0")},t.numberToStringHex=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(16),t,"0")}}));t(p);var m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)};var g=function(){return g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},g.apply(this,arguments)};function C(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}var f=Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function w(e){return this instanceof w?(this.v=e,this):new w(e)}var y=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};const B=Object.freeze({__proto__:null,__extends:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return g},__rest:function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n},__decorate:C,__param:function(e,t){return function(n,i){t(n,i,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},__generator:function(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},__createBinding:f,__exportStar:function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)},__values:v,__read:b,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i},__spreadArray:function(e,t,n){if(n||2===arguments.length)for(var i,s=0,r=t.length;s<r;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))},__await:w,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,s=n.apply(e,t||[]),r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){s[e]&&(i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof w?Promise.resolve(e.value.v).then(l,A):d(r[0][2],e)}(s[e](t))}catch(e){d(r[0][3],e)}}function l(e){a("next",e)}function A(e){a("throw",e)}function d(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}},__asyncDelegator:function(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,s){t[i]=e[i]?function(t){return(n=!n)?{value:w(e[i](t)),done:"return"===i}:s?s(t):t}:s}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=v(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,s){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,s,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return y(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},__classPrivateFieldSet:function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,n):s?s.value=n:t.set(e,n),n}}),E=n(B);var I=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedMinMax=t.ExtendedMax=t.ExtendedMin=t.MinMaxNumber=t.MinMax=void 0;var n=function(e,t){this.minElement=e,this.maxElement=t};t.MinMax=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E.__extends(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.maxElement-this.minElement},enumerable:!1,configurable:!0}),t}(n);t.MinMaxNumber=i,t.ExtendedMin=function(e,t){this.minElement=e,this.minValue=t},t.ExtendedMax=function(e,t){this.maxElement=e,this.maxValue=t};var s=function(e){function t(t,n,i,s){var r=e.call(this,t,i)||this;return r.minValue=n,r.maxValue=s,r}return E.__extends(t,e),t}(n);t.ExtendedMinMax=s}));t(I);var S=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=t.Comparers=void 0;var n=function(){function e(){}return e.number=function(e,t){return e-t},e.string=function(e,t){return e===t?0:e>t?1:-1},e.stringIgnoreCase=function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1},e}();t.Comparers=n;var i=function(){function e(){}return e.simpleType=function(e,t){return e===t},e.object=function(e,t){return e&&t&&(e===t||e.equals(t))},e}();t.Equals=i}));t(S);var x=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListUtils=void 0;var n=function(){function e(){}return e.remove=function(e,t){var n=e.indexOf(t,0);n>=0&&e.splice(n,1)},e.removeBy=function(e,t){for(var n=e.length,i=0;i<n;i++)if(t(e[i],i))return e.splice(i,1)[0];return null},e.shallowCopy=function(e){return e.slice()},e.deepCopy=function(t){return e.map(t,(function(e){return e.clone()}))},e.initByValue=function(e,t){for(var n=[];e>0;e--)n.push(t);return n},e.initByCallback=function(e,t){for(var n=[],i=0;i<e;i++)n.push(t(i));return n},e.forEachOnInterval=function(e,t){for(var n=e.end,i=e.start;i<n;i++)t(i)},e.reverseForEachOnInterval=function(e,t){for(var n=e.start,i=e.end-1;i>=n;i--)t(i)},e.reducedMap=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=[],r=n;r<i;r++){var o=t(e[r],r);null!==o&&s.push(o)}return s},e.filter=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=[],r=n;r<i;r++){var o=e[r];t(o,r)&&s.push(o)}return s},e.map=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=[],r=n;r<i;r++)s.push(t(e[r],r));return s},e.indexBy=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=n;s<i;s++)if(t(e[s],s))return s;return-1},e.reverseIndexBy=function(e,t,n,i){void 0===n&&(n=e.length-1),void 0===i&&(i=0);for(var s=n;s>=i;s--)if(t(e[s],s))return s;return-1},e.elementBy=function(t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=t.length);var r=e.indexBy(t,n,i,s);return r<0?null:t[r]},e.reverseElementBy=function(t,n,i,s){void 0===i&&(i=t.length-1),void 0===s&&(s=0);var r=e.reverseIndexBy(t,n,i,s);return r<0?null:t[r]},e.last=function(e){return e[e.length-1]},e.setLast=function(e,t){return e[e.length-1]=t},e.incLast=function(e){return++e[e.length-1]},e.decLast=function(e){return--e[e.length-1]},e.equals=function(t,n){return t.length===n.length&&e.allOf2(t,n,(function(e,t){return e.equals(t)}))},e.equalsByReference=function(e,t){var n=e.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0},e.unique=function(t,n,i,s){void 0===i&&(i=n),void 0===s&&(s=function(){});var r=t.length;if(0===r)return[];var o=(t=t.sort(n))[0],a=e.reducedMap(t,(function(e){return 0!==i(o,e)?(o=e,e):(s(e),null)}),1,r);return a.unshift(t[0]),a},e.uniqueNumber=function(e){e=e.sort(S.Comparers.number);for(var t=Number.NaN,n=e.length-1;n>=0;n--)t===e[n]?e.splice(n,1):t=e[n];return e},e.forEach=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=n;s<i;s++)t(e[s],s)},e.forEach2=function(e,t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length);for(var r=i;r<s;r++)n(e[r],t[r],r)},e.reverseForEach=function(e,t,n,i){void 0===n&&(n=e.length-1),void 0===i&&(i=0);for(var s=n;s>=i;s--)t(e[s],s)},e.reverseIndexOf=function(e,t,n,i){void 0===n&&(n=e.length-1),void 0===i&&(i=0);for(var s=n;s>=i;s--)if(e[s]===t)return s;return-1},e.accumulate=function(e,t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length);for(var r=t,o=i;o<s;o++)r=n(r,e[o],o);return r},e.accumulateNumber=function(e,t,n,i,s){void 0===n&&(n=0),void 0===i&&(i=0),void 0===s&&(s=e.length);for(var r=n,o=i;o<s;o++)r+=t(e[o],o,r);return r},e.anyOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=n;s<i;s++)if(t(e[s],s))return!0;return!1},e.unsafeAnyOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=n;s<i;s++){var r=t(e[s],s);if(r)return r}return null},e.reverseAnyOf=function(e,t,n,i){void 0===n&&(n=e.length-1),void 0===i&&(i=0);for(var s=n;s>=i;s--)if(t(e[s],s))return!0;return!1},e.unsafeReverseAnyOf=function(e,t,n,i){void 0===n&&(n=e.length-1),void 0===i&&(i=0);for(var s=n;s>=i;s--){var r=t(e[s],s);if(r)return r}return null},e.anyOf2=function(e,t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length);for(var r=i;r<s;r++)if(n(e[r],t[r],r))return!0;return!1},e.allOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=n;s<i;s++)if(!t(e[s],s))return!1;return!0},e.allOf2=function(e,t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=e.length);for(var r=i;r<s;r++)if(!n(e[r],t[r],r))return!1;return!0},e.allOfOnInterval=function(e,t){for(var n=e.end,i=e.start;i<n;i++)if(!t(i))return!1;return!0},e.addListOnTail=function(e,t){for(var n=0,i=void 0;i=t[n];n++)e.push(i);return e},e.joinLists=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.accumulate(n,[],(function(n,i){return e.addListOnTail(n,t(i)),n}))},e.push=function(e,t){return e.push(t),e},e.countIf=function(t,n){return e.accumulateNumber(t,(function(e,t){return n(e,t)?1:0}))},e.clear=function(e){e.splice(0)},e.merge=function(e,t,n,i,s,r){if(void 0===s&&(s=0),void 0===r&&(r=e.length),e=e.slice(s,r),r-s<2)return e;for(var o=(e=e.sort(t))[s],a=[o],l=s+1;l<r;l++){var A=e[l];n(o,A)?i(o,A):a.push(o=A)}return a},e.min=function(t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=t.length);var r=e.minExtended(t,n,i,s);return r?r.minElement:null},e.max=function(t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=t.length);var r=e.maxExtended(t,n,i,s);return r?r.maxElement:null},e.minMax=function(t,n,i,s){void 0===i&&(i=0),void 0===s&&(s=t.length);var r=e.minMaxExtended(t,n,i,s);return r?new I.MinMax(r.minElement,r.maxElement):null},e.minExtended=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=t(s),o=n+1;o<i;o++){var a=e[o],l=t(a);l<r&&(r=l,s=a)}return new I.ExtendedMin(s,r)},e.maxExtended=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=t(s),o=n+1;o<i;o++){var a=e[o],l=t(a);l>r&&(r=l,s=a)}return new I.ExtendedMax(s,r)},e.minMaxExtended=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=s,o=t(s),a=o,l=n+1;l<i;l++){var A=e[l],d=t(A);d<o?(o=d,s=A):d>a&&(a=d,r=A)}return new I.ExtendedMinMax(s,o,r,a)},e.minByCmp=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=n+1;r<i;r++){var o=e[r];t(o,s)<0&&(s=o)}return s},e.maxByCmp=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=n+1;r<i;r++){var o=e[r];t(o,s)>0&&(s=o)}return s},e.minMaxByCmp=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),0===e.length)return null;for(var s=e[n],r=s,o=n+1;o<i;o++){var a=e[o],l=t(a,s);l>0?r=a:l<0&&(s=a)}return new I.MinMax(s,r)},e}();t.ListUtils=n}));t(x);var D=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;var n=function(){function e(){}return e.round=function(t,n){void 0===n&&(n=0);var i=e.powFactor[n];return Math.round(t*i)/i},e.numberCloseTo=function(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n},e.restrictValue=function(e,t,n){return n<t&&(n=t),e>n?n:e<t?t:e},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.powFactor=x.ListUtils.initByCallback(20,(function(e){return Math.pow(10,e)})),e.somePrimes=[1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003],e}();t.MathUtils=n}));t(D);var F,T=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=void 0;var n=function(){function e(){}return e.clearInnerHtml=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},e.setStylePosition=function(e,t){e.left=D.MathUtils.round(t.x,3)+"px",e.top=D.MathUtils.round(t.y,3)+"px"},e.setStyleSize=function(e,t){e.width=D.MathUtils.round(t.width,3)+"px",e.height=D.MathUtils.round(t.height,3)+"px"},e.setStyleSizeAndPosition=function(t,n){e.setStylePosition(t,n),e.setStyleSize(t,n)},e.hideNode=function(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}},e.isHTMLElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},e.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isHTMLTableRowElement=function(e){return"TR"===e.tagName},e.isItParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},e.getParentByTagName=function(e,t){for(t=t.toUpperCase();e;){if("BODY"===e.tagName)return null;if(e.tagName===t)return e;e=e.parentNode}return null},e.getDocumentScrollTop=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollTop>0;return h.Browser.WebKitFamily||h.Browser.Edge||t?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop},e.getDocumentScrollLeft=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollLeft>0;return h.Browser.Edge||t?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},e.getCurrentStyle=function(e){if(e.currentStyle)return e.currentStyle;if(document.defaultView&&document.defaultView.getComputedStyle){var t=document.defaultView.getComputedStyle(e,null);if(!t&&h.Browser.Firefox&&window.frameElement){for(var n=[],i=window.frameElement;!(t=document.defaultView.getComputedStyle(e,null));)n.push([i,i.style.display]),i.style.setProperty("display","block","important"),i="BODY"===i.tagName?i.ownerDocument.defaultView.frameElement:i.parentNode;t=function(e){if("object"!=typeof e||!p.isDefined(e))return e;var t={};for(var n in e)t[n]=e[n];return t}(t);for(var s=void 0,r=0;s=n[r];r++)s[0].style.display=s[1]}return t}return window.getComputedStyle(e,null)},e.setFocus=function(e){function t(){try{e.focus(),h.Browser.IE&&document.activeElement!==e&&e.focus()}catch(e){}}h.Browser.MacOSMobilePlatform?t():setTimeout((function(){t()}),100)},e.hasClassName=function(e,t){try{var n=t.split(" "),i=e.classList;if(i){for(var s=n.length-1;s>=0;s--)if(!i.contains(n[s]))return!1}else{var r=e.getAttribute&&e.getAttribute("class");if(!r)return!1;var o=r.split(" ");for(s=n.length-1;s>=0;s--)if(o.indexOf(n[s])<0)return!1}return!0}catch(e){return!1}},e.addClassName=function(t,n){if(!e.hasClassName(t,n)){var i=t.getAttribute&&t.getAttribute("class");t.setAttribute("class",""===i?n:i+" "+n)}},e.removeClassName=function(e,t){var n=" "+(e.getAttribute&&e.getAttribute("class"))+" ",i=n.replace(" "+t+" "," ");n.length!==i.length&&e.setAttribute("class",u.StringUtils.trim(i))},e.toggleClassName=function(t,n,i){void 0===i?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):i?e.addClassName(t,n):e.removeClassName(t,n)},e.pxToInt=function(e){return i(e,parseInt)},e.pxToFloat=function(e){return i(e,parseFloat)},e.getAbsolutePositionY=function(t){function n(t){return Math.round(t.getBoundingClientRect().top+e.getDocumentScrollTop())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().top+e.getDocumentScrollTop()}(t):h.Browser.Firefox&&h.Browser.Version>=3?n(t):h.Browser.Opera?function(t){var n=!0;t&&e.isHTMLTableRowElement(t)&&t.cells.length>0&&(t=t.cells[0]);for(var i=s(t,!1);null!=t;)i+=t.offsetTop,n||(i-=t.scrollTop),t=t.offsetParent,n=!1;return i+=document.body.scrollTop}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var n=s(t,!1),i=!0;null!=t;){if(n+=t.offsetTop,i||null==t.offsetParent||(n-=t.scrollTop),!i&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(n+=e.pxToInt(r.borderTopWidth))}i=!1,t=t.offsetParent}return n}(t):h.Browser.WebKitFamily||h.Browser.Edge?n(t):function(e){for(var t=0,n=!0;null!=e;)t+=e.offsetTop,n||null==e.offsetParent||(t-=e.scrollTop),n=!1,e=e.offsetParent;return t}(t):0},e.getAbsolutePositionX=function(t){function n(t){return Math.round(t.getBoundingClientRect().left+e.getDocumentScrollLeft())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().left+e.getDocumentScrollLeft()}(t):h.Browser.Firefox&&h.Browser.Version>=3?n(t):h.Browser.Opera&&h.Browser.Version<=12?function(e){for(var t=!0,n=s(e,!0);null!=e;)n+=e.offsetLeft,t||(n-=e.scrollLeft),e=e.offsetParent,t=!1;return n+=document.body.scrollLeft}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var n=s(t,!0),i=!0;null!=t;){if(n+=t.offsetLeft,i||null==t.offsetParent||(n-=t.scrollLeft),!i&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(n+=e.pxToInt(r.borderLeftWidth))}i=!1,t=t.offsetParent}return n}(t):h.Browser.WebKitFamily||h.Browser.Edge?n(t):function(e){for(var t=0,n=!0;null!=e;)t+=e.offsetLeft,n||null==e.offsetParent||(t-=e.scrollLeft),n=!1,e=e.offsetParent;return t}(t):0},e.isInteractiveControl=function(e){return["A","INPUT","SELECT","OPTION","TEXTAREA","BUTTON","IFRAME"].indexOf(e.tagName)>-1},e.getClearClientHeight=function(t){return t.offsetHeight-(e.getTopBottomPaddings(t)+e.getVerticalBordersWidth(t))},e.getTopBottomPaddings=function(t,n){var i=n||e.getCurrentStyle(t);return e.pxToInt(i.paddingTop)+e.pxToInt(i.paddingBottom)},e.getVerticalBordersWidth=function(t,n){p.isDefined(n)||(n=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var i=0;return"none"!==n.borderTopStyle&&(i+=e.pxToFloat(n.borderTopWidth)),"none"!==n.borderBottomStyle&&(i+=e.pxToFloat(n.borderBottomWidth)),i},e.getNodes=function(e,t){for(var n=e.all||e.getElementsByTagName("*"),i=[],s=0;s<n.length;s++){var r=n[s];t(r)&&i.push(r)}return i},e.getChildNodes=function(e,t){for(var n=e.childNodes,i=[],s=0;s<n.length;s++){var r=n[s];t(r)&&i.push(r)}return i},e.getNodesByClassName=function(t,n){if(t.querySelectorAll){var i=t.querySelectorAll("."+n),s=[];return i.forEach((function(e){return s.push(e)})),s}return e.getNodes(t,(function(t){return e.hasClassName(t,n)}))},e.getChildNodesByClassName=function(t,n){return t.querySelectorAll?function(e,t){for(var n=[],i=0;i<e.length;i++){var s=e[i];t(s)&&n.push(s)}return n}(t.querySelectorAll("."+n),(function(e){return e.parentNode===t})):e.getChildNodes(t,(function(t){return!!e.isElementNode(t)&&(p.isNonNullString(t.className)&&e.hasClassName(t,t.className))}))},e.getVerticalScrollBarWidth=function(){if(void 0===e.verticalScrollBarWidth){var t=document.createElement("DIV");t.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(t);var n=document.createElement("P");t.appendChild(n),n.style.cssText="width: 100%; height: 200px;";var i=n.offsetWidth;t.style.overflow="scroll";var s=n.offsetWidth;i===s&&(s=t.clientWidth),e.verticalScrollBarWidth=i-s,document.body.removeChild(t)}return e.verticalScrollBarWidth},e.getHorizontalBordersWidth=function(t,n){p.isDefined(n)||(n=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var i=0;return"none"!==n.borderLeftStyle&&(i+=e.pxToFloat(n.borderLeftWidth)),"none"!==n.borderRightStyle&&(i+=e.pxToFloat(n.borderRightWidth)),i},e.getFontFamiliesFromCssString=function(e){return e.split(",").map((function(e){return u.StringUtils.trim(e.replace(/'|"/gi,""))}))},e.getInnerText=function(t){if(h.Browser.Safari&&h.Browser.MajorVersion<=5){null===e.html2PlainTextFilter&&((e.html2PlainTextFilter=document.createElement("DIV")).style.width="0",e.html2PlainTextFilter.style.height="0",e.html2PlainTextFilter.style.overflow="visible",e.html2PlainTextFilter.style.display="none",document.body.appendChild(e.html2PlainTextFilter));var n=e.html2PlainTextFilter;n.innerHTML=t.innerHTML,n.style.display="";var i=n.innerText;return n.style.display="none",i}return h.Browser.NetscapeFamily||h.Browser.WebKitFamily||h.Browser.IE&&h.Browser.Version>=9||h.Browser.Edge?t.textContent:t.innerText},e.html2PlainTextFilter=null,e.verticalScrollBarWidth=void 0,e}();function i(e,t){var n=0;if(p.isDefined(e)&&""!==e)try{var i=e.indexOf("px");i>-1&&(n=t(e.substr(0,i)))}catch(e){}return n}function s(e,t){for(var i=0,s=!0;null!=e&&"BODY"!==e.tagName;){var r=n.getCurrentStyle(e);if("absolute"===r.position)break;s||"DIV"!==e.tagName||""!==r.position&&"static"!==r.position||(i-=t?e.scrollLeft:e.scrollTop),e=e.parentNode,s=!1}return i}t.DomUtils=n}));t(T);class H{static markHandled(e,t=!0){e.cancelable&&e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}static stopPropagation(e){e.stopPropagation(),e.stopImmediatePropagation()}static getOriginalSource(e){return e.composedPath()[0]}static containsInComposedPath(e,t){const n=e.composedPath();for(const e in n)if(t(n[e]))return!0;return!1}static getEventSource(e){var t;return null!==(t=e.srcElement)&&void 0!==t?t:e.target}}class U{}U.visible="visible",U.hidden="hidden",U.collapse="collapse";class Q{}Q.block="block",Q.inline="inline",Q.inlineBlock="inline-block",Q.inlineTable="inline-table",Q.listItem="list-item",Q.none="none",Q.runIn="run-in",Q.table="table",Q.tableCaption="table-caption",Q.tableCell="table-cell",Q.tableColumnGroup="table-column-group",Q.tableColumn="table-column",Q.tableFooterGroup="table-footer-group",Q.tableHeaderGroup="table-header-group",Q.tableRow="table-row",Q.tableRowGroup="table-row-group",Q.flex="flex";class P{}P.input="INPUT",P.textarea="TEXTAREA",P.video="VIDEO",P.audio="AUDIO",P.details="DETAILS",P.textArea="TEXTAREA",P.table="table",P.tableCell="td",P.tableHeaderCell="th",P.mark="mark";class N{}F=N,N.aria="aria",N.ariaExpanded=`${F.aria}-expanded`,N.ariaLevel=`${F.aria}-level`,N.ariaChecked=`${F.aria}-checked`,N.ariaSelected=`${F.aria}-selected`,N.ariaLabel=`${F.aria}-label`,N.ariaValuenow=`${F.aria}-valuenow`,N.ariaValuetext=`${F.aria}-valuetext`;class R{}R.hidden="hidden";class L{}L.textTrimmed="text-trimmed",L.title="title";class M{}M.ellipsis="ellipsis";const k="a[href], input:not([disabled]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), area[href], iframe, object, embed, [tabindex]:not([tabindex='-1'])";class K{static containsInComposedPath(e,t){const n=e.composedPath();for(const e in n)if(n[e]===t)return!0;return!1}}const O=function(e,t,n=null){return!(!e||!e.matches(t))&&(getComputedStyle(e).textOverflow===M.ellipsis&&(!!_(e,n)&&!(!e.hasAttribute(L.textTrimmed)&&e.getAttribute(L.title))))},_=function(e,t=null){for(let n=0;n<e.children.length;n++)if(!(getComputedStyle(e.children[n]).display===Q.inline||t&&e.children[n].matches(t)))return!1;return!0};class V{static isHoverableDevice(){return window.matchMedia("(hover: hover) and (pointer: fine)").matches}}class z{constructor(e,t,n,i=!1){this.isMobileDevice=!1,this.hasAccurateInput=!1,this.isMac=!1,this.isTouchDevice=!1,this.clientMinutesOffset=-(new Date).getTimezoneOffset(),this.isMobileDevice=e,this.hasAccurateInput=t,this.isMac=n,this.isTouchDevice=i}}class W{constructor(e,t){this.useUAData=null,this.useNativeDetection=null,this.useUAData=e,this.useNativeDetection=t}getInfo(){return new z(this.isMobile(),window.matchMedia("(pointer:fine)").matches,/Mac/.test(navigator.userAgent),window.navigator.maxTouchPoints>0)}isMobile(){const e=window.navigator.userAgentData;if(this.useUAData&&e)return!!e.mobile;const t=this.isMobileByUserAgent(window.navigator.userAgent);if(this.useNativeDetection){const e=window.navigator.maxTouchPoints>0&&window.matchMedia("(pointer:coarse)").matches;return t||e}return t}isMobileByUserAgent(e){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}}function $(e=!0,t=!0){return new W(e,t).getInfo()}const G={DeviceInfo:z,DeviceInfoService:W,DeviceHelper:V,getDeviceInfo:$};class q{constructor(e){this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.boundOnPointerMoveHandler=this.onPointerMove.bind(this),this.boundOnPointerUpHandler=this.onPointerUp.bind(this),this.boundOnPointerCancelHandler=this.onPointerCancel.bind(this),this.boundOnDraggingKeyDownHandler=this.onDraggingKeyDown.bind(this),this.boundOnDraggingWindowBlurHandler=this.onDraggingWindowBlur.bind(this),this.boundOnDraggingContextMenuHandler=this.onDraggingContextMenu.bind(this),this.boundOnGotPointerCaptureHandler=this.onGotPointerCapture.bind(this),this.boundOnPointerClickHandler=this.onPointerClick.bind(this),this.boundOnPointerDblClickHandler=this.onPointerDblClick.bind(this),this.element=e,this.state=o.Stopped;const t=e.hoverTitleElementsSelector,n=e.bypassNonInlineHoverTitleElementChildSelector;t&&V.isHoverableDevice()&&(this.boundOnPointerOverHandler=e=>function(e,t,n=null){const i=e.target;O(i,t,n)&&(i.offsetWidth<i.scrollWidth?(i.setAttribute(L.title,i.innerText),i.setAttribute(L.textTrimmed,"")):(i.removeAttribute(L.title),i.removeAttribute(L.textTrimmed)))}(e,t,n))}initialize(){this.addPointerEventsSubscriptions()}dispose(){this.removePointerEventsSubscriptions()}reinitialize(e){this.removePointerEventsSubscriptions(),this.element=e,this.addPointerEventsSubscriptions()}static preventDefaultBrowserBehaviour(e){e.cancelable&&e.preventDefault()}onGotPointerCapture(e){if(!this.shouldProcessPointerEvent(e))return;if(!this.pointerDownContext||!this.pointerDownContext.isLongTap&&this.state!==o.WaitingForDragging)return;const t=e.target;t&&t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId)}get handlePointerEventsMode(){return this.element.handlePointerEventsMode}get handlePointerEventsTarget(){var e;return null===(e=this.element)||void 0===e?void 0:e.handlePointerEventsTarget}handlePointerEventsDelay(e){const t=this.element.handlePointerEventsDelay(e);return t!==s.Default?t:e===r.Dragging?s.Dragging:s.None}shouldProcessPointerEvent(e){return H.containsInComposedPath(e,(e=>e===this.handlePointerEventsTarget))&&this.element.shouldProcessPointerEvent(e)}addPointerEventsSubscriptions(){const e=this.handlePointerEventsTarget;if(e){if(this.element!==e&&this.element.contains(e))throw new Error("Specify the handlePointerEventsTarget property as web component or it parent.");e.addEventListener("click",this.boundOnPointerClickHandler),e.addEventListener("dblclick",this.boundOnPointerDblClickHandler),e.addEventListener("pointerdown",this.boundOnPointerDownHandler),e.addEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.addEventListener("pointerover",this.boundOnPointerOverHandler)}}removePointerEventsSubscriptions(){const e=this.handlePointerEventsTarget;e&&(e.removeEventListener("click",this.boundOnPointerClickHandler),e.removeEventListener("dblclick",this.boundOnPointerDblClickHandler),e.removeEventListener("pointerdown",this.boundOnPointerDownHandler),e.removeEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.removeEventListener("pointerover",this.boundOnPointerOverHandler))}onPointerDown(e){var t;if(q.preventClickEvent=!1,!this.shouldProcessPointerEvent(e))return;const n="touch"===e.pointerType;n&&this.state===o.Dragging||(this.pointerDownContext={source:e,isTouch:n,isLongTap:!1},0!=(this.handlePointerEventsMode&r.Dragging)?0===e.button&&(this.state=o.WaitingForDragging,n&&(this.touchDeviceInteractionTimer=setTimeout(this.onTouchDeviceInteractionTimerTimeout.bind(this),this.handlePointerEventsDelay(r.Dragging))),document.addEventListener("pointermove",this.boundOnPointerMoveHandler),document.addEventListener("pointerup",this.boundOnPointerUpHandler),document.addEventListener("pointercancel",this.boundOnPointerCancelHandler),document.addEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.addEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.addEventListener("blur",this.boundOnDraggingWindowBlurHandler),T.DomUtils.addClassName(document.body,"dx-prevent-selection")):e.shiftKey&&(null===(t=null===document||void 0===document?void 0:document.getSelection())||void 0===t||t.removeAllRanges()))}onPointerMove(e){var t;if(this.state===o.Stopped)return;if(0===e.buttons)return this.state===o.Dragging&&this.stopPointerDrag(e,!1),this.stopPointerInteraction(),void this.element.releasePointerCapture(e.pointerId);this.state===o.WaitingForDragging&&this.isDistanceExceedLimit(e)&&((null===(t=this.pointerDownContext)||void 0===t?void 0:t.isTouch)?this.handlePointerEventsDelay(r.Dragging)>0&&this.stopPointerInteraction():this.tryStartPointerInteraction())}stopPointerDrag(e,t){if(this.pointerDownContext){const t=new l({source:e,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(t),this.pointerDownContext.isTouch||(q.preventClickEvent=!0)}}onPointerCancel(e){if(this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingKeyDown(e){if(this.state!==o.Stopped&&"Escape"===e.key){this.stopPointerInteraction();const e=new A;this.element.dispatchEvent(e)}}onDraggingWindowBlur(e){if(this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingContextMenu(e){this.state!==o.Stopped&&(e.preventDefault(),e.stopPropagation())}onPointerUp(e){this.state===o.Dragging&&this.stopPointerDrag(e,!0),this.stopPointerInteraction(),this.element.releasePointerCapture(e.pointerId)}onPointerClick(e){0!=(this.handlePointerEventsMode&r.Click)&&this.shouldProcessPointerEvent(e)&&(q.preventClickEvent||0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():(this.raiseDxPointerEvent(e,new d({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),d.eventName),delete this.pointerDownContext))}onPointerDblClick(e){0!=(this.handlePointerEventsMode&r.DblClick)&&this.shouldProcessPointerEvent(e)&&(0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():this.raiseDxPointerEvent(e,new c({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),c.eventName))}raiseDxPointerEvent(e,t,n){e[n]||(this.element.dispatchEvent(t),e[n]=!0)}tryStartPointerInteraction(){q.pointerInteractionElement?this.state=o.Stopped:this.startPointerInteraction()}startPointerInteraction(){this.state=o.Dragging,q.pointerInteractionElement=this.element,document.addEventListener("touchmove",q.preventDefaultBrowserBehaviour,{passive:!1}),this.raisePointerDragStartEvent()}stopPointerInteraction(){this.clearTouchDeviceInteractionTimer(),this.state===o.Dragging&&(delete q.pointerInteractionElement,this.state=o.Stopped),document.removeEventListener("touchmove",q.preventDefaultBrowserBehaviour),document.removeEventListener("pointermove",this.boundOnPointerMoveHandler),document.removeEventListener("pointerup",this.boundOnPointerUpHandler),document.removeEventListener("pointercancel",this.boundOnPointerCancelHandler),document.removeEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.removeEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.removeEventListener("blur",this.boundOnDraggingWindowBlurHandler),T.DomUtils.removeClassName(document.body,"dx-prevent-selection"),delete this.pointerDownContext}clearTouchDeviceInteractionTimer(){this.touchDeviceInteractionTimer&&(clearTimeout(this.touchDeviceInteractionTimer),delete this.touchDeviceInteractionTimer)}onTouchDeviceInteractionTimerTimeout(){this.state===o.WaitingForDragging&&this.pointerDownContext&&this.pointerDownContext.isTouch&&(this.pointerDownContext.isLongTap=!0,this.tryStartPointerInteraction(),this.clearTouchDeviceInteractionTimer())}isDistanceExceedLimit(e){return!!this.pointerDownContext&&(Math.abs(this.pointerDownContext.source.clientX-e.clientX)>4||Math.abs(this.pointerDownContext.source.clientY-e.clientY)>4)}raisePointerDragStartEvent(){if(!this.pointerDownContext)return;const e=new a({source:this.pointerDownContext.source,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(e)}}q.preventClickEvent=!1;const Y="undefined"!=typeof HTMLElement&&"undefined"!=typeof customElements?HTMLElement:class{},X="dx-license-trigger",J=X,j="dx-license",Z="buy-now",ee="licensing-doc",te="version",ne={opacity:"1",visibility:"visible","clip-path":"none",filter:"none"},ie={...ne,width:"100%",height:"auto","line-height":"normal",display:"block","z-index":"1500",position:"static",transform:"translate(0px, 0px)","background-color":"#FF7200",border:"none",margin:"auto","box-sizing":"border-box","text-align":"center"},se={...ie,display:"flex","align-items":"center","flex-direction":"row",position:"relative",top:"0px",left:"0px",padding:"0.5rem"},re={width:"1rem",cursor:"pointer",height:"1rem"},oe={...ne,display:"inline",position:"static",padding:"0px",margin:"0px",color:"white","font-family":'"Segoe UI","Open Sans Condensed",-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,Cantarell,Ubuntu,roboto,noto,arial,sans-serif',"font-size":"0.875rem","font-wight":"600"};function ae(e,t){const n=t?{...e,...t}:e;return Object.keys(n).reduce(((e,t)=>`${e}${[t,`${n[t]} !important;`].join(": ")}`),"")}class le extends Y{constructor(){var e,t,n,i,s;super(),this._observer=null,this._inReassign=!1,this._spanStyles=ae(oe,null===(e=le.customStyles)||void 0===e?void 0:e.textStyles),this._linkStyles=ae(oe,null===(t=le.customStyles)||void 0===t?void 0:t.linkStyles),this._containerStyles=ae(se,null===(n=le.customStyles)||void 0===n?void 0:n.containerStyles),this._contentStyles=ae(ie,null===(i=le.customStyles)||void 0===i?void 0:i.contentStyles),this._buttonStyles=ae(re,null===(s=le.customStyles)||void 0===s?void 0:s.contentStyles)}_createSpan(e){const t=document.createElement("span");return t.innerText=e,t.style.cssText=this._spanStyles,t}_createLink(e,t){const n=document.createElement("a");return n.innerText=e,n.style.cssText=this._linkStyles,n.href=t,n.target="_blank",n}_createButton(){const e=document.createElement("div");e.style.cssText=this._buttonStyles;const t=document.createElementNS("http://www.w3.org/2000/svg","polygon"),n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("points","13.4 12.7 8.7 8 13.4 3.4 12.6 2.6 8 7.3 3.4 2.6 2.6 3.4 7.3 8 2.6 12.6 3.4 13.4 8 8.7 12.7 13.4 13.4 12.7"),t.style.cssText=ae({fill:"#fff",opacity:".5","stroke-width":"0px"}),n.setAttribute("id","Layer_1"),n.setAttribute("data-name","Layer 1"),n.setAttribute("version","1.1"),n.setAttribute("viewBox","0 0 16 16"),n.style.cssText=ae({"vertical-align":"baseline"}),n.appendChild(t),e.appendChild(n),e.onclick=()=>{le.closed=!0,this.style.cssText=ae({display:"none"})},e}_createContentContainer(){const e=document.createElement("div");return e.style.cssText=this._contentStyles,e.append(this._createSpan("For evaluation purposes only. Redistribution prohibited. Please "),this._createLink("register",this.getAttribute(ee)),this._createSpan(" an existing license or "),this._createLink("purchase a new license",this.getAttribute(Z)),this._createSpan(` to continue use of DevExpress product libraries (v${this.getAttribute(te)}).`)),e}_reassignComponent(){this.innerHTML="",this.style.cssText=this._containerStyles,this.append(this._createContentContainer(),this._createButton())}connectedCallback(){this._reassignComponent(),this._observer||(this._observer=new MutationObserver((()=>{var e;le.closed?null===(e=this._observer)||void 0===e||e.disconnect():this._inReassign?this._inReassign=!1:(this._inReassign=!0,this._reassignComponent())})),this._observer.observe(this,{childList:!0,attributes:!0,subtree:!0}))}disconnectedCallback(){le.closed||Promise.resolve().then((()=>{if(void 0===document)return;document.getElementsByTagName(j).length||document.body.prepend(this)}))}}le.customStyles=void 0,le.closed=!1;class Ae extends Y{connectedCallback(){this.style.cssText=ae({display:"none"});if(!document.getElementsByTagName(j).length&&!le.closed){const e=document.createElement(j);e.setAttribute(te,this.getAttribute(te)),e.setAttribute(Z,this.getAttribute(Z)),e.setAttribute(ee,this.getAttribute(ee)),e.setAttribute("data-permanent",""),document.body.prepend(e)}}}function de(e){customElements.get(J)||(le.customStyles=e,customElements.define(J,Ae),customElements.define(j,le))}window.DevExpress=window.DevExpress||{},window.DevExpress.config?window.DevExpress.config(JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaVZqSlJjRkZ0U2xaWVYzazJUbVY0YTNFNVdHczVieUlLZlE9PS5EMTNKeDFkWmJlWFE0bGVWQ05XZnk5U2FLeWFHbmxMOE1xYkF2YzloQ3FVZTlBajJWYzJUS2RaU01RR05xVkVkSjMrTWZQKzQrQTBqMFhCSGxEczdEV2xpWFlNK01EMEVCaEJVQ0JTVzVmeWRGSzhyOGpEMDRzV2ZKYS9CTDRFTGdLOWZpZz09In0="))):window.DevExpress.config=JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaVZqSlJjRkZ0U2xaWVYzazJUbVY0YTNFNVdHczVieUlLZlE9PS5EMTNKeDFkWmJlWFE0bGVWQ05XZnk5U2FLeWFHbmxMOE1xYkF2YzloQ3FVZTlBajJWYzJUS2RaU01RR05xVkVkSjMrTWZQKzQrQTBqMFhCSGxEczdEV2xpWFlNK01EMEVCaEJVQ0JTVzVmeWRGSzhyOGpEMDRzV2ZKYS9CTDRFTGdLOWZpZz09In0=")),de();const ce=document.createElement("template");ce.innerHTML="<slot />";class he extends HTMLElement{constructor(){super(),this._handlePointerEventsMode=r.None,this._isInitialized=!1,this._isDisconnected=!1,this.pointerEventsHelper=new q(this),this.contentChangedObserver=null,this.prepareComponent()}get isInitialized(){return this._isInitialized}get useShadowDom(){return!0}connectedCallback(){!this.useShadowDom&&this.childElementCount>0&&this.componentContentChanged(),this.useShadowDom&&this._isDisconnected&&this.componentContentChanged(),this.pointerEventsHelper.initialize(),i.setLoaded(this),this._isDisconnected=!1}disconnectedCallback(){i.removeLoaded(this),this.pointerEventsHelper.dispose(),this.disposeComponent(),this._isDisconnected=!0}initializeComponent(){}afterInitialize(){}disposeComponent(){var e;null===(e=this.contentChangedObserver)||void 0===e||e.disconnect()}getContentTemplate(){return ce}componentContentChanged(){this.initializeComponent(),this._isInitialized=!0,this.afterInitialize()}prepareComponent(){this.useShadowDom?this.prepareShadowDom():(this.contentChangedObserver=new MutationObserver(this.componentContentChanged.bind(this)),this.contentChangedObserver.observe(this,{childList:!0}))}prepareShadowDom(){const e=this.attachShadow({mode:"open"});e.appendChild(this.getContentTemplate().content.cloneNode(!0));e.querySelector("slot").addEventListener("slotchange",this.componentContentChanged.bind(this))}get handlePointerEventsMode(){return this._handlePointerEventsMode}set handlePointerEventsMode(e){this._handlePointerEventsMode=e}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}var ue;class pe{}ue=pe,pe.Prefix="dxbl",pe.Focused=pe.Prefix+"-focused",pe.Disabled=pe.Prefix+"-disabled",pe.ReadOnly=pe.Prefix+"-readonly",pe.Active=pe.Prefix+"-active",pe.Touch=pe.Prefix+"-touch",pe.GrabbingCursor=pe.Prefix+"-grabbing-cursor",pe.ResizeCursor=pe.Prefix+"-resize-cursor",pe.Image=pe.Prefix+"-image",pe.Text=pe.Prefix+"-text",pe.Button=pe.Prefix+"-btn",pe.DisplayNone=pe.Prefix+"-display-none",pe.Invisible=pe.Prefix+"-invisible",pe.InvisibleOffScreen=pe.Invisible+"-off-screen",pe.Visible=pe.Prefix+"-visible",pe.Loaded=pe.Prefix+"-loaded",pe.SkeletonBaseClassName=pe.Prefix+"-skeleton",pe.SkeletonAnimateClassName=ue.SkeletonBaseClassName+"-animate",pe.VirtualSpacerPatternClassName=pe.Prefix+"-virtual-items-container-pattern",pe.Dragging=pe.Prefix+"-dragging",pe.DropTargetIndicator=pe.Prefix+"-drop-target-indicator";class me{}me.ClassName=pe.Prefix+"-grid",me.DataTableClassName=me.ClassName+"-table",me.DataTableNoScrollClassName=me.DataTableClassName+"-no-scroll",me.TopPanelClassName=me.ClassName+"-top-panel",me.BottomPanelClassName=me.ClassName+"-bottom-panel",me.ToolbarContainerClassName=me.ClassName+"-toolbar-container",me.PagerPanelClassName="dxbl-pager-container",me.GroupPanelContentContainerClassName=me.ClassName+"-group-panel-container",me.SearchBoxContainerClassName=me.ClassName+"-search-box-container",me.SearchBoxClassName=me.ClassName+"-search-box",me.EmptyHeaderCellContentContainerClassName=me.ClassName+"-empty-header",me.GroupContentFreeSpaceClassName=me.ClassName+"-group-panel-free-space",me.HeaderRowClassName=me.ClassName+"-header-row",me.EditRowClassName=me.ClassName+"-edit-row",me.FilterRowClassName=me.ClassName+"-filter-row",me.GroupRowClassName=me.ClassName+"-group-row",me.FooterRowClassName=me.ClassName+"-footer-row",me.GroupFooterRowClassName=me.ClassName+"-group-footer-row",me.PagerRowClassName=me.ClassName+"-pager-row",me.EmptyRowClassName=me.ClassName+"-empty-row",me.ArmRowClassName=me.ClassName+"-arm-row",me.HeaderElementClassName=me.ClassName+"-header",me.HeaderContentClassName=me.ClassName+"-header-content",me.AllowDragClassName=me.ClassName+"-action",me.DraggableHeaderClassName=me.ClassName+"-draggable-header",me.SelectionCellClassName=me.ClassName+"-selection-cell",me.CommandCellClassName=me.ClassName+"-command-cell",me.FixedCellClassName=me.ClassName+"-fixed-cell",me.LastLeftFixedCellClassName=me.ClassName+"-last-fixed-left-cell",me.IndentCellClassName=me.ClassName+"-indent-cell",me.HeaderIndentCellClassName=me.ClassName+"-header-indent-cell",me.GroupFooterIndentCellClassName=me.ClassName+"-group-footer-indent-cell",me.ExpandButtonCellClassName=me.ClassName+"-expand-button-cell",me.DetailCellClassName=me.ClassName+"-detail-cell",me.EmptyDataRowCellClassName=me.ClassName+"-empty-data-area",me.EmptyCellClassName=me.ClassName+"-empty-cell",me.EditFormClassName=me.ClassName+"-edit-form",me.EditNewItemRowClassName=me.ClassName+"-edit-new-item-row",me.EditNewItemRowInplaceClassName=me.ClassName+"-edit-new-item-row-inplace",me.TopFixedBodyClassName=me.ClassName+"-top-fixed-body",me.SelectedRowClassName=me.ClassName+"-selected-row",me.TouchSelectionClassName=me.ClassName+"-touch-selection",me.TouchSelectionEdgeClassName=me.ClassName+"-touch-selection-edge",me.MoveCursorCssClassName=me.ClassName+"-move-cursor",me.DraggingDownTargetClassName=me.ClassName+"-dragging-down-target",me.DraggingUpTargetClassName=me.ClassName+"-dragging-up-target",me.ColumnsResizeAnchorClassName=me.ClassName+"-column-resize-anchor",me.ColumnsSeparatorClassName=me.ClassName+"-columns-separator",me.HiddenEmptyCellClassName=me.ClassName+"-hidden-empty-cell",me.RowDragHintClassName=me.ClassName+"-row-drag-hint",me.RowDragHintPortalClassName=me.ClassName+"-row-drag-hint-portal",me.RowDragAnchorClassName=me.ClassName+"-row-drag-anchor-cell",me.DropTargetIndicatorClassName=me.ClassName+"-drop-target-indicator",me.ColumnChooserItemClassName=me.ClassName+"-column-chooser-item",me.ColumnChooserDraggingItemClassName=me.ClassName+"-column-chooser-dragging-item",me.ColumnChooserDraggingItemNextSiblingClassName=me.ClassName+"-column-chooser-dragging-item-next-sibling",me.ColumnChooserItemDragAnchorClassName=me.ClassName+"-column-chooser-item-drag-anchor",me.ColumnChooserItemDragLockClassName=me.ClassName+"-column-chooser-item-drag-lock",me.HighlightedTextClassName=me.ClassName+"-highlighted-text",me.CalculateContentWidthsClassName=me.DataTableClassName+"-content-fit-calc";const ge="dxbl-grid-header-content";const Ce="dxbl-ui-handlers-bridge";class fe{constructor(e,t){this.id=e,this.result=t}processedBy(e){return this.id===e}}class ve extends HTMLElement{constructor(){super(),this.pendingCommands=new Map,this._value=null}disposeComponent(){this.pendingCommands.clear()}get value(){return this._value}send(e,t,n=null){try{const i=this.nextCommandId();return this.pendingCommands.set(i,n),this._value=JSON.stringify([i.toString(),e,t]),this.dispatchEvent(new Event("change",{bubbles:!0})),i}finally{this._value=null}}static get observedAttributes(){return["command-results"]}attributeChangedCallback(e,t,n){if("command-results"===e)setTimeout((()=>this.processCommandResults(n)),0)}processCommandResults(e){const t=this.parseCommandResults(e);for(const e of t){const t=this.pendingCommands.get(e.id);this.pendingCommands.delete(e.id),t&&t(e)}}parseCommandResults(e){const t=new Array,n=JSON.parse(e);for(const e of n.CommandResults)t.push(new fe(parseInt(e.Id),e.Result));return t.sort(((e,t)=>e.id===t.id?0:e.id>t.id?1:-1))}nextCommandId(){if(0===this.pendingCommands.size)return 0;let e=0;for(const t of this.pendingCommands.keys())t>e&&(e=t);return e+1}}customElements.define(Ce,ve);class be{get previousColumnUid(){return this._previousColumnUid}get nextColumnUid(){return this._nextColumnUid}get nextVisibleColumnUid(){return this._nextVisibleColumnUid}constructor(e,t,n){this._previousColumnUid=e,this._nextColumnUid=t,this._nextVisibleColumnUid=n}}class we{get uID(){return this._uID}get parentUID(){return this._parentUID}get allowGroup(){return this._allowGroup}get allowReorder(){return this._allowReorder}get dragRestrictions(){return this._dragRestrictions}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isFreeWidth(){return!this.width&&!this.isIndent&&!this.isEmpty}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth||this.isIndent}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get isIndent(){return this._isIndent}get isEmpty(){return this._isEmpty}get isDetail(){return this._isDetail}get isEditable(){return this._isEditable}get fixedPosition(){return this._fixedPosition}get headerRowIndex(){return this._headerRowIndex}get headerCellIndex(){return this._headerCellIndex}get leafIndex(){return this._leafIndex}get parent(){return this._parent}get parentPath(){return this._parentPath}get isRoot(){return this.parentUID<0}get hasLeafs(){return this._leafs.length>0}constructor(e,t,n,i,s,r,o=!1,a=!1,l=!1,A=!1,d=!0,c=null){this._parent=null,this._parentPath=[],this._leafs=[],this._leafIndex=-1,this._headerRowIndex=-1,this._headerCellIndex=-1,this._uID=e,this._parentUID=t,this._allowGroup=n,this._allowReorder=d,this._dragRestrictions=c,this._width=i,this._colElementWidth=i,this._minWidth=s,this._isIndent=o,this._isEmpty=a,this._isDetail=l,this._isEditable=A,this._fixedPosition=r}getPercents(){return this.isPercentWidth?parseFloat(this.width.replace("%","")):0}updateWidth(e){this._width=e,this._colElementWidth=e}updateHeaderLayoutInfo(e,t){this._headerRowIndex=e,this._headerCellIndex=t}attachParent(e){var t,n;this._parent=e,this._parentPath=[...null!==(n=null===(t=this.parent)||void 0===t?void 0:t.parentPath)&&void 0!==n?n:[],e]}attachLeaf(e){this._leafs.push(e)}updateLeafIndex(e){this._leafIndex=e}containsLeaf(e){return this.hasLeafs?this._leafs.findIndex((t=>t.uID===e))>=0:this.uID===e}getLeftLeaf(){return this.hasLeafs?this._leafs[0]:null}getRightLeaf(){return this.hasLeafs?this._leafs[this._leafs.length-1]:null}}const ye="dxbl-drop-restrictions-info",Be="data";customElements.define(ye,class extends he{constructor(){super(...arguments),this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}get allowedComponents(){var e;return this._allowedComponentsCache||(this._allowedComponentsCache=null!==(e=this.data["allowed-components"])&&void 0!==e?e:[]),this._allowedComponentsCache}get reorderDeniedRanges(){var e;return this._reorderDeniedRangesCache||(this._reorderDeniedRangesCache=null!==(e=this.data["reorder-denied-ranges"])&&void 0!==e?e:[]),this._reorderDeniedRangesCache}get data(){if(!this._dataCache){const e=this.getAttribute(Be);this._dataCache=e?JSON.parse(e):{}}return this._dataCache}invalidateCaches(){this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}static get observedAttributes(){return[Be]}attributeChangedCallback(e,t,n){this.invalidateCaches()}});var Ee=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EncodeUtils=void 0;var n=function(){function e(){}return e.encodeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.decodeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},e.prepareTextForRequest=function(e){return e.replace(/%/g,"%25").replace(/&/g,"%26amp;").replace(/\+/g,"%2B").replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/"/g,"%26quot;")},e.prepareTextForCallBackRequest=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.decodeViaTextArea=function(e){var t=document.createElement("TEXTAREA");return t.innerHTML=e,t.value},e}();t.EncodeUtils=n}));t(Ee);var Ie=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=t.ModifierKey=t.KeyUtils=void 0;var n,i,s=function(){function e(){}return e.getKeyModifiers=function(e){var t=0;return e.altKey&&(t|=n.Alt),e.ctrlKey&&(t|=n.Ctrl),e.shiftKey&&(t|=n.Shift),e.metaKey&&(t|=n.Meta),t},e.getShortcutCode=function(e,t,i,s,r){var o=e;return o|=t?n.Ctrl:0,o|=i?n.Shift:0,o|=s?n.Alt:0,o|=r?n.Meta:0},e.getShortcutCodeByEvent=function(t){return e.getShortcutCode(e.getEventKeyCode(t),t.ctrlKey,t.shiftKey,t.altKey,!!h.Browser.MacOSPlatform&&t.metaKey)},e.getEventKeyCode=function(e){return h.Browser.NetscapeFamily||h.Browser.Opera?e.which:e.keyCode},e.parseShortcutString=function(t){if(!t)return 0;var n=!1,s=!1,r=!1,o=!1,a=null,l=t.toString().split("+");if(l.length>0)for(var A=0;A<l.length;A++){var d=u.StringUtils.trim(l[A].toUpperCase());switch(d){case"CONTROL":case"CONTROLKEY":case"CTRL":n=!0;break;case"SHIFT":case"SHIFTKEY":s=!0;break;case"ALT":r=!0;break;case"CMD":o=!0;break;case"F1":a=i.F1;break;case"F2":a=i.F2;break;case"F3":a=i.F3;break;case"F4":a=i.F4;break;case"F5":a=i.F5;break;case"F6":a=i.F6;break;case"F7":a=i.F7;break;case"F8":a=i.F8;break;case"F9":a=i.F9;break;case"F10":a=i.F10;break;case"F11":a=i.F11;break;case"F12":a=i.F12;break;case"RETURN":case"ENTER":a=i.Enter;break;case"HOME":a=i.Home;break;case"END":a=i.End;break;case"LEFT":a=i.Left;break;case"RIGHT":a=i.Right;break;case"UP":a=i.Up;break;case"DOWN":a=i.Down;break;case"PAGEUP":a=i.PageUp;break;case"PAGEDOWN":a=i.PageDown;break;case"SPACE":a=i.Space;break;case"TAB":a=i.Tab;break;case"BACKSPACE":case"BACK":a=i.Backspace;break;case"CONTEXT":a=i.ContextMenu;break;case"ESCAPE":case"ESC":a=i.Esc;break;case"DELETE":case"DEL":a=i.Delete;break;case"INSERT":case"INS":a=i.Insert;break;case"PLUS":a="+".charCodeAt(0);break;default:a=d.charCodeAt(0)}}else alert(Ee.EncodeUtils.decodeViaTextArea("Invalid shortcut"));return e.getShortcutCode(a,n,s,r,o)},e}();t.KeyUtils=s,function(e){e[e.None=0]="None",e[e.Ctrl=65536]="Ctrl",e[e.Shift=262144]="Shift",e[e.Alt=1048576]="Alt",e[e.Meta=16777216]="Meta"}(n=t.ModifierKey||(t.ModifierKey={})),function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key_0=48]="Key_0",e[e.Key_1=49]="Key_1",e[e.Key_2=50]="Key_2",e[e.Key_3=51]="Key_3",e[e.Key_4=52]="Key_4",e[e.Key_5=53]="Key_5",e[e.Key_6=54]="Key_6",e[e.Key_7=55]="Key_7",e[e.Key_8=56]="Key_8",e[e.Key_9=57]="Key_9",e[e.Key_a=65]="Key_a",e[e.Key_b=66]="Key_b",e[e.Key_c=67]="Key_c",e[e.Key_d=68]="Key_d",e[e.Key_e=69]="Key_e",e[e.Key_f=70]="Key_f",e[e.Key_g=71]="Key_g",e[e.Key_h=72]="Key_h",e[e.Key_i=73]="Key_i",e[e.Key_j=74]="Key_j",e[e.Key_k=75]="Key_k",e[e.Key_l=76]="Key_l",e[e.Key_m=77]="Key_m",e[e.Key_n=78]="Key_n",e[e.Key_o=79]="Key_o",e[e.Key_p=80]="Key_p",e[e.Key_q=81]="Key_q",e[e.Key_r=82]="Key_r",e[e.Key_s=83]="Key_s",e[e.Key_t=84]="Key_t",e[e.Key_u=85]="Key_u",e[e.Key_v=86]="Key_v",e[e.Key_w=87]="Key_w",e[e.Key_x=88]="Key_x",e[e.Key_y=89]="Key_y",e[e.Key_z=90]="Key_z",e[e.Windows=91]="Windows",e[e.ContextMenu=93]="ContextMenu",e[e.Numpad_0=96]="Numpad_0",e[e.Numpad_1=97]="Numpad_1",e[e.Numpad_2=98]="Numpad_2",e[e.Numpad_3=99]="Numpad_3",e[e.Numpad_4=100]="Numpad_4",e[e.Numpad_5=101]="Numpad_5",e[e.Numpad_6=102]="Numpad_6",e[e.Numpad_7=103]="Numpad_7",e[e.Numpad_8=104]="Numpad_8",e[e.Numpad_9=105]="Numpad_9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(i=t.KeyCode||(t.KeyCode={}))}));t(Ie);class Se{constructor(){this._visible=!1,this._contentElementInfo={scrollStart:0,clientSize:0,scrollSize:0},this._scrollBarStart=0,this._scrollBarEnd=0,this._scrollBarOffset=0,this._scrollBarThickness=0,this._thumbStart=0,this._thumbEnd=0}get visible(){return this._visible}set visible(e){this._visible=e}get contentElementInfo(){return this._contentElementInfo}set contentElementInfo(e){this._contentElementInfo=e}get scrollBarStart(){return this._scrollBarStart}set scrollBarStart(e){this._scrollBarStart=e}get scrollBarEnd(){return this._scrollBarEnd}set scrollBarEnd(e){this._scrollBarEnd=e}get scrollBarOffset(){return this._scrollBarOffset}set scrollBarOffset(e){this._scrollBarOffset=e}get scrollBarThickness(){return this._scrollBarThickness}set scrollBarThickness(e){this._scrollBarThickness=e}get thumbStart(){return this._thumbStart}set thumbStart(e){this._thumbStart=e}get thumbEnd(){return this._thumbEnd}set thumbEnd(e){this._thumbEnd=e}}class xe{get scrollBarInfo(){return this._scrollBarInfo}get contentElementInfo(){return this.scrollBarInfo.contentElementInfo}constructor(e){this._scrollBarInfo=e,this.thumbSize=20,this._scrollBarInfo.scrollBarEnd=this._scrollBarInfo.contentElementInfo.clientSize,this.recalculate()}scrollByPointerClick(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize;this.contentElementInfo.scrollStart=t*e/this.getScrollBarSize(),this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}scrollByPointerMove(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize,n=t/(this.getScrollBarSize()-this.thumbSize);this.contentElementInfo.scrollStart=this.contentElementInfo.scrollStart+e*n,this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}recalculate(){this.recalculateThumb()}recalculateThumb(){this.thumbSize=this.calculateThumbSize(),this._scrollBarInfo.visible=this.scrollBarInfo.contentElementInfo.scrollSize>this.scrollBarInfo.contentElementInfo.clientSize,this._scrollBarInfo.thumbStart=this.calculateThumbStart(),this._scrollBarInfo.thumbEnd=this._scrollBarInfo.thumbStart+this.thumbSize}calculateThumbSize(){const e=this.getScrollBarSize(),t=e*this.scrollBarInfo.contentElementInfo.clientSize/this.scrollBarInfo.contentElementInfo.scrollSize;return e>20?Math.max(t,20):t}calculateThumbStart(){const e=(this.getScrollBarSize()-this.thumbSize)/(this.scrollBarInfo.contentElementInfo.scrollSize-this.scrollBarInfo.contentElementInfo.clientSize);return this.scrollBarInfo.contentElementInfo.scrollStart*e}getScrollBarSize(){return this._scrollBarInfo.scrollBarEnd-this._scrollBarInfo.scrollBarStart}}class De{constructor(e){this._offsets={left:0,right:0,top:0,bottom:0},this._verticalScrollBarInfo=new Se,this._horizontalScrollBarInfo=new Se,this._verticalThumbCalculator=new xe(this._verticalScrollBarInfo),this._horizontalThumbCalculator=new xe(this._horizontalScrollBarInfo),this.updateScrollableElementInfo(e)}get verticalScrollBarInfo(){return this._verticalScrollBarInfo}get horizontalScrollBarInfo(){return this._horizontalScrollBarInfo}updateScrollableElementInfo(e){this._verticalScrollBarInfo.contentElementInfo.scrollStart=e.scrollTop||0,this._verticalScrollBarInfo.contentElementInfo.scrollSize=e.scrollHeight||0;const t=e.getBoundingClientRect();this._verticalScrollBarInfo.contentElementInfo.clientSize=Math.ceil(t.height),this._horizontalScrollBarInfo.contentElementInfo.scrollStart=e.scrollLeft||0,this._horizontalScrollBarInfo.contentElementInfo.scrollSize=e.scrollWidth||0,this._horizontalScrollBarInfo.contentElementInfo.clientSize=e.clientWidth||0,this.recalculate()}initScrollBarsThickness(e,t){this._verticalScrollBarInfo.scrollBarThickness=e,this._horizontalScrollBarInfo.scrollBarThickness=t}updateTopPanelHeight(e){this._offsets.top=e,this.recalculate()}updateBottomPanelHeight(e){this._offsets.bottom=e,this.recalculate()}updateLeftPanelWidth(e){this._offsets.left=e,this.recalculate()}updateRightPanelWidth(e){this._offsets.right=e,this.recalculate()}vertScrollByPointerMove(e){this._verticalThumbCalculator.scrollByPointerMove(e),this.recalculate()}vertScrollByPointerClick(e){this._verticalThumbCalculator.scrollByPointerClick(e),this.recalculate()}horScrollByPointerMove(e){this._horizontalThumbCalculator.scrollByPointerMove(e),this.recalculate()}horScrollByPointerClick(e){this._horizontalThumbCalculator.scrollByPointerClick(e),this.recalculate()}recalculate(){this._verticalScrollBarInfo.scrollBarStart=this._offsets.top,this._verticalScrollBarInfo.scrollBarEnd=this._verticalScrollBarInfo.contentElementInfo.clientSize-this._offsets.bottom,this._horizontalScrollBarInfo.scrollBarStart=this._offsets.left,this._horizontalScrollBarInfo.scrollBarEnd=this._horizontalScrollBarInfo.contentElementInfo.clientSize-this._offsets.right,this._verticalScrollBarInfo.scrollBarOffset=this._offsets.right,this._horizontalScrollBarInfo.scrollBarOffset=this._offsets.bottom,this._verticalThumbCalculator.recalculate(),this._horizontalThumbCalculator.recalculate(),this._horizontalScrollBarInfo.visible&&(this._verticalScrollBarInfo.thumbEnd-=this._horizontalScrollBarInfo.scrollBarThickness)}}class Fe{}var Te;Fe.ClassName=pe.Prefix+"-scroll-viewer",Fe.ContentContainerClassName=Fe.ClassName+"-content",Fe.VerticalScrollBarClassName=Fe.ClassName+"-vert-scroll-bar",Fe.HorizontalScrollBarClassName=Fe.ClassName+"-hor-scroll-bar",Fe.ScrollBarThumbClassName=Fe.ClassName+"-scroll-thumb",Fe.ScrollBarActiveClassName=pe.Active,function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(Te||(Te={}));class He extends he{constructor(){super(),this.thumbElement=null,this._mode=Te.Vertical,this._info=null}initializeComponent(){super.initializeComponent(),this.thumbElement=this.getThumbElement(),this.thumbElement.addEventListener("click",He.onThumbElementClick)}disposeComponent(){super.disposeComponent(),this.thumbElement&&this.thumbElement.removeEventListener("click",He.onThumbElementClick)}get mode(){return this._mode}set mode(e){this._mode=e}get info(){return this._info}set info(e){this._info=e,this.applyUIChanges()}getThumbThickness(){if(!this.thumbElement)return 0;const e=T.DomUtils.getCurrentStyle(this.thumbElement);return parseInt(this.mode===Te.Vertical?e.width:e.height)}applyUIChanges(){if(!this.isInitialized)return;if(!this.info||!this.info.visible)return void T.DomUtils.removeClassName(this,Fe.ScrollBarActiveClassName);const e=this.info.thumbEnd-this.info.thumbStart+"px";this.mode===Te.Vertical?this.applyVerticalScrollUIChanges(e):this.applyHorizontalScrollUIChanges(e),T.DomUtils.addClassName(this,Fe.ScrollBarActiveClassName)}applyVerticalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.height=e,this.thumbElement.style.transform=`translateY(${this.info.thumbStart}px)`,this.style.top=this.info.scrollBarStart+"px",this.style.bottom=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.right=this.info.scrollBarOffset+"px")}applyHorizontalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.width=e,this.thumbElement.style.transform=`translateX(${this.info.thumbStart}px)`,this.style.left=this.info.scrollBarStart+"px",this.style.right=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.bottom=this.info.scrollBarOffset+"px")}getThumbElement(){return this.querySelector(`.${Fe.ScrollBarThumbClassName}`)}static onThumbElementClick(e){e.stopPropagation()}}const Ue=40;var Qe,Pe,Ne,Re,Le,Me,ke;!function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom"}(Qe||(Qe={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(Pe||(Pe={})),function(e){e[e.All=0]="All",e[e.ScrollBars=1]="ScrollBars",e[e.ScrollPosition=2]="ScrollPosition"}(Ne||(Ne={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(Re||(Re={}));class Ke extends CustomEvent{constructor(){super(Ke.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}Ke.eventName="dxscrollviewerupdate";class Oe extends CustomEvent{constructor(e,t){super(Oe.eventName,{detail:{element:e,isFocusRequired:t},bubbles:!0,composed:!1})}}Oe.eventName="dxscrollviewervisibleelementchanged";class _e extends he{constructor(){super(),this.scrollAttributeLifespanTimeoutId=null,this.pendingRefreshUi=null,this.currentMakeElementVisibleTimeoutId=-1,this.autoScrollingMode=null,this.autoScrollingRect=null,this.autoScrollingRafID=-1,this.autoScrollingCallback=null,this.contentContainerScrollingCallback=null,this.boundOnContentScrollHandler=this.onContentScroll.bind(this),this.boundOnVerticalScrollBarClickHandler=this.onVerticalScrollBarClick.bind(this),this.boundOnVerticalScrollThumbMoveHandler=this.onVerticalScrollThumbMove.bind(this),this.boundOnHorizontalScrollBarClickHandler=this.onHorizontalScrollBarClick.bind(this),this.boundOnHorizontalScrollThumbMoveHandler=this.onHorizontalScrollThumbMove.bind(this),this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.preventScrollEvent=!1,this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null,this.scrollController=null,this.contentResizeObserver=new ResizeObserver(this.onContentSizeChanged.bind(this)),this.headerResizeObserver=new ResizeObserver(this.onHeaderSizeChanged.bind(this)),this.footerResizeObserver=new ResizeObserver(this.onFooterSizeChanged.bind(this)),this.leftResizeObserver=new ResizeObserver(this.onLeftSizeChanged.bind(this)),this.rightResizeObserver=new ResizeObserver(this.onRightSizeChanged.bind(this))}get useShadowDom(){return!1}get headerSelector(){return this.getAttribute("header-selector")}get footerSelector(){return this.getAttribute("footer-selector")}get leftSelector(){return this.getAttribute("left-selector")}get rightSelector(){return this.getAttribute("right-selector")}get canMakeElementVisible(){return!this.isRefreshUIRequested&&(!!this.contentContainerElement&&this.contentContainerElement.isConnected)}getContentContainerElement(){return this.contentContainerElement}getVerticalScrollBarElement(){return this.verticalScrollBarElement}getHorizontalScrollBarElement(){return this.horizontalScrollBarElement}get isRefreshUIRequested(){return!!this.pendingRefreshUi}get hasHorizontalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getHorizontalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}get hasVerticalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getVerticalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}initializeComponent(){super.initializeComponent(),this.initializeInnerHTMLElements(),this.initializeScrollController(),this.connectResizeObservers()}afterInitialize(){super.afterInitialize(),this.refreshScrollPosition()}disposeComponent(){super.disposeComponent(),this.releaseInnerHTMLElements(),this.scrollController=null,this.contentResizeObserver.disconnect(),this.headerResizeObserver.disconnect(),this.footerResizeObserver.disconnect(),this.leftResizeObserver.disconnect(),this.rightResizeObserver.disconnect()}getRectangle(){const{left:e,top:t,width:n,height:i}=this.getBoundingClientRect();return{x:e,y:t,width:n,height:i}}getDataAreaRectangle(){const e=this.getRectangle(),t=this.getElementsRectangle(this.getHeaderElements());if(t){const n=t.height;e.height-=n,e.y+=n}const n=this.getElementsRectangle(this.getLeftElements());if(n){const t=n.width;e.width-=t,e.x+=t}const i=this.getElementsRectangle(this.getRightElements());i&&(e.width-=i.width);const s=this.getElementsRectangle(this.getFooterElements());return s&&(e.height-=s.height),e}static calculateBoundingRectangle(e){if(1===e.length)return e[0];let t=-1,n=-1,i=-1,s=-1;return e.forEach((function(e){(e.x<t||-1===t)&&(t=e.x),(e.y<n||-1===n)&&(n=e.y),(e.x+e.width>i||-1===i)&&(i=e.x+e.width),(e.y+e.height>s||-1===s)&&(s=e.y+e.height)})),{x:t,y:n,width:i-t,height:s-n}}onDocumentMouseMove(e){this.performAutoScrolling(e)}startAutoScrolling(e,t=null,n=null){this.autoScrollingMode=e,this.autoScrollingCallback=t;const i=this.getRectangle();n&&n(i),this.autoScrollingRect=i,document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stopAutoScrolling(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),this.stopAutoScrollingTimer(),this.autoScrollingCallback=null,this.autoScrollingRect=null,this.autoScrollingMode=null}subscribeToScroll(e=null){this.contentContainerScrollingCallback=e}unsubscribeFromScroll(){this.contentContainerScrollingCallback=null}get isHorizontalAutoScrollingEnabled(){return this.autoScrollingMode===Re.Horizontal||this.autoScrollingMode===Re.Both}get isVerticalAutoScrollingEnabled(){return this.autoScrollingMode===Re.Vertical||this.autoScrollingMode===Re.Both}performAutoScrolling(e){if(this.stopAutoScrollingTimer(),void 0!==this.autoScrollingMode&&this.autoScrollingRect){const t=this.autoScrollingRect,n=t.x<=e.pageX&&e.pageX<=t.x+t.width,i=t.y<=e.pageY&&e.pageY<=t.y+t.height;let s=0,r=0;if(this.isHorizontalAutoScrollingEnabled&&n&&i){const n=e.pageX-t.x;0<=n&&n<=Ue&&(s=-(Ue-n)/2);const i=t.x+t.width-e.pageX;0<=i&&i<=Ue&&(s=(Ue-i)/2)}if(this.isVerticalAutoScrollingEnabled&&n&&i){const n=e.pageY-t.y;0<=n&&n<=Ue&&(r=-(Ue-n)/2);const i=t.y+t.height-e.pageY;0<=i&&i<=Ue&&(r=(Ue-i)/2)}0===s&&0===r||this.startAutoScrollingTimer(e,s,r)}}startAutoScrollingTimer(e,t,n){this.autoScrollingRafID=requestAnimationFrame((()=>{this.contentContainerElement&&(this.contentContainerElement.scrollBy(t,n),this.refresh(Ne.ScrollBars)),this.autoScrollingCallback&&this.autoScrollingCallback(e),this.performAutoScrolling(e)}))}stopAutoScrollingTimer(){this.autoScrollingRafID>-1&&(cancelAnimationFrame(this.autoScrollingRafID),this.autoScrollingRafID=-1)}releaseInnerHTMLElements(){this.contentContainerElement&&this.contentContainerElement.removeEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement&&this.unsubscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement&&this.unsubscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler),this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null,-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId)}getHeaderElements(){return this.getElements(this.headerSelector)}getFooterElements(){return this.getElements(this.footerSelector)}getLeftElements(){return this.getElements(this.leftSelector)}getRightElements(){return this.getElements(this.rightSelector)}getElementsRectangle(e){if(null===e||0===e.length)return null;const t=Array.from(e);return _e.calculateBoundingRectangle(t.map((e=>e.getBoundingClientRect())))}getElements(e){return e&&this.contentContainerElement?this.contentContainerElement.querySelectorAll(e):null}subscribeEvents(e,t,n){e.addEventListener("click",t),e.addEventListener("dxthumbdragdelta",n)}unsubscribeEvents(e,t,n){e.removeEventListener("click",t),e.removeEventListener("dxthumbdragdelta",n)}refreshUI(){this.refresh(Ne.All),this.dispatchEvent(new Ke)}refreshScrollPosition(){this.refresh(Ne.ScrollPosition),this.dispatchEvent(new Ke)}refresh(e){if(this.pendingRefreshUi){e===Ne.ScrollBars&&e!==this.pendingRefreshUi.refreshType&&this.contentContainerElement&&(this.pendingRefreshUi.scrollTop=this.contentContainerElement.scrollTop,this.pendingRefreshUi.scrollLeft=this.contentContainerElement.scrollLeft,this.pendingRefreshUi.refreshType===Ne.ScrollPosition&&(this.pendingRefreshUi.refreshType=Ne.All))}else this.pendingRefreshUi={refreshType:e},requestAnimationFrame((()=>{const{refreshType:e,scrollTop:t,scrollLeft:n}=this.pendingRefreshUi;if(this.pendingRefreshUi=null,!this.scrollController)return;const i=this.scrollController.verticalScrollBarInfo,s=this.scrollController.horizontalScrollBarInfo;this.contentContainerElement&&(e!==Ne.All&&e!==Ne.ScrollPosition||(this.contentContainerElement.scrollTop=null!=t?t:i.contentElementInfo.scrollStart,this.contentContainerElement.scrollLeft=null!=n?n:s.contentElementInfo.scrollStart),e!==Ne.All&&e!==Ne.ScrollBars||this.updateScrollableElementInfo(this.contentContainerElement)),this.verticalScrollBarElement&&(this.verticalScrollBarElement.info=i),this.horizontalScrollBarElement&&(this.horizontalScrollBarElement.info=s),this.contentContainerElement&&this.onRefresh(this.contentContainerElement.scrollTop,this.contentContainerElement.scrollLeft),this.preventScrollEvent=!1}))}onRefresh(e,t){this.contentContainerScrollingCallback&&this.contentContainerScrollingCallback(e,t)}initializeInnerHTMLElements(){this.contentContainerElement=this.querySelector(`.${Fe.ContentContainerClassName}`),this.contentContainerElement.addEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement=this.getScrollElement(Fe.VerticalScrollBarClassName),this.verticalScrollBarElement.mode=Te.Vertical,this.subscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement=this.getScrollElement(Fe.HorizontalScrollBarClassName),this.horizontalScrollBarElement.mode=Te.Horizontal,this.subscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler)}initializeScrollController(){if(this.contentContainerElement&&this.verticalScrollBarElement&&this.horizontalScrollBarElement&&(this.scrollController=new De(this.contentContainerElement),this.verticalScrollBarElement instanceof He&&this.horizontalScrollBarElement instanceof He)){const e=this.verticalScrollBarElement.getThumbThickness(),t=this.horizontalScrollBarElement.getThumbThickness();this.scrollController.initScrollBarsThickness(e,t)}}updateScrollableElementInfo(e){this.scrollController&&e&&this.scrollController.updateScrollableElementInfo(e)}connectResizeObservers(){if(this.contentContainerElement){this.contentResizeObserver.observe(this);for(let e=0;e<this.contentContainerElement.children.length;e++)this.contentResizeObserver.observe(this.contentContainerElement.children[e]);this.connectHeaderResizeObserver(),this.connectFooterResizeObserver(),this.connectLeftResizeObserver(),this.connectRightResizeObserver()}}connectHeaderResizeObserver(){const e=this.getHeaderElements();e&&e.forEach((e=>{this.headerResizeObserver.observe(e)}))}connectFooterResizeObserver(){const e=this.getFooterElements();e&&e.forEach((e=>{this.footerResizeObserver.observe(e)}))}connectLeftResizeObserver(){const e=this.getLeftElements();e&&e.forEach((e=>{this.leftResizeObserver.observe(e)}))}connectRightResizeObserver(){const e=this.getRightElements();e&&e.forEach((e=>{this.rightResizeObserver.observe(e)}))}reconnectResizeObservers(){this.reconnectLeftResizeObserver(),this.reconnectRightResizeObserver(),this.reconnectHeaderResizeObserver(),this.reconnectFooterResizeObserver()}reconnectHeaderResizeObserver(){this.headerResizeObserver.disconnect(),this.connectHeaderResizeObserver()}reconnectFooterResizeObserver(){this.footerResizeObserver.disconnect(),this.connectFooterResizeObserver()}reconnectLeftResizeObserver(){this.leftResizeObserver.disconnect(),this.connectLeftResizeObserver()}reconnectRightResizeObserver(){this.rightResizeObserver.disconnect(),this.connectRightResizeObserver()}onContentScroll(e){this.preventScrollEvent||(this.refresh(Ne.ScrollBars),this.setScrollAttribute())}setScrollAttribute(){const e="scrolling";i.setAttribute(this,e),this.scrollAttributeLifespanTimeoutId&&clearTimeout(this.scrollAttributeLifespanTimeoutId),this.scrollAttributeLifespanTimeoutId=setTimeout((()=>{i.removeAttribute(this,e)}),2e3)}onVerticalScrollBarClick(e){this.scrollController&&(this.scrollController.vertScrollByPointerClick(e.offsetY),this.refreshScrollPosition())}onHorizontalScrollBarClick(e){this.scrollController&&(this.scrollController.horScrollByPointerClick(e.offsetX),this.refreshScrollPosition())}onVerticalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.vertScrollByPointerMove(e.detail.deltaY),this.refreshScrollPosition())}onHorizontalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.horScrollByPointerMove(e.detail.deltaX),this.refreshScrollPosition())}getScrollElement(e){return this.querySelector(`:scope > .${e}`)}onContentSizeChanged(e,t){this.refreshUI()}onHeaderSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectHeaderResizeObserver();const n=this.getElementsRectangle(this.getHeaderElements());n&&this.scrollController.updateTopPanelHeight(n.height),this.refreshScrollPosition()}onFooterSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectFooterResizeObserver();const n=this.getElementsRectangle(this.getFooterElements());n&&this.scrollController.updateBottomPanelHeight(n.height),this.refreshScrollPosition()}onLeftSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectLeftResizeObserver();const n=this.getElementsRectangle(this.getLeftElements());n&&this.scrollController.updateLeftPanelWidth(n.width),this.refreshScrollPosition()}onRightSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectRightResizeObserver();const n=this.getElementsRectangle(this.getRightElements());n&&this.scrollController.updateRightPanelWidth(n.width),this.refreshScrollPosition()}processRequestMakeElementVisible(e){if(!e)return;const t=JSON.parse(e);if(3===t.length){const e=t[0];let n=null,i=null;null!==t[1]&&(n=t[1]),null!==t[2]&&(i=t[2]),e?this.execRequestMakeElementVisible(e,n,i):this.cancelRequestMakeElementVisible()}}execRequestMakeElementVisible(e,t,n){this.scheduleMakeElementVisible(e,t,n)}cancelRequestMakeElementVisible(){-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId)}scheduleMakeElementVisible(e,t,n){-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId),this.currentMakeElementVisibleTimeoutId=setTimeout((()=>{this.canMakeElementVisible?this.makeElementVisible(e,t,n):this.scheduleMakeElementVisible(e,t,n)}))}makeElementVisible(e,t,n){if(!this.contentContainerElement)return;const i=this.contentContainerElement.querySelector(e);i?(_e.scrollToElementRelyOnStickyDescendants(i,t,n,this),this.dispatchEvent(new Oe(i,!0))):this.makeUnrenderedElementVisible(e,t,n)}makeUnrenderedElementVisible(e,t,n){}static scrollToElementRelyOnStickyDescendants(e,t,n,i){if(i.contentContainerElement){const s=i.getDataAreaRectangle(),r=s.y,o=s.x,a=s.y+s.height,l=s.x+s.width,A=e.getBoundingClientRect(),d=this.calcScrollOffset(r,a,A.top,A.bottom,t),c=this.calcScrollOffset(o,l,A.left,A.right,n),h=i.contentContainerElement.scrollTop,u=i.contentContainerElement.scrollLeft,p=Math.round(h+d),m=Math.round(u+c);p===Math.round(h)&&m===Math.round(u)||(i.contentContainerElement.scrollTo(m,p),i.refresh(Ne.ScrollBars))}const s=_e.findClosestViewer(i);s&&_e.scrollToElementRelyOnStickyDescendants(e,null,null,s)}static calcScrollOffset(e,t,n,i,s){switch(s){case Qe.Top||Pe.Left:return n-e;case Qe.Bottom||Pe.Right:return i-t;case Qe.None||Pe.None:return 0}return e>n?n-e:t<i?Math.min(i-t,n-e):0}static findClosestViewer(e){return e.parentElement?e.parentElement.closest(`.${Fe.ClassName}`):null}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","header-selector","footer-selector","left-selector","right-selector"]}attributeChangedCallback(e,t,n){switch(e){case"reset-v-scroll-guid":this.contentContainerElement&&n&&(this.contentContainerElement.scrollTop=0,this.refresh(Ne.ScrollBars));break;case"reset-h-scroll-guid":this.contentContainerElement&&n&&(this.contentContainerElement.scrollLeft=0,this.refresh(Ne.ScrollBars));break;case"header-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectHeaderResizeObserver()));break;case"footer-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectFooterResizeObserver()));break;case"left-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectLeftResizeObserver()));break;case"right-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectRightResizeObserver()));break;case"request-make-element-visible":this.processRequestMakeElementVisible(n)}}}customElements.define("dxbl-scroll-bar",He),customElements.define("dxbl-scroll-viewer",_e),function(e){e[e.ColumnsChanged=0]="ColumnsChanged",e[e.GridResize=1]="GridResize"}(Le||(Le={}));class Ve{constructor(e){this.grid=e}correctWidths(e){if(0===this.grid.columnsInfo.length)return!1;const t=this.grid.getDataTable();return!!t&&("fixed"===window.getComputedStyle(t).tableLayout&&(requestAnimationFrame((()=>{const t=this.grid.columnsInfo,n=this.grid.getColElements();if(e===Le.ColumnsChanged&&Ve.resetColumnWidths(t,n),!Ve.canAcquireAbsoluteColumnWidths(this.grid))return;this.updateEmptyColumnVisibility();const i=new Map;for(let e=0;e<this.grid.columnsInfo.length;++e){const t=this.grid.columnsInfo[e];if(t.isAbsoluteWidth){const n=this.grid.getColElementOffsetWidth(e);null!==n&&i.set(t,Math.round(n))}}const s={columnsInfo:this.grid.columnsInfo,columnCurrentWidths:new Map,tableWidth:this.grid.getTableContainerWidth(),absoluteColumnWidths:i,percentColumns:this.grid.columnsInfo.filter((e=>e.isPercentWidth)),freeColumns:this.grid.columnsInfo.filter((e=>e.isFreeWidth)),emptyColumn:this.grid.columnsInfo.filter((e=>e.isEmpty))[0]};Ve.doDistributionWaves(s),Ve.applyColumnWidths(s,n),this.updateEmptyColumnVisibility(),this.grid.styleGenerator.updateFixedCellsStyle()})),!0))}autoFitColumnWidths(){const e=Ve.calculateContentWidths(this.grid);let t=0,n=0;for(const[i,s]of e)i.isIndent||(t+=s,i.isAbsoluteWidth&&(n+=s));const i=t-n,s=[],r=[];for(const[t,n]of e){const e=t.isPercentWidth||t.isFreeWidth?n/i*100+"%":`${n}px`;t.updateWidth(e),s.push(t.uID),r.push(e)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(s,r)}autoFitColumnWidthsLegacy(e=!1){const t=Ve.calculateContentWidths(this.grid);let n=0;for(const[e,i]of t)e.isIndent||(n+=i);const i=[],s=[];for(const[r,o]of t){const t=e?o/n*100+"%":`${o}px`;r.updateWidth(t),i.push(r.uID),s.push(t)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(i,s)}static calculateContentWidths(e){const t=new Map,n=e.getDataTable();if(n){n.classList.add(me.CalculateContentWidthsClassName);const i=e.getColElements();for(let n=0;n<i.length;n++){const i=e.columnsInfo[n];if(i&&-1!==i.uID){const s=e.getColElementOffsetWidth(n),r=s?Math.ceil(s)+1:0;t.set(i,r)}}n.classList.remove(me.CalculateContentWidthsClassName)}return t}updateEmptyColumnVisibility(){const e=this.grid.getColElements(),t=e[e.length-1];Ve.hasAnyDataColumnWithEmptyWidth(this.grid.columnsInfo,e)?t.classList.add(me.HiddenEmptyCellClassName):t.classList.remove(me.HiddenEmptyCellClassName)}static resetColumnWidths(e,t){for(let n=0;n<t.length;n++){const i=e[n];!i||i.isIndent||i.isEmpty||(t[n].style.width=i.width)}}static doDistributionWaves(e){let t=!1,n=0;do{Ve.performAllColumnsRealWidthCalculation(e),t=Ve.evaluateColumnMinWidthCorrection(e)}while(t&&++n<=e.columnsInfo.length)}static performAllColumnsRealWidthCalculation(e){e.columnCurrentWidths=new Map;const t=Ve.calculateAbsoluteColumnWidths(e);let n=Math.max(0,e.tableWidth-t);n=Ve.calculatePercentColumnWidths(e,n),n=Ve.calculateFreeColumnWidths(e,n),Ve.calculateEmptyColumnWidth(e,n)}static calculateAbsoluteColumnWidths(e){let t=0;for(const n of e.absoluteColumnWidths.keys()){const i=e.absoluteColumnWidths.get(n);t+=i,e.columnCurrentWidths.set(n,i)}return t}static calculatePercentColumnWidths(e,t){let n=0;for(const t of e.percentColumns)n+=t.getPercents();let i=e.tableWidth;const s=n>100?100/n:1,r=i*(n*s)/100;i*=t<r?t/r:1;let o=0;for(const t of e.percentColumns){const n=i*(t.getPercents()*s/100);e.columnCurrentWidths.set(t,n),o+=n}return t-o}static calculateFreeColumnWidths(e,t){if(e.freeColumns.length>0){const n=t/e.freeColumns.length;for(const t of e.freeColumns)e.columnCurrentWidths.set(t,n);return 0}return t}static calculateEmptyColumnWidth(e,t){e.emptyColumn&&e.columnCurrentWidths.set(e.emptyColumn,t)}static evaluateColumnMinWidthCorrection(e){const t=e.absoluteColumnWidths.size;for(const t of e.columnCurrentWidths.keys())Math.round(e.columnCurrentWidths.get(t))>t.minWidth||0===t.minWidth||e.absoluteColumnWidths.set(t,t.minWidth);return e.percentColumns=e.percentColumns.filter((t=>!e.absoluteColumnWidths.has(t))),e.freeColumns=e.freeColumns.filter((t=>!e.absoluteColumnWidths.has(t))),t!==e.absoluteColumnWidths.size}static applyColumnWidths(e,t){for(let n=0;n<e.columnsInfo.length;++n){const i=e.columnsInfo[n];if(i.isIndent)continue;const s=e.absoluteColumnWidths.has(i)?`${e.absoluteColumnWidths.get(i)}px`:i.width;e.columnsInfo[n].colElementWidth=s,t[n].style.width=s}}static hasAnyDataColumnWithEmptyWidth(e,t){let n=0;for(let i=0;i<e.length;i++){const s=e[i];if(!s.isIndent&&!s.isEmpty&&(++n,!t[i].style.width))return!0}return 0===n}static canAcquireAbsoluteColumnWidths(e){for(let t=0;t<e.columnsInfo.length;++t){if(e.columnsInfo[t].isAbsoluteWidth&&null===e.getColElementOffsetWidth(t))return!1}return!0}}!function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard",e[e.DblClick=3]="DblClick"}(Me||(Me={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(ke||(ke={}));class ze{get isResizing(){return!!this.resizeReason}get columnIndex(){return this._columnIndex}get columnsInfo(){return this.grid.columnsInfo}get tableContainerWidth(){return this._tableContainerWidth}get currentColumnInfo(){return this.columnsInfo[this.columnIndex]}constructor(e){this.startMousePosition=-1,this.startHeaderCellPosition=-1,this.timeoutId=null,this.initialColumnWidths=new Map,this.boundOnDocumentPointerMoveHandler=this.onPointerMove.bind(this),this.getColumnOffsetWidth=e=>this.grid.getColElementOffsetWidth(e),this.setColumnWidth=(e,t)=>{this.grid.getColElements()[e].style.width=t},this.grid=e,this.columnResizeSeparator=e.getColumnResizeSeparator()}startDrag(e,t){var n;this.initializeResizing(e),this.resizeReason=Me.Mouse,this.startMousePosition=t,this.startHeaderCellPosition=this.getHeaderCellPosition(this.columnIndex),document.addEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.add(pe.ResizeCursor),null===(n=this.grid.getScrollViewer())||void 0===n||n.startAutoScrolling(Re.Horizontal,this.boundOnDocumentPointerMoveHandler)}autoFitColumnWidth(e){if(this.isResizing)return;const t=Ve.calculateContentWidths(this.grid).get(this.columnsInfo[e]);if(void 0!==t){this.resizeReason=Me.DblClick,this.initializeResizing(e);const n=t-this.getColumnOffsetWidth(e),i=n>1?Math.ceil(n):Math.floor(n);this.performResize(i),requestAnimationFrame((()=>setTimeout((()=>this.finalizeResizing(!1)))))}}anchorFocused(e){this.resizeReason=Me.Keyboard,this.initializeResizing(e)}anchorUnfocused(){this.finalizeResizing(!1)}stopDrag(){this.finalizeResizing(!1)}cancelDrag(){this.timeoutId&&clearTimeout(this.timeoutId),this.finalizeResizing(!0)}performMoveStep(e){if(this.resizeReason===Me.Mouse)return;let t=e===ke.Right?1:-1;this.isReverseResizing&&(t*=-1);const n=this.calculateDiffByMoveStep(t);this.performResize(n),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.createNotificationAction()()),500)}initializeResizing(e){var t;this._tableContainerWidth=this.grid.getTableContainerWidth(),this.columnResizeSeparator=this.grid.getColumnResizeSeparator(),e=this.calculateResizingColumnIndex(e),this._columnIndex=e,this.initialColumnWidths.clear();const n=this.grid.getColElements();for(let e=0;e<n.length;++e)this.initialColumnWidths.set(e,n[e].style.width);this.initializeResizingCore();const i=this.columnsInfo[e],s=null!==(t=i.parentPath.find((e=>e.getRightLeaf()===i)))&&void 0!==t?t:i,r=this.grid.getHeaderCell(s.headerRowIndex,s.headerCellIndex);r&&this.columnResizeSeparator.show(r,this.isReverseResizing),this.grid.updateEmptyColumnVisibility()}performResize(e){var t;e=Math.round(e),this.performResizeCore(e),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle())),null===(t=this.columnResizeSeparator)||void 0===t||t.render()}finalizeResizing(e){var t,n;if(!this.resizeReason)return;this.resizeReason===Me.Mouse&&(document.removeEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.remove(pe.ResizeCursor),null===(t=this.grid.getScrollViewer())||void 0===t||t.stopAutoScrolling(),this.startMousePosition=-1,this.startHeaderCellPosition=-1),null===(n=this.columnResizeSeparator)||void 0===n||n.hide();let i=null;if(e){this.cancelResizeCore();const e=this.grid.getColElements();this.initialColumnWidths.forEach(((t,n)=>{t!==e[n].style.width&&(e[n].style.width=t)})),this.initialColumnWidths.clear(),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle()))}else i=this.createNotificationAction(),this.finalizeResizeCore();this.grid.updateEmptyColumnVisibility(),this.resizeReason=void 0,this._columnIndex=void 0,this._tableContainerWidth=void 0,this.timeoutId&&clearTimeout(this.timeoutId),i&&i()}createNotificationAction(){const e=this.applyResizingAndGetChangedColumns(),t=e.map((e=>e.uID)),n=e.map((e=>e.width));return()=>{this.grid.onColumnWidthsChanged(t,n)}}getHeaderCellPosition(e){var t;const n=this.grid.findHeaderCellByColumnIndex(e);return null!==(t=null==n?void 0:n.getBoundingClientRect().x)&&void 0!==t?t:-1}onPointerMove(e){const t=this.getHeaderCellPosition(this.columnIndex);let n=e.pageX-this.startMousePosition;if(this.isReverseResizing)n*=-1;else{n+=this.startHeaderCellPosition-t}this.performResize(n)}calculateResizingColumnIndex(e){return e}}class We extends ze{constructor(){super(...arguments),this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalPercents=0,this.totalFreeWidth=0}get nextColumnInfo(){return this.columnsInfo[this.nextColumnIndex]}get isReverseResizing(){return!1}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil((this.columnInitialWidth+this.nextColumnInitialWidth)/100))*e}initializeResizingCore(){this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.nextColumnIndex=this.columnIndex+1,this.nextColumnInitialWidth=this.getColumnOffsetWidth(this.nextColumnIndex),this.nextColumnNewWidth=this.nextColumnInitialWidth;for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];t.isPercentWidth&&(this.totalPercents+=t.getPercents()),t.isFreeWidth&&(this.totalFreeWidth+=this.getColumnOffsetWidth(e))}}performResizeCore(e){this.columnNewWidth=this.columnInitialWidth+e,this.columnNewWidth<this.currentColumnInfo.minWidth&&(this.columnNewWidth=this.currentColumnInfo.minWidth),this.nextColumnNewWidth=this.columnInitialWidth+this.nextColumnInitialWidth-this.columnNewWidth;const t=this.columnInitialWidth+this.nextColumnInitialWidth-this.nextColumnInfo.minWidth;this.columnNewWidth>t&&(this.columnNewWidth=t,this.nextColumnNewWidth=this.nextColumnInfo.minWidth),requestAnimationFrame((()=>{this.isResizing&&(this.setColumnWidth(this.columnIndex,`${this.columnNewWidth}px`),this.setColumnWidth(this.nextColumnIndex,`${this.nextColumnNewWidth}px`))}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[];if(this.currentColumnInfo.isPercentWidth||this.nextColumnInfo.isPercentWidth)return this.currentColumnInfo.isPercentWidth?this.calculateNewWidthsForPercentColumn(this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth,this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth):this.calculateNewWidthsForPercentColumn(this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth,this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth);{const t=0!==this.totalPercents,n=(this.currentColumnInfo.isFreeWidth||this.nextColumnInfo.isFreeWidth)&&!t;if((this.currentColumnInfo.isAbsoluteWidth||this.currentColumnInfo.isFreeWidth&&t)&&(this.currentColumnInfo.updateWidth(`${this.columnNewWidth}px`),e.push(this.currentColumnInfo)),n){const t=this.totalFreeWidth+(this.currentColumnInfo.isFreeWidth?this.columnNewWidth-this.columnInitialWidth:0)+(this.nextColumnInfo.isFreeWidth?this.nextColumnNewWidth-this.nextColumnInitialWidth:0);for(let n=0;n<this.columnsInfo.length;++n){const i=this.columnsInfo[n];i.isFreeWidth&&(i.updateWidth(100*this.getColumnOffsetWidth(n)/t+"%"),e.push(i))}}}return e.includes(this.nextColumnInfo)||(this.nextColumnInfo.updateWidth(`${this.nextColumnNewWidth}px`),e.push(this.nextColumnInfo)),e}calculateNewWidthsForPercentColumn(e,t,n,i,s,r){const o=[],a=(e,t,n)=>e*t/n,l=e.getPercents(),A=a(l,t,n);if(e.updateWidth(e.colElementWidth===e.width?`${A}%`:`${t}px`),o.push(e),i.isPercentWidth)i.updateWidth(`${a(i.getPercents(),s,r)}%`),o.push(i);else{i.updateWidth(`${s}px`),o.push(i);const t=this.totalPercents-l+A;if(t>100){const n=t/this.totalPercents;for(let t=0;t<this.columnsInfo.length;++t){const i=this.columnsInfo[t];i.isPercentWidth&&(i.updateWidth(i.getPercents()/n+"%"),i!==e&&o.push(i))}}}return o}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalFreeWidth=0,this.totalPercents=0}}class $e extends ze{constructor(){super(...arguments),this.enforcedColumnWidths=new Map,this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1}get isReverseResizing(){return"right"===this.currentColumnInfo.fixedPosition}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil(2*this.columnInitialWidth/100))*e}initializeResizingCore(){if(this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.currentColumnInfo.fixedPosition){let e=this.tableContainerWidth;for(let t=0;t<this.columnsInfo.length;++t){const n=this.columnsInfo[t];n!==this.currentColumnInfo&&n.fixedPosition&&(e-=this.getColumnOffsetWidth(t))}this.columnMaxWidth=Math.max(this.columnInitialWidth,e)}this.enforcedColumnWidths.clear();for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];if(!t.isIndent&&!t.isEmpty&&!t.isAbsoluteWidth){const t=`${this.getColumnOffsetWidth(e)}px`;this.setColumnWidth(e,t),this.enforcedColumnWidths.set(e,t)}}}performResizeCore(e){let t=this.columnInitialWidth+e;if(t<this.currentColumnInfo.minWidth&&(t=this.currentColumnInfo.minWidth),this.columnMaxWidth&&t>this.columnMaxWidth&&(t=this.columnMaxWidth),this.isReverseResizing){const e=this.columnsInitialTotalWidth-this.columnInitialWidth;e+t<this.tableContainerWidth&&(t=this.tableContainerWidth-e)}this.columnNewWidth=t;const n=this.columnIndex;requestAnimationFrame((()=>{this.isResizing&&this.setColumnWidth(n,`${t}px`)}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[],t=this.columnsInfo,n=t[this.columnIndex];return n.updateWidth(`${this.columnNewWidth}px`),e.push(n),this.enforcedColumnWidths.forEach(((i,s)=>{const r=t[s];r!==n&&(r.updateWidth(i),e.push(r))})),e}calculateResizingColumnIndex(e){if("right"===this.columnsInfo[e].fixedPosition){let t=0;for(let e=0;e<this.columnsInfo.length;++e)this.columnsInfo[e].isEmpty||(t+=this.getColumnOffsetWidth(e));if(this.columnsInitialTotalWidth=t,t<this.tableContainerWidth)return e-1}return e}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1,this.enforcedColumnWidths.clear(),this.columnMaxWidth=void 0}}class Ge extends he{constructor(){super(),this.cell=null,this.leftSide=!1,this.parentWidth=0,this.tableContainerResizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScroll=this.onTableContainerScroll.bind(this)}get tableContainer(){return this._tableContainer}initializeComponent(){super.initializeComponent(),this.initializeTableContainer(),this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.observe(this.tableContainer)}initializeTableContainer(){this._tableContainer=this.closest(`.${Fe.ContentContainerClassName}`)}disposeComponent(){super.disposeComponent(),this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.unobserve(this.tableContainer)}show(e,t){this.cell=e,this.leftSide=t,this.classList.add(Ge.ActiveColumnResizeSeparator),this.render()}hide(){this.cell=null,this.leftSide=!1,this.classList.remove(Ge.ActiveColumnResizeSeparator),this.style.transform="none"}render(){requestAnimationFrame((()=>{if(!this.cell)return;const e=this.getColumnSeparatorPosition(this.cell),t=this.getBorderWidth(this.cell),n=Ge.getCenteredByBorderPosition(e,this.offsetWidth,t),i=this.getActualHeight(),s=this.cell.offsetTop;this.style.transform=s>0?`translate(${n},${s}px)`:`translateX(${n})`,i>0&&(this.style.height=i-s+"px")}))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.parentWidth!==t&&(this.parentWidth=t,this.render())}getColumnSeparatorPosition(e){const t=e.offsetLeft-this.tableContainer.scrollLeft;return this.leftSide?t:t+e.offsetWidth}getActualHeight(){const e=this.tableContainer.querySelector(`.${me.DataTableClassName} > tfoot`);if(!e)return 0;const t=e.getBoundingClientRect().height;return this.tableContainer.getBoundingClientRect().height-t}getBorderWidth(e){var t;const n=Ge.getBorderWidthByElement(e,"border-right-width");if(n>0)return n;const i=null===(t=this.cell)||void 0===t?void 0:t.nextElementSibling;return i&&Ge.getBorderWidthByElement(i,"border-left-width")}static getBorderWidthByElement(e,t){const n=getComputedStyle(e),i=n.getPropertyValue(t);return parseFloat(i)||parseFloat(n.borderWidth)}static getCenteredByBorderPosition(e,t,n){return e-(t-n)/2+"px"}}Ge.ActiveColumnResizeSeparator=pe.Active;const qe="data-column-uid",Ye="data-parent-column-uid";var Xe;!function(e){e[e.ItemMoving=0]="ItemMoving",e[e.Stop=1]="Stop",e[e.Cancel=2]="Cancel"}(Xe||(Xe={}));class Je{constructor(e){this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.reorderContext=null,this.reorderingCallback=e}start(e,t,n){const i=e.map((e=>e.getBoundingClientRect())),s=e.map((e=>e.getAttribute(qe))),r=e.map((e=>e.getAttribute(Ye))),o=e.map((e=>e.getAttribute("data-column-fixed-position"))),a=e.indexOf(t),l=Je.populateItemGroup(a,s,r),A=t.parentElement,d=Je.calcOffsetParentY(A),c=Je.calculateReorderIntervals(i,l,s,r,o),h=Je.findInterval(c,0);this.reorderContext={state:Xe.ItemMoving,startY:n.y,currentY:n.y,offsetParentStartY:d,offsetParent:A,draggingItemIndices:l,draggingItem:t,items:e,intervals:c,initialInterval:h,currentInterval:h},this.refreshUI(),document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stop(){this.end(Xe.Stop)}cancel(){this.end(Xe.Cancel)}end(e){null!=this.reorderContext&&(this.reorderContext.state=e,this.refreshUI(),document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler))}onDocumentMouseMove(e){null!=this.reorderContext&&(this.reorderContext.currentY=e.y,this.refreshUI())}refreshUI(){if(null==this.reorderContext)return;const e=this.reorderContext.offsetParentStartY-Je.calcOffsetParentY(this.reorderContext.offsetParent),t=this.reorderContext.currentY-this.reorderContext.startY+e;let n=Je.findInterval(this.reorderContext.intervals,t);this.reorderContext.state===Xe.Cancel&&(n=this.reorderContext.initialInterval),this.reorderContext.currentInterval=n,this.applyTransformations(t)}applyTransformations(e){requestAnimationFrame((()=>{if(null==this.reorderContext)return;const t=this.reorderContext.currentInterval;if(null==t)return;const n=this.reorderContext.state===Xe.ItemMoving&&e>=t.top&&e<=t.bottom;for(let i=0;i<t.transforms.length;i++){let s=t.transforms[i];this.reorderContext.draggingItemIndices.includes(i)&&n&&(s=e),this.reorderContext.items[i].style.transform="translate(0, "+s+"px)"}this.reorderingCallback(this.reorderContext.items,t.itemIndices,this.reorderContext.draggingItemIndices,this.reorderContext.state)}))}static calcOffsetParentY(e){return e.getBoundingClientRect().y-e.scrollTop}static calculateReorderIntervals(e,t,n,i,s){const r=t[0],o=t.length,a=Je.calcIntervalBounds(e,r,n,i,s),l=Array.from(Array(e.length).keys());l.splice(r,o);const A=Math.ceil(Je.calculateTotalGroupHeight(t,e)/o),d=a.map((e=>{const n=Array.from(l),i=e.itemIndex>r?1:0,s=e.itemIndex!==r?n.indexOf(e.itemIndex)+i:e.itemIndex;return n.splice(s,0,...t),{top:e.top,bottom:e.bottom,itemIndices:n,transforms:this.calcItemsTransformations(n,A),itemIndex:e.itemIndex}}));return d}static calcIntervalBounds(e,t,n,i,s){const r=Array.from(Array(e.length).keys()),o=s[t],a=i[t];let l=0!==t?r.slice(0,t).reverse():[],A=t!==r.length-1?r.slice(t+1):[];s.some((e=>null!==e))&&(l=l.filter((e=>s[e]===o)),A=A.filter((e=>s[e]===o))),i.some((e=>null!==e))&&(l=l.filter((e=>i[e]===a)),A=A.filter((e=>i[e]===a)));const d=l.map((e=>Je.populateItemGroup(e,n,i))),c=A.map((e=>Je.populateItemGroup(e,n,i))),h=this.calcIntervalBoundsCore(e,d,!0),u=this.calcIntervalBoundsCore(e,c,!1),p=[];h.reverse();for(let e=0;e<h.length;e++){const t=h[e];p.push({top:-1*t.bottom,bottom:-1*t.top,itemIndex:t.itemIndex})}return p.push({top:p.length>0?p[p.length-1].bottom+1:0,bottom:u.length>0?u[0].top-1:0,itemIndex:t}),p.concat(u)}static calcIntervalBoundsCore(e,t,n=!0){if(0===t.length)return[];let i=0;const s=[];for(let n=0;n<t.length;n++){const r=Je.calculateTotalGroupHeight(t[n],e);s.push(i+Math.ceil(r/2)),i+=r}s.push(i);const r=[];for(let e=0;e<s.length-1;e++){const i=t[e];r.push({top:1+s[e],bottom:s[e+1],itemIndex:i[n?0:i.length-1]})}return r}static calcItemsTransformations(e,t){const n=[];for(let i=0;i<e.length;i++){let s=0;const r=e.indexOf(i)-i;0!==r&&(s=t*r),n.push(s)}return n}static findInterval(e,t){for(let n=0;n<e.length;n++)if(t>=e[n].top&&t<=e[n].bottom)return e[n];return t<e[0].top?e[0]:t>e[e.length-1].bottom?e[e.length-1]:null}static populateItemGroup(e,t,n){const i=[e],s=new Set;s.add(t[e]);for(let r=e+1;r<t.length;r++){const e=n[r];e&&s.has(e)&&(i.push(r),s.add(t[r]))}return i}static calculateTotalGroupHeight(e,t){return e.reduce(((e,n)=>e+t[n].height),0)}}class je{constructor(){this.action=null,this.handle=null}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),0)}cancel(){this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}class Ze{static isZero(e){return Math.abs(e)<Number.EPSILON}static areClose(e,t){if(e===t)return!0;const n=(Math.abs(e)+Math.abs(t)+10)*Number.EPSILON,i=e-t;return-n<i&&n>i}static greaterThan(e,t){return e>t&&!Ze.areClose(e,t)}static lessThan(e,t){return e<t&&!Ze.areClose(e,t)}static lessThanOrClose(e,t){return!(e>=t)||Ze.areClose(e,t)}static greaterThanOrClose(e,t){return!(e<=t)||Ze.areClose(e,t)}static toRange(e,t,n){const i=Math.min(t,n),s=Math.max(t,n);return Math.min(Math.max(e,i),s)}static findNumber(e){if(null==e)return null;const t=e.match(/\d+/);return t&&(null==t?void 0:t.length)>0?parseInt(t[0]):null}}class et{get x(){return this._x}get y(){return this._y}constructor(e,t){this._x=e,this._y=t}}et.zero=new et(0,0);class tt{static areClose(e,t){return Ze.areClose(e.x,t.x)&&Ze.areClose(e.y,t.y)}static equals(e,t){return e.x===t.x&&e.y===t.y}static add(e,t){return new et(e.x+t.x,e.y+t.y)}static sub(e,t){return new et(e.x-t.x,e.y-t.y)}}class nt{get width(){return this.widthField}get height(){return this.heightField}constructor(e,t){this.widthField=e,this.heightField=t}}nt.Empty=new nt(0,0);class it{get end(){return this._end}get start(){return this._start}get size(){return Math.abs(this.end-this.start)}constructor(e,t){this._start=e,this._end=t}static rectToRange(e,t){return t?new it(e.left,e.right):new it(e.top,e.bottom)}}class st{get topLeft(){return new et(this.x,this.y)}get topRight(){return new et(this.x+this.width,this.y)}get bottomLeft(){return new et(this.x,this.y+this.height)}get bottomRight(){return new et(this.x+this.width,this.y+this.height)}get x(){return this.xField}get y(){return this.yField}get width(){return this.widthField}get height(){return this.heightField}get isEmpty(){return Ze.lessThanOrClose(this.width,0)||Ze.lessThanOrClose(this.height,0)}get left(){return this.x}get top(){return this.y}get right(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.x+this.width}get bottom(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.y+this.height}get size(){return new nt(this.width,this.height)}constructor(e,t,n,i){this.xField=e,this.yField=t,this.widthField=n,this.heightField=i}static create(e,t){return new st(e.x,e.y,t.width,t.height)}static createFromPoints(e,t){return new st(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))}}st.Empty=new st(0,0,0,0);class rt{static fromDomRect(e){return new st(e.left,e.top,e.width,e.height)}static offset(e,t){return new st(e.x+t.x,e.y+t.y,e.width,e.height)}static areSame(e,t){return Ze.areClose(e.x,t.x)&&Ze.areClose(e.y,t.y)&&Ze.areClose(e.width,t.width)&&Ze.areClose(e.height,t.height)}static intersectsWith(e,t){return!e.isEmpty&&!t.isEmpty&&(t.left<=e.right&&t.right>=e.left&&t.top<=e.bottom&&t.bottom>=e.top)}static intersect(e,t){if(!rt.intersectsWith(e,t))return st.Empty;const n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),s=Math.max(Math.min(e.right,t.right)-n,0),r=Math.max(Math.min(e.bottom,t.bottom)-i,0);return new st(n,i,s,r)}static contains(e,t){return!e.isEmpty&&(t.x>=e.x&&t.x-e.width<=e.x&&t.y>=e.y&&t.y-e.height<=e.y)}static parse(e){const t=e.split(",");if(4!==t.length)throw new Error("incorrect parameters number");return new st(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]))}}class ot{static isAbsolutePositioning(e){return"absolute"===window.getComputedStyle(e).getPropertyValue("position")}static isFixedPositioning(e){return"fixed"===window.getComputedStyle(e).getPropertyValue("position")}static isScrollable(e){const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(t+n+i)}static setBooleanAttribute(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}static isOverflown(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}static isTableElement(e){var t;return[P.table,P.tableCell,P.tableHeaderCell].indexOf(null!==(t=ot.getNodeName(e))&&void 0!==t?t:"")>=0}static isTextInput(e){return e.tagName===P.input||e.tagName===P.textArea}static isMultipleRowInput(e){const t=e.getAttribute("contenteditable");return t?"false"!==t.toLowerCase():e.tagName===P.textArea}static toPx(e){return Math.floor(e)+"px"}static getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}static getVerticalScrollbarWidth(e=null){return null==e?window.innerWidth-document.body.getBoundingClientRect().width:e.offsetWidth-e.clientWidth}static matches(e,t){return e.matches(t)}static isHidden(e){if(getComputedStyle(e).visibility===U.hidden||e.closest('[inert="true"]'))return!0;let t=e;for(;t;){if(getComputedStyle(t).display===Q.none)return!0;t=t.parentElement}return!1}static getAttributeIntValue(e,t,n){return ot.getAttributeParsedNumberValue(e,t,parseInt,n)}static getAttributeParsedNumberValue(e,t,n,i){const s=e.getAttribute(t);return s?n(s):i}}class at{static getRelativeElementRect(e,t=null){const n=null!=t?rt.fromDomRect(t.getBoundingClientRect()):st.Empty,i=rt.fromDomRect(e.getBoundingClientRect());return new st(i.x-n.x+window.scrollX,i.y-n.y+window.scrollY,i.width,i.height)}static getParent(e,t){const n=this.getParentCore(e,t);return"html"===(null==n?void 0:n.nodeName.toLowerCase())?null:n}static getParentCore(e,t){if(t){if(e&&e.assignedSlot)return e.assignedSlot}if(e.parentNode)return e.parentNode;return e&&e.host?e.host:null}static findParent(e,t,n=!0){let i=at.getParent(e,n);for(;i;){if(i&&t(i))return i;i=at.getParent(i,n)}return null}static*getRootPathAndSelf(e,t=null,n=!0){yield e;for(const i of at.getRootPath(e,t,n))yield i}static*getRootPath(e,t=null,n=!0){let i=at.getParent(e,n);for(;i&&i!==t;)yield i,i=at.getParent(i,n)}static getScrollParent(e){var t;return e?["html","body","#document"].indexOf(null!==(t=ot.getNodeName(e))&&void 0!==t?t:"")>=0?null:e instanceof HTMLElement&&ot.isScrollable(e)?e:at.getScrollParent(at.getParent(e,!0)):null}static getRealOffsetParent(e){return e instanceof HTMLElement&&!ot.isFixedPositioning(e)?e.offsetParent:null}static getOffsetParent(e){let t=at.getRealOffsetParent(e);for(;t&&ot.isTableElement(t)&&"static"===getComputedStyle(t).position;)t=at.getRealOffsetParent(t);return t}static containsElement(e,t){var n;if(!t)return!1;const i=t.getRootNode();if(e.contains(t))return!0;if(i&&i instanceof ShadowRoot){let i=t;do{if(i&&e.isSameNode(i))return!0;i=null!==(n=null==i?void 0:i.parentNode)&&void 0!==n?n:null}while(i)}return!1}static getScrollParents(e){if(!e)return[];const t=at.getScrollParent(e);if(!t)return[];const n=new Array(t),i=at.getParent(t,!0);if(!i)return n;const s=this.getScrollParents(i);return n.concat(s)}static getClippingRoot(e){return at.findParent(e,(e=>e instanceof HTMLElement&&ot.isFixedPositioning(e)),!0)}static getClippingParents(e){const t=at.getScrollParents(at.getParent(e,!0)),n=at.getClippingRoot(e);return t.filter(n?e=>e instanceof HTMLElement&&e!==n&&!at.containsElement(e,n):e=>e instanceof HTMLElement)}}function lt(e){return pt(e,["popup","addEventListener","removeEventListener"])}function At(e){return pt(e,["closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"])}function dt(e){return pt(e,["logicalParent"])}function ct(e){return pt(e,["logicalChildren","addLogicalChild","removeLogicalChild"])}function ht(e){return pt(e,["adaptivityEnabled"])}function ut(e){return pt(e,["processCapturedPointerAsync","processCapturedKeyDownAsync"])}function pt(e,t){if(0===t.length)throw new Error("empty interface");for(const n of t)if(!(n in e))return!1;return!0}class mt{static getParent(e,t){var n;return dt(e)&&null!==(n=e.logicalParent)&&void 0!==n?n:at.getParent(e,t)}static findParent(e,t,n=!0){for(const i of mt.getRootPath(e,null,n)){if(i&&t(i))return i}return null}static containsElement(e,t){return!!t&&null!==mt.findParent(t,(t=>t===e))}static*getRootPath(e,t=null,n=!0){let i=mt.getParent(e,n);for(;i&&i!==t;)yield i,i=mt.getParent(i,n)}}class gt{static isFocused(e){return e===document.activeElement}static isFocusWithin(e,t=!1){return t?mt.containsElement(e,document.activeElement):at.containsElement(e,document.activeElement)}static restoreFocus(e){e.focus({preventScroll:!1})}static cancelRestoreFocus(){this.restoreFocusAction.cancel()}static unfocus(){gt.cancelRestoreFocus();const e=document.activeElement;e&&e.blur()}}gt.restoreFocusAction=new je;class Ct{static register(e,t){var n;null===(n=window.Blazor)||void 0===n||n.registerCustomEventType(e,{createEventArgs:t})}}class ft extends CustomEvent{constructor(e,t){super(ft.eventName,{detail:new vt(e,t),bubbles:!0,composed:!0,cancelable:!0})}}ft.eventName="dxbl-keyboard-navigator.shortcut";class vt{constructor(e,t){this.Event=e,this.Info=JSON.stringify(t)}}Ct.register(ft.eventName,(e=>{const t=e.detail;return{Key:t.Event.key,Code:t.Event.code,CtrlKey:t.Event.ctrlKey,AltKey:t.Event.altKey,ShiftKey:t.Event.shiftKey,MetaKey:t.Event.metaKey,Info:t.Info}}));let bt=-1;function wt(){return function(){if(bt>-1)return bt;const e=document.createElement("DIV");e.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(e);const t=document.createElement("P");e.appendChild(t),t.style.cssText="width: 100%; height: 200px;";const n=t.offsetWidth;e.style.overflow="scroll";let i=t.offsetWidth;return n===i&&(i=e.clientWidth),bt=(n-i)*window.devicePixelRatio,document.body.removeChild(e),bt}()/window.devicePixelRatio}class yt{constructor(e=-1,t=-1){this.width=e,this.height=t}static getDimentionValue(e,t){let n=-1;if(t in e){const i=parseFloat(e[t]);n=Number.isNaN(i)?-1:i}return n}static from(e){if(!e)return new yt;const t=this.getDimentionValue(e,"width"),n=this.getDimentionValue(e,"height");return new yt(t,n)}}function Bt(e){return t=e,h.Browser.IE?function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().left+un()}(t):h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?It(t):window.getAbsolutePositionX_Other(t);var t}function Et(e){return function(e){if(h.Browser.IE)return function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().top+pn()}(e);return h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?St(e):window.getAbsolutePositionY_Other(e)}(e)}function It(e){if(null==e)return 0;return e.getBoundingClientRect().left+un()}function St(e){if(null==e)return 0;return e.getBoundingClientRect().top+pn()}function xt(e,t,n){return e-=function(e,t){return function(e,t){const n=function(e){const t=document.createElement("DIV");return t.style.top="0px",t.style.left="0px",t.visibility="hidden",t.style.position=T.DomUtils.getCurrentStyle(e).position,t}(e);"static"===n.style.position&&(n.style.position="absolute");e.parentNode.appendChild(n);const i=t?Bt(n):Et(n);return e.parentNode.removeChild(n),i}(e,t)}(t,n),e}function Dt(e,t){try{let n;const i=Ft(e);if(!i){const t=Tt(e);if(!t)return!1;n=t.split(" ")}const s=t.split(" ");for(let e=s.length-1;e>=0;e--)if(i){if(-1===i.indexOf(s[e]))return!1}else if(n.indexOf(s[e])<0)return!1;return!0}catch(e){return!1}}function Ft(e){return e.classList?[].slice.call(e.classList):Tt(e).replace(/^\s+|\s+$/g,"").split(/\s+/)}function Tt(e){return"svg"===e.tagName?e.className.baseVal:e.className}function Ht(e,t){return t||(t=0),null!=e&&e.length>t?e[t]:null}function Ut(e,t,n){if(null!=e){const i=function(e,t){const n=t.toUpperCase();let i=null;return e&&(e.getElementsByTagName?(i=e.getElementsByTagName(n),0===i.length&&(i=e.getElementsByTagName(t))):e.all&&void 0!==e.all.tags&&(i=h.Browser.Netscape?e.all.tags[n]:e.all.tags(n))),i}(e,t);return Ht(i,n)}return null}let Qt=null;function Pt(){return Qt&&![...document.styleSheets].every((e=>e!==Qt))||(Qt=function(e){if(!e.createStyleSheet){const t=e.createElement("STYLE");return Ut(e,"HEAD",0).appendChild(t),t.sheet}try{return e.createStyleSheet()}catch(e){throw new Error("The CSS link limit (31) has been exceeded. Please enable CSS merging or reduce the number of CSS files on the page. For details, see https://supportcenter.devexpress.com/ticket/details/k18487/.")}}(document)),Qt}function Nt(e,t,n){for(;null!=e;){if("BODY"===e.tagName||"#document"===e.nodeName)return null;if(n(e,t))return e;e=e.parentNode}return null}function Rt(e,t,n){return Nt(e,t,n)}function Lt(e,t){return Nt(e,t,Dt)}function Mt(e,t,n){e&&(e[t]=n)}function kt(e){if(!e)return null;let t=null;if("string"==typeof e){const n=document.querySelector("#"+e);if(n)e=n;else try{const n=JSON.parse(e);n&&n.__internalId&&(t=n.__internalId)}catch(e){}}if(!t&&e.__internalId&&(t=e.__internalId),t){e=document.querySelector("["+("_bl_"+t)+"]")}return e&&e.tagName&&null!==e.parentNode||(e=null),e}function Kt(e,t){e.removeAttribute?e.removeAttribute(t):e.removeProperty&&e.removeProperty(t)}function Ot(e,t,n){n?Mt(e,t,n):Kt(e,t)}function _t(e,t){const n=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(n.marginLeft)+T.DomUtils.pxToInt(n.marginRight)}function Vt(e,t){const n=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(n.marginTop)+T.DomUtils.pxToInt(n.marginBottom)}function zt(e,t){return function(e,t){const n=t||T.DomUtils.getCurrentStyle(e);return parseInt(n.paddingLeft)+parseInt(n.paddingRight)}(e,t)+$t(e,t)}function Wt(e,t){return function(e,t){const n=t||T.DomUtils.getCurrentStyle(e);return parseInt(n.paddingTop)+parseInt(n.paddingBottom)}(e,t)+function(e,t){t||(t=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let n=0;"none"!==t.borderTopStyle&&(n+=parseFloat(t.borderTopWidth));"none"!==t.borderBottomStyle&&(n+=parseFloat(t.borderBottomWidth));return n}(e,t)}function $t(e,t){t||(t=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let n=0;return"none"!==t.borderLeftStyle&&(n+=parseFloat(t.borderLeftWidth)),"none"!==t.borderRightStyle&&(n+=parseFloat(t.borderRightWidth)),n}const Gt=window.requestAnimationFrame||function(e){e()};function qt(e){return Gt(e)}const Yt=function(e){this.requestFrame=e,this.cache=[[]],this.isInFrame=!1,this.frameTimestamp=null,this.isWaiting=!1,this.getBuffer=function(e){return e||(e=0),this.cache.length<=e&&(this.cache[e]=[]),this.cache[e]},this.execute=function(e,t){if(!this.isInFrame)return!1;let n=this.cache[t||0];return null===n?e(Xt,this.frameTimestamp):(n=this.getBuffer(t)).push(e),!0},this.runAll=function(e){this.isWaiting=!1,this.isInFrame=!0,this.frameTimestamp=e;for(let e=0;e<this.cache.length;e++){const t=this.cache[e];if(t)for(this.cache[e]=null;t.length;)t.shift()(Xt,this.frameTimestamp)}this.waitNextFrame()},this.waitNextFrame=function(){this.cache=[[]],this.isInFrame=!1,this.isWaiting=!1},this.requestExecution=function(e,t){const n=this;return new Promise((function(i){function s(t,n){i(e(t,n))}n.execute(s,t)||(n.getBuffer(t).push(s),!1===n.isWaiting&&(n.isWaiting=!0,n.requestFrame(n.runAll.bind(n))))}))}};let Xt=null;function Jt(e){const t=new Yt(e);return t.requestExecution.bind(t)}const jt=Jt((function(e){return Xt=qt(e)})),Zt=Jt((function(e){return jt((function(){setTimeout(e)}))}));function en(e){return jt(e)}function tn(e){return Zt(e)}let nn=[];const sn=50;function rn(e){nn.splice(nn.indexOf(e),1)}function on(e,t){const n=function(e,t,n){return function(){if(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)return!1;const i=T.DomUtils.getCurrentStyle(e);if("auto"===i.width)return!0;const s=Math.ceil(parseFloat(i.width))-zt(e),r=Math.ceil(parseFloat(i.height))-Wt(e);if(n.width!==s||n.height!==r){var o=yt.from(n);n.width=s,n.height=r,t(n,o)}return!0}}(e,t,{width:-1,height:-1});return function(e){0===nn.length?(nn.push(e),tn(an)):nn.push(e)}(n),n}function an(){nn=nn.filter((function(e){return e()})),nn.length>0&&setTimeout((function(){tn(an)}),sn)}function ln(e,t){null===t.inlineStyles?Kt(e,"style"):function(e,t){const n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push({attr:e,value:t[e]});if(1===n.length)e.style[n[0].attr]=n[0].value;else{let i="";if(e.style.cssText){const n=e.style.cssText.split(";").map((function(e){return e.trim().split(":")}));for(let e=0;e<n.length;e++){const s=n[e];2===s.length&&void 0===t[s[0]]&&(i+=s[0]+":"+s[1].trim()+";")}}for(let e=0;e<n.length;e++){const t=n[e];""!==t.value&&(i+=t.attr+":"+t.value+";")}Ot(e,"style",i)}}(e,t.inlineStyles);for(const n in t.attributes)Object.prototype.hasOwnProperty.call(t,n)&&Ot(e,n,t.attributes[n]);const n=Ft(t);if(n){const i=t.cssClassToggleInfo,s=n.filter((function(e){return!1!==i[e]}));for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&i[e]&&-1===s.indexOf(e)&&s.push(e);const r=s.join(" ");r?function(e,t){"svg"===e.tagName?e.className.baseVal=t.trim():e.className=t.trim()}(e,r):Kt(e,"class")}}function An(e,t){if(void 0!==e.length){for(let n=0;n<e.length;n++)An(e[n],t);return}const n=e;n._dxCurrentFrameElementStateInfo?t(n._dxCurrentFrameElementStateInfo):(t(n._dxCurrentFrameElementStateInfo=function(e){return{inlineStyles:{},cssClassToggleInfo:{},className:Tt(e),attributes:{}}}(n)),en((function(){ln(n,n._dxCurrentFrameElementStateInfo),n._dxCurrentFrameElementStateInfo=null})))}function dn(e){An(e,(function(e){e.inlineStyles=null,e.cssClassToggleInfo[pe.InvisibleOffScreen]=!1}))}function cn(e,t,n){An(e,(function(e){e.cssClassToggleInfo[t]=n}))}function hn(e,t){if(!e)return null;if(e.closest)return e.closest(t);do{if((e.matches||e.msMatchesSelector).call(e,t))return e;e=e.parentElement||e.parentNode}while(e&&"BODY"!==e.tagName);return null}function un(){return h.Browser.Edge?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft}function pn(){return h.Browser.WebKitFamily||h.Browser.Edge?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop}function mn(e){return e+"px"}function gn(e){return Boolean(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)}function Cn(e){if(!e.style)return!1;return function(e){return"static"!==e.position||function(e){return!("none"===e.transform&&!e["will-change"].includes("transform"))||(!("none"===e.perspective&&!e["will-change"].includes("perspective"))||(!("none"===e.filter&&!e["will-change"].includes("filter"))||!!e.contain?.includes("paint")))}(e)}(window.getComputedStyle(e))}function fn(e){return"svg"===e.tagName?e.getBoundingClientRect().width:e.offsetWidth}const vn={focusElement:function(e){"string"==typeof e&&(e=document.querySelector(e)),e&&e.focus()},setInputAttribute:function(e,t,n){(e=kt(e))&&Mt(e,t,n)},setCheckInputIndeterminate:function(e,t){e&&(e.indeterminate=t)}};class bn{static isFocusedElement(e){return e===document.activeElement}static scheduleResetTabIndex(e){bn.resetTabIndexAction.cancel(),bn.elementsToResetTabIndex.push(e),bn.resetTabIndexAction.execute((()=>{bn.elementsToResetTabIndex.forEach((e=>bn.removeTabIndex(e))),bn.elementsToResetTabIndex.splice(0)}))}static focusElement(e,t=!1){e&&e.focus({preventScroll:t})}static makeElementFocusable(e){e.tabIndex<0&&!e.hasAttribute("tabIndex")&&Ot(e,"tabIndex","0")}static removeTabIndex(e){e.tabIndex>=0&&Ot(e,"tabIndex")}static findPrevFocusableElement(e){const t=bn.findFocusableElements(document),n=t.findIndex((t=>t===e)),i=n-1;return i>=0?t[i]:null}static findNextFocusableNotChildElement(e){const t=bn.findFocusableElements(document),n=bn.findFocusableElements(e),i=t.findIndex((t=>t===e)),s=i+n.length+1;return s<t.length?t[s]:null}static findFocusableElementInRootPath(e){var t;return null!==(t=[...at.getRootPathAndSelf(e)].find((e=>e.tabIndex>-1||this.isRootWidget(e))))&&void 0!==t?t:null}static isRootWidget(e){return"string"==typeof e.className&&e.className.includes("dxbl-kbn-root-widget")}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter(((e,t,n)=>bn.isElementFocusable(e,n)))}static isElementFocusable(e,t){if(e.tabIndex>-1&&bn.isElementVisible(e)&&!ot.isHidden(e)){const n=e;return"radio"!==(null==n?void 0:n.type)||bn.isRadioButtonFocusable(n,t)}return!1}static isElementVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}static isRadioButtonFocusable(e,t){return!!e.checked||!((t=t.filter((t=>(null==t?void 0:t.name)===e.name))).findIndex((t=>e!==t&&t.checked))>0)&&e===t[0]}static findItemElementIndexByChild(e,t){return e.findIndex((e=>at.containsElement(e,t)))}}function wn(e,t){return function(e,t){const n=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.has(s)){const e=t.get(s);e&&n.push(e)}}return n}([...at.getRootPathAndSelf(e)],t)}function yn(){const e=(621355968e5+(new Date).getTime()).toString()+(t=1,n=1e3,Math.floor(Math.random()*(n-t))+t).toString();var t,n;return parseInt(e)}function Bn(e){const t=e.dataset.disposeId?parseInt(e.dataset.disposeId):-1;t>-1&&(In[t](),delete In[t],delete e.dataset.disposeId),Sn()}function En(e,t){e.dataset.disposeId||(e.dataset.disposeId=function(){let e;do{e=yn()}while(In[e]);return e.toString()}()),In[parseInt(e.dataset.disposeId)]=t,Sn()}bn.elementsToResetTabIndex=[],bn.resetTabIndexAction=new je;const In=[];function Sn(){In.filter((e=>e))}const xn="data-dx-focus-hidden";function Dn(e){e.setAttribute(xn,"")}function Fn(e){e.removeAttribute(xn)}function Tn(e){return null!==e.getAttribute(xn)}function Hn(e){let t=e;function n(e){const n="mousedown"===e.type&&0===e.detail,i=null==t?void 0:t.hasAttribute(xn);n||!t||i||mt.containsElement(t,e.target)&&Dn(t)}function i(e){if(!t)return;const n=e.relatedTarget;n&&!mt.containsElement(t,n)&&document.hasFocus()&&Fn(t)}function s(e){t&&Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&Fn(t)}const r=document.documentElement;return r.addEventListener("touchstart",n),r.addEventListener("mousedown",n),t.addEventListener("keydown",s),t.addEventListener("focusout",i),()=>{r.removeEventListener("touchstart",n),r.removeEventListener("mousedown",n),null==t||t.removeEventListener("keydown",s),null==t||t.removeEventListener("focusout",i),t=null}}function Un(e){if(!e)return;Bn(e);En(e,Hn(e))}function Qn(e){return null!==e&&e.matches(k)}var Pn;!function(e){e[e.MouseDown=0]="MouseDown",e[e.KeyDown=1]="KeyDown",e[e.KeyUp=2]="KeyUp"}(Pn||(Pn={}));function Nn(e){return"getPortal"in e}const Rn=new class{get keyboardEventProcessed(){return this._keyboardEventProcessed}get processingKeyCode(){return this._processingKeyCode}constructor(){this.lastInputMethod=null,this.boundOnKeyDownHandler=this.handleKeyDown.bind(this),this.boundOnKeyUpHandler=this.handleKeyUp.bind(this),this.boundOnMouseDownHandler=this.handleMouseDown.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this.navigators=new Map,this.lockTreeLineActivation=!1,this.leavingToDocument=!1,this._keyboardEventProcessed=!1,this._processingKeyCode=null,setTimeout(this.addEventSubscriptions.bind(this))}register(e){const t=e.targetElement;this.navigators.has(t)||this.navigators.set(t,e)}remove(e){const t=e.targetElement;this.navigators.has(t)&&this.navigators.delete(t)}addFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>e.addFocusHiddenAttribute()))}removeFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>!e.removeFocusHiddenAttribute()))}addEventSubscriptions(){document.addEventListener("keydown",this.boundOnKeyDownHandler,{capture:!0}),document.addEventListener("keyup",this.boundOnKeyUpHandler,{capture:!0}),document.addEventListener("mousedown",this.boundOnMouseDownHandler,{capture:!0}),document.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleKeyDown(e){this.lastInputMethod=Pn.KeyDown,this._processingKeyCode=Ie.KeyUtils.getEventKeyCode(e),this.handleKeyboardEvent(e,((t,n)=>t.onKeyDown(e,n)))}handleKeyUp(e){this.lastInputMethod=Pn.KeyUp,this.handleKeyboardEvent(e,((t,n)=>t.onKeyUp(e,n))),this._processingKeyCode=null}handleKeyboardEvent(e,t){this._keyboardEventProcessed=!0,this.forEachNavigatorInTreeLine(e.target,((n,i,s,r)=>{if(t(n,i)){let t=!0;if(n.leaveDirection!==Mn.None){t=this.leaveFromNavigator(n,s<r.length-1?r[s+1]:null)}return t&&H.markHandled(e,!1),this.removeFocusHiddenAttributes(i),!0}return n.getIsNestedContentSelected(i)}))}handleMouseDown(e){this.lastInputMethod=Pn.MouseDown,this.activateTreeLine(e,!1),function(e){const t=e.target;return!!t&&(t.scrollHeight>t.clientHeight&&e.offsetX>=t.clientWidth||t.scrollWidth>t.clientWidth&&e.offsetY>=t.clientHeight)}(e)||this.updateActiveState(e.target)}handleFocusIn(e){this.leavingToDocument||(this.updateActiveState(e.target),this.activateTreeLine(e,!0),this._keyboardEventProcessed=!1)}getNavigatorsTreeLine(e){return function(e,t){let n=[];do{const i=wn(e,t),s=i[i.length-1];n=n.concat(...i),e=s&&Nn(s)?s.getPortal():null}while(e);return n}(e,this.navigators)}activateTreeLine(e,t){if(this.lockTreeLineActivation)return;this.lockTreeLineActivation=!0;this.activateTreeLineCore(e,e.target,t),this.lockTreeLineActivation=!1}activateTreeLineCore(e,t,n){this.forEachNavigatorInTreeLine(t,((i,s,r)=>{if(i.updateSelectedItems(s,t,e),0!==r)return!1;i.activateStrategyTreeLine(e,t,n,this.lastInputMethod);const o=i.findLastSelectedStrategy();return!(!o||!o.isTransitContainer||Nn(i))&&(this.lockTreeLineActivation=!1,o.switchToNestedContent(),!0)}))}forEachNavigatorInTreeLine(e,t){var n;const i=this.getNavigatorsTreeLine(e);for(let s=0;s<i.length;s++){const r=i[s];if(t(r,e,s,i))break;const o=Nn(r)?r:null;o&&(e=null!==(n=o.getPortal())&&void 0!==n?n:e)}}updateActiveState(e){let t=null;if(null!==(n=e)&&null!==n.closest(k)){const n=wn(e,this.navigators);t=n.length>0?n[0]:null}var n;this.navigators.forEach((e=>{e.isActive=e===t}))}leaveFromNavigator(e,t){const n=e.leaveDirection===Mn.Backward,i=(n?bn.findPrevFocusableElement:bn.findNextFocusableNotChildElement)(e.targetElement),s=e.getSelectedItemElement(),r=null==t?void 0:t.getSelectedItemElement(),o=!s||r&&r.contains(s)?r:null;if(i&&(!o||o.contains(i)&&o!==i))bn.focusElement(i);else{if(!t)return this.leaveToDocument(e,n),!1;t.captureFocus(e.leaveDirection)}return!0}leaveToDocument(e,t){const n=bn.findFocusableElements(e.targetElement),i=t||0===n.length?e.targetElement:n[n.length-1];bn.isFocusedElement(i)||(this.leavingToDocument=!0,bn.focusElement(i,!0),this.leavingToDocument=!1)}},Ln="dxbl-keyboard-navigator";var Mn,kn;!function(e){e[e.None=0]="None",e[e.Backward=1]="Backward",e[e.Forward=2]="Forward"}(Mn||(Mn={})),function(e){e.NearestItem="NearestItem",e.LastActiveItem="LastActiveItem"}(kn||(kn={}));class Kn extends HTMLElement{constructor(){super(),this._isActive=!1,this._initialized=!1,this._leaveDirection=Mn.None,this._owner=null,this._rootStrategy=null,this.unsubscribeFocusHiding=null,this.strategies=new Map,this._componentReactivateMode=kn.LastActiveItem,this._focusedFromForwardElement=!1,this.contentChangedObserver=new MutationObserver(this.onContentChanged.bind(this))}get rootStrategy(){return this._rootStrategy}get isActive(){return this._isActive}set isActive(e){this.updateActiveState(e)}get leaveDirection(){return this._leaveDirection}get initialized(){return this._initialized&&!!this._rootStrategy}get targetElement(){return this.owner}get owner(){return this._owner}get focusedFromForwardElement(){return this._focusedFromForwardElement}get preventScrollOnFocus(){return!Rn.keyboardEventProcessed}attributeChangedCallback(e,t,n){"reactivate-mode"===e&&(this._componentReactivateMode=kn[n])}initialize(e,t,n=null){this._initialized=!1,this._owner=e,this._rootStrategy=t,bn.makeElementFocusable(this.targetElement),this.register(n),this.unsubscribeFocusHiding=Hn(this.targetElement),this.attachStrategy(this._rootStrategy),this._rootStrategy.initialize(),gt.isFocusWithin(this.targetElement)&&this.updateSelectedItems(document.activeElement),this._initialized=!0}reinitialize(){this._initialized=!1,this._rootStrategy&&(this._rootStrategy.initialize(),this.isActive&&this._rootStrategy.activate()),this._initialized=!0}disconnectedCallback(){this.disposeComponent()}disposeComponent(){var e;this.disposeStrategies(),this._rootStrategy=null,this.contentChangedObserver.disconnect(),null===(e=this.unsubscribeFocusHiding)||void 0===e||e.call(this),this.removeFocusHiddenAttribute(),Rn.remove(this)}attachStrategy(e){e&&this.strategies.set(e.targetElement,e)}getStrategy(e){var t;return e&&this.strategies.has(e)&&null!==(t=this.strategies.get(e))&&void 0!==t?t:null}getIsNestedContentSelected(e){const t=this.getStrategiesPath(e).findIndex((e=>e.nestedContentSelected));return t>=0}onKeyDown(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyDown(e)))}onKeyUp(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyUp(e)))}dispatchShortcutEvent(e){const t=this.collectShortcutInfo(e);this.dispatchEvent(new ft(e,t))}captureFocus(e=Mn.None){var t;null===(t=this.findLastSelectedStrategy())||void 0===t||t.captureFocus(e)}leaveFocus(e){this._leaveDirection=e?Mn.Backward:Mn.Forward}leaveFromNavigator(){Rn.leaveFromNavigator(this,null)}leaveTransitContainer(e){var t;const n=null===(t=this.findLastSelectedStrategy())||void 0===t?void 0:t.targetElement;if(!n)return;const i=this.getStrategiesPath(n),s=i.length>1?i[1]:null;null==s||s.handleTransitNavigation(e)}getSelectedItemElement(){var e;return null===(e=this.findLastSelectedStrategy())||void 0===e?void 0:e.selectedItemElement}addFocusHiddenAttribute(){return Dn(this.targetElement),!0}removeFocusHiddenAttribute(){return this.targetElement&&Fn(this.targetElement),!0}passFocusHiddenAttribute(e){Rn.addFocusHiddenAttributes(e)}updateSelectedItems(e,t=e,n=null){const i=this.getStrategiesPath(e);for(let s=0;s<i.length;s++){const r=0===s,o=i[s];o.updateSelectedItemByChildElement(e,n),e===t&&o.canSwitchToNestedContentMode()&&(o.nestedContentSelected=r)}}activateStrategyTreeLine(e,t,n,i){if(n&&this.tryActivateFromPreviousFocusedSibling(e,i))return;const s=this.getStrategiesPath(t);if(0===s.length)return;const r=s[0],o=r===this._rootStrategy;o&&r.activate(),o&&1!==s.length||this.handleSelectedItemFocus(r,t)}tryActivateFromPreviousFocusedSibling(e,t){const n=e.relatedTarget;if(!n||this.targetElement.contains(n))return!1;const i=e.target,s=bn.findPrevFocusableElement(i),r=bn.findNextFocusableNotChildElement(i);if(n!==s&&n!==r)return!1;if(n===r&&(null==s?void 0:s.contains(i))&&t===Pn.MouseDown)return!1;const o=this.getStrategiesPath(i);return 0!==o.length&&(this.updateAndActivateRootStrategy(o[0],n,r),!0)}handleSelectedItemFocus(e,t){var n;let i=e.selectedItemElement===t;if(!i){const s=bn.findFocusableElementInRootPath(t);e.selectedItemElement!==s&&(null===(n=e.selectedItemElement)||void 0===n?void 0:n.contains(s))||(i=!0)}i&&(e.resetNestedContentSelectedRecursive(),e.focusSelectedItem())}updateAndActivateRootStrategy(e,t,n){if(e.resetNestedContentSelectedRecursive(),this._rootStrategy){if(this._focusedFromForwardElement=t===n,this._componentReactivateMode===kn.NearestItem){this._rootStrategy.updateSelectedItemByIndex(t===n?this._rootStrategy.itemCount-1:0)}this._rootStrategy.activate()}}updateActiveState(e){this._isActive!==e&&(this._isActive=e,this.strategies.forEach((t=>t.onActiveStateChanged(e))))}register(e){const t=["disabled"];e&&t.push(e),this.contentChangedObserver.observe(this.targetElement,{childList:!0,subtree:!0,attributeFilter:t}),Rn.register(this)}onContentChanged(){this.detachDisconnectedStrategies(),this.reinitialize()}getStrategiesPath(e){return wn(e,this.strategies)}findLastSelectedStrategy(){var e,t;return null!==(t=null===(e=this._rootStrategy)||void 0===e?void 0:e.findLastSelectedStrategy())&&void 0!==t?t:null}handleKeyboardEvent(e,t){this._leaveDirection=Mn.None;const n=this.getStrategiesPath(e);for(let e=0;e<n.length;e++){const i=n[e];if(t(i))return!0;if(i.nestedContentSelected)return!1}return!1}detachDisconnectedStrategies(){var e;const t=Array.from(this.strategies.keys()).filter((e=>!e.isConnected));for(const n of t)null===(e=this.strategies.get(n))||void 0===e||e.onDispose(),this.strategies.delete(n)}disposeStrategies(){this.strategies.forEach((e=>e.onDispose()))}collectShortcutInfo(e){const t=this.getStrategiesPath(e.target).map((e=>e.getShortcutContext()));return Object.assign({},...t)}}customElements.define(Ln,Kn);class On{constructor(e,t,n=!1){this._isTransitContainer=!1,this._nestedContentSelected=!1,this._selectedItemIndex=0,this._savedSelectedItemElement=null,this._leaveDirection=Mn.None,this._navigator=e,this._targetElement=t,this._items=[],this._isTransitContainer=n,this._isMacOSPlatform=$().isMac}get navigator(){return this._navigator}get targetElement(){return this._targetElement}get itemCount(){return this.items.length}get selectedItemElement(){return this.items[this.selectedItemIndex]}get nestedContentSelected(){return this._nestedContentSelected}set nestedContentSelected(e){this._nestedContentSelected=e&&this.canFocusSelectedItem()}get preventScrollOnFocus(){return this._navigator.preventScrollOnFocus}get selectedItemIndex(){return this._selectedItemIndex}set selectedItemIndex(e){this._selectedItemIndex=e}get isTransitContainer(){return this._isTransitContainer}get leaveDirection(){return this._leaveDirection}get items(){return this._items}get firstItemSelected(){return 0===this.selectedItemIndex}get lastItemSelected(){return this.selectedItemIndex===this.itemCount-1}get isObsolete(){return!1}get isMacOSPlatform(){return this._isMacOSPlatform}getShortcutContext(){return{}}initialize(){this.storeSelection(),this.items.splice(0);const e=this.queryItems().filter((e=>!!e));0===e.length&&e.push(this.targetElement),e.forEach((e=>this.initializeItemStrategy(e))),this.tryRestoreSelection()}activate(){this.selectItem(this.selectedItemIndex)}onDispose(){var e;(null===(e=this.selectedItemElement)||void 0===e?void 0:e.isConnected)&&bn.removeTabIndex(this.selectedItemElement)}getItem(e){return this.items[e]}getSelectedItemStrategy(){return this.navigator.getStrategy(this.selectedItemElement)}focusSelectedItem(){this.canFocusSelectedItem()&&(!this.preventScrollOnFocus&&this.selectedItemElement&&this.selectedItemElement.scrollIntoView({block:"nearest"}),bn.focusElement(this.selectedItemElement,this.preventScrollOnFocus))}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(t===Ie.KeyCode.Esc)return this.processEscapeKeyDown();if(t===Ie.KeyCode.Tab)return this.processTabKeyDown(e.shiftKey);this.isImmediatelyClickEnabled()&&this.hasSingleFocusableElement()&&this.leaveFromNestedContent()}return!this.nestedContentSelected&&t===Ie.KeyCode.Enter&&this.processEnter(e)}handleKeyUp(e){return!1}switchToNestedContent(){if(this.nestedContentSelected&&this.isNestedElementFocused())return!0;if(this.selectedItemElement){const e=this.getNestedContentElement();if(e)return this.nestedContentSelected=!0,bn.focusElement(e,this.preventScrollOnFocus),!0}return!1}leaveFromNestedContent(e=Mn.None){this.nestedContentSelected=!1,this.isTransitContainer?(this._leaveDirection=e,this.navigator.isActive=!0,this.leaveDirection!==Mn.None&&this.leaveTransitContainer(this.leaveDirection),this._leaveDirection=Mn.None):this.focusSelectedItem()}resetNestedContentSelectedRecursive(){this.nestedContentSelected=!1;if(!(this.targetElement===this.selectedItemElement)){const e=this.getSelectedItemStrategy();null==e||e.resetNestedContentSelectedRecursive()}}captureFocus(e=Mn.None){this.nestedContentSelected&&this.leaveFromNestedContent(e)}findLastSelectedStrategy(){const e=this.getSelectedItemStrategy();return e&&e!==this?e.findLastSelectedStrategy():this}updateSelectedItemByIndex(e){const t=this.selectedItemElement;this.selectedItemIndex=this.validateItemIndex(e),t&&this.selectedItemElement!==t&&(bn.scheduleResetTabIndex(t),this.nestedContentSelected=!1),this.selectedItemElement&&this.canFocusSelectedItem()&&bn.makeElementFocusable(this.selectedItemElement)}updateSelectedItemByChildElement(e,t=null){const n=this.findItemElementIndexByChild(e);(n>-1||e===this.targetElement)&&this.updateSelectedItemByIndex(n)}canSwitchToNestedContentMode(){return!1}onActiveStateChanged(e){}handleTransitNavigation(e){const t=e===Mn.Backward,n=t?this.moveToPrevItem:this.moveToNextItem;(t?this.firstItemSelected:this.lastItemSelected)?((t?this.leaveBackward:this.leaveForward).call(this),this.navigator.leaveFromNavigator()):n.call(this)}leaveTransitContainer(e){this.navigator.leaveTransitContainer(e)}createItemStrategy(e){return null}getItemStrategy(e){const t=this.validateItemIndex(e);return this.navigator.getStrategy(this.getItem(t))}queryItems(){return new Array}queryItemsBySelector(e){return Array.from(this.targetElement.querySelectorAll(e))}selectItem(e){var t;this.updateSelectedItemByIndex(e),this.canFocusSelectedItem()?this.navigator.isActive&&!this.isNestedElementFocused()&&this.focusSelectedItem():null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate()}moveToPrevItem(e=!1){this.selectedItemIndex>0?this.selectItem(this.selectedItemIndex-1):e&&this.selectItem(this.itemCount-1)}moveToNextItem(e=!1){this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&this.selectItem(0)}moveToFirstItem(){this.selectItem(0)}moveToLastItem(){this.selectItem(this.itemCount-1)}isImmediatelyClickEnabled(){return!1}raiseClickEvent(e,t,n,i){const s=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:t,metaKey:n,shiftKey:i});e.dispatchEvent(s)}performShortcutEvent(e){this.navigator.dispatchShortcutEvent(e)}validateItemIndex(e){return e=Math.max(e,0),Math.min(e,this.itemCount-1)}leaveBackward(){this.navigator.leaveFocus(!0)}leaveForward(){this.navigator.leaveFocus(!1)}getNestedContentContainer(){return this.selectedItemElement}getNestedContentElement(){const e=this.findFocusableElements();return e.length>0?e[0]:null}findItemElementIndexByChild(e){return bn.findItemElementIndexByChild(this.items,e)}tryRestoreSelectedItem(e){if(e.isConnected){const t=this.items.indexOf(e);t>-1&&(this.selectedItemIndex=t)}}initializeItemStrategy(e){this.items.push(e);let t=this.navigator.getStrategy(e);t&&!t.isObsolete||(null==t||t.onDispose(),t=this.createItemStrategy(e),this.navigator.attachStrategy(t)),t&&t!==this&&t.initialize()}canFocusSelectedItem(){return this.targetElement===this.selectedItemElement||!this.getSelectedItemStrategy()}processEnter(e){return!(!this.isImmediatelyClickEnabled()||!this.processImmediatellyClick(e))||this.switchToNestedContent()}processEscapeKeyDown(){return this.leaveFromNestedContent(Mn.None),!0}processTabKeyDown(e){if(this.selectedItemElement){const t=this.findFocusableElements();if(t.length>0){const n=bn.isFocusedElement(t[0]),i=bn.isFocusedElement(t[t.length-1]);let s=null;if(e&&n&&(s=Mn.Backward),!e&&i&&(s=Mn.Forward),s)return this.leaveFromNestedContent(s),!0}}return!1}findFocusableElements(){return bn.findFocusableElements(this.getNestedContentContainer())}processImmediatellyClick(e){const t=this.getNestedContentElement();return!(!t||!this.hasSingleFocusableElement())&&(this.raiseClickEvent(t,e.ctrlKey,e.metaKey,e.shiftKey),!0)}hasSingleFocusableElement(){return 1===this.findFocusableElements().length}isNestedElementFocused(){if(!document.activeElement||!this.nestedContentSelected)return!1;return bn.findItemElementIndexByChild(this.items,document.activeElement)===this.selectedItemIndex}storeSelection(){this._savedSelectedItemElement=this.selectedItemElement}tryRestoreSelection(){return!!this._savedSelectedItemElement&&(this.tryRestoreSelectedItem(this._savedSelectedItemElement),this._savedSelectedItemElement=null,!0)}}class _n{get x(){return this._x}get y(){return this._y}get source(){return this._source}constructor(e,t,n){this._source=n,this._y=t,this._x=e}}class Vn extends _n{get deltaX(){return this.deltaXField}get deltaY(){return this.deltaYField}constructor(e,t,n,i,s){super(n,i,s),this.deltaXField=e,this.deltaYField=t}}class zn extends CustomEvent{constructor(e,t){super(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0})}}class Wn extends zn{constructor(e){super(Wn.eventName,e)}}Wn.eventName="dxthumbdragstarted";class $n extends zn{constructor(e){super($n.eventName,e)}}$n.eventName="dxthumbdragdelta";class Gn extends zn{constructor(e){super(Gn.eventName,e)}}Gn.eventName="dxthumbdragcompleted";class qn{constructor(e){this.outsideClickHandler=this.handleOutsideClick.bind(this),this.thumbElement=e}preventOutsideClick(e){h.Browser.Firefox&&0===e.button&&document.addEventListener("click",this.outsideClickHandler,{capture:!0,once:!0})}cancelOutsideClickPrevention(){document.removeEventListener("click",this.outsideClickHandler,{capture:!0})}handleOutsideClick(e){document.elementFromPoint(e.clientX,e.clientY)!==this.thumbElement&&H.markHandled(e)}}class Yn extends HTMLElement{constructor(){super(...arguments),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.pointerLostCaptureHandler=this.lostPointerCapture.bind(this),this.pointerGotCaptureHandler=this.pointerGotCapture.bind(this),this.pointerMoveHandler=this.pointerMove.bind(this),this.pointerCancelHandler=this.pointerCancel.bind(this),this.touchStartHandler=this.touchStart.bind(this),this.visibilityChangeHandler=this.handleVisibilityChange.bind(this),this._isDragging=!1,this._isCaptured=!1,this.capturedPointer=null,this.previousPoint=new et(0,0),this.firefoxOutsideClickHandler=new qn(this)}connectedCallback(){i.setLoaded(this),this.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),this.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),this.addEventListener("lostpointercapture",this.pointerLostCaptureHandler,{capture:!0}),this.addEventListener("gotpointercapture",this.pointerGotCaptureHandler,{capture:!0}),this.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),this.addEventListener("pointercancel",this.pointerCancelHandler,{capture:!0}),this.addEventListener("touchstart",this.touchStartHandler,{capture:!0,passive:!1}),document.addEventListener("visibilitychange",this.visibilityChangeHandler)}disconnectedCallback(){i.removeLoaded(this),this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("pointerup",this.pointerUpHandler),this.removeEventListener("lostpointercapture",this.pointerLostCaptureHandler),this.removeEventListener("gotpointercapture",this.pointerGotCaptureHandler),this.removeEventListener("pointermove",this.pointerMoveHandler),this.removeEventListener("pointercancel",this.pointerCancelHandler),this.removeEventListener("touchstart",this.touchStartHandler),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.firefoxOutsideClickHandler.cancelOutsideClickPrevention()}get isDragging(){return this._isDragging}get isCaptured(){return this._isCaptured}cancelDrag(e=null){if(this.isDragging){this._isDragging=!1,e?this.releaseCapture(e.pointerId):this.capturedPointer&&this.releaseCapture(this.capturedPointer),i.removeAttribute(this,Yn.dragging);const t=e?new et(e.pageX,e.pageY):this.previousPoint,n=new Gn(new _n(t.x,t.y,e));this.dispatchEvent(n)}}markHandled(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}handleVisibilityChange(e){this.isDragging&&"visible"!==document.visibilityState&&this.cancelDrag()}touchStart(e){this.isDragging&&e.cancelable&&e.preventDefault()}pointerGotCapture(e){if(e.target===this)return;if(!this.isDragging)return;const t=e.target;null==t||t.releasePointerCapture(e.pointerId),this._isCaptured=!1,this.pointerCapture(e)}pointerCancel(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerCapture(e){this._isCaptured||(this.setPointerCapture(e.pointerId),this._isCaptured=!0,this.capturedPointer=e.pointerId)}releaseCapture(e){this._isCaptured&&(this.releasePointerCapture(e),this._isCaptured=!1,this.capturedPointer=null)}handlePointerDown(e){if(this.isDragging)return;const t=e.target;(null==t?void 0:t.hasPointerCapture(e.pointerId))&&t.releasePointerCapture(e.pointerId),i.setAttribute(this,Yn.dragging),H.markHandled(e),this.focus(),this.pointerCapture(e),this._isDragging=!0,this.previousPoint=new et(e.pageX,e.pageY);const n=new Wn(new _n(e.pageX,e.pageY,e));this.dispatchEvent(n),this.firefoxOutsideClickHandler.preventOutsideClick(e)}handlePointerUp(e){this.isDragging&&this.isCaptured&&(H.markHandled(e),this.cancelDrag(e))}lostPointerCapture(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerMove(e){this.isDragging&&e.isPrimary&&this.processMove(e)}processMove(e){const t=new et(e.pageX,e.pageY);if(!tt.areClose(t,this.previousPoint)){H.markHandled(e);const n=new $n(new Vn(t.x-this.previousPoint.x,t.y-this.previousPoint.y,e.pageX,e.pageY,e));this.dispatchEvent(n),this.previousPoint=t}}}Yn.dragging="dragging",customElements.define("dxbl-thumb",Yn);const Xn="data-virtual-item-index",Jn="dxbl-top-virtual-spacer-element",jn="dxbl-bottom-virtual-spacer-element",Zn="dxbl-skeleton-with-variants-data-type";class ei extends CustomEvent{constructor(e){super(ei.eventName,{detail:new ti(e),bubbles:!0,composed:!0,cancelable:!0})}}ei.eventName="dxbl-virtual-scroll-viewer.scroll";class ti{constructor(e){this.Position=e}}class ni extends CustomEvent{constructor(e){super(ni.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}ni.eventName="dxbl-virtual-scroll-viewer.scrollparamschanged";class ii{constructor(e,t,n,i,s,r,o){this.AverageHeight=e,this.Heights=t,this.ViewportHeight=n,this.ContentHeightConstraint=i,this.SkeletonHeight=s,this.HeaderElementHeight=r,this.FooterElementHeight=o}equals(e){return!!e&&(e.AverageHeight===this.AverageHeight&&(e.ViewportHeight===this.ViewportHeight&&(e.ContentHeightConstraint===this.ContentHeightConstraint&&(!!this.sequenceEquals(e.Heights,this.Heights)&&e.SkeletonHeight===this.SkeletonHeight))))}sequenceEquals(e,t){if(!e)return!1;if(!t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}class si extends CustomEvent{constructor(e,t,n){super(si.eventName,{detail:new ri(e,t,n),bubbles:!0,composed:!0,cancelable:!0})}}si.eventName="dxbl-virtual-scroll-viewer.intersectioncallback";class ri{constructor(e,t,n){this.Position=e,this.SpacerHeight=t,this.RenderStateHashCode=n}}Ct.register(ei.eventName,(e=>e.detail)),Ct.register(ni.eventName,(e=>e.detail)),Ct.register(si.eventName,(e=>e.detail));class oi extends _e{constructor(){super(),this.skeletonScrollContainers=new Set,this.positionUpdateLocked=!1,this._rootMargin="0px",this._renderStateHashCode=-1,this._scrollTop=-1,this._viewportHeight=0,this._isThumbDragging=!1,this._averageItemHeight=-1,this._contentHeightConstraint=-1,this._thumbMoveTimerId=-1,this._scrollParams=null,this._renderTypeChanged=!1,this._requireInitialize=!1,this._totalItemCount=0,this._skeletonViewportItemsCount=0,this._skeletonPatternContainerClasses=null,this._skeletonHeight=0,this._headerElementHeight=0,this._footerElementHeight=0,this._lastExpectedTopVisibleIndex=0,this.pendingMakeElementVisibleParams=null,this.boundOnThumbMoveStarted=this.onThumbMoveStarted.bind(this),this.boundOnThumbMove=this.onThumbMove.bind(this),this.boundOnThumbMoveCompleted=this.onThumbMoveCompleted.bind(this),this.visibleElementMutationObserver=new MutationObserver(this.visibleElementMutationCallback.bind(this))}initializeComponent(){super.initializeComponent(),this.subscribeScrollBarEvents(),this.initialize()&&this.dispatchScrollParams()}disposeComponent(){var e,t,n;super.disposeComponent(),this.unsubscribeScrollBarEvents(),this.reset(),null===(e=this.spacerIntersectionObserver)||void 0===e||e.disconnect(),null===(t=this.spacerResizeObserver)||void 0===t||t.disconnect(),null===(n=this.contentContainerResizeObserver)||void 0===n||n.disconnect(),this.visibleElementMutationObserver.disconnect()}initialize(){if(this.contentContainer=this.getContentContainerElement(),this.itemsContainer=this.getItemsContainerElement(),this.spacerTop=this.getTopSpacer(),this.spacerBottom=this.getBottomSpacer(),this._headerElementHeight=0,this._footerElementHeight=0,this._averageItemHeight=-1,this.updateHeaderElementHeight(),this.updateFooterElementHeight(),this.contentContainer&&this.spacerTop&&this.spacerBottom){this._viewportHeight=this.contentContainer.getBoundingClientRect().height,this.contentContainerResizeObserver&&(this.contentContainerResizeObserver.disconnect(),this.contentContainerResizeObserver=void 0),this.contentContainerResizeObserver=this.createContentContainerResizeObserver(this.contentContainer),this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.disconnect(),this.spacerIntersectionObserver=void 0);const e={root:this.contentContainer,rootMargin:this._rootMargin};return this.spacerIntersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),e),this.spacerIntersectionObserver.observe(this.spacerTop),this.spacerIntersectionObserver.observe(this.spacerBottom),this.spacerResizeObserver&&(this.spacerResizeObserver.disconnect(),this.spacerResizeObserver=void 0),this.spacerResizeObserver=new ResizeObserver(this.resizeObserverCallback.bind(this)),this.spacerResizeObserver.observe(this.spacerTop),this.spacerResizeObserver.observe(this.spacerBottom),!0}return!1}get averageHeight(){return this._averageItemHeight}get skeletonHeight(){return this._skeletonHeight}get viewportHeight(){return this._viewportHeight}get totalItemCount(){return this._totalItemCount}getItemsContainerElement(){return this.querySelector("[data-virtual-items-container]")}getTopSpacer(){return this.querySelector(`[${Jn}]`)}getBottomSpacer(){return this.querySelector(`[${jn}]`)}findContentHeightConstraint(){if(this._contentHeightConstraint<0){const e=document.createElement("div");e.setAttribute("style","overflow: auto; height: 0; visibility: hidden;");const t=document.createElement("div");t.setAttribute("style","position: relative;"),e.appendChild(t),document.body.appendChild(e),this._contentHeightConstraint=this.findElementMaximumHeight(t)/2,document.body.removeChild(e)}return this._contentHeightConstraint}queryElementsSizeArray(){const e=new Array;if(this.itemsContainer){let t=0;const n=this.groupElements(this.itemsContainer.children);let i=0,s=0;for(const[r,o]of n){let a=0;for(let e=0;e<o.length;e++)a+=this.queryElementHeight(o[e]);e.push(r),e.push(a),0!==i&&i!==n.size-1&&(t+=a,s++),i++}this._averageItemHeight<0&&s>0&&t>0&&(this._averageItemHeight=oi.roundHeight(t/s))}return e}queryElementHeight(e){if(!e)return 0;const t=e.getBoundingClientRect().height;return oi.roundHeight(t)}findElementMaximumHeight(e){let t=1e6;const n=h.Browser.Firefox?8e6:Number.MAX_VALUE;for(;;){const i=2*t;e.style.height=`${i}px`;const s=e.getBoundingClientRect().height;if(i>n||s!==i)break;t=i}return t}groupElements(e){const t=new Map;let n=[];for(let i=0;i<e.length;i++){const s=e[i],r=s.getAttribute(Xn);this.skipElement(r)||(r&&(n=[],t.set(parseInt(r),n)),n&&n.push(s))}return t}canDispatchPositionUpdate(){return!this._isThumbDragging&&!this.positionUpdateLocked}skipElement(e){return!!e&&parseInt(e)<0}clearSelection(){if(null!==document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName))return;const e=window.getSelection?window.getSelection():document.getSelection();e&&e.rangeCount>0&&!e.isCollapsed&&e.collapseToStart()}onRefresh(e,t){super.onRefresh(e,t);const n=Math.ceil(e);Math.abs(this._scrollTop-n)>1&&(this.dispatchScrollEvent(n),this._scrollTop=n,this.clearSelection(),this.shiftSkeletonContainers())}intersectionCallback(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.isIntersecting&&this.canDispatchPositionUpdate()){if(n.target===this.spacerTop){this.dispatchEvent(new si(0,n.intersectionRect.top-n.boundingClientRect.top,this._renderStateHashCode)),this.clearSelection()}if(n.target===this.spacerBottom){this.dispatchEvent(new si(1,n.boundingClientRect.bottom-n.intersectionRect.bottom,this._renderStateHashCode)),this.clearSelection()}}}}resizeObserverCallback(e){for(let t=0;t<e.length;t++){const n=e[t].target;n.hasAttribute(Jn)&&this.reconnectIntersectionObserver(this.spacerTop),n.hasAttribute(jn)&&this.reconnectIntersectionObserver(this.spacerBottom)}}reconnectIntersectionObserver(e){e&&this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.unobserve(e),this.spacerIntersectionObserver.observe(e))}reconnectSpacerContentIntersectionObserver(){if(this._spacerContentIntersectionObserver&&(this._spacerContentIntersectionObserver.disconnect(),this._spacerContentIntersectionObserver=void 0,this.skeletonScrollContainers=new Set),!this.contentContainer||!this.itemsContainer)return;const e=this.itemsContainer.getBoundingClientRect().width,t=Math.max(0,this._skeletonHeight-this._headerElementHeight)+1,n=Math.max(0,this._skeletonViewportItemsCount*this._skeletonHeight+this._headerElementHeight-this._viewportHeight)+1,i={root:this.contentContainer,rootMargin:`${t}px ${e}px ${n}px ${e}px`,threshold:.999};this._spacerContentIntersectionObserver=new IntersectionObserver(this.intersectionSkeletonsCallback.bind(this),i),this.observeSkeletonContainers(this.spacerTop),this.observeSkeletonContainers(this.spacerBottom)}observeSkeletonContainers(e){if(e&&this._spacerContentIntersectionObserver){const t=e.querySelectorAll("[dxbl-skeleton-items-container]");for(const e of t)this._spacerContentIntersectionObserver.observe(e)}}lockSpacersIntersection(){this.positionUpdateLocked=!0}unlockSpacersIntersection(){this.positionUpdateLocked=!1,this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}reconnectHeaderResizeObserver(){super.reconnectHeaderResizeObserver(),setTimeout((()=>this.updateHeaderElementHeight()))}reconnectFooterResizeObserver(){super.reconnectFooterResizeObserver(),setTimeout((()=>this.updateFooterElementHeight()))}scheduleMakeElementVisible(e,t,n){this.lockSpacersIntersection(),super.scheduleMakeElementVisible(e,t,n)}makeElementVisible(e,t,n){super.makeElementVisible(e,t,n),this.unlockSpacersIntersection()}makeUnrenderedElementVisible(e,t,n){super.makeUnrenderedElementVisible(e,t,n),this.pendingMakeElementVisibleParams={elementSelector:e,alignVert:t,alignHor:n}}createContentContainerResizeObserver(e){const t=new ResizeObserver((e=>{this._viewportHeight=e[0].contentRect.height,this.dispatchScrollParams(),this.dispatchScrollEvent(this._scrollTop)}));return t.observe(e),t}subscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.subscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}unsubscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.unsubscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}subscribeThumbEvents(e,t,n,i){e.addEventListener(Wn.eventName,t),e.addEventListener($n.eventName,n),e.addEventListener(Gn.eventName,i)}unsubscribeThumbEvents(e,t,n,i){e.removeEventListener(Wn.eventName,t),e.removeEventListener($n.eventName,n),e.removeEventListener(Gn.eventName,i)}onThumbMoveStarted(e){this._isThumbDragging=!0}onThumbMove(e){-1!==this._thumbMoveTimerId&&clearTimeout(this._thumbMoveTimerId);this._thumbMoveTimerId=setTimeout((()=>{this.dispatchPositionUpdate()}).bind(this),700),this._isThumbDragging=!0}onThumbMoveCompleted(e){this.dispatchPositionUpdate()}dispatchPositionUpdate(){this._isThumbDragging=!1,clearTimeout(this._thumbMoveTimerId),this._thumbMoveTimerId=-1,this.dispatchScrollEvent(this._scrollTop),this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}dispatchScrollEvent(e){this.canDispatchPositionUpdate()&&this.dispatchEvent(new ei(e))}dispatchScrollParams(){const e=this.queryElementsSizeArray(),t=this.findContentHeightConstraint(),n=new ii(this._averageItemHeight,e,this._viewportHeight,t,this._skeletonHeight,this._headerElementHeight,this._footerElementHeight);n.equals(this._scrollParams)||(this._scrollParams=n,this.dispatchEvent(new ni(this._scrollParams)))}onStateChanged(e){e&&(this._renderTypeChanged&&(this._requireInitialize&&this.initialize(),this.calculateSkeletonHeight(),this._renderTypeChanged=!1),this.reconnectSpacerContentIntersectionObserver(),this.rerunSkeletonAnimation(),this.dispatchScrollParams())}rerunSkeletonAnimation(){this.classList.remove(pe.SkeletonAnimateClassName),setTimeout((()=>this.classList.add(pe.SkeletonAnimateClassName)))}onRenderStateChanged(e){e&&(this._renderStateHashCode=parseInt(e))}reset(){this._scrollParams=null}calculateSkeletonHeight(){if(!this._skeletonPatternContainerClasses)return;const e=document.createElement("div");e.innerHTML="&nbsp;";const t=document.createElement("div");t.appendChild(e);const n=document.createElement("div");n.setAttribute("class",`${pe.VirtualSpacerPatternClassName} ${this._skeletonPatternContainerClasses}`),n.appendChild(t),document.body.appendChild(n),this._skeletonHeight=oi.roundHeight(t.getBoundingClientRect().height),document.body.removeChild(n)}updateSkeletonClasses(e,t){if(e.children.length>0){const n=t-this.getSkeletonItemIndex(e.children[0]);for(const t of e.children){const e=this.getSkeletonItemIndex(t)+n,i=t.querySelectorAll(`[${Zn}]`);for(const t of i){const n=t.getAttribute(Zn);t.setAttribute("class",`${pe.SkeletonBaseClassName}-${n}-${e%5}`)}}}}shiftSkeletonContainers(){if(!this.itemsContainer)return;const e=this._scrollTop,t=this._headerElementHeight-e%this._skeletonHeight;let n=Math.floor(e/this._skeletonHeight);const i=Math.min(this._totalItemCount-this._skeletonViewportItemsCount,this._totalItemCount-1);this._averageItemHeight===this._skeletonHeight&&i>0&&(n=Math.min(n,i));for(const e of this.skeletonScrollContainers)e.setAttribute("style",`top: ${t}px`),this._lastExpectedTopVisibleIndex!==n&&this.updateSkeletonClasses(e,n);this._lastExpectedTopVisibleIndex=n}getSkeletonItemIndex(e){if(e){const t=e.getAttribute(Xn);if(t)return parseInt(t)}return-1}updateHeaderElementHeight(){this.headerElementRectangle=this.getElementsRectangle(this.getHeaderElements()),this.headerElementRectangle&&(this._headerElementHeight=oi.roundHeight(this.headerElementRectangle.height))}updateFooterElementHeight(){this.footerElementRectangle=this.getElementsRectangle(this.getFooterElements()),this.footerElementRectangle&&(this._footerElementHeight=oi.roundHeight(this.footerElementRectangle.height))}intersectionSkeletonsCallback(e){for(const t of e)t.isIntersecting?this.skeletonScrollContainers.add(t.target):this.skeletonScrollContainers.delete(t.target)}static roundHeight(e){return isNaN(e)?0:parseFloat(e.toFixed(2))}onSkeletonPatternContainerClassesChanged(e){this._requireInitialize=null!==this._skeletonPatternContainerClasses,this._skeletonPatternContainerClasses!==e&&(this._skeletonPatternContainerClasses=e,this._renderTypeChanged=!0)}onSkeletonViewportItemsCountChanged(e){this._requireInitialize=0!==this._skeletonViewportItemsCount;const t=parseInt(e);this._skeletonViewportItemsCount!==t&&(this._skeletonViewportItemsCount=t,this._renderTypeChanged=!0)}reconnectVisibleElementMutationObserver(){this.visibleElementMutationObserver.disconnect(),this.visibleElementMutationObserver.observe(this,{attributes:!0,attributeFilter:["data-required-visible-element"],attributeOldValue:!0,subtree:!0})}cancelRequestMakeElementVisible(){super.cancelRequestMakeElementVisible(),this.visibleElementMutationObserver.disconnect()}execRequestMakeElementVisible(e,t,n){this.reconnectVisibleElementMutationObserver(),super.execRequestMakeElementVisible(e,t,n)}visibleElementMutationCallback(e,t){if(this.pendingMakeElementVisibleParams){for(const t of e)if(t.attributeName&&t.target){const e=t.target.getAttribute(t.attributeName);if(e){const t=this.pendingMakeElementVisibleParams.elementSelector,n=this.pendingMakeElementVisibleParams.alignVert,i=this.pendingMakeElementVisibleParams.alignHor;if(t&&-1!==t.indexOf(e)){this.makeElementVisible(t,n,i);break}}}this.pendingMakeElementVisibleParams=null}}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","state-has-changed","render-state-changed","header-selector","footer-selector","left-selector","right-selector","skeleton-pattern-container-classes","total-item-count","skeleton-viewport-items-count"]}attributeChangedCallback(e,t,n){switch(super.attributeChangedCallback(e,t,n),e){case"state-has-changed":setTimeout((()=>this.onStateChanged(n)));break;case"render-state-changed":this.onRenderStateChanged(n);break;case"total-item-count":this._totalItemCount=parseInt(n);break;case"skeleton-pattern-container-classes":this.onSkeletonPatternContainerClassesChanged(n);break;case"skeleton-viewport-items-count":this.onSkeletonViewportItemsCountChanged(n)}}}customElements.define("dxbl-virtual-scroll-viewer",oi);class ai{}ai.VisibleIndexName="data-visible-index",ai.SummaryItem=me.ClassName+"-summary-item",ai.EditCell="data-edit-cell",ai.FocusedRowHidden="dxbl-grid-focused-row-hidden";const li=pe.Prefix+"-pager-page-size-selector";class Ai extends HTMLElement{connectedCallback(){i.setLoaded(this)}disconnectedCallback(){i.removeLoaded(this)}}var di;customElements.define("dxbl-pager",Ai),function(e){e[e.Indeterminate=0]="Indeterminate",e[e.Checked=1]="Checked",e[e.Unchecked=2]="Unchecked"}(di||(di={}));const ci="dxbl-check";var hi,ui;!function(e){e.checkState="check-state",e.allowIndeterminateStateByClick="allow-indeterminate-state-by-click",e.isReadOnly="is-read-only"}(hi||(hi={}));customElements.define(ci,class extends he{constructor(){super(...arguments),this._checkState=di.Unchecked,this._allowIndeterminateStateByClick=!1,this._isReadOnly=!1,this.boundOnInputChangeHandler=this.onInputChange.bind(this),this.boundOnInputClickHandler=this.onInputClick.bind(this)}get checkState(){return this._checkState}set checkState(e){this._checkState=e,this.applyCheckStateToInputElement()}get allowIndeterminateStateByClick(){return this._allowIndeterminateStateByClick}set allowIndeterminateStateByClick(e){this._allowIndeterminateStateByClick=e}get isReadOnly(){return this._isReadOnly}set isReadOnly(e){this._isReadOnly=e}initializeComponent(){super.initializeComponent(),this.getInputElement().addEventListener("change",this.boundOnInputChangeHandler),this.getInputElement().addEventListener("click",this.boundOnInputClickHandler)}disposeComponent(){var e,t;null===(e=this.getInputElement())||void 0===e||e.removeEventListener("change",this.boundOnInputChangeHandler),null===(t=this.getInputElement())||void 0===t||t.removeEventListener("click",this.boundOnInputClickHandler),super.disposeComponent()}getInputElement(){return this.querySelector("input")}get value(){return this.checkState===di.Indeterminate?"":Boolean(this.checkState===di.Checked).toString()}getNextCheckState(){let e=this.checkState+1;return e>di.Unchecked&&(e=this.allowIndeterminateStateByClick?di.Indeterminate:di.Checked),e}onInputChange(e){this.isReadOnly?e.stopImmediatePropagation():(this.checkState=this.getNextCheckState(),this.applyCheckStateToInputElement(),this.dispatchEvent(new Event("change",{bubbles:!0})))}onInputClick(e){this.isReadOnly&&e.preventDefault()}applyCheckStateToInputElement(){const e=this.getInputElement();e&&(e.indeterminate=this.checkState===di.Indeterminate,e.checked=this.checkState===di.Checked)}static get observedAttributes(){return[hi.checkState,hi.allowIndeterminateStateByClick,hi.isReadOnly]}attributeChangedCallback(e,t,n){switch(e){case hi.checkState:this.checkState=Number(n);break;case hi.allowIndeterminateStateByClick:this.allowIndeterminateStateByClick=null!==n;break;case hi.isReadOnly:this.isReadOnly=null!==n}}}),function(e){e.Modal="modal",e.DropDown="dropdown",e.Flyout="flyout",e.Window="window",e.Root="root",e.DragHint="draghint"}(ui||(ui={}));class pi{get type(){return this._type}get children(){return Array.from(this._children)}get hasChildren(){return this._children.size>0}get id(){return this._id}constructor(e,t,n){this._children=new Set,this._id=e,this._parentId=t,this._type=n}add(e){this._children.add(e)}remove(e){this._children.delete(e)}}class mi{constructor(){this.idToNode=new Map,this.idToParentId=new Map,this.idToNode.set(mi.root,new pi(mi.root,mi.root,ui.Root))}add(e,t,n){const i=new pi(e,t=null!=t?t:mi.root,n);this.idToParentId.set(e,t),this.idToNode.set(e,i);this.idToNode.get(t).add(i)}remove(e){if(!this.idToNode.has(e))return;const t=this.idToParentId.get(e),n=this.idToNode.get(t),i=this.idToNode.get(e);this.idToParentId.delete(e),this.idToNode.delete(e),n.remove(i)}getParentId(e){return this.idToParentId.get(e)}getBranchNode(e){var t;return null!==(t=this.idToNode.get(e))&&void 0!==t?t:null}findRoot(e){let t=e;for(;;){const e=this.idToParentId.get(t);if(e===mi.root)return t;t=e}}}mi.baseIndex=1050,mi.root="";class gi{get type(){return this.branchNode.type}get index(){return this._index}set index(e){this._index=e}get children(){return this._children}get hasChildren(){return this._children.length>0}get id(){return this.branchNode.id}constructor(e){this._children=new Array,this._index=0,this.branchNode=e}add(e){this._children.push(e)}remove(e){this._children=this._children.filter((t=>t!==e))}peek(){return this._children[this._children.length-1]}activate(e){return this.peek()!==e&&(this.remove(e),this.add(e),!0)}}const Ci=new mi,fi=new class{constructor(){this.idToNode=new Map,this.rootNode=new gi(Ci.getBranchNode("")),this.idToNode.set("",this.rootNode)}getIndex(e){const t=this.idToNode.get(e);return t?t.index:0}register(e){const t=Ci.findRoot(e),n=Ci.getBranchNode(e),i=new gi(n);if(this.idToNode.set(e,i),e===t)this.rootNode.add(i);else{const t=Ci.getParentId(e);this.idToNode.get(t).add(i)}this.refresh()}unregister(e){var t;const n=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!n)return;const i=Ci.getParentId(n.id);this.idToNode.get(i).remove(n);for(const t of this.iterateBranch(e))this.idToNode.delete(t);this.idToNode.delete(e),this.refresh()}activate(e){var t,n,i;let s=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!s)return!1;let r=!1;for(;s;){const e=Ci.getParentId(s.id),t=null!==(n=this.idToNode.get(e))&&void 0!==n?n:null;r=r||null!==(i=null==t?void 0:t.activate(s))&&void 0!==i&&i,s=t}return r}iterateBranch(e){let t=new Array;const n=this.idToNode.get(e);if(!(null==n?void 0:n.hasChildren))return t;for(const e of n.children)t.push(e.id),t=t.concat(this.iterateBranch(e.id));return t.sort(((e,t)=>this.idToNode.get(t).index-this.idToNode.get(e).index))}refresh(){let e=!1,t=mi.baseIndex;for(const n in this.rootNode.children){const i=this.rootNode.children[n];e?t+=this.incrementByType(i.type):e=!0,t=this.calculateZIndices(i,t)}}calculateZIndices(e,t){if(e.index=t,e.hasChildren)for(const n of e.children)t+=this.incrementByType(n.type),t=this.calculateZIndices(n,t);return t}incrementByType(e){switch(e){case ui.Flyout:case ui.DropDown:return 10;case ui.Modal:return 100}return 10}setTopMostBranch(e){let t=this.idToNode.get(e)||null;for(;t&&t.type!==ui.Modal;){const e=Ci.getParentId(t.id);if(e){const n=this.idToNode.get(e);n.activate(t),t=n}else this.rootNode.activate(t),t=null}this.refresh()}},vi=window,bi=vi.ShadowRoot&&(void 0===vi.ShadyCSS||vi.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wi=Symbol(),yi=new WeakMap;class Bi{constructor(e,t,n){if(this._$cssResult$=!0,n!==wi)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(bi&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=yi.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&yi.set(t,e))}return e}toString(){return this.cssText}}const Ei=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[i+1]),e[0]);return new Bi(n,e,wi)},Ii=bi?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new Bi("string"==typeof e?e:e+"",void 0,wi))(t)})(e):e;var Si;const xi=window,Di=xi.trustedTypes,Fi=Di?Di.emptyScript:"",Ti=xi.reactiveElementPolyfillSupport,Hi={toAttribute(e,t){switch(t){case Boolean:e=e?Fi:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},Ui=(e,t)=>t!==e&&(t==t||e==e),Qi={attribute:!0,type:String,converter:Hi,reflect:!1,hasChanged:Ui},Pi="finalized";class Ni extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=Qi){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const s=this[e];this[t]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Qi}static finalize(){if(this.hasOwnProperty(Pi))return!1;this[Pi]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(Ii(e))}else void 0!==e&&t.push(Ii(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{bi?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),i=vi.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=t.cssText,e.appendChild(n)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=Qi){var i;const s=this.constructor._$Ep(e,n);if(void 0!==s&&!0===n.reflect){const r=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:Hi).toAttribute(t,n.type);this._$El=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,s=i._$Ev.get(e);if(void 0!==s&&this._$El!==s){const e=i.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:Hi;this._$El=s,this[s]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Ui)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var Ri;Ni[Pi]=!0,Ni.elementProperties=new Map,Ni.elementStyles=[],Ni.shadowRootOptions={mode:"open"},null==Ti||Ti({ReactiveElement:Ni}),(null!==(Si=xi.reactiveElementVersions)&&void 0!==Si?Si:xi.reactiveElementVersions=[]).push("1.6.3");const Li=window,Mi=Li.trustedTypes,ki=Mi?Mi.createPolicy("lit-html",{createHTML:e=>e}):void 0,Ki="$lit$",Oi=`lit$${(Math.random()+"").slice(9)}$`,_i="?"+Oi,Vi=`<${_i}>`,zi=document,Wi=()=>zi.createComment(""),$i=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Gi=Array.isArray,qi="[ \t\n\f\r]",Yi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Xi=/-->/g,Ji=/>/g,ji=RegExp(`>|${qi}(?:([^\\s"'>=/]+)(${qi}*=${qi}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Zi=/'/g,es=/"/g,ts=/^(?:script|style|textarea|title)$/i,ns=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),is=Symbol.for("lit-noChange"),ss=Symbol.for("lit-nothing"),rs=new WeakMap,os=zi.createTreeWalker(zi,129,null,!1);function as(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==ki?ki.createHTML(t):t}const ls=(e,t)=>{const n=e.length-1,i=[];let s,r=2===t?"<svg>":"",o=Yi;for(let t=0;t<n;t++){const n=e[t];let a,l,A=-1,d=0;for(;d<n.length&&(o.lastIndex=d,l=o.exec(n),null!==l);)d=o.lastIndex,o===Yi?"!--"===l[1]?o=Xi:void 0!==l[1]?o=Ji:void 0!==l[2]?(ts.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=ji):void 0!==l[3]&&(o=ji):o===ji?">"===l[0]?(o=null!=s?s:Yi,A=-1):void 0===l[1]?A=-2:(A=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?ji:'"'===l[3]?es:Zi):o===es||o===Zi?o=ji:o===Xi||o===Ji?o=Yi:(o=ji,s=void 0);const c=o===ji&&e[t+1].startsWith("/>")?" ":"";r+=o===Yi?n+Vi:A>=0?(i.push(a),n.slice(0,A)+Ki+n.slice(A)+Oi+c):n+Oi+(-2===A?(i.push(void 0),t):c)}return[as(e,r+(e[n]||"<?>")+(2===t?"</svg>":"")),i]};class As{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let s=0,r=0;const o=e.length-1,a=this.parts,[l,A]=ls(e,t);if(this.el=As.createElement(l,n),os.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=os.nextNode())&&a.length<o;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(Ki)||t.startsWith(Oi)){const n=A[r++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+Ki).split(Oi),t=/([.?@])?(.*)/.exec(n);a.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?ps:"?"===t[1]?gs:"@"===t[1]?Cs:us})}else a.push({type:6,index:s})}for(const t of e)i.removeAttribute(t)}if(ts.test(i.tagName)){const e=i.textContent.split(Oi),t=e.length-1;if(t>0){i.textContent=Mi?Mi.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],Wi()),os.nextNode(),a.push({type:2,index:++s});i.append(e[t],Wi())}}}else if(8===i.nodeType)if(i.data===_i)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=i.data.indexOf(Oi,e+1));)a.push({type:7,index:s}),e+=Oi.length-1}s++}}static createElement(e,t){const n=zi.createElement("template");return n.innerHTML=e,n}}function ds(e,t,n=e,i){var s,r,o,a;if(t===is)return t;let l=void 0!==i?null===(s=n._$Co)||void 0===s?void 0:s[i]:n._$Cl;const A=$i(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==A&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===A?l=void 0:(l=new A(e),l._$AT(e,n,i)),void 0!==i?(null!==(o=(a=n)._$Co)&&void 0!==o?o:a._$Co=[])[i]=l:n._$Cl=l),void 0!==l&&(t=ds(e,l._$AS(e,t.values),l,i)),t}class cs{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:n},parts:i}=this._$AD,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:zi).importNode(n,!0);os.currentNode=s;let r=os.nextNode(),o=0,a=0,l=i[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new hs(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new fs(r,this,e)),this._$AV.push(t),l=i[++a]}o!==(null==l?void 0:l.index)&&(r=os.nextNode(),o++)}return os.currentNode=zi,s}v(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class hs{constructor(e,t,n,i){var s;this.type=2,this._$AH=ss,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cp=null===(s=null==i?void 0:i.isConnected)||void 0===s||s}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ds(this,e,t),$i(e)?e===ss||null==e||""===e?(this._$AH!==ss&&this._$AR(),this._$AH=ss):e!==this._$AH&&e!==is&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>Gi(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ss&&$i(this._$AH)?this._$AA.nextSibling.data=e:this.$(zi.createTextNode(e)),this._$AH=e}g(e){var t;const{values:n,_$litType$:i}=e,s="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=As.createElement(as(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===s)this._$AH.v(n);else{const e=new cs(s,this),t=e.u(this.options);e.v(n),this.$(t),this._$AH=e}}_$AC(e){let t=rs.get(e.strings);return void 0===t&&rs.set(e.strings,t=new As(e)),t}T(e){Gi(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const s of e)i===t.length?t.push(n=new hs(this.k(Wi()),this.k(Wi()),this,this.options)):n=t[i],n._$AI(s),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class us{constructor(e,t,n,i,s){this.type=1,this._$AH=ss,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=s,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ss}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const s=this.strings;let r=!1;if(void 0===s)e=ds(this,e,t,0),r=!$i(e)||e!==this._$AH&&e!==is,r&&(this._$AH=e);else{const i=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=ds(this,i[n+o],t,o),a===is&&(a=this._$AH[o]),r||(r=!$i(a)||a!==this._$AH[o]),a===ss?e=ss:e!==ss&&(e+=(null!=a?a:"")+s[o+1]),this._$AH[o]=a}r&&!i&&this.j(e)}j(e){e===ss?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ps extends us{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ss?void 0:e}}const ms=Mi?Mi.emptyScript:"";class gs extends us{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ss?this.element.setAttribute(this.name,ms):this.element.removeAttribute(this.name)}}class Cs extends us{constructor(e,t,n,i,s){super(e,t,n,i,s),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=ds(this,e,t,0))&&void 0!==n?n:ss)===is)return;const i=this._$AH,s=e===ss&&i!==ss||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==ss&&(i===ss||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class fs{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ds(this,e)}}const vs=Li.litHtmlPolyfillSupport;null==vs||vs(As,hs),(null!==(Ri=Li.litHtmlVersions)&&void 0!==Ri?Ri:Li.litHtmlVersions=[]).push("2.8.0");var bs,ws;class ys extends Ni{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var i,s;const r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let o=r._$litPart$;if(void 0===o){const e=null!==(s=null==n?void 0:n.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new hs(t.insertBefore(Wi(),e),e,void 0,null!=n?n:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return is}}ys.finalized=!0,ys._$litElement$=!0,null===(bs=globalThis.litElementHydrateSupport)||void 0===bs||bs.call(globalThis,{LitElement:ys});const Bs=globalThis.litElementPolyfillSupport;null==Bs||Bs({LitElement:ys}),(null!==(ws=globalThis.litElementVersions)&&void 0!==ws?ws:globalThis.litElementVersions=[]).push("3.3.3");const Es=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:i}=t;return{kind:n,elements:i,finisher(t){customElements.define(e,t)}}})(e,t),Is=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},Ss=(e,t,n)=>{t.constructor.createProperty(n,e)};function xs(e){return(t,n)=>void 0!==n?Ss(e,t,n):Is(e,t)}function Ds(e){return xs({...e,state:!0})}function Fs(e,t){return(({finisher:e,descriptor:t})=>(n,i)=>{var s;if(void 0===i){const i=null!==(s=n.originalKey)&&void 0!==s?s:n.key,r=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(n.key)}:{...n,key:i};return null!=e&&(r.finisher=function(t){e(t,i)}),r}{const s=n.constructor;void 0!==t&&Object.defineProperty(n,i,t(i)),null==e||e(s,i)}})({descriptor:n=>{const i={get(){var t,n;return null!==(n=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof n?Symbol():"__"+n;i.get=function(){var n,i;return void 0===this[t]&&(this[t]=null!==(i=null===(n=this.renderRoot)||void 0===n?void 0:n.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}class Ts{get parentId(){return this._parentId}get id(){return this._id}get type(){return this._type}constructor(e,t,n){this._id=e,this._parentId=t,this._type=n}}class Hs{get id(){return this._id}constructor(e){this._id=e}}class Us extends CustomEvent{constructor(e){super(Us.eventName,{detail:e,bubbles:!0,composed:!0})}}Us.eventName="dxbranchrefreshed";class Qs extends CustomEvent{constructor(e){super(Qs.eventName,{detail:e,bubbles:!0,composed:!0})}}Qs.eventName="dxbranchactivated";class Ps extends CustomEvent{constructor(e){super(Ps.eventName,{detail:e,bubbles:!0,composed:!0})}}Ps.eventName="dxbranchupdated";class Ns extends CustomEvent{constructor(e){super(Ns.eventName,{detail:e,bubbles:!0,composed:!0})}}Ns.eventName="dxbranchremoved";class Rs extends CustomEvent{constructor(e){super(Rs.eventName,{detail:e,bubbles:!0,composed:!0})}}Rs.eventName="dxbranchcreated";let Ls=class extends ys{constructor(){super(...arguments),this.parentBranchId=null}createRenderRoot(){return this}updated(e){this.branchId&&(e.get("branchId")||e.get("parentBranchId")||e.get("branchType"))&&this.raiseUpdated()}raiseUpdated(){const e=new Ts(this.branchId,this.parentBranchId,this.branchType),t=new Ps(e);this.dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this.raiseCreated()}raiseCreated(){if(!this.branchId)return;const e=new Ts(this.branchId,this.parentBranchId,this.branchType),t=new Rs(e);this.dispatchEvent(t)}disconnectedCallback(){super.disconnectedCallback(),this.raiseRemoved()}raiseRemoved(){if(!this.branchId)return;const e=new Ts(this.branchId,this.parentBranchId,this.branchType),t=new Ns(e);this.dispatchEvent(t)}};C([xs({type:String,attribute:"branch-id"})],Ls.prototype,"branchId",void 0),C([xs({type:String,attribute:"parent-branch-id"})],Ls.prototype,"parentBranchId",void 0),C([xs({type:String,attribute:"type"})],Ls.prototype,"branchType",void 0),Ls=C([Es("dxbl-branch")],Ls);const Ms="dxbl-drag-hint";customElements.define(Ms,class extends he{get branchId(){return this.getAttribute("branch-id")}show(){fi.register(this.branchId),this.refresh(),this.classList.add(pe.Visible)}hide(){fi.unregister(this.branchId),this.refresh(),this.classList.remove(pe.Visible)}initializeComponent(){super.initializeComponent();const e=new Rs(new Ts(this.branchId,null,ui.DragHint));this.dispatchEvent(e)}disposeComponent(){super.disposeComponent();const e=new Ns(new Ts(this.branchId,null,ui.DragHint));this.dispatchEvent(e)}refresh(){const e=new Us(new Hs(this.branchId));this.dispatchEvent(e)}});class ks{static getBodyCellsSelector(e,t){return this.getDataTableBodySelector(e,t)+" > tr > td"}static getBodyEditRowSelector(e,t){return this.getDataTableBodySelector(e,t)+` > .${me.EditRowClassName}`}static getBodyEditCellSelector(e,t){return this.getBodyEditRowSelector(e,t)+`> td[${ai.EditCell}]`}static getDataTableBodySelector(e,t){return`${null!=t?t:YA}[${XA}="${e}"] > .${Fe.ClassName} > .${Fe.ContentContainerClassName} > .${me.DataTableClassName} > tbody`}}var Ks,Os,_s,Vs;ks.DataTableSelector=`.${me.DataTableClassName}`,ks.TableBodyRows=`.${me.DataTableClassName} > tbody > tr`,ks.TableCell=`${ks.TableBodyRows} > td`,ks.TableHeader=`.${me.DataTableClassName} > thead > tr > th`,ks.TableHeaderCell=`${ks.TableHeader} > ${me.HeaderContentClassName}`,ks.TableHeaderCellContent=`${ks.TableHeaderCell} span`,ks.TableGroupFooterCell=`${ks.TableBodyRows}.${me.GroupFooterRowClassName} > td`,ks.TableGroupFooterCellContent=`${ks.TableGroupFooterCell} > div[${ai.SummaryItem}]`,ks.TableFooterCell=`.${me.DataTableClassName} > tfoot > tr > td`,ks.TableFooterCellContent=`${ks.TableFooterCell} > div[${ai.SummaryItem}]`,ks.TableCellSelector=`.${me.DataTableClassName} > * > tr > td`,ks.TitleElementsSelector=[ks.TableCellSelector,ks.TableHeaderCellContent,ks.TableHeader,ks.TableFooterCellContent,ks.TableGroupFooterCellContent,ks.TableFooterCell].join(", "),ks.DataTablePartsSelector=":scope > *:not(colgroup)",ks.ColElementSelector=`:scope > .${Fe.ClassName} > .${Fe.ContentContainerClassName} > .${me.DataTableClassName} > colgroup > col`,ks.RowSelector=`:scope > tr:not(.${me.EmptyRowClassName}):not(.${me.ArmRowClassName}):not([${Jn}]):not([${jn}])`,ks.HeaderRowSelector=`.${me.HeaderRowClassName}`,ks.FilterRowSelector=`.${me.FilterRowClassName}`,ks.EditRowSelector=`.${me.EditRowClassName}`,ks.EditFormRowCellSelector=`:scope > .${me.EditFormClassName}`,ks.EditNewItemRowSelector=`.${me.EditNewItemRowClassName}`,ks.GroupRowSelector=`.${me.GroupRowClassName}`,ks.DataRowSelector=`tr[${ai.VisibleIndexName}]:not(.${me.EditRowClassName}):not(.${me.GroupRowClassName})`,ks.EmptyDataRowCellSelector=`:scope > .${me.EmptyDataRowCellClassName}`,ks.DetailRowCellSelector=`:scope > .${me.DetailCellClassName}`,ks.FooterRowSelector=`.${me.FooterRowClassName}`,ks.GroupFooterRowSelector=`.${me.GroupFooterRowClassName}`,ks.RowDragHintSelector=`${Ms}.${me.RowDragHintClassName}`,ks.KeyboardNavigatorSelector=`:scope > ${Ln}`,ks.ToolbarContainerSelector=`.${me.ToolbarContainerClassName}`,ks.TopPanelSelector=`.${me.TopPanelClassName}`,ks.PagerPanelSelector=`.${me.PagerPanelClassName}`,ks.PagerSizeSelector=`:scope > .${li}`,ks.CellCheckBoxDisplayViewSelector="td .dxbl-checkbox-display-view-unchecked, td .dxbl-checkbox-display-view-checked, td .dxbl-checkbox-display-view-indeterminate",ks.CellCheckBoxEditViewInputSelector=`:scope > ${ci} input, :scope > .dxbl-checkbox-container > ${ci} input`,function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row"}(Ks||(Ks={}));class zs extends On{constructor(e,t,n=!1){super(e.getKeyboardNavigator(),t,n),this.grid=e}canSwitchToNestedContentMode(){return!0}get editorManager(){return this.grid.editorManager}get isEditing(){return this.grid.isEditing}get isInplaceEditingEnabled(){return this.grid.enableInplaceEditing}get enterKeyDirection(){return this.grid.enterKeyDirection}get isFocusedRowEnabled(){return this.grid.enableFocusedRow}get isSelectionRowEnabled(){return this.grid.allowSelectRowByClick}get hasRowClickEvent(){return this.grid.hasRowClickEvent}getToolbarContainer(){return this.grid.getToolbarContainer()}getDataTable(){return this.grid.getDataTable()}getPagerPanel(e){return this.grid.getPagerPanel(e)}getGroupPanelContentContainer(){return this.grid.getGroupPanelContentContainer()}getSearchBoxContainer(){return this.grid.getSearchBoxContainer()}getScrollViewer(){return this.grid.getScrollViewer()}getScrollViewerContent(){return this.grid.getScrollViewerContent()}getColumnUID(e){return this.grid.getColumnUID(e)}getHeaderColumnInfo(e){return this.grid.getColumnInfo(e)}getColumnInfoByCell(e){return this.grid.getColumnInfoByCell(e)}findHeaderCellByColumnIndex(e){return this.grid.findHeaderCellByColumnIndex(e)}isPrintableCharacterKey(e){var t;return!(e.ctrlKey||e.altKey||e.metaKey)&&1===(null===(t=e.key)||void 0===t?void 0:t.length)}handleTabKeyDown(e,t=!1,n=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected&&!n)return!1;this.moveToPrevItem(n)}else{if(this.lastItemSelected&&!n)return!1;this.moveToNextItem(n)}return!0}isEditingOnTypeEnabled(){return this.grid.enableEditOnKeypress}}!function(e){e[e.None=0]="None",e[e.GroupPanel=1]="GroupPanel",e[e.DataTable=2]="DataTable",e[e.Pager=3]="Pager",e[e.ColumnChooser=4]="ColumnChooser",e[e.ToolbarContainer=5]="ToolbarContainer",e[e.SearchBox=6]="SearchBox"}(Os||(Os={})),function(e){e[e.None=0]="None",e[e.Header=1]="Header",e[e.Filter=2]="Filter",e[e.Edit=3]="Edit",e[e.EditForm=4]="EditForm",e[e.Group=5]="Group",e[e.Data=6]="Data",e[e.EmptyData=7]="EmptyData",e[e.Detail=8]="Detail",e[e.Footer=9]="Footer",e[e.GroupFooter=10]="GroupFooter",e[e.EmptyRow=11]="EmptyRow",e[e.EditNewItemRow=12]="EditNewItemRow"}(_s||(_s={})),function(e){e[e.Data=0]="Data",e[e.Edit=1]="Edit",e[e.Selection=2]="Selection",e[e.Command=3]="Command",e[e.Indent=4]="Indent",e[e.ExpandButton=5]="ExpandButton",e[e.EditNewItemRowCell=6]="EditNewItemRowCell"}(Vs||(Vs={}));class Ws{static getNavigationAreaType(e){return e.matches(ks.ToolbarContainerSelector)?Os.ToolbarContainer:e.matches(ks.DataTableSelector)?Os.DataTable:e.matches(ks.PagerPanelSelector)?Os.Pager:e.matches(ks.TopPanelSelector)?Os.GroupPanel:Os.None}static getRowType(e){return e.matches(ks.HeaderRowSelector)?_s.Header:e.matches(ks.FilterRowSelector)?_s.Filter:e.matches(ks.EditRowSelector)?_s.Edit:e.querySelector(ks.EditFormRowCellSelector)?_s.EditForm:e.matches(ks.GroupRowSelector)?_s.Group:e.matches(ks.EditNewItemRowSelector)?_s.EditNewItemRow:e.matches(ks.DataRowSelector)?_s.Data:e.querySelector(ks.EmptyDataRowCellSelector)?_s.EmptyData:e.querySelector(ks.DetailRowCellSelector)?_s.Detail:e.matches(ks.FooterRowSelector)?_s.Footer:e.matches(ks.GroupFooterRowSelector)?_s.GroupFooter:e.matches(`.${me.EmptyRowClassName}`)?_s.EmptyRow:_s.None}static getCellType(e){return void 0!==e.dataset.editCell?Vs.Edit:Ws.isSelectionCell(e)?Vs.Selection:Ws.isCommandCell(e)?Vs.Command:Ws.isExpandButtonCell(e)?Vs.ExpandButton:Ws.isIndentCell(e)?Vs.Indent:Ws.isEditNewItemRowCell(e)?Vs.EditNewItemRowCell:Vs.Data}static isIndentCell(e){return null==e?void 0:e.matches(`.${me.IndentCellClassName}, .${me.GroupFooterIndentCellClassName}`)}static isCommandCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${me.CommandCellClassName}`))&&void 0!==t&&t}static isExpandButtonCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${me.ExpandButtonCellClassName}`))&&void 0!==t&&t}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${me.SelectionCellClassName}`))&&void 0!==t&&t}static isFixedCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${me.FixedCellClassName}`))&&void 0!==t&&t}static isEditNewItemRowCell(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.matches(`.${me.EditNewItemRowClassName}`))&&void 0!==n&&n}static isSearchBoxContainer(e){return null==e?void 0:e.matches(`.${me.SearchBoxContainerClassName}`)}}class $s{constructor(){this.root=new Gs(null,!1)}get hasCapture(){return this.root.hasChildren}get captured(){var e,t;return null!==(t=null===(e=this.root.searchCaptured())||void 0===e?void 0:e.element)&&void 0!==t?t:null}get count(){return this.root.count()}add(e){var t;const n=this.root.searchCaptured();n&&n.element!==e&&(n.captured=!1,null===(t=n.element)||void 0===t||t.lostCapture());this.root.tryAdd(new Gs(e,!0))&&e.gotCapture()}remove(e){this.root.tryRemove(new Gs(e,!1))&&e.lostCapture()}isChild(e,t){const n=this.root.search(e);return null!==n&&null!==n.search(t)}nextCapture(e){var t,n;if(null===this.captured)if(e.parentBranchId){const i=this.root.search(e.parentBranchId);if(i){const s=i.getNextChild(e);s?(s.captured=!0,null===(t=s.element)||void 0===t||t.gotCapture()):(i.captured=!0,null===(n=i.element)||void 0===n||n.gotCapture())}}else{const t=this.root.getNextChild(e);t&&(t.captured=!0)}}getParent(e){if(e.parentBranchId){return this.root.search(e.parentBranchId).element}return null}}class Gs{constructor(e,t){this.element=e,this.captured=t,this.children=[]}get isRoot(){return null===this.element}get hasChildren(){return this.children.length>0}get branchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.branchId)&&void 0!==t?t:""}get parentBranchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.parentBranchId)&&void 0!==t?t:null}tryAdd(e){if(!e.parentBranchId&&this.isRoot||e.parentBranchId===this.branchId){const t=this.children.find((t=>t.branchId===e.branchId));return t?t.captured=!0:this.children.push(e),!0}for(const t of this.children){if(t.tryAdd(e))return!0}return!1}tryRemove(e){const t=this.children.find((t=>t.branchId===e.branchId));if(t){const e=this.children.indexOf(t);return this.children.splice(e,1),!0}for(const t of this.children){if(t.tryRemove(e))return!0}return!1}count(){let e=0;if(this.children.length>0)for(const t of this.children)e+=t.count();return this.isRoot||(e+=1),e}search(e){if(this.branchId===e)return this;for(let t=0;t<this.children.length;t++){const n=this.children[t].search(e);if(n)return n}return null}searchCaptured(){if(this.captured)return this;for(let e=0;e<this.children.length;e++){const t=this.children[e].searchCaptured();if(t)return t}return null}getNextChild(e){if(0===this.children.length)return null;for(let t=this.children.length-1;t>=0;t--){const n=this.children[t];if(n.element!==e)return n}return null}}class qs{constructor(){this.lockCount=0}get IsLocked(){return this.lockCount>0}lock(){this.lockCount+=1}unlock(){this.IsLocked&&(this.lockCount-=1)}reset(){this.lockCount=0}lockOnce(){this.IsLocked||this.lock()}doLockedAction(e){this.lock();try{e()}finally{this.unlock()}}async doLockedAsyncAction(e){this.lock();try{await e()}finally{this.unlock()}}doIfNotLocked(e){this.IsLocked||e()}doLockedActionIfNotLocked(e){this.doIfNotLocked((()=>this.doLockedAction(e)))}async doLockedAsyncActionIfNotLocked(e){this.doIfNotLocked((async()=>await this.doLockedAsyncAction(e)))}}class Ys extends CustomEvent{constructor(){super(Ys.eventName)}}Ys.eventName="capture-interaction-prevent-ended";class Xs extends EventTarget{constructor(){super(...arguments),this.preventNextPointerInteraction=!1}reset(){this.preventNextPointerInteraction=!1,this.dispatchEvent(new Ys)}get isPreventing(){return this.preventNextPointerInteraction}prevent(){this.preventNextPointerInteraction=!0}}class Js{constructor(){this._globalLocker=new qs,this.preventNextPointerInteraction=new Xs}get isInteractionPreventing(){return this.preventNextPointerInteraction.isPreventing}subscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.addEventListener(Ys.eventName,e)}unsubscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.removeEventListener(Ys.eventName,e)}async processCapturedElementPointer(e,t){const n=this.getCapturedInteractionLocker(e),i=new js(e);await n.doLockedAsyncActionIfNotLocked((async()=>{this.preventNextPointerInteraction.reset(),this.capturedProcessPromise=t(i),await this.capturedProcessPromise,this.capturedProcessPromise=void 0})),i.handled&&i.nextInteractionHandled&&this.preventNextPointerInteraction.prevent()}async processCapturedElementKeyboard(e,t){const n=this.getCapturedInteractionLocker(e);await n.doLockedAsyncActionIfNotLocked((async()=>{const n=new js(e);await t(n)}))}checkInteractionsPreventing(e,t,n,i=!1){const s=this.getCapturedInteractionLocker(e),r=this.preventEventIfLocked(s,t);return s.doIfNotLocked((()=>{this.preventNextPointerInteraction.isPreventing&&(i&&this.preventNextPointerInteraction.reset(),n())})),r||this.preventNextPointerInteraction.isPreventing}async waitForCaptureProcessing(){this.capturedProcessPromise&&await this.capturedProcessPromise}endInteractionIfNotLocked(e){this.getCapturedInteractionLocker(e).doIfNotLocked((()=>this.preventNextPointerInteraction.reset()))}getCapturedInteractionLocker(e){return e?e.locker:this._globalLocker}preventEventIfLocked(e,t){return!!e.IsLocked&&(H.markHandled(t,!1),!0)}}class js{constructor(e){this.caller=e,this.nextInteractionHandled=!1,this.handled=!1}}class Zs{constructor(){this.captureTree=new $s,this.captureProcessor=new Js,this.restoreFocusOnPreventNextPointerInteractionElement=null,this.capturedInPointerUp=!1,this.capturedInPointerDown=!1,this.focusHandler=this.handleFocus.bind(this),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.keyDownHandler=this.handleKeyDown.bind(this),this.disposeCheckHandler=this.checkDispose.bind(this)}get hasCapture(){return this.captureTree.hasCapture}get lastCaptured(){return this.captureTree.captured}get captureStackCount(){return this.captureTree.count}checkInitialize(){this.hasCapture||this.initialize()}checkDispose(){this.hasCapture||this.captureProcessor.isInteractionPreventing||this.dispose()}capture(e){this.checkInitialize(),this.captureTree.add(e)}releaseCapture(e){this.captureTree.remove(e),this.captureTree.nextCapture(e),this.checkDispose()}initialize(){document.addEventListener("focus",this.focusHandler,{capture:!0}),document.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.addEventListener("click",this.clickHandler,{capture:!0}),document.addEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.subscribeInteractionPreventEnd(this.disposeCheckHandler)}dispose(){document.removeEventListener("focus",this.focusHandler,{capture:!0}),document.removeEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.removeEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.removeEventListener("click",this.clickHandler,{capture:!0}),document.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.unsubscribeInteractionPreventEnd(this.disposeCheckHandler)}async handleFocus(e){const t=this.captureTree.captured;if(!t)return;const n=this.getProcessingElement(t,e);if(!n||t===n)return;if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;await this.captureProcessor.processCapturedElementPointer(t,(n=>t.processCapturedPointerAsync(e,n)))}async handlePointerDown(e){const t=this.captureTree.captured;if(!t)return;this.captureProcessor.endInteractionIfNotLocked(t);const n=this.getProcessingStack(t,e,[]);for(const t of n){if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;const n=n=>t.processCapturedPointerAsync(e,n);await this.captureProcessor.processCapturedElementPointer(t,n)}}async handlePointerUp(e){const t=this.captureTree.captured;if(this.capturedInPointerUp=(null==t?void 0:t.isPointedCaptured(e))||!0,!t||this.capturedInPointerUp&&this.capturedInPointerDown||!t.isCloseOnPointerUp)return;const n=this.getProcessingStack(t,e,[]);for(const t of n){const n=n=>t.processCapturedPointerAsync(e,n);await this.captureProcessor.processCapturedElementPointer(t,n)}}async handleClick(e){await this.captureProcessor.waitForCaptureProcessing();this.captureProcessor.checkInteractionsPreventing(this.captureTree.captured,e,(()=>{H.markHandled(e,!1),this.restoreFocusOnPreventNextPointerInteractionElement&&gt.isFocused(this.restoreFocusOnPreventNextPointerInteractionElement)||gt.unfocus()}),!0)}async handleKeyDown(e){const t=this.captureTree.captured;if(!t)return;await this.captureProcessor.processCapturedElementKeyboard(t,(n=>t.processCapturedKeyDownAsync(e,n)))}getProcessingElement(e,t){if(e.isPointedCaptured(t)||e.isPreventPropagation)return e;const n=this.captureTree.getParent(e);return n?this.getProcessingElement(n,t):null}getProcessingStack(e,t,n){const i=e.isPointedCaptured(t);if(n.push(e),i||e.isPreventPropagation)return n;const s=this.captureTree.getParent(e);return s?this.getProcessingStack(s,t,n):n}}class er{constructor(){this.action=null,this.rafHandle=null}execute(e){this.cancel(),this.action=e,this.rafHandle=requestAnimationFrame((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.rafHandle=null,this.action=null}))}cancel(){this.rafHandle&&(cancelAnimationFrame(this.rafHandle),this.action=null,this.rafHandle=null)}}const tr="dxbl-popup-root",nr="dxbl-window",ir=nr+"-root",sr=nr+"-dialog",rr="dxbl-popup-keyboard-navigator";const or=new class{_doWithElementCheck(e){const t=document.querySelector(tr);return e(null!=t?t:this._createPopupElement())}_createPopupElement(){const e=document.createElement(tr);return document.body.appendChild(e),e}constructor(){this._rootElementPromise=customElements.whenDefined(tr)}assign(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.assign(e)))))}getPopup(e){return this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.getPopup(e)))))}release(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.release(e)))))}async subscribeCaptureManager(e){return await this._rootElementPromise,this._doWithElementCheck((t=>t.subscribe(e)))}};function ar(){return or}class lr{}lr.renderGuidAttributeName="dxbl-render-guid",lr.virtualElementAttributeName="dxbl-virtual-el";class Ar{constructor(e){this.elements=e}}class dr extends CustomEvent{constructor(e){super(dr.eventName,{detail:e,bubbles:!0})}}dr.eventName="dxbl-portable-elements-changed";let cr=class extends ys{constructor(){super(...arguments),this._portable=null,this._elementsPorted=!1,this.slotChangedHandler=this.handleSlotChange.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this._reassignPortal=()=>ar().assign(this)}get portable(){return this._portable}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler),e}handleSlotChange(e){const t=e.target.assignedNodes();this._elementsPorted&&0===t.length||(this.assignElements(t),this._elementsPorted=!0)}assignElements(e){this._portable=e,this.raiseElementsChanged(e)}connectedCallback(){var e;super.connectedCallback(),i.setLoaded(this),ar().assign(this),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._reassignPortal),this.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleFocusIn(e){const t=document.querySelector(`:not(.dxbl-popup-portal)[branch-id=${this.branchId}]`);t&&t.activatePopupContent()}disconnectedCallback(){var e;super.disconnectedCallback(),ar().release(this),i.removeLoaded(this),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._reassignPortal),this.removeEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}raiseElementsChanged(e){const t=new dr(new Ar(e));this.dispatchEvent(t)}updated(e){if(!this.branchId&&!this.hasAttribute(lr.virtualElementAttributeName))throw new Error("branch-id must be specified")}};C([xs({type:String,attribute:"branch-id"})],cr.prototype,"branchId",void 0),cr=C([Es("dxbl-portal")],cr);const hr=new class{constructor(){this._x=0,this._y=0,this.handlePointerDown=this.pointerEventHandler.bind(this)}get x(){return this._x}get y(){return this._y}subscribe(){window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointermove",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointerup",this.handlePointerDown,{capture:!0,passive:!0})}unsubscribe(){window.removeEventListener("pointerdown",this.handlePointerDown),window.removeEventListener("pointermove",this.handlePointerDown),window.removeEventListener("pointerup",this.handlePointerDown)}pointerEventHandler(e){this._x=e.pageX,this._y=e.pageY}};hr.subscribe();class ur{get x(){return this.xField}get y(){return this.yField}constructor(e,t){this.xField=e,this.yField=t}}ur.zero=new ur(0,0);class pr{static add(e,t){return new ur(e.x+t.x,e.y+t.y)}static multiply(e,t){return new ur(e.x*t,e.y*(1/t))}static divide(e,t){return new ur(e.x*(1/t),e.y*(1/t))}static getLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static normalize(e){const t=Math.max(Math.abs(e.x),Math.max(e.y)),n=pr.divide(e,t);return pr.divide(n,pr.getLength(n))}}class mr{static viewport(){return new st(window.scrollX,window.scrollY,document.documentElement.clientWidth,document.documentElement.clientHeight)}static page(){return new st(0,0,document.body.clientWidth,document.body.clientHeight)}}class gr{static translate(e,t){return`translate(${Math.floor(e)}px, ${Math.floor(t)}px)`}static translateWithoutFloor(e,t){return`translate(${e}px, ${t}px)`}static translateByPoint(e){return`translate(${Math.floor(e.x)}px, ${Math.floor(e.y)}px)`}}class Cr extends CustomEvent{constructor(e){super(Cr.eventName,{detail:e,bubbles:!0,cancelable:!0})}}Cr.eventName="dxbl-position-changing";class fr extends CustomEvent{constructor(e){super(fr.eventName,{detail:e,bubbles:!0,cancelable:!0})}}fr.eventName="dxbl-position-changed";class vr extends HTMLElement{constructor(){super(...arguments),this.observer=null,this.targetField="",this.listenedIdField="",this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new er}get target(){return this.targetField}set target(e){this.targetField=e}get listenerId(){return this.listenedIdField}set listenerId(e){this.listenedIdField=e}connectedCallback(){this.initializeObserver(),this.subscribeToOverflows()}getTargetBoundingClientRect(){return this.targetElement?rt.fromDomRect(this.targetElement.getBoundingClientRect()):st.Empty}initializeObserver(){this.destroyObserver();const e=this.querySelector(this.target);if(!e)return void this.mutationObserver.observe(this,{childList:!0,subtree:!0});this.observer=new IntersectionObserver((function(e,t){}),{root:e,rootMargin:"0px",threshold:0}),this.observer.observe(this),this.targetElement=e}disconnectedCallback(){this.destroyObserver()}destroyObserver(){var e;this.mutationObserver.disconnect(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}static get observedAttributes(){return["target","listener-id"]}attributeChangedCallback(e,t,n){switch(e){case"target":this.targetChanged(n);break;case"listener-id":this.listenerIdChanged(n)}}handleMutations(e){const t=this.querySelector(this.target);t&&(this.targetElement=t,this.mutationObserver.disconnect(),this.initializeObserver(),this.subscribeToOverflows())}handleResize(e,t){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}targetChanged(e){this.target=e,this.initializeObserver()}listenerIdChanged(e){this.listenerId=e}raisePositionChanging(){const e=new Cr({Tracker:this});this.dispatchEvent(e)}raisePositionChanged(){const e=new fr({Tracker:this});this.dispatchEvent(e)}subscribeToOverflows(){if(!this.targetElement)return;const e=[],t=[];for(const n of at.getRootPath(this.targetElement)){const i=n;if(!i)return;new ResizeObserver(this.resizeHandler).observe(i,{box:"border-box"}),t.push(),ot.isScrollable(i)&&(i.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(i))}this.overflows=e,this.resizing=t}unsubscribeFromOverflows(){this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleElementScroll(e){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}}customElements.define("dxbl-position-tracker",vr);class br{get position(){return this.callback(this.target)}constructor(e,t){this.target=e,this.callback=t}}class wr{get raf(){return this.options.raf}constructor(e,t){this.observer=null,this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new er,this.callback=e,this.options=t}observe(e){this.disconnect(),this.targetElement=e,this.subscribeEvents()}disconnect(){var e;this.unsubscribeEvents(),this.rafAction.cancel(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}getTargetBoundingClientRect(){return this.targetElement?at.getRelativeElementRect(this.targetElement):st.Empty}subscribeEvents(){if(!this.targetElement)return;window.addEventListener("scroll",this.elementScrollHandler);const e=[],t=[];for(const n of at.getRootPathAndSelf(this.targetElement)){const i=n;if(!i)return;if(this.isInShadowDom(i))continue;new ResizeObserver(this.resizeHandler).observe(i,{box:"border-box"}),t.push(),ot.isScrollable(i)&&(i.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(i))}this.overflows=e,this.resizing=t}isInShadowDom(e){return e.getRootNode()instanceof ShadowRoot}unsubscribeEvents(){window.removeEventListener("scroll",this.elementScrollHandler),this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleResize(e,t){this.raisePositionChanged()}handleElementScroll(e){this.raisePositionChanged()}raisePositionChanged(){this.raf?this.rafAction.execute((()=>this.raisePositionChangedCore())):this.raisePositionChangedCore()}raisePositionChangedCore(){this.callback(new br(this.targetElement,this.getTargetBoundingClientRect),this)}}class yr{get hasObservedElement(){return null!==this.observedElement}constructor(e,t){this.target=null,this.targetMutationObserver=new MutationObserver((e=>this.handleTargetMutations.bind(this))),this.observedElement=null,this.selector=e,this.callback=t}observe(e=null){this.disconnect(),this.target=e;const t=null!=e?e:document;this.observedElement=t.querySelector(this.selector),this.observedElement&&this.raiseElementChanged(null,this.observedElement),this.targetMutationObserver.observe(t,{subtree:!0,childList:!0})}disconnect(){this.targetMutationObserver.disconnect()}raiseElementChanged(e,t){this.callback({oldElement:e,element:t},this)}handleTargetMutations(e,t){this.hasObservedElement?this.processRemovedNodes(e):this.processAddedNodes(e)}processRemovedNodes(e){this.processRemovedNodesInternal(e)&&(this.raiseElementChanged(this.observedElement,null),this.observedElement=null)}processRemovedNodesInternal(e){return e.forEach((e=>{e.removedNodes.forEach((e=>{if(this.observedElement===e)return!0}))})),!1}processAddedNodes(e){const[t,n]=this.processAddedNodesInternal(e);t&&(this.raiseElementChanged(this.observedElement,n),this.observedElement=n)}processAddedNodesInternal(e){var t;const n=(null!==(t=this.target)&&void 0!==t?t:document).querySelector(this.selector);return[null!==n,n]}}class Br{constructor(){this._isResolved=!1,this._isRejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}get promise(){return this._promise}resolve(e){this._isResolved=!0,this._resolve(e)}reject(e){this._isRejected=!0,this._reject(e)}tryResolve(e){this._isResolved||this._isRejected||this.resolve(e)}tryReject(e){this._isResolved||this._isRejected||this.reject(e)}}var Er;!function(e){e.OutsideClick="OutsideClick",e.EscapePress="EscapePress",e.Programmatically="Programmatically"}(Er||(Er={}));class Ir{constructor(){this.handlers=[],this.raise=e=>{this.handlers.slice(0).forEach((t=>t(e)))}}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}}class Sr{constructor(){this.handlers=[]}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}raise(e,t){this.handlers.slice(0).forEach((n=>n(e,t)))}}de();class xr{constructor(e){this.element=e}}class Dr extends CustomEvent{constructor(e){super(Dr.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new Dr(new xr(e))}}Dr.eventName="dxbl-element-connected";class Fr extends CustomEvent{constructor(e){super(Fr.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new Dr(new xr(e))}}Fr.eventName="dxbl-element-disconnected";class Tr extends ys{constructor(){super(...arguments),this._isDOMAttached=!1}get isDOMAttached(){return this._isDOMAttached}connectedCallback(){super.connectedCallback(),this._isDOMAttached=!0,this.readyOnConnectedCallback&&i.setLoaded(this),this.dispatchEvent(Dr.create(this))}disconnectedCallback(){super.disconnectedCallback(),this._isDOMAttached=!1,this.readyOnConnectedCallback&&i.removeLoaded(this),this.dispatchEvent(Fr.create(this))}get readyOnConnectedCallback(){return!0}}class Hr extends Tr{constructor(){super(),this._logicalParent=null,this._logicalChildren=new Array}get hasLogicalParent(){return!!this.logicalParent}get logicalParent(){return this._logicalParent}set logicalParent(e){this._logicalParent=e}get logicalChildren(){return this._logicalChildren}addLogicalChild(e){if(e.logicalParent)throw new Error("Child element already added.");this._logicalChildren.push(e),e.logicalParent=this}removeLogicalChild(e){e.logicalParent=null;const t=this._logicalChildren.indexOf(e);t>-1&&this._logicalChildren.splice(t,1)}async processCapturedKeyDownAsync(e,t){t.handled||this.logicalParent&&ut(this.logicalParent)&&await this.logicalParent.processCapturedKeyDownAsync(e,t)}async processCapturedPointerAsync(e,t){if(t.handled)return;const n=mt.findParent(this,(e=>ut(e)));n&&ut(n)&&await n.processCapturedPointerAsync(e,t)}isPointedCaptured(e){const t=mt.findParent(this,(e=>ut(e)));return null!=t}}class Ur extends Hr{constructor(){super(...arguments),this.branchId="",this.parentBranchId=null,this._isCaptured=!1,this._locker=null,this.capturingAction=()=>{},this.releasingCaptureAction=()=>{}}get locker(){return this._locker||(this._locker=new qs)}get isCaptured(){return this._isCaptured}get isPreventPropagation(){return!1}gotCapture(){this._isCaptured||(this._isCaptured=!0,this.capturingAction())}lostCapture(){this._isCaptured&&(this._isCaptured=!1,this.releasingCaptureAction())}get isCloseOnPointerUp(){return!1}}const Qr=["a[href]","audio[controls]","button",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details","input","select","textarea","[tabindex]","video[controls]"].join(",");class Pr{static getTabbables(e,t){const n=this.findTabbables(e,t),i=[],s=[];return n.forEach(((e,t)=>{const n=Pr.getTabIndex(e);0===n?i.push(e):s.push({index:t,tabIndex:n,item:e})})),s.sort(((e,t)=>e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex)).map((e=>e.item)).concat(i)}static findTabbables(e,t){const n=Array.from(e.querySelectorAll(Qr));return t&&(e.matches(Qr)||e.webkitMatchesSelector(Qr))&&n.unshift(e),n.filter(Pr.filterTabbable)}static filterTabbable(e){return!e.disabled&&(!Pr.isHiddenInput(e)&&(!ot.isHidden(e)&&!(Pr.getTabIndex(e)<0)))}static getTabIndex(e){const t=e.getAttribute("tabindex");if(t){const e=parseInt(t,10);if(!isNaN(e))return e}return"true"===e.contentEditable||e.nodeName===P.audio||e.nodeName===P.video||e.nodeName===P.details?0:e.tabIndex}static isHiddenInput(e){return e.tagName===P.input&&e.getAttribute("type")===R.hidden}}class Nr{constructor(e){this.action=null,this.postponeAction=e}executePostpone(e){this.action=null,this.postponeAction()?e():this.action=e}execute(){this.action&&this.postponeAction()&&this.executeForce()}executeForce(){this.action&&this.action(),this.clear()}clear(){this.action=null}}const Rr={subtree:!0,childList:!0,attributeFilter:["disabled","tabindex"]};class Lr{constructor(e,t,n,i,s){this.BlockOutsideClick=!1,this.BlockOutsideNavigation=!1,this.NestedOnly=!1,this.BlockOutsideClick=e,this.BlockOutsideNavigation=t,this.Element=n,this.LastFocusedElement=i,this.NestedOnly=s}}const Mr=new class{constructor(){this.documentFocusInHandler=this.documentFocusIn.bind(this),this.documentKeyDownHandler=this.documentKeyDown.bind(this),this.firstInnerElementKeyDownHandler=this.firstInnerElementKeyDown.bind(this),this.lastInnerElementKeyDownHandler=this.lastInnerElementKeyDown.bind(this),this.handleFocusOutHandler=this.handleFocusOut.bind(this),this.documentKeyboardTrackerHandler=this.documentKeyboardTracker.bind(this),this.documentMouseTrackerHandler=this.documentMouseTracker.bind(this),this.tabbables=[],this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.focusPostponedAction=new Nr((()=>{var e,t;return null!==(t=(null===(e=this.tabbables)||void 0===e?void 0:e.length)>0)&&void 0!==t&&t})),this.firstInnerElement=null,this.lastInnerElement=null,this._stack=[],this._lastInputFromPointer=!1,document.addEventListener("keydown",this.documentKeyboardTrackerHandler,!0),document.addEventListener("pointerdown",this.documentMouseTrackerHandler,!0)}documentKeyboardTracker(e){this._lastInputFromPointer=!1}documentMouseTracker(e){this._lastInputFromPointer=!0}get isActivated(){return this._stack.length>0}get info(){return this.isActivated?this._stack[this._stack.length-1]:null}get element(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.Element)&&void 0!==t?t:null}get blockOutsideClick(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideClick)&&void 0!==t?t:null}get blockOutsideNavigation(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideNavigation)&&void 0!==t?t:null}get lastFocusedElement(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.LastFocusedElement)&&void 0!==t?t:null}get nestedOnly(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.NestedOnly)&&void 0!==t?t:null}filterStack(e){e&&(this._stack=this._stack.filter((t=>t.Element!==e)))}activate(e,t,n=!1,i=t){if("string"==typeof e&&(e=document.querySelector(e)),null==e)throw"element is null";this.element&&this.deactivateCore();const s=document.activeElement;this.filterStack(e),this._stack.push(new Lr(i,t,e,s,n)),this.activateCore()}activateCore(){this.element&&((this.blockOutsideClick||this.blockOutsideNavigation)&&this.subscribe(this.element),this.tabbables=Pr.getTabbables(this.element,!this.nestedOnly),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)),this.mutationObserver.observe(this.element,Rr))}deactivate(e,t){var n;if(!this.isActivated||!e)return;if(this.element!==e)return void this.filterStack(e);this.deactivateCore();const i=null===(n=this._stack.pop())||void 0===n?void 0:n.LastFocusedElement;t&&!mt.containsElement(e,document.activeElement)&&i&&gt.restoreFocus(i)}deactivateCore(){this.element&&(this.focusPostponedAction.clear(),this.mutationObserver.disconnect(),this.unsubscribeDocument(),this.unsubscribe(this.element),this.unsubscribeInnerElementsKeyDown(),clearTimeout(this.updateTabbablesTimerID))}forceFocusFirstElement(){const e=this.tabbables[0];e&&(this.lastFocusedElement&&this.element&&mt.containsElement(this.element,document.activeElement)||gt.restoreFocus(e))}handleMutations(e){clearTimeout(this.updateTabbablesTimerID),this.updateTabbablesTimerID=setTimeout(this.updateSubscriptions.bind(this),50)}updateSubscriptions(){this.tabbables=Pr.getTabbables(this.element,!this.nestedOnly),this.unsubscribeInnerElementsKeyDown(),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.execute()}subscribe(e){this.element.addEventListener("focusout",this.handleFocusOutHandler,!0)}unsubscribe(e){this.element.removeEventListener("focusout",this.handleFocusOutHandler,!0)}handleFocusOut(e){if(this._lastInputFromPointer){if(!this.blockOutsideClick)return}else if(!this.blockOutsideNavigation)return;const t=e.relatedTarget;t?this.element.contains(t)||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)):this.subscribeDocument()}subscribeDocument(){document.addEventListener("focusin",this.documentFocusInHandler),document.addEventListener("keydown",this.documentKeyDownHandler)}unsubscribeDocument(){document.removeEventListener("keydown",this.documentKeyDownHandler),document.removeEventListener("focusin",this.documentFocusInHandler)}documentKeyDown(e){var t;const n=e.target;if(n&&(this.element===n||(null===(t=this.element)||void 0===t?void 0:t.contains(n))))return;const i=this.element;i&&i.processKeyDown(e)}documentFocusIn(e){const t=e.target;if(!t)return;this.unsubscribeDocument();const n=e.relatedTarget;(n||this.element.contains(t))&&(!n||this.element.contains(n))||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this))}firstInnerElementKeyDown(e){var t;this.firstInnerElement===document.activeElement&&"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),null===(t=this.lastInnerElement)||void 0===t||t.focus({preventScroll:!1}))}lastInnerElementKeyDown(e){var t;this.lastInnerElement!==document.activeElement||"Tab"!==e.key||e.shiftKey||(e.preventDefault(),null===(t=this.firstInnerElement)||void 0===t||t.focus({preventScroll:!1}))}unsubscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.removeEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.removeEventListener("keydown",this.lastInnerElementKeyDownHandler)}subscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.addEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.addEventListener("keydown",this.lastInnerElementKeyDownHandler)}updateInnerElements(){this.tabbables&&(this.firstInnerElement=this.tabbables[0],this.lastInnerElement=this.tabbables[this.tabbables.length-1])}};class kr{constructor(e){this.reinitCallback=e,this.mutationObserver=new MutationObserver((e=>this.checkViability(e,this.reinitCallback))),this.subscribed=!1}checkViability(e,t){for(const n of e)if(!n.target.isConnected){t();break}}subscribe(e){this.subscribed||(this.mutationObserver.observe(e,{attributes:!0}),this.subscribed=!0)}unsubscribe(){this.subscribed&&(this.mutationObserver.disconnect(),this.subscribed=!1)}}var Kr;const Or="dxbl-popup",_r=e=>e;class Vr{constructor(e,t){this.closeReason=e,this.branchId=t}}class zr extends CustomEvent{constructor(e,t){super(zr.eventName,{detail:new Vr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}zr.eventName=Or+".closingRequested",Ct.register(zr.eventName,(e=>e.detail));class Wr extends CustomEvent{constructor(e,t){super(Wr.eventName,{detail:new Vr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}var $r,Gr,qr,Yr,Xr,Jr,jr;Wr.eventName=Or+".closingResultRequested",Ct.register(Wr.eventName,(e=>e.detail)),function(e){e.Viewport="viewport",e.Page="page",e.Rectangle="rectangle",e.TargetElement="targetelement"}($r||($r={})),function(e){e.None="none",e.Hide="hide",e.Close="close"}(Gr||(Gr={})),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(qr||(qr={}));class Zr{constructor(e,t){this.targetInterestPoint=e,this.childInterestPoint=t}}!function(e){e.Absolute="absolute",e.Relative="relative",e.Bottom="bottom",e.Center="center",e.Right="right",e.AbsolutePoint="absolutepoint",e.RelativePoint="relativepoint",e.Mouse="mouse",e.MousePoint="mousepoint",e.Left="left",e.Top="top",e.Custom="custom"}(Yr||(Yr={})),function(e){e.Near="near",e.Far="far"}(Xr||(Xr={})),function(e){e.top="top",e.bottom="bottom"}(Jr||(Jr={})),function(e){e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(jr||(jr={}));class eo{constructor(e=new et(0,0),t=new nt(0,0)){this.childSize=nt.Empty,this.mousePosition=null,this.visuallyHidden=!1,this.closingRequested=!1,this.lockPlacement=!1,this.lockedPosition=0,this.topLeft=e,this.size=t}}class to{constructor(e,t,n,i,s){this.dropOpposite=!1,this.dropDirection=Xr.Near,this.dropAlignment=Jr.bottom,this.axis=t,this.point=e,this.dropOpposite=n,this.dropAlignment=s,this.dropDirection=i}}class no{get childPoints(){return this._childPoints}get placementTargetPoints(){return this._placementTargetPoints}constructor(e,t){this.customPlacement=null,this._childPoints=e,this._placementTargetPoints=t}}class io extends CustomEvent{constructor(e){super(io.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}io.eventName="dxbl-popup-custom-placement";class so{}class ro extends CustomEvent{constructor(e){super(ro.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}ro.eventName="dxbl-popup-shown";class oo extends CustomEvent{constructor(e){super(oo.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}oo.eventName="dxbl-popup-closed";class ao{get zIndex(){return this._zIndex}constructor(e){this._zIndex=null!=e?e:0}}class lo extends CustomEvent{constructor(e){super(lo.eventName,{detail:e,bubbles:!0,composed:!0})}}lo.eventName="dxbl-popup-zindex-delta-change";class Ao{get isFocused(){return this._isFocused}get branchId(){return this._branchId}constructor(e,t){this._branchId=e,this._isFocused=t}}class co extends CustomEvent{constructor(e){super(co.eventName,{detail:e,bubbles:!0,composed:!0})}}co.eventName="dxbl-popup-focus-change";class ho extends CustomEvent{constructor(e){super(ho.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}ho.eventName="dxbl-popup-visible-change";class uo extends CustomEvent{constructor(e){super(uo.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}uo.eventName="dxbl-popup-kbd-strategy-activate";class po extends CustomEvent{constructor(e){super(po.eventName,{detail:e,bubbles:!0,composed:!0})}}po.eventName="dxbl-popup-focus-loop";class mo extends CustomEvent{constructor(e){super(mo.eventName,{detail:{factory:e},bubbles:!0,composed:!0})}}mo.eventName="dxbl-popup-keyboard-strategy-creating";let go=Kr=class extends Ur{static fromElement(e){for(;null!==e&&!(e instanceof Kr);)e=e.parentElement;return e}get branchType(){return ui.DropDown}get positionChanged(){return this._positionChangedEvent}get initialVisibility(){return this._initialVisibility}set initialVisibility(e){this._initialVisibility=e,this._setVisibilityStyles(this._initialVisibility),this.initializeFocusTrap(),this.initializeKeyboardNavigator(),this.dispatchEvent(new ho(this._initialVisibility))}_setVisibilitySizing(e){e?null!==this._currentMaxHeight&&(this.style.maxWidth=this._currentMaxWidth,this.style.maxHeight=this._currentMaxHeight,this.style.overflow=this._currentOverflow):(null===this._currentMaxHeight&&(this._currentMaxHeight=this.style.maxHeight,this._currentMaxWidth=this.style.maxWidth,this._currentOverflow=this.style.overflow),this.style.overflow="hidden",this.style.maxWidth="0px",this.style.maxHeight="0px")}_setVisibilityStyles(e){e?(this.style.opacity="1",this.style.pointerEvents="auto"):(this.style.opacity="0",this.style.pointerEvents="none"),this._setVisibilitySizing(e)}enableVisibility(){clearTimeout(this._showingTimeoutId),this._showingTimeoutId=setTimeout((()=>{this.initialVisibility||(this.initialVisibility=!0)}))}static get styles(){return Ei`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            dxbl-branch {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            .content-holder {
                display: flex;
                flex: 1 0 auto;
                flex-direction: column;
                min-height: 0;
            }
        `}get isCloseOnPointerUp(){return this.closeOnPointerUp}get renderedVisible(){var e,t;return this._renderedVisible&&(null===(t=null===(e=this._parentPopup)||void 0===e?void 0:e.renderedVisible)||void 0===t||t)}updated(e){e.has("closeOnOutsideClick")&&this.processCapture(this.closeOnOutsideClick),this.reposition()}initializeFocusTrap(){this.initialVisibility&&this.isOpen&&this.focusLoop&&Mr.activate(this,!1)}get child(){return this._child}get isOpen(){return this._isOpen}get placementTargetElement(){return this.placementTargetElementField}set placementTargetElement(e){this.unsubscribeFromPlacementTargetPositionObserver(),this.placementTargetElementField=e,this.subscribeToPlacementTargetPositionObserver()}updateTargetElement(){if(!this.placementTarget)return;const e=document.querySelector(this.placementTarget);e&&(this.placementTargetElement=e)}get dropOpposite(){return this._dropOpposite}get autoFocus(){return this._autoFocus}get dropFromRight(){return this._dropFromRight}get offset(){return this._offset}set offset(e){this._offset=e,this.style.transform=gr.translateByPoint(e)}get childSize(){return this.positionInfo.childSize}constructor(){super(),this._renderedVisible=!1,this.hasOwnLogicalParent=!1,this.tolerance=.01,this.repositionAction=new er,this.positionInfo=new eo,this._child=null,this.childResizeObserver=new ResizeObserver(this.handleChildSizeChanged.bind(this)),this._dropOpposite=!1,this._dropFromRight=!1,this._offset=et.zero,this.placementTargetElementField=null,this.focusInHandler=this.handleFocusIn.bind(this),this.focusOutHandler=this.handleFocusOut.bind(this),this.focusLoopHandler=this.handleFocusLoop.bind(this),this.positionChangingHandler=this.handlePositionChanging.bind(this),this.sizeChangedHandler=this.handleSizeChanged.bind(this),this.placementTargetPositionChangedHandler=this.handlePlacementTargetPositionChanged.bind(this),this.placementTargetPositionObserver=new wr(this.placementTargetPositionChangedHandler,{raf:!1}),this.placementTargetViabilityObserver=new kr((()=>this.updateTargetElement())),this.placementTargetElementChangedHandler=this.handlePlacementTargetElementChanged.bind(this),this.placementTargetObserver=null,this._autoFocus=!1,this._interceptor=null,this.bridgeSlotChangedHandler=this.handleBridgeSlotChange.bind(this),this.closingResultRequestedTcs=new Br,this._positionChangedEvent=new Sr,this._parentPopup=null,this.positionChangedHandler=this.handleParentPopupPositionChanged.bind(this),this._initialVisibility=!0,this._showingTimeoutId=void 0,this.isAdjustDialogEnabled=!0,this._capturedElementReleaseCallback=null,this._currentMaxHeight=null,this._currentMaxWidth=null,this._currentOverflow=null,this.closeOnOutsideClick=!1,this.closeOnPointerUp=!1,this.preventCloseOnPositionTargetClick=!1,this.closeMode=Gr.Hide,this.fitToRestriction=!1,this.preventInteractions=!1,this.hasServerSideClosing=!1,this.parentBranchId=null,this.rootCssStyle=null,this.placement=Yr.Absolute,this.horizontalOffset=0,this.verticalOffset=0,this.placementTarget=null,this.restrictTarget=null,this.restrict=$r.Viewport,this.width=null,this.maxWidth=null,this.minWidth=null,this.height=null,this.maxHeight=null,this.minHeight=null,this.desiredWidth=null,this.desiredHeight=null,this.minDesiredWidth=null,this.minDesiredHeight=null,this.renderWidth=null,this.renderHeight=null,this.restrictRectangle=st.Empty,this.placementRectangle=st.Empty,this.actualDropDirection=Xr.Near,this.actualDropAlignment=Jr.bottom,this.actualDropOpposite=!1,this._isOpen=!1,this.animationEnabled=!1,this.resizing=!1,this.focusLoop=!1,this.zIndex=0,this.releasingCaptureAction=this.releaseFocusTrap,this.capturingAction=this.activate}render(){return this.renderTemplate()}activatePopupContent(){}willUpdate(e){this.renderWidth=this.calcRenderWidth(),this.renderHeight=this.calcRenderHeight(),this.shouldUpdateRootCssStyle(e)&&(this.rootCssStyle=this.composeRootCssStyle()),e.has(_r("placementTarget"))&&this.processPlacementTargetChanged()}composeRootCssStyle(){let e="";return this.shouldCalcWidth()&&(e+=`width: ${this.calcWidth()}; `),this.shouldCalcMinWidth()&&(e+=`min-width: ${this.calcMinWidth()}; `),this.shouldCalcMaxWidth()&&(e+=`max-width: ${this.calcMaxWidth()}; `),this.shouldCalcHeight()&&(e+=`height: ${this.calcHeight()}; `),this.shouldCalcMinHeight()&&(e+=`min-height: ${this.calcMinHeight()}; `),this.shouldCalcMaxHeight()&&(e+=`max-height: ${this.calcMaxHeight()}; `),e}processPlacementTargetChanged(){this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromPlacementTargetPositionObserver(),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver()}calcRenderHeight(){var e;return null!==(e=this.desiredHeight)&&void 0!==e?e:this.height}calcRenderWidth(){var e;return null!==(e=this.desiredWidth)&&void 0!==e?e:this.width}calcMaxWidth(){return this.maxWidth}calcMaxHeight(){return this.maxHeight}calcMinWidth(){var e;return null!==(e=this.minDesiredWidth)&&void 0!==e?e:this.minWidth}calcMinHeight(){var e;return null!==(e=this.minDesiredHeight)&&void 0!==e?e:this.minHeight}shouldCalcMinHeight(){return!!this.minHeight||!!this.minDesiredHeight}shouldCalcMinWidth(){return!!this.minWidth||!!this.minDesiredWidth}shouldCalcMaxWidth(){return!!this.maxWidth}shouldCalcMaxHeight(){return!!this.maxHeight}shouldCalcWidth(){return!!this.renderWidth}shouldCalcHeight(){return!!this.renderHeight}calcWidth(){return this.renderWidth}calcHeight(){return this.renderHeight}shouldUpdateRootCssStyle(e){return e.has("width")||e.has("minWidth")||e.has("maxWidth")||e.has("height")||e.has("minHeight")||e.has("maxHeight")||e.has("desiredWidth")||e.has("desiredHeight")||e.has("renderWidth")||e.has("renderHeight")||e.has("minDesiredWidth")||e.has("minDesiredHeight")}renderTemplate(){return ns`
            <div class="${this.rootCssStyle}">
                ${this.renderSlot}
            </div>
        `}renderSlot(){return ns`
            ${this.renderDefaultSlot()}
            ${this.renderAdditionalSlots()}
            ${this.renderBridgeSlot()}
        `}renderDefaultSlot(){return ns`<slot></slot>`}renderBridgeSlot(){return ns`
            <slot name="bridge" @slotchange=${this.bridgeSlotChangedHandler}></slot>
        `}renderAdditionalSlots(){return ns`
            <slot name="top-left" slot="top-left"></slot>
            <slot name="top-right" slot="top-right"></slot>
            <slot name="bottom-left" slot="bottom-left"></slot>
            <slot name="bottom-right" slot="bottom-right"></slot>
        `}firstUpdated(){this.child&&(this.childResizeObserver.observe(this.child),this.reposition())}connectedCallback(){super.connectedCallback(),this.style.display=Q.flex}disconnectedCallback(){super.disconnectedCallback(),this.close()}createKeyboardNavigationStrategy(){return null}initializeKeyboardNavigator(){var e,t,n;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(rr)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const i=new mo({createPopup:this.createKeyboardNavigationStrategy.bind(this)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(i);const s=null===(n=null===(t=i.detail.factory)||void 0===t?void 0:t.createPopup)||void 0===n?void 0:n.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}handleBridgeSlotChange(e){const t=e.target.assignedNodes();this._interceptor=t[0]}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=t.nextInteractionHandled||this.preventInteractions,this.closeOnOutsideClick&&await this.closeAsync(t,Er.OutsideClick))}isPointedCaptured(e){return!!K.containsInComposedPath(e,this)||(!!(e.target instanceof Node&&this.isSubItem(e.target))||this.shouldCloseOnPlacementTargetClick(e))}isSubItem(e){return!!mt.findParent(e,(e=>e===this))}shouldCloseOnPlacementTargetClick(e){return!(!this.preventCloseOnPositionTargetClick||!this.placementTargetElement)&&H.containsInComposedPath(e,(e=>e===this.placementTargetElement))}async closeAsync(e,t){const n=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Br,e.nextInteractionHandled=e.nextInteractionHandled||this.preventInteractions,e.handled=!0,Promise.resolve(!!n)}async processCapturedKeyDownAsync(e,t){if(await super.processCapturedKeyDownAsync(e,t),!t.handled&&t.caller===this&&"Escape"===e.key&&this.canProcessEscapeKeyDown()){H.markHandled(e);const n=await this.raiseClosingResultRequestedAsync(Er.EscapePress);if(this.closingResultRequestedTcs=new Br,!n)return void(t.handled=!0);this.unsubscribeCapture()}}canProcessEscapeKeyDown(){return!0}releaseFocusTrap(){Mr.deactivate(this,!this.isOpen)}raiseEvent(e,t){var n;null===(n=this._interceptor)||void 0===n||n.raise(e,t)}unsubscribeFromPlacementTargetObserver(){this.placementTargetObserver&&(this.placementTargetObserver.disconnect(),this.placementTargetObserver=null)}subscribeToPlacementTargetObserver(){this.isOpen&&(this.placementTargetObserver=new yr(this.placementTarget,this.placementTargetElementChangedHandler),this.placementTargetObserver.observe())}unsubscribeFromPlacementTargetPositionObserver(){this.placementTargetPositionObserver.disconnect(),this.placementTargetViabilityObserver.unsubscribe()}subscribeToParentPopup(){const e=mt.findParent(this,(e=>At(e)));if(e&&At(e)){const t=e;t.positionChanged.subscribe(this.positionChangedHandler),this._parentPopup=t}}unsubscribeFromParentPopup(){this._parentPopup&&(this._parentPopup.positionChanged.unsubscribe(this.positionChangedHandler),this._parentPopup=null)}handleParentPopupPositionChanged(e,t){this.updatePosition()}subscribeToPlacementTargetPositionObserver(){this.placementTargetElement&&this.isOpen&&(this.placementTargetPositionObserver.observe(this.placementTargetElement),this.placementTargetViabilityObserver.subscribe(this.placementTargetElement))}show(){this.isOpen||(this._isOpen=!0,this.initialVisibility=!1,this._isOpen=!0,this.raiseShown(),this.addToLogicalTree(),this.addToVisibleBranchTree(),this.subscribeEvents(),this.initializeCapture(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!0))}get canAdjustZIndexOnShow(){return!0}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),fi.register(this.branchId)}removeFromVisibleBranchTree(){this.ensureBranchId(),fi.unregister(this.branchId)}getPortal(){return Ka.getPortal(this.branchId)}raiseShown(){this._setVisibilitySizing(!0);const e=new so;this.dispatchEvent(new ro(e))}raiseClosed(){const e=new so;this.dispatchEvent(new oo(e))}close(){var e;this.isOpen&&(this._isOpen=!1,this.raiseClosed(),this.removeFromLogicalTree(),this.removeFromVisibleBranchTree(),this.unsubscribeEvents(),this.releaseCapture(),this.cleanUpAfterClose(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!1),null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent())}notifyCloseCanceled(){this.processClosingRequested(!1),this.positionInfo.closingRequested=!1}cleanUpAfterClose(){this.updateVisibility(!1),this.animationEnabled=!1,this.positionInfo=new eo}shouldCapture(){return this.closeOnOutsideClick||this.preventInteractions}async addToLogicalTree(){if(this.hasLogicalParent)return void(this.hasOwnLogicalParent=!0);this.ensureBranchId();const e=Ci.getParentId(this.branchId),t=await ar().getPopup(e);t&&ct(t)&&t.addLogicalChild(this)}removeFromLogicalTree(){if(this.hasOwnLogicalParent)return void(this.hasOwnLogicalParent=!1);const e=mt.getParent(this,!0);e&&ct(e)&&e.removeLogicalChild(this)}initializeCapture(){this.shouldCapture&&this.subscribeCapture()}focusCapture(){}releaseCapture(){this.processClosingRequested(!0),this.unsubscribeCapture()}subscribeCapture(){const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}unsubscribeCapture(){this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null)}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Br,this.positionInfo.closingRequested=!1}subscribeToChild(e){e&&this.childResizeObserver.observe(e,{box:"border-box"})}unsubscribeFromChild(e){e&&this.childResizeObserver.unobserve(e)}subscribeEvents(){this.isAdjustDialogEnabled&&(this.addEventListener("focusin",this.focusInHandler),this.addEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.addEventListener(po.eventName,this.focusLoopHandler),document.addEventListener(Cr.eventName,this.positionChangingHandler),this.addEventListener(Cr.eventName,this.positionChangingHandler),window.addEventListener("resize",this.sizeChangedHandler),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver(),this.subscribeToParentPopup()}unsubscribeEvents(){this.isAdjustDialogEnabled&&(this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.removeEventListener(po.eventName,this.focusLoopHandler),document.removeEventListener(Cr.eventName,this.positionChangingHandler),this.removeEventListener(Cr.eventName,this.positionChangingHandler),this.removeEventListener("resize",this.sizeChangedHandler),this.unsubscribeFromPlacementTargetPositionObserver(),this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromParentPopup()}reposition(){this.repositionAction.execute(this.updatePosition.bind(this))}activate(){const e=new Qs(new Hs(this.branchId));this.dispatchEvent(e)}forceReposition(){this.repositionAction.cancel(),this.updatePosition()}lockPlacement(){this.positionInfo.lockPlacement=!0}unlockPlacement(){this.positionInfo.lockPlacement=!1}handleChildSizeChanged(e,t){this.reposition(),this.contentLoaded()&&this.enableVisibility()}contentLoaded(){return!0}handlePositionChanging(e){this.reposition()}handleSizeChanged(e){this.reposition()}handlePlacementTargetPositionChanged(e,t){this.reposition(),this.enableVisibility()}handlePlacementTargetElementChanged(e,t){this.placementTargetElement=e.element,this.reposition()}handleFocusIn(e){this.raiseAdjustZIndexRequest(!0),this.subscribeCapture()}handleFocusOut(e){this.raiseAdjustZIndexRequest(!1)}handleFocusLoop(){this.initializeFocusTrap()}raiseAdjustZIndexRequest(e){this.dispatchEvent(new co(new Ao(this.branchId,e))),e&&this.focusCapture()}isAbsolutePlacementMode(e){switch(e){case Yr.MousePoint:case Yr.Mouse:case Yr.AbsolutePoint:case Yr.Absolute:return!0}return!1}interestPointsFromRect(e){const t=new Array(5);return t[qr.TopLeft]=e.topLeft,t[qr.TopRight]=e.topRight,t[qr.BottomLeft]=e.bottomLeft,t[qr.BottomRight]=e.bottomRight,t[qr.Center]=new et(e.x+e.width/2,e.y+e.height/2),t}getPlacementTargetInterestPoints(e){let t,n=st.Empty;const i=this.placementTargetElement,s=new ur(this.horizontalOffset,this.verticalOffset);if(!i||this.isAbsolutePlacementMode(e))e!==Yr.Mouse&&e!==Yr.MousePoint||(this.positionInfo.mousePosition||(this.positionInfo.mousePosition=new et(hr.x,hr.y)),n=st.create(this.positionInfo.mousePosition,nt.Empty)),n=rt.offset(n,s),t=this.interestPointsFromRect(n);else{n=this.placementRectangle,rt.areSame(n,st.Empty)&&(n=e!==Yr.Relative&&e!==Yr.RelativePoint?new st(0,0,i.getBoundingClientRect().width,i.getBoundingClientRect().height):st.Empty),n=rt.offset(n,s),t=this.interestPointsFromRect(n);const r=at.getRelativeElementRect(i).topLeft;for(let e=0;e<5;e++)t[e]=tt.add(t[e],r)}return t}getChildInterestPoints(e){return this.child?(this._setVisibilitySizing(!0),this.interestPointsFromRect(new st(0,0,this.child.offsetWidth,this.child.offsetHeight))):this.interestPointsFromRect(st.Empty)}getBounds(e){let t=e[0].x,n=e[0].x,i=e[0].y,s=e[0].y;return e.forEach((e=>{const r=e.x,o=e.y;r<t&&(t=r),r>n&&(n=r),o<i&&(i=o),o>s&&(s=o)})),new st(t,i,n-t,s-i)}raiseCustomPlacement(e,t){const n=new io(new no(e,t));return this.dispatchEvent(n),n.detail.customPlacement}getNumberOfCombinations(e){switch(e){case Yr.Mouse:return 2;case Yr.Bottom:case Yr.Top:case Yr.Right:case Yr.Left:case Yr.RelativePoint:case Yr.MousePoint:case Yr.AbsolutePoint:return 4;case Yr.Custom:return 0;default:return 1}}getPointCombination(e,t){const n=this.dropFromRight;switch(e){case Yr.Mouse:if(n){if(0===t)return[new Zr(qr.BottomRight,qr.TopRight),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.TopRight,qr.BottomRight),jr.Horizontal,!1,Xr.Near,Jr.bottom]}else{if(0===t)return[new Zr(qr.BottomLeft,qr.TopLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom]}break;case Yr.Bottom:if(n){if(0===t)return[new Zr(qr.BottomRight,qr.TopRight),jr.Horizontal,!1,Xr.Far,Jr.bottom];if(1===t)return[new Zr(qr.TopRight,qr.BottomRight),jr.Horizontal,!0,Xr.Far,Jr.top];if(2===t)return[new Zr(qr.BottomLeft,qr.TopLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(3===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!0,Xr.Near,Jr.top]}else{if(0===t)return[new Zr(qr.BottomLeft,qr.TopLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!0,Xr.Near,Jr.top];if(2===t)return[new Zr(qr.BottomRight,qr.TopRight),jr.Horizontal,!1,Xr.Far,Jr.bottom];if(3===t)return[new Zr(qr.TopRight,qr.BottomRight),jr.Horizontal,!0,Xr.Far,Jr.top]}break;case Yr.Top:if(n){if(0===t)return[new Zr(qr.TopRight,qr.BottomRight),jr.Horizontal,!1,Xr.Far,Jr.top];if(1===t)return[new Zr(qr.BottomRight,qr.TopRight),jr.Horizontal,!0,Xr.Far,Jr.bottom];if(2===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!1,Xr.Near,Jr.top];if(3===t)return[new Zr(qr.BottomLeft,qr.TopLeft),jr.Horizontal,!0,Xr.Near,Jr.bottom]}else{if(0===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!1,Xr.Near,Jr.top];if(1===t)return[new Zr(qr.BottomLeft,qr.TopLeft),jr.Horizontal,!0,Xr.Near,Jr.bottom];if(2===t)return[new Zr(qr.TopRight,qr.BottomRight),jr.Horizontal,!1,Xr.Far,Jr.top];if(3===t)return[new Zr(qr.BottomRight,qr.TopRight),jr.Horizontal,!0,Xr.Far,Jr.bottom]}break;case Yr.Right:case Yr.Left:if(n&&e===Yr.Right||!n&&e===Yr.Left){if(0===t)return[new Zr(qr.TopLeft,qr.TopRight),jr.Vertical,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.BottomLeft,qr.BottomRight),jr.Vertical,!0,Xr.Near,Jr.top];if(2===t)return[new Zr(qr.TopRight,qr.TopLeft),jr.Vertical,!1,Xr.Far,Jr.bottom];if(3===t)return[new Zr(qr.BottomRight,qr.BottomLeft),jr.Vertical,!0,Xr.Far,Jr.top]}else{if(0===t)return[new Zr(qr.TopRight,qr.TopLeft),jr.Vertical,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.BottomRight,qr.BottomLeft),jr.Vertical,!0,Xr.Near,Jr.top];if(2===t)return[new Zr(qr.TopLeft,qr.TopRight),jr.Vertical,!1,Xr.Far,Jr.bottom];if(3===t)return[new Zr(qr.BottomLeft,qr.BottomRight),jr.Vertical,!0,Xr.Far,Jr.top]}break;case Yr.Relative:case Yr.RelativePoint:case Yr.MousePoint:case Yr.AbsolutePoint:if(n){if(0===t)return[new Zr(qr.TopLeft,qr.TopRight),jr.Horizontal,!1,Xr.Far,Jr.bottom];if(1===t)return[new Zr(qr.TopLeft,qr.TopLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(2===t)return[new Zr(qr.TopLeft,qr.BottomRight),jr.Horizontal,!0,Xr.Far,Jr.top];if(3===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!0,Xr.Near,Jr.top]}else{if(0===t)return[new Zr(qr.TopLeft,qr.TopLeft),jr.Horizontal,!1,Xr.Near,Jr.bottom];if(1===t)return[new Zr(qr.TopLeft,qr.TopRight),jr.Horizontal,!1,Xr.Far,Jr.bottom];if(2===t)return[new Zr(qr.TopLeft,qr.BottomLeft),jr.Horizontal,!0,Xr.Near,Jr.top];if(3===t)return[new Zr(qr.TopLeft,qr.BottomRight),jr.Horizontal,!0,Xr.Far,Jr.top]}break;case Yr.Center:return[new Zr(qr.Center,qr.Center),jr.None,!1,Xr.Near,Jr.bottom];default:return[new Zr(qr.TopLeft,qr.TopLeft),jr.None,!1,Xr.Near,Jr.bottom]}return[new Zr(qr.TopLeft,qr.TopLeft),jr.None,!1,Xr.Near,Jr.bottom]}getRestrictBounds(){switch(this.restrict){case $r.Viewport:return mr.viewport();case $r.Page:return mr.page();case $r.TargetElement:{if(!this.restrictTarget)throw new Error("restrictTarget should be specified if restrictmode is custom");const e=document.querySelector(this.restrictTarget);return at.getRelativeElementRect(e)}case $r.Rectangle:return this.restrictRectangle}return mr.viewport()}updatePosition(){if(!this.isOpen)return this._renderedVisible=!1,void this._setVisibilityStyles(!1);const e=this.renderedVisible;this._renderedVisible=!0;const t=this.renderedVisible;if(!t)return this.updateVisibility(!0),void(e!==t&&this.raisePositionChanged(this.offset,!1));const n=this.placement,i=this.getPlacementTargetInterestPoints(n),s=this.getChildInterestPoints(n),r=this.getBounds(i);let o=this.getBounds(s);const a=o.width*o.height;let l=-1,A=new ur(this.positionInfo.topLeft.x,this.positionInfo.topLeft.y),d=!1,c=-1,h=jr.None,u=0,p=this.actualDropDirection,m=this.actualDropOpposite,g=this.actualDropAlignment,C=null,f=null;n===Yr.Custom?(f=this.processCustomPlacement(s,i),u=f?f.length:0):u=this.getNumberOfCombinations(n);for(let e=0;e<u;e++){if(this.positionInfo.lockPlacement&&this.positionInfo.lockedPosition!==e)continue;let t=new ur(0,0),r=jr.None,d=!1,u=Xr.Near,v=Jr.bottom,b=null;if(n===Yr.Custom)b=f[e],t=pr.add(i[qr.TopLeft],b.point),r=b.axis,d=b.dropOpposite,u=b.dropDirection,v=b.dropAlignment;else{const[r,o,a,l,A]=this.getPointCombination(n,e);d=a,u=l,v=A,t=tt.sub(i[r.targetInterestPoint],s[r.childInterestPoint])}const w=rt.offset(o,t),y=this.getRestrictBounds(),B=rt.intersect(y,w),E=B.isEmpty?0:B.width*B.height;if(E-c>this.tolerance&&(l=e,A=t,c=E,h=r,p=u,m=d,g=v,C=b,Math.abs(E-a)<this.tolerance))break}this.actualDropOpposite=m,this.actualDropDirection=p,this.actualDropAlignment=g,o=rt.offset(o,A);const v=this.getRestrictBounds(),b=rt.intersect(v,o);[A,d]=this.calcRestrictedBestTranslation(b,o,i,v,r,A),this.processBestTranslationResults(A,o,r,v,m,p,g,h,C),this.positionInfo.lockedPosition=l,this.positionInfo.childSize=o.size;const w=Math.round(A.x),y=Math.round(A.y);let B=!1;w===this.positionInfo.topLeft.x&&y===this.positionInfo.topLeft.y||(this.positionInfo.topLeft=new et(w,y),this.offset=this.positionInfo.topLeft,B=!0);const E=!t||d,I=this.updateVisibility(E);B=B||I,this.animationEnabled=t&&!d,this._setVisibilityStyles(!E),B&&this.raisePositionChanged(this.offset,E),this.closeMode===Gr.Close&&!this.positionInfo.closingRequested&&E&&(this.positionInfo.closingRequested=!0,this.raiseClosingRequested(Er.Programmatically))}raisePositionChanged(e,t){this._positionChangedEvent.raise(this,[!t,e])}updateVisibility(e){return this._renderedVisible=!e,this.positionInfo.visuallyHidden!==e&&(this._setVisibilityStyles(!e),this.positionInfo.visuallyHidden=e,!0)}processCustomPlacement(e,t){return this.raiseCustomPlacement(e,t)}raiseClosingRequested(e){this.dispatchEvent(new zr(e,this.branchId))}raiseClosingResultRequested(e){this.dispatchEvent(new Wr(e,this.branchId))}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Br;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}calcRestrictedBestTranslation(e,t,n,i,s,r){return[this.fitToRestriction?this.calcRestrictedFitBestTranslation(e,t,n,i,r):r,this.closeMode!==Gr.None&&this.calcRestrictedShouldHide(i,s)]}calcRestrictedShouldHide(e,t){if(!this.placementTargetElement)return!Kr.checkTargetEdgesWithin(e,t);let n=e;return at.getClippingParents(this.placementTargetElement).forEach((e=>{const t=at.getRelativeElementRect(e);n=rt.intersect(n,t)})),!!n.isEmpty||!Kr.checkTargetEdgesWithin(n,t)}static checkTargetEdgesWithin(e,t){return rt.contains(e,t.topLeft)||rt.contains(e,t.topRight)||rt.contains(e,t.bottomLeft)||rt.contains(e,t.bottomRight)}calcRestrictedFitBestTranslation(e,t,n,i,s){if(Math.abs(e.width-t.width)>this.tolerance||Math.abs(e.height-t.height)>this.tolerance){const e=n[qr.TopLeft],r=tt.sub(n[qr.TopRight],e),o=pr.normalize(new ur(r.x,r.y));Number.isNaN(o.y)||Math.abs(o.y)<this.tolerance?t.right>i.right?s=new ur(i.right-t.width,s.y):t.left<i.left&&(s=new ur(i.left,s.y)):Math.abs(o.x)<this.tolerance&&(t.bottom>i.bottom?s=new ur(s.x,i.bottom-t.bottom):t.top<i.top&&(s=new ur(s.x,i.top)));const a=tt.sub(e,n[qr.BottomLeft]),l=pr.normalize(a);Number.isNaN(l.x)||Math.abs(l.x)<this.tolerance?t.bottom>i.bottom?s=new ur(s.x,i.bottom-t.height):t.top<i.top&&(s=new ur(s.x,i.top)):Math.abs(l.y)<this.tolerance&&(t.right>i.right?s=new ur(i.right-t.width,s.y):t.left<i.left&&(s=new ur(i.x,s.y)))}return s}processCapture(e){}processBestTranslationResults(e,t,n,i,s,r,o,a,l){}};C([xs({type:Boolean,attribute:"close-on-outside-click"})],go.prototype,"closeOnOutsideClick",void 0),C([xs({type:Boolean,attribute:"close-on-pointer-up"})],go.prototype,"closeOnPointerUp",void 0),C([xs({type:Boolean,attribute:"prevent-close-on-position-target-click"})],go.prototype,"preventCloseOnPositionTargetClick",void 0),C([xs({type:String,attribute:"close-mode"})],go.prototype,"closeMode",void 0),C([xs({type:Boolean,attribute:"fit-to-restriction"})],go.prototype,"fitToRestriction",void 0),C([xs({type:Boolean,attribute:"prevent-interactions"})],go.prototype,"preventInteractions",void 0),C([xs({type:Boolean,attribute:"has-serverside-closing"})],go.prototype,"hasServerSideClosing",void 0),C([xs({type:String,attribute:"branch-id"})],go.prototype,"branchId",void 0),C([xs({type:String,attribute:"parent-branch-id"})],go.prototype,"parentBranchId",void 0),C([xs({type:String,reflect:!1})],go.prototype,"rootCssStyle",void 0),C([xs({type:String,attribute:"placement"})],go.prototype,"placement",void 0),C([xs({type:Number,attribute:"horizontal-offset"})],go.prototype,"horizontalOffset",void 0),C([xs({type:Number,attribute:"vertical-offset"})],go.prototype,"verticalOffset",void 0),C([xs({type:String,attribute:"placement-target"})],go.prototype,"placementTarget",void 0),C([xs({type:String,attribute:"restrict-target"})],go.prototype,"restrictTarget",void 0),C([xs({type:String,attribute:"restrict"})],go.prototype,"restrict",void 0),C([xs({type:String,attribute:"width"})],go.prototype,"width",void 0),C([xs({type:String,attribute:"max-width"})],go.prototype,"maxWidth",void 0),C([xs({type:String,attribute:"min-width"})],go.prototype,"minWidth",void 0),C([xs({type:String,attribute:"height"})],go.prototype,"height",void 0),C([xs({type:String,attribute:"max-height"})],go.prototype,"maxHeight",void 0),C([xs({type:String,attribute:"min-height"})],go.prototype,"minHeight",void 0),C([xs({type:String,attribute:"desired-width"})],go.prototype,"desiredWidth",void 0),C([xs({type:String,attribute:"desired-height"})],go.prototype,"desiredHeight",void 0),C([xs({type:String,attribute:"min-desired-width"})],go.prototype,"minDesiredWidth",void 0),C([xs({type:String,attribute:"min-desired-height"})],go.prototype,"minDesiredHeight",void 0),C([xs({type:String,reflect:!1})],go.prototype,"renderWidth",void 0),C([xs({type:String,reflect:!1})],go.prototype,"renderHeight",void 0),C([xs({type:String,attribute:"restrict-rect",converter:e=>e?rt.parse(e):st.Empty})],go.prototype,"restrictRectangle",void 0),C([xs({type:String,attribute:"placement-rect",converter:e=>e?rt.parse(e):st.Empty})],go.prototype,"placementRectangle",void 0),C([xs({type:String,attribute:"x-drop-direction",reflect:!0})],go.prototype,"actualDropDirection",void 0),C([xs({type:String,attribute:"x-drop-alignment",reflect:!0})],go.prototype,"actualDropAlignment",void 0),C([xs({type:String,attribute:"x-drop-opposite",reflect:!0,converter:{toAttribute:(e,t)=>e?"true":"false"}})],go.prototype,"actualDropOpposite",void 0),C([xs({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],go.prototype,"_isOpen",void 0),C([xs({type:Boolean,reflect:!1})],go.prototype,"animationEnabled",void 0),C([xs({type:Boolean,attribute:"resizing"})],go.prototype,"resizing",void 0),C([xs({type:Boolean,attribute:"focus-loop"})],go.prototype,"focusLoop",void 0),C([xs({type:Number,attribute:"z-index"})],go.prototype,"zIndex",void 0),go=Kr=C([Es(Or)],go);const Co="dxbl-popup-cell";let fo=class extends ys{constructor(){super(...arguments),this._portal=null,this.elements=null,this.elementsChangedHandler=this.handleElementsChanged.bind(this),this.zIndexDeltaChangeHandler=this.handleZIndexDeltaChange.bind(this),this.baseZIndex=0,this.zIndexDelta=0}get zIndex(){return this.baseZIndex+this.zIndexDelta}createRenderRoot(){return this}get portal(){return this._portal}setPortal(e){this.unsubscribe(),this._portal=e,this.subscribe(),this.updateElements(this.elements,e.portable)}connectedCallback(){super.connectedCallback(),this.subscribe()}subscribe(){this.addEventListener(lo.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.addEventListener(dr.eventName,this.elementsChangedHandler)}unsubscribe(){this.removeEventListener(lo.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.removeEventListener(dr.eventName,this.elementsChangedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}handleElementsChanged(e){this.updateElements(this.elements,e.detail.elements)}updateElements(e,t){e&&e.forEach((e=>this.removeChild(e))),this.elements=t,t&&this.append(...t)}handleZIndexDeltaChange(e){this.zIndexDelta=e.detail.zIndex}updated(e){(e.has("zIndex")||e.has("zIndexDelta")||e.has("baseZIndex"))&&(this.style.zIndex=String(this.zIndex))}};C([xs({type:Number})],fo.prototype,"baseZIndex",void 0),C([xs({type:Number})],fo.prototype,"zIndexDelta",void 0),C([xs({type:Number,reflect:!0})],fo.prototype,"zIndex",null),fo=C([Es(Co)],fo);const vo=new class{constructor(){this._shadowBranchEvent=new Ir,this._topShadowId=null,this.shadowSet=new Set}get shadowBranchChanged(){return this._shadowBranchEvent}register(e){this.shadowSet.add(e),this.raiseTopShadowStackChanged()}unregister(e){this.shadowSet.delete(e),this.raiseTopShadowStackChanged()}raiseTopShadowStackChanged(){const e=this.getTopShadowModal();if(this._topShadowId===e)return;this._topShadowId=e;this._shadowBranchEvent.raise({branch:e})}getTopShadowModal(){let e=-1,t="";for(const n of Array.from(this.shadowSet)){const i=fi.getIndex(n);i>e&&(e=i,t=n)}return t}},bo=pe.Prefix+"-prevent-safari-scrolling";const wo=new class{constructor(){this.paddingCoerced=!1,this.bodyScrollTop=0,this.bodyScrollPadding="",this.scrollLocked=!1,this.scrollLockHostSet=new Set}register(e){this.scrollLockHostSet.add(e),this.updateScrollLock()}unregister(e){this.scrollLockHostSet.delete(e),this.updateScrollLock()}updateScrollLock(){this.toggleBodyScroll(document.body,this.scrollLockHostSet.size>0)}toggleBodyScroll(e,t){t!==this.scrollLocked&&(this.scrollLocked=t,this.toggleScrollPadding(e,t),T.DomUtils.toggleClassName(e,"dxbl-modal-open",t),h.Browser.Safari&&this.toggleSafariScroll(e,t))}toggleScrollPadding(e,t){if(t){const t=ot.getVerticalScrollbarWidth();if(0===t)return;this.paddingCoerced=!0;const n=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);return this.bodyScrollPadding=document.body.style.paddingRight,void(e.style.paddingRight=`${n+t}px`)}this.paddingCoerced&&(e.style.paddingRight=this.bodyScrollPadding,this.paddingCoerced=!1)}toggleSafariScroll(e,t){t?(this.bodyScrollTop=window.pageYOffset,T.DomUtils.toggleClassName(e,bo,t)):(T.DomUtils.toggleClassName(e,bo,t),window.scrollTo(0,this.bodyScrollTop))}};class yo{}yo.Window=pe.Prefix+"-window",yo.WindowHeader=yo.Window+"-header",yo.WindowHeaderButton=yo.WindowHeader+"-button";class Bo{}Bo.Popup=pe.Prefix+"-popup",Bo.PopupHeader=Bo.Popup+"-header",Bo.PopupHeaderButton=Bo.PopupHeader+"-button",Bo.PopupResized=Bo.Popup+"-resized";const Eo=`.${yo.WindowHeaderButton}, .${Bo.PopupHeaderButton}`;class Io{constructor(e,t){this.x=t.x,this.y=t.y}}class So extends CustomEvent{constructor(e,t){super(So.eventName,{detail:new Io(e,t),bubbles:!0,composed:!0,cancelable:!1})}}So.eventName="dxbl:popup-dragcompleted",Ct.register(So.eventName,(e=>e.detail));class xo{constructor(e){this.x=e.x,this.y=e.y}}class Do extends CustomEvent{constructor(e){super(Do.eventName,{detail:new xo(e),bubbles:!0,composed:!0,cancelable:!1})}}Do.eventName="dxbl:popup-dragstarted",Ct.register(Do.eventName,(e=>e.detail));class Fo{constructor(e){this.x=e.x,this.y=e.y}}class To extends CustomEvent{constructor(e){super(To.eventName,{detail:new Fo(e),bubbles:!0,composed:!0,cancelable:!0})}}To.eventName="dxbl-popup.drag";const Ho="dxbl-popup-dragging";let Uo=class extends ys{constructor(){super(),this.allowDrag=!1,this.showCloseButton=!1}updated(e){(e.has("showCloseButton")||this.showCloseButton)&&this.preventCloseButtonDragging()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}render(){return ns`<slot></slot>`}preventCloseButtonDragging(){const e=this.querySelector(Eo);e&&e.addEventListener("pointerdown",(e=>{e.stopPropagation()}))}};C([xs({type:Boolean,attribute:"allow-drag",reflect:!1})],Uo.prototype,"allowDrag",void 0),C([xs({type:Boolean,attribute:"show-close-button",reflect:!1})],Uo.prototype,"showCloseButton",void 0),Uo=C([Es("dxbl-popup-header")],Uo);class Qo{constructor(e,t,n,i){this.min=new et(e,t),this.max=new et(n,i)}}function Po(e,t,n){const i=n.min,s=n.max;return new et(No(i.x,s.x,t.clientX+window.scrollX-e.x),No(i.y,s.y,t.clientY+window.scrollY-e.y))}function No(e,t,n){return Math.floor(Math.min(t,Math.max(e,n)))}class Ro{constructor(e,t,n,i,s=null){this.mainElement=e,this.onStart=t,this.onMove=n,this.onEnd=i,this.checkPermission=s,this.handlersAdded=!1,this.dragHandler=this.handleDragStart.bind(this)}addHandlers(){this.handlersAdded||(this.mainElement.addEventListener(a.eventName,this.dragHandler),this.handlersAdded=!0)}removeHandlers(){this.mainElement.removeEventListener(a.eventName,this.dragHandler),this.handlersAdded=!1}handleDragStart(e){if(null!==this.checkPermission&&!this.checkPermission())return;const t=e,n=function(e,t){const n=e.getBoundingClientRect();return new et(Math.floor(t.clientX-n.x),Math.floor(t.clientY-n.y))}(this.mainElement,t.detail.source),i=(s=n,new Qo(window.scrollX-s.x,window.scrollY-s.y,window.scrollX+window.innerWidth-s.x,window.scrollY+window.innerHeight-s.y));var s;const r=Po(n,t.detail.source,i);let o=r,a=null;const A=e=>{0===e.buttons||(o=Po(n,e,i),null!==a&&tt.areClose(a,o)||(a=o,this.onMove(a)))};document.addEventListener("pointermove",A,{passive:!0}),this.mainElement.addEventListener(l.eventName,(e=>{document.removeEventListener("pointermove",A);const t=e,s=Po(n,t.detail.source,i);null!=a||(a=s),this.onEnd(0!==t.detail.source.buttons?s:a,r)}),{once:!0}),this.onStart(r)}}class Lo extends ys{static get styles(){return Ei`
            :host {
                display: flex;
            }
        `}connectedCallback(){super.connectedCallback(),i.setLoaded(this)}disconnectedCallback(){super.disconnectedCallback(),i.removeLoaded(this)}render(){return ns`<slot></slot>`}}class Mo extends Lo{get draggableElement(){return this.allowDragByHeaderOnly?this.header:this}get canDrag(){return this.allowDrag&&(null!==this.header||!this.allowDragByHeaderOnly)}constructor(){super(),this.allowDrag=!1,this.allowDragByHeaderOnly=!1,this.canDragByBody=!1,this.showHeader=!1,this.pointerEventsHelper=new q(this),this.dragHandler=new Ro(this,(e=>{this.style.cursor="move",this.style.userSelect="none",this.classList.add(Ho),this.shadowRoot.dispatchEvent(new Do(e))}),(e=>{this.shadowRoot.dispatchEvent(new To(e))}),((e,t)=>{this.style.cursor="",this.style.userSelect="",this.classList.remove(Ho),this.shadowRoot.dispatchEvent(new So(t,e))}),(()=>this.canDrag))}disconnectedCallback(){super.disconnectedCallback(),this.disposeDrag()}updated(e){(e.has("allowDrag")||e.has("allowDragByHeaderOnly")||e.has("showHeader"))&&this.updateDragging()}updateDragging(){this.allowDrag&&this.canDragByBody?(this.pointerEventsHelper.reinitialize(this.draggableElement),this.dragHandler.addHandlers()):this.disposeDrag()}disposeDrag(){this.dragHandler.removeHandlers(),this.pointerEventsHelper.dispose()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([xs({type:Boolean,attribute:"allow-drag",reflect:!0})],Mo.prototype,"allowDrag",void 0),C([xs({type:Boolean,attribute:"allow-drag-by-header-only",reflect:!0})],Mo.prototype,"allowDragByHeaderOnly",void 0),C([xs({type:Boolean,attribute:"can-drag-by-body"})],Mo.prototype,"canDragByBody",void 0),C([xs({type:Boolean,attribute:"show-header"})],Mo.prototype,"showHeader",void 0);const ko=new ResizeObserver((e=>{for(const t of e){t.target.actualSize=new nt(Math.round(t.contentRect.width),Math.round(t.contentRect.height))}}));const Ko="0.25rem",Oo="--dxbl-popup-resize-container-width",_o="--dxbl-popup-resize-container-height";class Vo{constructor(e){this.width=e.width,this.height=e.height}}class zo extends CustomEvent{constructor(e){super(zo.eventName,{detail:new Vo(e),bubbles:!0,composed:!0,cancelable:!1})}}zo.eventName="dxbl:popup-resizestarted",Ct.register(zo.eventName,(e=>e.detail));class Wo{constructor(e){this.width=e.width,this.height=e.height}}class $o extends CustomEvent{constructor(e){super($o.eventName,{detail:new Wo(e),bubbles:!0,composed:!0,cancelable:!1})}}$o.eventName="dxbl:popup-resizecompleted",Ct.register($o.eventName,(e=>e.detail));class Go{constructor(e,t,n,i,s,r){this.deltaWidth=e,this.deltaHeight=t,this.deltaX=n,this.deltaY=i,this.resizing=s,this.dragging=r}}class qo extends CustomEvent{constructor(e,t,n,i,s,r){super(qo.eventName,{detail:new Go(e,t,n,i,s,r),bubbles:!0,composed:!0,cancelable:!1})}}qo.eventName="dxbl:popup-layoutchange";class Yo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.resizing=e,this.dragging=t}}class Xo extends CustomEvent{constructor(e,t){super(Xo.eventName,{detail:new Yo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}Xo.eventName="dxbl:popup-layoutchangestart",Ct.register(Xo.eventName,(e=>e.detail));class Jo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.oldWidth=null,this.oldHeight=null,this.oldX=null,this.oldY=null,this.resizing=e,this.dragging=t}}class jo extends CustomEvent{constructor(e,t){super(jo.eventName,{detail:new Jo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}jo.eventName="dxbl:popup-layoutchangeend",Ct.register(jo.eventName,(e=>e.detail));class Zo extends CustomEvent{constructor(e){super(Zo.eventName,{detail:e,bubbles:!0,composed:!0})}}Zo.eventName="dxbl-popup-resizer.onMoving";class ea extends ys{get lastX(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.x}get lastY(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.y}get topValue(){throw new Error("should be implemented")}get leftValue(){throw new Error("should be implemented")}get widthValue(){return Ko}get heightValue(){return Ko}get cursorValue(){throw new Error("should be implemented")}get isDragPossible(){return!1}constructor(){super(),this.currentPosition=null,this.pointerEventsHelper=new q(this),this.dragHandler=new Ro(this,(e=>{this.dispatchEvent(new Zo(!0)),this.currentPosition=e,this.shadowRoot.dispatchEvent(new Xo(!0,this.isDragPossible))}),(e=>{const t=this.getDeltaWidth(e.x),n=this.getDeltaHeight(e.y),i=this.getDeltaX(e.x),s=this.getDeltaY(e.y);this.currentPosition=e,this.shadowRoot.dispatchEvent(new qo(t,n,i,s,!0,this.isDragPossible))}),((e,t)=>{this.dispatchEvent(new Zo(!1)),this.currentPosition=null,this.shadowRoot.dispatchEvent(new jo(!0,this.isDragPossible))}))}connectedCallback(){super.connectedCallback(),this.pointerEventsHelper.initialize(),this.dragHandler.addHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.pointerEventsHelper.dispose(),this.dragHandler.removeHandlers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}getDeltaWidth(e){throw new Error("should be implemented")}getDeltaHeight(e){throw new Error("should be implemented")}getDeltaX(e){throw new Error("should be implemented")}getDeltaY(e){throw new Error("should be implemented")}render(){return ns`
    <style>
        :host {
            position: absolute;
            top: ${this.topValue};
            left: ${this.leftValue};
            width: 0px;
            height: 0px;
            z-index: 1;
            pointer-events: auto;

        }
        .dxbl-resize-handle {
            width: ${this.widthValue};
            height: ${this.heightValue};
            opacity: 0;
            cursor: ${this.cursorValue};
            z-index: 1;
        }
    </style>
    <div class="dxbl-resize-handle"></div>
`}}let ta=class extends ea{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return Ko}get widthValue(){return`calc(var(${Oo}) - ${Ko})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};ta=C([Es("dxbl-resize-top-edge")],ta);let na=class extends ea{get topValue(){return Ko}get leftValue(){return"100%"}get heightValue(){return`calc(var(${_o}) - ${Ko})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};na=C([Es("dxbl-resize-right-edge")],na);let ia=class extends ea{get topValue(){return"100%"}get leftValue(){return Ko}get widthValue(){return`calc(var(${Oo}) - ${Ko})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};ia=C([Es("dxbl-resize-bottom-edge")],ia);let sa=class extends ea{get isDragPossible(){return!0}get topValue(){return Ko}get leftValue(){return"0%"}get heightValue(){return`calc(var(${_o}) - ${Ko})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};sa=C([Es("dxbl-resize-left-edge")],sa);let ra=class extends ea{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"0%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};ra=C([Es("dxbl-resize-tl-grip")],ra);let oa=class extends ea{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"100%"}get cursorValue(){return"ne-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};oa=C([Es("dxbl-resize-tr-grip")],oa);let aa=class extends ea{get topValue(){return"100%"}get leftValue(){return"100%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};aa=C([Es("dxbl-resize-br-grip")],aa);let la=class extends ea{get isDragPossible(){return!0}get topValue(){return"100%"}get leftValue(){return"0%"}get cursorValue(){return"sw-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};la=C([Es("dxbl-resize-bl-grip")],la);let Aa=class extends ys{constructor(){super(...arguments),this._actualSize=null,this.appliedSize=null,this.widthAttrName=Oo,this.heightAttrName=_o,this.resizerMovingHandler=this.resizerMoving.bind(this)}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e,requestAnimationFrame((()=>this.tryToUpdateSizeStyle()))}tryToUpdateSizeStyle(){null!==this._actualSize&&(null!==this.appliedSize&&this.appliedSize.width===this._actualSize.width||this.style.setProperty(Oo,`calc(${this._actualSize.width}px - ${Ko})`),null!==this.appliedSize&&this.appliedSize.height===this._actualSize.height||this.style.setProperty(_o,`calc(${this._actualSize.height}px - ${Ko})`),this.appliedSize=this._actualSize)}connectedCallback(){super.connectedCallback(),ko.observe(this),this.addEventListener(Zo.eventName,this.resizerMovingHandler)}disconnectedCallback(){super.disconnectedCallback(),ko.unobserve(this),this.removeEventListener(Zo.eventName,this.resizerMovingHandler)}resizerMoving(e){this.style.pointerEvents=e.detail?"none":""}render(){return ns`
<style>
    :host {
        display: flex;
        flex: 1 1 auto;
        min-width: 0px;
        min-height: 0px;

        ${this.widthAttrName}: 0px;
        ${this.heightAttrName}: 0px;
    }
    .dxbl-popup-resizable-container {
        position: absolute;
        width: var(${this.widthAttrName});
        height: var(${this.heightAttrName});
        pointer-events: none;
    }
    .dxbl-popup-resizable-content {
        display: flex;
        flex-flow: column nowrap;
        flex: 1 1 auto;
        overflow: hidden;
        border-radius: var(--dxbl-popup-border-radius);
    }
</style>
<div class="dxbl-popup-resizable-container">
    <dxbl-resize-top-edge></dxbl-resize-top-edge>
    <dxbl-resize-right-edge></dxbl-resize-right-edge>
    <dxbl-resize-bottom-edge></dxbl-resize-bottom-edge>
    <dxbl-resize-left-edge></dxbl-resize-left-edge>
    <dxbl-resize-tl-grip></dxbl-resize-tl-grip>
    <dxbl-resize-tr-grip></dxbl-resize-tr-grip>
    <dxbl-resize-br-grip></dxbl-resize-br-grip>
    <dxbl-resize-bl-grip></dxbl-resize-bl-grip>
</div>
<div class="dxbl-popup-resizable-content">
    <slot></slot>
</div>
`}};Aa=C([Es("dxbl-popup-resizable-container")],Aa);const da=document.createElement("DIV");function ca(e,t){if(null===e)return 0;const n=da.cloneNode();n.style.width=e;(t||document.body).appendChild(n);const i=n.offsetWidth;return n.remove(),i}function ha(e){e.addEventListener(To.eventName,(t=>{t.stopImmediatePropagation();const n=t;e.positionX=n.detail.x,e.positionY=n.detail.y}),{passive:!0}),e.addEventListener(Xo.eventName,(t=>{const n=t,i=e.getBoundingClientRect();e.classList.add(Bo.PopupResized),e.sizeDirty=!0,e.actualPosition=new et(window.scrollX+i.x,window.scrollY+i.y),e.actualSize=new nt(i.width,i.height),e.initialPosition=e.actualPosition,e.initialSize=e.actualSize,e.actualMinWidth=ca(e.minWidth,e),e.actualMinHeight=ca(e.minHeight,e),e.actualMaxWidth=ca(e.maxWidth,e)||Number.MAX_VALUE,e.actualMaxHeight=ca(e.maxHeight,e)||Number.MAX_VALUE,n.detail.width=e.initialSize.width,n.detail.height=e.initialSize.height,n.detail.x=e.initialPosition.x,n.detail.y=e.initialPosition.y})),e.addEventListener(jo.eventName,(t=>{const n=t;n.detail.width=e.actualSize.width,n.detail.height=e.actualSize.height,n.detail.x=e.actualPosition.x,n.detail.y=e.actualPosition.y,n.detail.oldWidth=e.initialSize.width,n.detail.oldHeight=e.initialSize.height,n.detail.oldX=e.initialPosition.x,n.detail.oldY=e.initialPosition.y})),e.addEventListener(qo.eventName,(t=>{const n=t.detail,i=e.actualSize;e.actualSize=new nt(Math.max(e.actualMinWidth,Math.min(e.actualMaxWidth,e.actualSize.width+n.deltaWidth)),Math.max(e.actualMinHeight,Math.min(e.actualMaxHeight,e.actualSize.height+n.deltaHeight)));e.actualPosition=new et(e.actualPosition.x+(i.width-e.actualSize.width!=0?n.deltaX:0),e.actualPosition.y+(i.height-e.actualSize.height!=0?n.deltaY:0)),e.positionX=e.actualPosition.x,e.positionY=e.actualPosition.y,e.width=e.actualSize.width+"px",e.height=e.actualSize.height+"px"}),{passive:!0})}da.style.position="absolute",da.style.top="-1000px",da.style.left="-1000px",da.style.visibility="hidden";const ua="dxbl-modal-dialog";let pa=class extends Mo{get header(){return this.querySelector(".dxbl-popup-header")}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e}constructor(){super(),this._actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.cssTextToApply="",this.popup=null,this.positionY=null,this.positionX=null,this.allowResize=!1,this.width=null,this.height=null,this.minWidth=null,this.minHeight=null,this.maxWidth=null,this.maxHeight=null,this.dialogCssStyle="",ha(this)}connectedCallback(){super.connectedCallback(),this.popup=this.closest(Ua),this.popup.notifyDialogConnected(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.popup)||void 0===e||e.notifyDialogDisconnected(),this.popup=null}updated(e){super.updated(e),this.mapCssTextToApply()}render(){return this.allowResize?ns`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:ns`<slot></slot>`}setSize(e,t){this.width=e,this.height=t,this.mapCssTextToApply()}mapCssTextToApply(){const e=[],t=[];this.dialogCssStyle&&t.push(this.dialogCssStyle),null!==this.positionX&&(e.push(`translateX(${this.positionX}px)`),t.push("margin-left: 0;"),t.push("margin-right: 0;"),t.push("left: 0;")),null!==this.positionY&&(e.push(`translateY(${this.positionY}px)`),t.push("margin-top: 0;"),t.push("margin-bottom: 0;"),t.push("top: 0;")),this.width&&t.push(`width: ${this.width}`),this.height&&t.push(`height: ${this.height}`),e.length>0&&(t.push("position: absolute"),t.push(`transform: ${e.join(" ")}`)),this.cssTextToApply=t.join("; "),requestAnimationFrame((()=>this.style.cssText=this.cssTextToApply))}};C([xs({type:Number,attribute:"position-y",reflect:!1})],pa.prototype,"positionY",void 0),C([xs({type:Number,attribute:"position-x",reflect:!1})],pa.prototype,"positionX",void 0),C([xs({type:Boolean,attribute:"allow-resize",reflect:!1})],pa.prototype,"allowResize",void 0),C([xs({type:String,attribute:"width",reflect:!1})],pa.prototype,"width",void 0),C([xs({type:String,attribute:"height",reflect:!1})],pa.prototype,"height",void 0),C([xs({type:String,attribute:"min-width",reflect:!1})],pa.prototype,"minWidth",void 0),C([xs({type:String,attribute:"min-height",reflect:!1})],pa.prototype,"minHeight",void 0),C([xs({type:String,attribute:"max-width",reflect:!1})],pa.prototype,"maxWidth",void 0),C([xs({type:String,attribute:"max-height",reflect:!1})],pa.prototype,"maxHeight",void 0),C([xs({type:String,attribute:"dialog-css-style",reflect:!1})],pa.prototype,"dialogCssStyle",void 0),pa=C([Es(ua)],pa);const ma="dxbl-dropdown-dialog";let ga=class extends Lo{createRenderRoot(){return this}};var Ca;ga=C([Es(ma)],ga);var fa;!function(e){e.top="top",e.bottom="bottom",e.end="end",e.start="start"}(fa||(fa={}));let va=Ca=class extends ys{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.arrow=null,this._alignment=fa.bottom,this.position=ur.zero,this.serverClass=null,this.clientClass=null,this.cssClass=null}get alignment(){return this._alignment}set alignment(e){const t=this._alignment;this._alignment=e,this.clientClass=this.calcClientCssClass(e),this.requestUpdate("alignment",t)}calcClientCssClass(e){return`dxbl-popover-${e}`}get arrowSize(){return this.arrow?Ca.calcSizeWithMargins(this.arrow,at.getRelativeElementRect(this.arrow).size):nt.Empty}static calcSizeWithMargins(e,t){const n=window.getComputedStyle(e),i=parseFloat(n.marginLeft),s=parseFloat(n.marginRight),r=parseFloat(n.marginTop),o=parseFloat(n.marginBottom);return new nt(t.width+i+s,t.height+r+o)}static get styles(){return Ei`
            :host {
                display: block;
            }
        }`}willUpdate(e){if(e.has("serverClass")||e.has("clientClass")){const e=[];this.clientClass&&this.clientClass.split(" ").forEach((t=>e.push(t))),this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.cssClass=e.join(" ")}}updated(e){if(this.arrow&&e.has("position"))switch(this.alignment){case fa.bottom:this.arrow.style.transform=gr.translateWithoutFloor(Math.floor(this.position.x),.5);break;case fa.top:this.arrow.style.transform=gr.translateWithoutFloor(Math.floor(this.position.x),-.5);break;case fa.start:this.arrow.style.transform=gr.translateWithoutFloor(-.5,Math.floor(this.position.y));break;case fa.end:this.arrow.style.transform=gr.translateWithoutFloor(.5,Math.floor(this.position.y))}e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return ns`
            <slot @slotchange="${this.slotChangedHandler}"></slot>
        `}handleSlotChanged(e){const t=e.target.assignedNodes();for(const e in t){const n=t[e];if(n instanceof HTMLElement){this.arrow=n;break}}}};C([xs({reflect:!1})],va.prototype,"position",void 0),C([xs({type:String,attribute:"server-class"})],va.prototype,"serverClass",void 0),C([xs({reflect:!1})],va.prototype,"clientClass",void 0),C([xs({reflect:!1})],va.prototype,"cssClass",void 0),C([xs({reflect:!1})],va.prototype,"alignment",null),va=Ca=C([Es("dxbl-flyout-arrow")],va);const ba="dxbl-flyout-dialog";var wa;!function(e){e.Fade="fade",e.None="none"}(wa||(wa={}));let ya=class extends Lo{constructor(){super(...arguments),this.arrowSlotChangeHandler=this.handleArrowSlotChange.bind(this),this._arrow=null,this._arrowAlignment=fa.bottom,this.serverClass=null,this.cssClass=null,this.animationType=wa.Fade,this.animationEnabled=!1}get arrow(){return this._arrow}get arrowAlignment(){return this._arrowAlignment}set arrowAlignment(e){this._arrowAlignment=e}calcAnimationTypeCssClass(){return`dxbl-flyout-dialog-${this.animationType} dxbl-flyout-dialog-show`}willUpdate(e){if(e.has("serverClass")||e.has("animationEnabled")||e.has("animationType")){const e=[];if(this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.animationEnabled&&this.animationType!==wa.None){const t=e.indexOf(`dxbl-flyout-dialog-${this.animationType}`,0),n=this.calcAnimationTypeCssClass();t>-1?e.splice(t,1,n):e.push(n)}this.cssClass=e.join(" ")}}updated(e){e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return ns`
            <slot></slot>
            <slot name="arrow" @slotchange="${this.arrowSlotChangeHandler}"></slot>
        `}handleArrowSlotChange(e){const t=e.target.assignedNodes();this._arrow=t[0]}};C([xs({type:String,attribute:"server-class"})],ya.prototype,"serverClass",void 0),C([xs({reflect:!1})],ya.prototype,"cssClass",void 0),C([xs({type:String,attribute:"animation-type"})],ya.prototype,"animationType",void 0),C([xs({type:Boolean,reflect:!1})],ya.prototype,"animationEnabled",void 0),ya=C([Es(ba)],ya);class Ba extends On{constructor(e,t,n=!1){super(e,t,n),this.portalPath=[],this.addEventSubscriptions()}get popupNavigator(){return super.navigator}get portal(){var e;return null===(e=this.popupNavigator)||void 0===e?void 0:e.getPortal()}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:return this.switchToNestedContent();case Ie.KeyCode.Esc:return!0}return!1}onPopupShown(){this.handlePopupShown()}handlePopupShown(){this.portal&&(this.portalPath=Array.from(at.getRootPathAndSelf(this.portal))),this.activatePopupContent()}activatePopupContent(){bn.makeElementFocusable(this.targetElement),this.activate()}onPopupClosed(){this.removeEventSubscriptions(),this.handlePopupClosed()}handlePopupClosed(){this.focusElementInRootPath(!0)}focusElementInRootPath(e=!1,t=null){const n=this.portalPath.filter((e=>e.isConnected&&e.tabIndex>=0&&"dxbl-popup-portal"!==e.tagName.toLowerCase()));if(n.length>0&&this.navigator.isActive){const e=bn.findFocusableElementInRootPath(n[0]);return e&&(this.popupNavigator.syncFocusHiddenStateWithOwner(e),bn.focusElement(e)),!0}return!1}}class Ea extends Ba{constructor(e,t,n=!1){super(e,t,n)}activatePopupContent(){super.activatePopupContent(),this.focusSelectedItem()}onPopupVisibleChanged(e){e.detail.visible&&this.onPopupShown()}addEventSubscriptions(){this.boundOnPopupVisibleChangedHandler&&this.boundOnPopupClosedHandler||(this.boundOnPopupVisibleChangedHandler=this.onPopupVisibleChanged.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)),this.targetElement.addEventListener(ho.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.addEventListener(oo.eventName,this.boundOnPopupClosedHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(ho.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.removeEventListener(oo.eventName,this.boundOnPopupClosedHandler)}}class Ia extends Ea{constructor(e,t){super(e,t)}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Tab&&super.handleKeyDown(e)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed()}switchToNestedContent(){return!!super.switchToNestedContent()&&(Mr.activate(this.selectedItemElement,!1,!0),!0)}leaveFromNestedContent(){super.leaveFromNestedContent(),Mr.deactivate(this.selectedItemElement,!1)}}class Sa extends Ia{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ma)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class xa extends Ea{constructor(e,t,n=!1){super(e,t,n)}get windowIsOpened(){return this.targetElement.isOpen}queryItems(){return this.queryItemsBySelector(sr)}getNestedContentElement(){const e=bn.findFocusableElements(this.selectedItemElement);if(e.length>0){const t=e.filter((e=>!e.matches('[data-qa-selector="dx-popup-close-button"]')));return t.length>0?t[0]:e[0]}return null}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnPopupKeyboardStrategyActivateHandler||(this.boundOnPopupKeyboardStrategyActivateHandler=this.handleWindowKeyboardStrategyActivate.bind(this)),this.boundOnPopupRootBlurHandler||(this.boundOnPopupRootBlurHandler=this.handlePopupRootBlur.bind(this)),this.targetElement.addEventListener(uo.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(tr);null==e||e.addEventListener("blur",this.boundOnPopupRootBlurHandler)}handleWindowKeyboardStrategyActivate(e){e.detail.visible&&this.activatePopupContent()}handlePopupRootBlur(){this.windowIsOpened&&(this.targetElement.toggleAttribute("inert"),this.boundOnDocumentFocusInHandler=this.handleDocumentFocusIn.bind(this),document.addEventListener("focusin",this.boundOnDocumentFocusInHandler))}handleDocumentFocusIn(e){this.targetElement.toggleAttribute("inert"),document.removeEventListener("focusin",this.boundOnDocumentFocusInHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),this.targetElement.removeEventListener(uo.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(tr);null==e||e.removeEventListener("blur",this.boundOnPopupRootBlurHandler)}focusElementInRootPath(e=!1,t=null){if(!super.focusElementInRootPath(e,t)&&this.portal){const n=bn.findPrevFocusableElement(this.portal),i=bn.findNextFocusableNotChildElement(this.portal),s=e?null!=n?n:i:t===Mn.Backward?n:i;if(s&&!this.popupNavigator.isFocusHiddenState())return bn.focusElement(s),!0}return!1}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(this.leavePopupContent(e.shiftKey?Mn.Backward:Mn.Forward),!0)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}onPopupShown(){this.portal&&bn.makeElementFocusable(this.portal),super.onPopupShown()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed(),this.portal&&bn.removeTabIndex(this.portal)}leaveTransitContainer(e){this.leavePopupContent(e)}leavePopupContent(e){this.popupNavigator.leaveFromNavigator(),bn.removeTabIndex(this.targetElement),this.focusElementInRootPath(!1,e)}}class Da extends Ia{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ba)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class Fa extends Ea{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ma)}}class Ta extends Ba{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ua)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Tab&&super.handleKeyDown(e)}onModalFocusChange(e){e.detail.isFocused?this.onPopupShown():this.onPopupClosed()}addEventSubscriptions(){this.boundOnModalFocusChangeHandler||(this.boundOnModalFocusChangeHandler=this.onModalFocusChange.bind(this)),this.targetElement.addEventListener(co.eventName,this.boundOnModalFocusChangeHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(co.eventName,this.boundOnModalFocusChangeHandler)}}var Ha;customElements.define(rr,class extends Kn{get popupOwner(){return super.owner}initialize(e,t){super.initialize(e,t)}onContentChanged(){var e;const t="BODY"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName)&&"DXBL-MODAL"===this.targetElement.tagName&&this.getIsNestedContentSelected(this.targetElement);t&&(this.isActive=!0),super.onContentChanged(),t&&this.rootStrategy&&this.rootStrategy.activatePopupContent()}getPortal(){var e,t;return null!==(t=null===(e=this.popupOwner)||void 0===e?void 0:e.getPortal())&&void 0!==t?t:null}syncFocusHiddenStateWithOwner(e){this.isFocusHiddenState()&&this.passFocusHiddenAttribute(e)}isFocusHiddenState(){return Tn(this.targetElement)}});const Ua="dxbl-modal",Qa=e=>e;class Pa{constructor(e){this.closeReason=e}}class Na extends CustomEvent{constructor(e){super(Na.eventName,{detail:new Pa(e),bubbles:!0,composed:!0,cancelable:!0})}}Na.eventName=Ua+".closingRequested",Ct.register(Na.eventName,(e=>e.detail));class Ra extends CustomEvent{constructor(e){super(Ra.eventName,{detail:new Pa(e),bubbles:!0,composed:!0,cancelable:!0})}}Ra.eventName=Ua+".closingResultRequested",Ct.register(Ra.eventName,(e=>e.detail));class La{constructor(){this.callingElement=null}catch(){document.activeElement&&(this.callingElement=document.activeElement)}restore(){this.callingElement&&(gt.restoreFocus(this.callingElement),this.callingElement=null)}}let Ma=Ha=class extends Ur{constructor(){super(...arguments),this.focusReturnState=new La,this._positionChangedEvent=new Sr,this.shadowSlotChangedHandler=this.handleShadowSlotChange.bind(this),this.topShadowBranchChangedHandler=this.handleTopShadowBranchChanged.bind(this),this.dragStartHandler=this.handleDragStart.bind(this),this.dragEndHandler=this.handleDragEnd.bind(this),this.resizeStartHandler=this.handleResizeStart.bind(this),this.resizeEndHandler=this.handleResizeEnd.bind(this),this.shadow=null,this.closingResultRequestedTcs=new Br,this.shownCompletedTcs=new Br,this.popupDialog=null,this._zIndex=0,this.modal=null,this.shadingChangedEvent=new Ir,this._capturedElementReleaseCallback=null,this._isOpen=!1,this.shading=!1,this.closeOnOutsideClick=!1,this.closeOnEscape=!1,this.closeOnPointerUp=!1,this.autoZIndex=!1,this.zIndex=0,this.shadowVisible=!1,this.topShadowBranchId=null,this.hasServerSideClosing=!1,this.disableFocusTrap=!1,this.width="",this.height="",this.isDragging=!1,this.isResizing=!1,this.capturingAction=this.capturing,this.releasingCaptureAction=this.releaseFocusTrap}static fromElement(e){for(;null!==e&&!(e instanceof Ha);)e=e.parentElement;return e}get positionChanged(){return this._positionChangedEvent}get renderedVisible(){return!0}get isOpen(){return this._isOpen}get branchType(){return ui.Modal}get preventInteractions(){return!0}get isCloseOnPointerUp(){return this.closeOnPointerUp}render(){return ns`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}">
                ${this.renderShadow()}
                ${this.renderDefaultSlot()}
            </dxbl-branch>
        `}renderDefaultSlot(){return ns`<slot></slot>`}renderShadow(){return ns`<slot name="shadow" @slotchange="${this.shadowSlotChangedHandler}"></slot>`}handleShadowSlotChange(e){const t=e.target.assignedNodes();this.shadow=t.find((e=>e instanceof HTMLElement))}get shadingChanged(){return this.shadingChangedEvent}connectedCallback(){super.connectedCallback(),this.subscribeToEvents(),this.raiseZIndexChange()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeFromEvents(),this.close()}show(){return this.isOpen||(this._isOpen=!0,this.initializeCapture(),this.initializeBodyScrollLock(),this.addToVisibleBranchTree(),this.raiseAdjustZIndexRequest(!0),this.raiseShown()),this.shownCompletedTcs.promise}raiseAdjustZIndexRequest(e){this.dispatchEvent(new co(new Ao(this.branchId,e)))}close(){this.isOpen&&(this._isOpen=!1,this.releaseCapture(),this.releaseBodyScrollLock(),this.removeFromVisibleBranchTree(),this.raiseAdjustZIndexRequest(!1),this.raiseClosed())}raiseShown(){const e=new so;this.dispatchEvent(new ro(e))}raiseClosed(){const e=new so;this.dispatchEvent(new oo(e))}willUpdate(e){this.shadowVisible=this.shading&&this.isOpen&&!!this.branchId&&this.branchId===this.topShadowBranchId}updated(e){var t;this.shadow&&e.has(Qa("shadowVisible"))&&(this.shadow.style.display=this.shadowVisible?Q.block:Q.none),e.has(Qa("zIndex"))&&(this.style.zIndex=this.autoZIndex?"":String(this.zIndex),this.raiseZIndexChange()),(e.has("width")||e.has("height"))&&(null===(t=this.popupDialog)||void 0===t||t.setSize(this.width,this.height))}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),fi.register(this.branchId),vo.register(this.branchId),this.raiseBranchRefreshed()}removeFromVisibleBranchTree(){this.ensureBranchId(),fi.unregister(this.branchId),vo.unregister(this.branchId),this.raiseBranchRefreshed()}initializeBodyScrollLock(){wo.register(this.branchId)}releaseBodyScrollLock(){wo.unregister(this.branchId)}subscribeToEvents(){vo.shadowBranchChanged.subscribe(this.topShadowBranchChangedHandler),this.addEventListener(Do.eventName,this.dragStartHandler),this.addEventListener(So.eventName,this.dragEndHandler),this.addEventListener(Xo.eventName,this.resizeStartHandler),this.addEventListener(jo.eventName,this.resizeEndHandler)}unsubscribeFromEvents(){vo.shadowBranchChanged.unsubscribe(this.topShadowBranchChangedHandler),this.removeEventListener(Do.eventName,this.dragStartHandler),this.removeEventListener(So.eventName,this.dragEndHandler),this.removeEventListener(Xo.eventName,this.resizeStartHandler),this.removeEventListener(jo.eventName,this.resizeEndHandler)}handleTopShadowBranchChanged(e){this.topShadowBranchId=e.branch}handleDragStart(e){this.isDragging=!0}handleDragEnd(e){this.isDragging=!1}handleResizeStart(e){this.isResizing=!0}handleResizeEnd(e){this.isResizing=!1}initializeCapture(){this.focusReturnState.catch();const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}releaseCapture(){this.processClosingRequested(!0),this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null),this.focusReturnState.restore()}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Br}notifyDialogConnected(e){this.popupDialog=e,this.initializeKeyboardNavigator(),this.initializeFocusTrap()}notifyRootConnected(){requestAnimationFrame((()=>{setTimeout((()=>{this.shownCompletedTcs.tryResolve()}))}))}notifyDialogDisconnected(){this.disposeKeyboardNavigator(),this.releaseFocusTrap(!0),this.popupDialog=null}notifyRootDisconnected(){this.shownCompletedTcs.tryReject("cancelled"),this.shownCompletedTcs=new Br}capturing(){this.activate(),this.initializeFocusTrap()}initializeFocusTrap(){this.isOpen&&this.popupDialog&&!this.disableFocusTrap&&Mr.activate(this.popupDialog,!0,!!this.keyboardNavigator)}releaseFocusTrap(e=null){null===e&&(e=!this.isOpen),Mr.deactivate(this.popupDialog,e)}activate(){const e=new Qs(new Hs(this.branchId));this.dispatchEvent(e)}notifyCloseCanceled(){this.processClosingRequested(!1)}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=!0,this.closeOnOutsideClick&&await this.closeAsync(t,Er.OutsideClick))}isPointedCaptured(e){return!(!this.closeOnPointerUp||!this.isDragging&&!this.isResizing)||K.containsInComposedPath(e,this.popupDialog)}async processCapturedKeyDownAsync(e,t){t.handled||this.closeOnEscape&&"Escape"===e.key&&await this.processEscape(e,t)}async processEscape(e,t){const n=await this.raiseClosingResultRequestedAsync(Er.EscapePress);this.closingResultRequestedTcs=new Br,n||(t.handled=!0)}async closeAsync(e,t){const n=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Br,e.nextInteractionHandled=!0,e.handled=!0,Promise.resolve(!!n)}async closeHierarchyAsync(e,t,n){for(const e of fi.iterateBranch(this.branchId)){const i=await ar().getPopup(e);await(null==i?void 0:i.closeAsync(t,n))}await this.closeAsync(t,n)}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Br;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}raiseClosingRequested(e){setTimeout((()=>{this.dispatchEvent(new Na(e))}))}raiseClosingResultRequested(e){this.dispatchEvent(new Ra(e))}raiseBranchRefreshed(){const e=new Us(new Hs(this.branchId));this.dispatchEvent(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new lo(new ao(this.zIndex)))}))}initializeKeyboardNavigator(){var e,t,n;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(rr)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const i=new mo({createModal:(e,t)=>new Ta(e,t)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(i);const s=null===(n=null===(t=i.detail.factory)||void 0===t?void 0:t.createModal)||void 0===n?void 0:n.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}disposeKeyboardNavigator(){var e;null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent()}getPortal(){return Ka.getPortal(this.branchId)}};C([xs({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],Ma.prototype,"_isOpen",void 0),C([xs({type:Boolean,attribute:"shading"})],Ma.prototype,"shading",void 0),C([xs({type:Boolean,attribute:"close-on-outside-click"})],Ma.prototype,"closeOnOutsideClick",void 0),C([xs({type:Boolean,attribute:"close-on-escape"})],Ma.prototype,"closeOnEscape",void 0),C([xs({type:Boolean,attribute:"close-on-pointer-up"})],Ma.prototype,"closeOnPointerUp",void 0),C([xs({type:Boolean,attribute:"auto-z-index"})],Ma.prototype,"autoZIndex",void 0),C([xs({type:Number,attribute:"z-index"})],Ma.prototype,"zIndex",void 0),C([xs({type:String,attribute:"branch-id"})],Ma.prototype,"branchId",void 0),C([xs({type:String,attribute:"parent-branch-id"})],Ma.prototype,"parentBranchId",void 0),C([xs({reflect:!1})],Ma.prototype,"shadowVisible",void 0),C([xs({reflect:!1})],Ma.prototype,"topShadowBranchId",void 0),C([xs({type:Boolean,attribute:"has-serverside-closing"})],Ma.prototype,"hasServerSideClosing",void 0),C([xs({type:Boolean,attribute:"disable-focus-trap"})],Ma.prototype,"disableFocusTrap",void 0),C([xs({type:String,attribute:"width"})],Ma.prototype,"width",void 0),C([xs({type:String,attribute:"height"})],Ma.prototype,"height",void 0),Ma=Ha=C([Es(Ua)],Ma);const ka=document.createElement("template");ka.innerHTML="<"+Co+' class="'+Co+'" />';class Ka{static getPortal(e){return Oa.getPortal(e)}static getPortalFrom(e){var t,n;const i=(null===(t=go.fromElement(e))||void 0===t?void 0:t.getPortal())||(null===(n=Ma.fromElement(e))||void 0===n?void 0:n.getPortal());return i||null}}const Oa=new class{constructor(){this.portals=new Map}addPortal(e,t){this.portals.set(e,t)}removePortal(e){this.portals.delete(e)}getPortal(e){return this.portals.get(e)}};let _a=class extends ys{constructor(){super(...arguments),this.activateLocker=new qs,this.portalsMapping=new Map,this.portals=new Map,this.rafAction=new er,this.focusInHandler=this.handleFocusIn.bind(this),this.adjustZIndexRequestHandler=this.adjustZIndexRequest.bind(this),this.branchCreatedHandler=this.handleBranchCreated.bind(this),this.branchUpdatedHandler=this.handleBranchUpdated.bind(this),this.branchRemovedHandler=this.handleBranchRemoved.bind(this),this.branchActivatedHandler=this.handleBranchActivated.bind(this),this.branchRefreshedHandler=this.handleBranchRefreshed.bind(this),this.captureManager=new Zs}createRenderRoot(){return this}assign(e){if(this.portals.has(e)||!e.branchId)return;const t=this.selectTemplate(e);this.appendChild(t);const n=this.children[this.children.length-1];n.setPortal(e),this.portalsMapping.set(e.branchId,e),this.portals.set(e,n),Oa.addPortal(e.branchId,e)}release(e){const t=this.portals.get(e);this.portalsMapping.delete(e.branchId),Oa.removePortal(e.branchId),this.portals.delete(e),t&&this.removeChild(t)}connectedCallback(){super.connectedCallback(),this.tabIndex=0,this.addEventListener("focusin",this.focusInHandler,{capture:!0}),this.addEventListener(co.eventName,this.adjustZIndexRequestHandler),this.addEventListener(Rs.eventName,this.branchCreatedHandler),this.addEventListener(Ps.eventName,this.branchUpdatedHandler),this.addEventListener(Ns.eventName,this.branchRemovedHandler),this.addEventListener(Qs.eventName,this.branchActivatedHandler),this.addEventListener(Us.eventName,this.branchRefreshedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener(co.eventName,this.adjustZIndexRequestHandler),this.removeEventListener(Rs.eventName,this.branchCreatedHandler),this.removeEventListener(Ps.eventName,this.branchUpdatedHandler),this.removeEventListener(Ns.eventName,this.branchRemovedHandler),this.removeEventListener(Qs.eventName,this.branchActivatedHandler),this.removeEventListener(Us.eventName,this.branchRefreshedHandler)}handleFocusIn(e){this.rafAction.cancel();e.target===this&&(H.markHandled(e),this.rafAction.execute((()=>this.blur())))}handleBranchCreated(e){Ci.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchUpdated(e){Ci.remove(e.detail.id),Ci.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchRemoved(e){Ci.remove(e.detail.id),this.assignZIndices()}handleBranchActivated(e){const t=e.detail.id;if(!fi.activate(t)){const e=this.portalsMapping.get(t);if(!e)return;const n=e.popupBase;return n&&this.captureManager.capture(n),void this.assignZIndices()}const n=[];for(const e of fi.iterateBranch(t)){const i=this.portalsMapping.get(e);if(n.push(i.popup),e===t)break}if(n.length>0)n.forEach((e=>this.captureManager.releaseCapture(e))),n.forEach((e=>this.captureManager.capture(e)));else{const e=this.portalsMapping.get(t);this.captureManager.capture(e.popupBase)}this.assignZIndices()}handleBranchRefreshed(e){this.assignZIndices()}assignZIndices(){fi.refresh();for(const e of this.portals.keys()){const t=e.branchId;this.portals.get(e).baseZIndex=fi.getIndex(t)}}adjustZIndexRequest(e){const t=e.detail.branchId;this.isBranchExistsInDom(t)&&(e.detail.isFocused&&fi.setTopMostBranch(t),this.assignZIndices())}isBranchExistsInDom(e){const t=this.portalsMapping.get(e);return!!t&&!!this.portals.get(t)}getPopup(e){const t=this.portalsMapping.get(e);return(null==t?void 0:t.popupBase)||null}selectTemplate(e){return ka.content.cloneNode(!0)}subscribe(e){return this.captureManager.capture(e),()=>{this.captureManager.releaseCapture(e)}}};_a=C([Es(tr)],_a);class Va{static isEditRowCell(e){return null!==e&&e.rowType===_s.Edit}static areIdentical(e,t){return null!==e&&null!==t&&(e.rowIndex===t.rowIndex&&e.columnInfo.uID===t.columnInfo.uID)}static fromElement(e,t){const n=Va.getCellElement(e,t);if(null!==n){const i=Va.getHitInnerElement(t),s=Va.getRowType(n),r=Ws.getCellType(n),o=Va.getCellRowIndex(n),a=e.getColumnInfoByCell(n);if(null!==s&&null!==r&&null!==o&&null!==a)return new Va(r,s,o,a,i,n)}return null}static findCellInnerElement(e,t){return null!==e&&t===za.CheckBox?e.querySelector(ks.CellCheckBoxEditViewInputSelector):null}static getCellElement(e,t){if(null===e.uId||null==t)return null;const n=t.closest(ks.getBodyCellsSelector(e.uId,e.getTagName()));if(null!==n)return n;const i=Ka.getPortalFrom(t);return null!==i?i.closest(ks.getBodyCellsSelector(e.uId,e.getTagName())):null}static getRowType(e){if(null===e)return null;const t=e.parentElement;return null===t?null:Ws.getRowType(t)}static getCellRowIndex(e){const t=null==e?void 0:e.parentElement;if(null!=t){const e=t.dataset.visibleIndex;if(void 0!==e)return parseInt(e)}return null}static getHitInnerElement(e){return null!==e&&e.closest(ks.CellCheckBoxDisplayViewSelector)?za.CheckBox:null}constructor(e,t,n,i,s,r){this._type=e,this._rowType=t,this._rowIndex=n,this._columnInfo=i,this._hitInnerElement=s,this._element=r}get type(){return this._type}get rowIndex(){return this._rowIndex}get rowType(){return this._rowType}get columnInfo(){return this._columnInfo}get hitInnerElement(){return this._hitInnerElement}get element(){return this._element}}var za,Wa,$a;!function(e){e[e.CheckBox=0]="CheckBox"}(za||(za={}));class Ga{constructor(){this.activePopup=null,this.boundOnDocumentFocusOutHandler=this.onDocumentFocusOut.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosingHandler=this.onPopupClosing.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)}initialize(){document.addEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.addEventListener(ro.eventName,this.boundOnPopupShownHandler)}dispose(){document.removeEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.removeEventListener(ro.eventName,this.boundOnPopupShownHandler)}onPopupClosing(e){if(null===this.activePopup)return;if(this.activePopup.removeEventListener(Wr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(zr.eventName,this.boundOnPopupClosingHandler),e.detail.closeReason!==Er.OutsideClick)return;const t=Ka.getPortalFrom(document.activeElement);t&&t.branchId!==e.detail.branchId||(this.activePopup.removeEventListener(oo.eventName,this.boundOnPopupClosedHandler),this.activePopup=null,this.closeEditor())}onPopupClosed(e){null!==this.activePopup&&(this.activePopup.removeEventListener(Wr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(zr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(oo.eventName,this.boundOnPopupClosedHandler),setTimeout((()=>this.activePopup=null),0))}onPopupShown(e){(e.target instanceof go||e.target instanceof Ma)&&this.isPopupFromEditor(e.target)&&(this.activePopup=e.target,this.activePopup.addEventListener(Wr.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener(zr.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener(oo.eventName,this.boundOnPopupClosedHandler))}}class qa extends Ga{constructor(e){super(),this.pendingCommandId=null,this.closingTimerId=null,this.pressedCellInfo=null,this.boundOnDocumentPointerDownHandler=this.onDocumentPointerDown.bind(this),this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.grid=e}get isPendingCommandResult(){return null!==this.pendingCommandId}get isEditorPopupShown(){return null!==this.activePopup}initialize(){document.addEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.initialize()}dispose(){document.removeEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.dispose()}showNewItemRowEditor(e){var t;let n=e;return(n&&n.isEditable||(n=null!==(t=this.grid.columnsInfo.find((e=>e.isEditable)))&&void 0!==t?t:null,n))&&this.sendCommand("showNewItemRowEditor",{columnUid:n.uID})?n.leafIndex:-1}showEditor(e,t,n=null){if(!this.allowInteraction)return!1;const i=this.grid.getCellInfo(e);return null!==i&&(i.type===Vs.Data&&(!!i.columnInfo.isEditable&&this.sendCommand("showEditor",{visibleIndex:i.rowIndex,columnUid:i.columnInfo.uID},n,(e=>{e.result&&null!==t&&this.clickToEditCellInnerElement(t,i)}))))}closeEditor(e=Wa.Save,t=null){return!!this.allowInteraction&&this.sendCommand("closeEditor",{action:e},t)}onEndCommand(e,t=null){if(null===t)return;let n=$a.Aborted;e.processedBy(this.pendingCommandId)&&(n=e.result?$a.Completed:$a.Failed),t(n)}notifyPendingEditorShow(e){this.allowInteraction&&(e?this.pendingCommandId=qa.ServerSideShowCommandId:this.pendingCommandId===qa.ServerSideShowCommandId&&(this.pendingCommandId=null))}sendCommand(e,t,n=null,i=null){return!!this.uiHandlersBridge&&(this.cancelClosingTimer(),this.pendingCommandId=qa.InitializationCommandId,document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.pendingCommandId=this.uiHandlersBridge.send(e,t,(e=>{this.onEndCommand(e,n),e.processedBy(this.pendingCommandId)&&(i&&i(e),this.pendingCommandId=null)})),!0)}get allowInteraction(){return this.grid.enableInplaceEditing}get uiHandlersBridge(){return this.grid.uiHandlersBridge}onDocumentPointerDown(e){this.allowInteraction&&(this.pressedCellInfo=this.grid.getCellInfo(e.target))}onDocumentPointerUp(){this.allowInteraction&&(this.pressedCellInfo=null)}onDocumentFocusOut(e){if(!this.allowInteraction)return;if(!this.grid.isEditing)return;if(this.isPendingCommandResult)return;const t=this.grid.getCellInfo(e.target);if(!Va.isEditRowCell(t))return;const n=this.grid.getCellInfo(e.relatedTarget)||this.grid.getCellInfo(this.activePopup),i=Va.areIdentical(t,n);Va.isEditRowCell(n)?!i&&this.isPressedCell(n)&&this.startClosingTimer(Wa.Hide):this.isPressedDataCell(n)&&!this.isDataCellInteractiveElement(e.relatedTarget)?this.startClosingTimer():this.closeEditor()}isDataCellInteractiveElement(e){return!1}isPopupFromEditor(e){return this.allowInteraction&&this.grid.isEditing&&Va.isEditRowCell(this.grid.getCellInfo(e))}clickToEditCellInnerElement(e,t){var n;const i=this.getEditCellElement(),s=this.grid.getCellInfo(i);Va.areIdentical(t,s)&&(null===(n=Va.findCellInnerElement(i,e))||void 0===n||n.click())}getEditCellElement(){return null===this.grid.uId?null:this.grid.querySelector(ks.getBodyEditCellSelector(this.grid.uId,this.grid.getTagName()))}isPressedDataCell(e){return(null==e?void 0:e.type)===Vs.Data&&this.isPressedCell(e)}isPressedCell(e){return Va.areIdentical(e,this.pressedCellInfo)}startClosingTimer(e=Wa.Save){this.cancelClosingTimer(),this.closingTimerId=setTimeout((()=>this.closeEditor(e)),qa.ClosingDelay)}cancelClosingTimer(){null!==this.closingTimerId&&(clearTimeout(this.closingTimerId),this.closingTimerId=null)}}qa.InitializationCommandId=-1,qa.ServerSideShowCommandId=-2,qa.ClosingDelay=150,function(e){e[e.Save=0]="Save",e[e.Cancel=1]="Cancel",e[e.Hide=2]="Hide",e[e.SaveAndStartNewRow=3]="SaveAndStartNewRow"}(Wa||(Wa={})),function(e){e[e.Completed=0]="Completed",e[e.Failed=1]="Failed",e[e.Aborted=2]="Aborted"}($a||($a={}));class Ya{static calculateHorizontalScrollCorrection(e,t,n){let i=0;const s=e.getBoundingClientRect();for(const e of t){const t=e.getBoundingClientRect(),r=this.getIntersectionRectangle(s,t);if(!r.isEmpty){const e=n?r.left-t.right:r.right-t.left;s.x-=e,i+=e}}return i}static calculateVerticalScrollCorrection(e,t){const n=this.calculateHeightOffsetValue(e,t,!0),i=this.calculateHeightOffsetValue(e,t,!1);return n<0&&i<0?n:i>0&&n>0?i:0}static calculateBoundaryItemIndex(e,t,n){const i=Math.ceil(this.getDataAreaViewportHeight(t)),s=n?0:e.itemCount-1;let r=n&&e.selectedItemIndex<=s||!n&&e.selectedItemIndex>=s?s:e.selectedItemIndex,o=this.calculateItemHeight(e,t,r,n);const a=this.isVirtualScrollingEnabled(t)?this.calculateItemAverageHeight(e):void 0,l=n?1:-1;let A=r+l;for(;e.isIndexWithinBoundaries(A)&&(o+=this.getElementHeight(e.getItem(A),a),!(o>i&&r!==e.selectedItemIndex));)r=A,A+=l;return r}static isVirtualScrollingEnabled(e){return void 0!==e.totalItemCount}static isElementInView(e,t){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return i.bottom>n.top+i.height&&i.top<n.bottom}static bottomAlignmentRequired(e,t){const n=e.getBoundingClientRect();return t.getBoundingClientRect().bottom-n.bottom<n.height}static calculateItemAverageHeight(e){const t=e.getItem(0);return(e.getItem(e.itemCount-1).getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.itemCount}static calculateItemHeight(e,t,n,i){const s=e.getItem(n);let r=this.getElementHeight(s);if(s&&!this.isOutsideViewportItemRequired(e,t,n,i)){const e=this.calculateHeightOffsetValue(s,t,i);r+=i?e:-e}return r}static isOutsideViewportItemRequired(e,t,n,i){const s=e.getItem(i?n+1:n-1);if(!s)return!0;const r=s.getBoundingClientRect(),o=this.getElementHeight(s);if(!t.hasVerticalScrollBar){const e=mr.viewport(),t=new st(0,0,e.width,e.height);return this.getIntersectionRectangle(r,t).height<o}const a=t.getElementsRectangle(t.getFooterElements());if(i&&a)return!this.getIntersectionRectangle(r,a).isEmpty;const l=t.getElementsRectangle(t.getHeaderElements());if(!i&&l)return!this.getIntersectionRectangle(r,l).isEmpty;return this.getIntersectionRectangle(r,t.getBoundingClientRect()).height<o}static calculateHeightOffsetValue(e,t,n){const i=e.getBoundingClientRect(),s=t.getDataAreaRectangle(),r=!t.hasVerticalScrollBar,o=r?0:s.y,a=r?document.documentElement.clientHeight:o+s.height;return _e.calcScrollOffset(o,a,i.top,i.bottom,n?Qe.Top:Qe.Bottom)}static getDataAreaViewportHeight(e){const t=e.getRectangle(),n=e.hasVerticalScrollBar?e.getDataAreaRectangle():mr.viewport();return e.hasVerticalScrollBar&&t&&t.height<n.height?t.height-this.calcStickyElementsHeight(e):n.height}static calcStickyElementsHeight(e){let t=0;for(const n of this.getStickyElementsRectangles(e))t+=this.getElementRectangleHeight(n);return t}static getStickyElementsRectangles(e){return e?[e.getElementsRectangle(e.getHeaderElements()),e.getElementsRectangle(e.getFooterElements())]:[]}static getElementHeight(e,t=0){return e?e.getBoundingClientRect().height:t}static getElementRectangleHeight(e,t=0){return e?e.height:t}static getIntersectionRectangle(e,t){const n=new st(e.x,e.y,e.width,e.height),i=new st(t.x,t.y,t.width,t.height);return rt.intersect(n,i)}static alignElementVertically(e,t,n){const i=Ya.calculateVerticalScrollCorrection(e,t);n.scrollBy(0,i)}}let Xa=!1;class Ja extends Hr{constructor(){super(...arguments),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.renderGuid="",this._removeEnchancedNavigationSubscription=()=>{}}contentChanged(){}connectedOrContentChanged(){}needReasignAttributes(){return!0}connectedCallback(){super.connectedCallback(),this.connectedOrContentChanged()}restoreState(){this.needReasignAttributes()&&this.constructor.observedAttributes.forEach((e=>{if(e!==lr.renderGuidAttributeName&&this.hasAttribute(e)){const t=this.getAttribute(e);this.setAttribute(e,""),this.setAttribute(e,t)}}))}attributeChangedCallback(e,t,n){var i;e===lr.renderGuidAttributeName&&t&&(null===(i=window.Blazor)||void 0===i?void 0:i.addEventListener)?this._removeEnchancedNavigationSubscription=(e=>{var t;const n=()=>{var t;Xa=!0,e(),null===(t=window.Blazor)||void 0===t||t.removeEventListener("enhancedload",n),Xa=!1};return null===(t=window.Blazor)||void 0===t||t.addEventListener("enhancedload",n),()=>{var e;Xa||null===(e=window.Blazor)||void 0===e||e.removeEventListener("enhancedload",n)}})((()=>this.restoreState())):super.attributeChangedCallback(e,t,n)}disconnectedCallback(){super.disconnectedCallback(),this._removeEnchancedNavigationSubscription()}onSlotChanged(e){this.connectedOrContentChanged(),this.contentChanged(),this.readyOnConnectedCallback||i.setLoaded(this)}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.boundSlotChangedHandler),e}}C([xs({type:String,attribute:lr.renderGuidAttributeName})],Ja.prototype,"renderGuid",void 0);class ja{get hasAction(){return!!this.handle}constructor(e){this.action=null,this.handle=null,this.timeout=0,this.timeout=e}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),this.timeout)}forceExecute(){if(!this.hasAction)return;const e=this.action;this.cancel(),e&&e()}cancel(){this.hasAction&&this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}const Za="dxbl-input-editor",el="dxbl-spinedit",tl="dxbl-calendar",nl="dxbl-dropdownbase",il="dxbl-masked-input",sl="dxbl-custom-color-area",rl="dxbl-hue-area",ol="dxbl-saturation-brightness-area",al="dxbl-list-box",ll="dxbl-combo-box",Al="dxbl-dropdown-listbox";class dl extends CustomEvent{constructor(e){super(dl.eventName,{detail:new pl(e),bubbles:!0,composed:!0,cancelable:!0})}}dl.eventName=Za+".focusin";class cl extends CustomEvent{constructor(e,t){super(cl.eventName,{detail:new ml(e,t),bubbles:!0,composed:!0,cancelable:!0})}}cl.eventName=Za+".focusout";class hl extends CustomEvent{constructor(e){super(hl.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}hl.eventName=Za+".keydown";class ul extends CustomEvent{constructor(e){super(ul.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}ul.eventName=Za+".beforeinput";class pl{constructor(e){this.NeedSelection=e}}class ml{constructor(e,t){this.Text=e,this.TabKey=t}}class gl{constructor(e){this.Text=e}}class Cl extends gl{constructor(e,t){super(e),this.Version=t}}class fl extends CustomEvent{constructor(e,t){super(fl.eventName,{detail:new Cl(e,t),bubbles:!0,composed:!0,cancelable:!0})}}fl.eventName=Za+".textinput";class vl extends CustomEvent{constructor(e){super(vl.eventName,{detail:new gl(e),bubbles:!0,composed:!0,cancelable:!0})}}var bl,wl,yl;vl.eventName=Za+".textchange",Ct.register(fl.eventName,(e=>e.detail)),Ct.register(vl.eventName,(e=>e.detail)),Ct.register(dl.eventName,(e=>e.detail)),Ct.register(cl.eventName,(e=>e.detail)),Ct.register(hl.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}})),Ct.register(ul.eventName,(e=>{const t=e.detail;return{InputType:t.inputType,Text:t.data}})),function(e){e.inputText="field-text",e.inputTextVersion="field-text-version",e.bindValueMode="bind-value-mode",e.fieldInputDelay="field-input-delay",e.customPlaceholder="custom-placeholder"}(bl||(bl={})),function(e){e.OnLostFocus="OnLostFocus",e.OnInput="OnInput",e.OnDelayedInput="OnDelayedInput"}(wl||(wl={})),function(e){e.WithoutTemplate="WithoutTemplate",e.WithTemplate="WithTemplate",e.WithEditableTemplate="WithEditableTemplate"}(yl||(yl={}));class Bl{}Bl.TextEdit=pe.Prefix+"-text-edit",Bl.ClearButton=pe.Prefix+"-edit-btn-clear",Bl.EditBoxTemplate=pe.Prefix+"-text-edit-template",Bl.TextEditInput=pe.Prefix+"-text-edit-input",Bl.EditorButton=pe.Prefix+"-text-edit-btn";class El extends Ja{constructor(){super(),this.fieldText="",this.fieldTextVersion=-1,this.fieldInputDelay=500,this.bindValueMode=wl.OnLostFocus,this.isReadOnly=!1,this.placeholder="",this.boundOnInputInputHandler=this.onTextInput.bind(this),this.boundOnInputChangeHandler=this.onTextChange.bind(this),this.boundOnInputKeyDownHandler=this.onInputKeyDown.bind(this),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.inputDelayDeferredAction=new ja(500),this._fieldTextHistory={},this._fieldInitialized=!1,this._fieldTextVersion=-1,this._isMobileDevice=$().isMobileDevice,this.mainElementObserver=new MutationObserver(this.mainElementContentChanged.bind(this))}get useAdaptiveLayout(){return this._isMobileDevice}get inputSelectionStart(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionStart)&&void 0!==t?t:0}get inputSelectionEnd(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionEnd)&&void 0!==t?t:0}get selectionLength(){return Math.abs(this.inputSelectionEnd-this.inputSelectionStart)}isAllSelected(){const e=this.fieldElementValue.length;return e>0&&0===this.inputSelectionStart&&this.inputSelectionEnd===e}get enabled(){return this.fieldElement?!this.fieldElement.disabled:!T.DomUtils.hasClassName(this,pe.Disabled)}get allowInput(){return this.enabled&&!!this.fieldElement&&!this.fieldElement.readOnly}static isClearButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.ClearButton))}static isEditBoxTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.EditBoxTemplate))}static isEditorButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.EditorButton))}isFocusableElementInMainElementTemplate(e){return!!this.editBoxTemplateElement&&(this.editBoxTemplateElement!==e&&this.editBoxTemplateElement.contains(e)&&Qn(e))}get fieldElementValue(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.value)&&void 0!==t?t:""}set fieldElementValue(e){this.fieldElement&&(this.fieldElement.value=e)}get rendered(){return!!this.fieldElement}get focused(){return document.activeElement===this.editBoxElement}get isFieldElementReadonly(){return!!this.fieldElement&&this.fieldElement.readOnly}get editBoxElement(){var e;return null!==(e=this.fieldElement)&&void 0!==e?e:this.editBoxTemplateElement}get editBoxTemplateElement(){return this.querySelector(`:scope > .${Bl.EditBoxTemplate}`)}raiseFieldText(){let e;const t=this.fieldElementValue;this.shouldProcessFieldTextVersion?(e=++this._fieldTextVersion,this._fieldTextHistory[e]=t):e=this._fieldTextVersion,this.dispatchEvent(new fl(t,e))}raiseFieldChange(){this.dispatchEvent(new vl(this.fieldElementValue))}applyTextProperty(){this.shouldProcessFieldTextVersion?this.applyTextPropertyByVersion():(this.applyTextPropertyCore(),this._fieldTextVersion=this.fieldTextVersion)}applyTextPropertyByVersion(){const e=this.fieldTextVersion,t=this.fieldText;let n=this._fieldTextVersion;e>n&&(n=e),-1===n||t!==this.fieldElementValue&&this._fieldTextHistory[e]!==t?(this.applyTextPropertyCore(),this._fieldTextVersion=n+1):delete this._fieldTextHistory[e]}applyTextPropertyCore(){this.fieldElementValue=this.fieldText}onBindValueModeChanged(e){e===wl.OnLostFocus?(this._fieldTextHistory={},this._fieldTextVersion++):this.bindValueMode===wl.OnLostFocus&&(this._fieldTextHistory={},this._fieldTextVersion=-1)}onInputDelayChanged(){this.inputDelayDeferredAction=new ja(this.fieldInputDelay)}get shouldProcessFieldTextVersion(){return this.bindValueMode===wl.OnInput||this.bindValueMode===wl.OnDelayedInput}get shouldForceInputOnEnter(){return!0}onTextInput(e){if(this.shouldRaiseFieldTextEvents)switch(this.bindValueMode){case wl.OnInput:this.raiseFieldText();break;case wl.OnDelayedInput:this.inputDelayDeferredAction.execute((()=>this.raiseFieldText()))}}onTextChange(e){this.shouldRaiseFieldTextEvents&&(this.bindValueMode===wl.OnLostFocus?this.raiseFieldChange():this.bindValueMode===wl.OnDelayedInput&&this.tryForceDelayedInput())}onFieldReady(e,t){e.addEventListener("input",this.boundOnInputInputHandler),e.addEventListener("change",this.boundOnInputChangeHandler),e.addEventListener("keydown",this.boundOnInputKeyDownHandler),t&&(this.applyTextProperty(),this.updatePlaceholder())}onTemplateWithoutInputReady(e){e.addEventListener("keydown",this.boundOnInputKeyDownHandler)}onPointerDown(e){this.processPointerDown(e)}processPointerDown(e){var t;const n=e.target,i=H.containsInComposedPath(e,El.isClearButtonElement),s=H.containsInComposedPath(e,El.isEditorButtonElement),r=this.editBoxTemplateElement&&this.editBoxTemplateElement===n&&!Qn(this.editBoxTemplateElement),o=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(n)&&!Qn(n),a=!this.focused&&(i||s&&!this.useAdaptiveLayout||r||o),l=i||s||r||o;return s&&this.focused&&this.raiseFieldChange(),l&&e.preventDefault(),a&&(null===(t=this.editBoxElement)||void 0===t||t.focus()),!0}onInputKeyDown(e){this.isReadOnly||this.processKeyDown(e)}processKeyDown(e){return"Enter"===e.key&&this.shouldForceInputOnEnter&&this.tryForceDelayedInput(),!1}tryForceDelayedInput(){this.shouldRaiseFieldTextEvents&&this.bindValueMode===wl.OnDelayedInput&&this.inputDelayDeferredAction.forceExecute()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.mainElementObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.mainElementObserver.disconnect()}contentChanged(){this.fieldElement=this.getFieldElement(),this.fieldElement?(this.onFieldReady(this.fieldElement,!this._fieldInitialized),this._fieldInitialized=!0):this.editBoxTemplateElement&&this.onTemplateWithoutInputReady(this.editBoxTemplateElement),this.editBoxTemplateElement&&this.updateEditBoxTemplateTabIndex(),this.addEventListener("pointerdown",this.boundOnPointerDownHandler)}get shouldRaiseFieldTextEvents(){return!0}get readyOnConnectedCallback(){return!1}updated(e){this.rendered&&(e.has("bindValueMode")&&this.onBindValueModeChanged(e.get("bindValueMode")),(e.has("fieldText")||e.has("fieldTextVersion"))&&this.applyTextProperty(),e.has("placeholder")&&this.updatePlaceholder()),e.has("fieldInputDelay")&&this.onInputDelayChanged(),super.updated(e)}updatePlaceholder(){this.fieldElement&&(this.placeholder&&""!==this.placeholder?this.fieldElement.setAttribute("placeholder",this.placeholder):this.fieldElement.removeAttribute("placeholder"))}updateEditBoxTemplateTabIndex(){var e,t;this.enabled&&!this.fieldElement?null===(e=this.editBoxTemplateElement)||void 0===e||e.setAttribute("tabindex","0"):null===(t=this.editBoxTemplateElement)||void 0===t||t.removeAttribute("tabindex")}mainElementContentChanged(e,t){const n=this.fieldElement;this.contentChanged(),this.fieldElement&&n!==this.fieldElement&&this.applyTextProperty()}}C([xs({type:String,attribute:bl.inputText})],El.prototype,"fieldText",void 0),C([xs({type:Number,attribute:bl.inputTextVersion})],El.prototype,"fieldTextVersion",void 0),C([xs({type:Number,attribute:bl.fieldInputDelay})],El.prototype,"fieldInputDelay",void 0),C([xs({type:wl,attribute:bl.bindValueMode})],El.prototype,"bindValueMode",void 0),C([xs({type:Boolean,attribute:"is-read-only"})],El.prototype,"isReadOnly",void 0),C([xs({type:String,attribute:bl.customPlaceholder})],El.prototype,"placeholder",void 0);class Il extends Event{constructor(){super(Il.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Il.eventName=nl+".opendropdown";class Sl extends Event{constructor(){super(Sl.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Sl.eventName=nl+".closedropdown";class xl extends Event{constructor(){super(xl.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}xl.eventName=nl+".pointerdown";class Dl extends Event{constructor(){super(Dl.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Dl.eventName=nl+".trycleareditorvalue",Ct.register(Il.eventName,(e=>e.detail)),Ct.register(Sl.eventName,(e=>e.detail));class Fl{constructor(e){this.boundOnPopupElementChangedHandler=this.onPopupElementChanged.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this.boundOnPopupPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.control=e,this.popupPortal=null,this._popupElement=null,this._adaptiveDropDownElement=null}get popupElement(){return this._popupElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}onConnectedCallback(){this.ensurePopupInfrastructure(),this.control.addEventListener(dr.eventName,this.boundOnPopupElementChangedHandler)}onDisconnectedCallback(){this.control.removeEventListener(dr.eventName,this.boundOnPopupElementChangedHandler),this.disposePopupInfrastructure()}onSlotChanged(){this.disposePopupInfrastructure(),this.ensurePopupInfrastructure()}getPopupPortal(){if(!this.control.shadowRoot)return null;const e=this.control.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>lt(e)))}onPopupElementChanged(e){H.getOriginalSource(e)===this.popupPortal&&(this.disposePopupElement(),this.ensurePopupElement())}onPopupShown(e){this.popupElement&&dt(this.popupElement)&&this.control.addLogicalChild(this.popupElement)}onPopupClosed(e){this.popupElement&&dt(this.popupElement)&&this.control.removeLogicalChild(this.popupElement)}onDropDownPortalElementsChanged(e){this.ensurePopupElement()}ensurePopupInfrastructure(){var e;this.popupPortal=this.getPopupPortal(),null===(e=this.popupPortal)||void 0===e||e.addEventListener(dr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.ensurePopupElement()}ensurePopupElement(){var e,t,n;this.popupPortal&&(this._popupElement=null===(e=this.popupPortal)||void 0===e?void 0:e.popupBase,null===(t=this._popupElement)||void 0===t||t.addEventListener(ro.eventName,this.boundOnPopupShownHandler),null===(n=this._popupElement)||void 0===n||n.addEventListener(oo.eventName,this.boundOnPopupClosedHandler),this._popupElement&&ht(this._popupElement)&&(this._adaptiveDropDownElement=this._popupElement),this.control.ensurePopupElement())}disposePopupInfrastructure(){var e;null===(e=this.popupPortal)||void 0===e||e.removeEventListener(dr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.popupPortal=null,this._adaptiveDropDownElement=null,this.disposePopupElement()}disposePopupElement(){var e,t;null===(e=this._popupElement)||void 0===e||e.removeEventListener(ro.eventName,this.boundOnPopupShownHandler),null===(t=this._popupElement)||void 0===t||t.removeEventListener(oo.eventName,this.boundOnPopupClosedHandler),this._popupElement=null,this.control.disposePopupElement()}}class Tl extends On{constructor(e){super(e.getKeyboardNavigator(),e),this._editor=e}queryItems(){const e=[];this._editor.editBoxElement&&e.push(this._editor.editBoxElement);const t=bn.findFocusableElements(this._editor).filter((e=>e!==this._editor.editBoxElement));return t.forEach((t=>e.push(t))),e}activate(){const e=document.activeElement;e&&this._editor.editBoxElement&&this._editor.editBoxElement.contains(e)||super.activate()}}var Hl;!function(e){e.isDisplayFormatDefined="is-display-format-defined",e.isPassword="is-password",e.needSelection="need-selection"}(Hl||(Hl={}));const Ul={...Hl,...bl};let Ql=class extends El{constructor(){super(...arguments),this.selectionRequested=!1,this.boundOnInputFocusHandler=this.onInputFocusIn.bind(this),this.boundOnInputFocusOutHandler=this.onInputFocusOut.bind(this),this.boundOnBeforeInputHandler=this.onBeforeInput.bind(this),this.boundOnInputKeyUpHandler=this.onInputKeyUp.bind(this),this.needSelection=!1,this.isDisplayFormatDefined=!1,this.isPassword=!1}get shouldProcessFocusIn(){return this.isDisplayFormatDefined||this.selectionRequested}get shouldProcessFocusOut(){return this.isDisplayFormatDefined}get shouldProcessEnter(){return!1}get inputElement(){return this.fieldElement}get shouldProcessFieldTextVersion(){return!this.isPassword&&super.shouldProcessFieldTextVersion}onFieldReady(e,t){e.addEventListener("keyup",this.boundOnInputKeyUpHandler),e.addEventListener("beforeinput",this.boundOnBeforeInputHandler),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),this.initializeKeyboardNavigator(),super.onFieldReady(e,t),t&&this.focused&&this.onInputFocusIn()}onTemplateWithoutInputReady(e){super.onTemplateWithoutInputReady(e),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("keyup",this.boundOnInputKeyUpHandler),this.initializeKeyboardNavigator()}onInputFocusIn(){this.shouldProcessFocusIn&&this.processFocusIn()}onInputFocusOut(e){this.shouldProcessFocusOut&&this.processFocusOut(e)}onInputKeyUp(e){this.isReadOnly||this.processKeyUp(e)}onBeforeInput(e){this.processBeforeInput(e)}processKeyUp(e){return!1}processFocusIn(){if(this.fieldElement){const e=this.selectionRequested||this.focused&&this.isAllSelected();this.raiseFocusIn(e),this.selectionRequested=!1}else this.editBoxTemplateElement&&this.raiseFocusIn(!1)}processFocusOut(e){this.raiseFocusOut(this.fieldElementValue)}processBeforeInput(e){return!1}raiseFocusIn(e){this.dispatchEvent(new dl(e))}raiseFocusOut(e,t){this.dispatchEvent(new cl(e,t))}raiseKeyDown(e){this.dispatchEvent(new hl(e))}getFieldElement(){return this.querySelector(`[parent-id="${this.id}"].${Bl.TextEditInput}`)}selectInputText(e,t){this.fieldElement&&this.fieldElement.setSelectionRange(e,t)}selectAll(){this.fieldElement&&this.focused&&this.fieldElement.select()}onPasswordChanged(){this.isPassword&&(this.fieldElementValue="")}updated(e){super.updated(e),this.rendered&&e.has("isPassword")&&this.onPasswordChanged(),this.rendered&&e.has("needSelection")&&this.needSelection&&this.selectAll()}focusAndSelectAll(){var e;this.selectionRequested=!0,null===(e=this.fieldElement)||void 0===e||e.focus()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Ln),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,this.createKeyboardStrategy())}createKeyboardStrategy(){return new Tl(this)}getKeyboardNavigator(){return this.keyboardNavigator}focus(e){var t;null===(t=this.fieldElement)||void 0===t||t.focus(e)}};Ql.shadowRootOptions={...ys.shadowRootOptions,delegatesFocus:!0},C([xs({type:Boolean,attribute:Hl.needSelection})],Ql.prototype,"needSelection",void 0),C([xs({type:Boolean,attribute:Hl.isDisplayFormatDefined})],Ql.prototype,"isDisplayFormatDefined",void 0),C([xs({type:Boolean,attribute:Hl.isPassword})],Ql.prototype,"isPassword",void 0),Ql=C([Es(Za)],Ql);class Pl{constructor(e){this.deltaY=e}}var Nl,Rl;!function(e){e[e.forward=0]="forward",e[e.backward=1]="backward"}(Nl||(Nl={}));class Ll{constructor(e,t,n,i){this.direction=Nl.backward,this.selectionStart=e,this.selectionEnd=t,this.selectAll=i,this.direction=n}}class Ml extends Event{constructor(){super(Ml.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Ml.eventName=il+".applyValue";class kl extends CustomEvent{constructor(e){super(kl.eventName,{detail:new ml(e,!1),bubbles:!0,composed:!0,cancelable:!0})}}kl.eventName=il+".autofill";class Kl extends CustomEvent{constructor(e){super(Kl.eventName,{detail:new Pl(e),bubbles:!0,composed:!0,cancelable:!0})}}Kl.eventName=il+".wheel";class Ol extends CustomEvent{constructor(e,t,n,i){super(Ol.eventName,{detail:new Ll(e,t,n,i),bubbles:!0,composed:!0,cancelable:!0})}}Ol.eventName=il+".selectionchange";class _l extends CustomEvent{constructor(e){super(_l.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}_l.eventName=il+".compositionEnd",Ct.register(Ol.eventName,(e=>e.detail)),Ct.register(kl.eventName,(e=>e.detail)),Ct.register(Ml.eventName,(e=>e.detail)),Ct.register(Kl.eventName,(e=>e.detail)),Ct.register(_l.eventName,(e=>({Text:e.detail.data})));class Vl{}Vl.CaretSpanElement=Bl.TextEdit+"-caret-element",function(e){e.syncSelectionStart="sync-selection-start",e.syncSelectionEnd="sync-selection-end",e.isMaskDefined="is-mask-defined"}(Rl||(Rl={}));const zl={...Rl,...Ul};class Wl extends Ql{constructor(){super(...arguments),this.wheelTimerId=-1,this._leftPaddingInput=0,this._rightPaddingInput=0,this._isActuallyBackwardSelection=!1,this._shouldApplySelectionOnFocus=!0,this.compositionProcessing=!1,this.compositionEndHandler=this.handleCompositionEnd.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.wheelHandler=this.handleWheel.bind(this),this.syncSelectionStart=null,this.syncSelectionEnd=null,this.isMaskDefined=!1}disconnectedCallback(){super.disconnectedCallback()}get spanCaretElement(){return this.querySelector(`.${Vl.CaretSpanElement}`)}get shouldProcessFocusOut(){return!0}get shouldProcessWheel(){return this.isMaskDefined}get shouldProcessFocusIn(){return!0}get shouldApplySelectionOnFocus(){return this._shouldApplySelectionOnFocus}set shouldApplySelectionOnFocus(e){this._shouldApplySelectionOnFocus=e}get inputSelectionDirection(){var e;return"backward"===(null===(e=this.inputElement)||void 0===e?void 0:e.selectionDirection)?Nl.backward:Nl.forward}handlePointerUp(e){this.allowInput&&this.isMaskDefined&&this.processPointerUp(e)}handleCompositionEnd(e){this.dispatchEvent(new _l(e)),this.inputElement.removeEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!1}handleClick(e){this.applyInputSelection()}handleWheel(e){if(this.shouldProcessWheel&&(e.preventDefault(),this.processWheel(e),this.bindValueMode!==wl.OnInput)){-1!==this.wheelTimerId&&clearTimeout(this.wheelTimerId);this.wheelTimerId=window.setTimeout((()=>{this.bindValueMode===wl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue()}).bind(this),this.bindValueMode===wl.OnDelayedInput?Math.max(500,this.fieldInputDelay):500)}}onFieldReady(e,t){if(super.onFieldReady(e,t),this.isMaskDefined&&this.fieldElement){const e=window.getComputedStyle(this.fieldElement);this._leftPaddingInput=parseInt(e.paddingLeft),this._rightPaddingInput=parseInt(e.paddingRight)}}getCaretClientPosition(){const e=this.spanCaretElement;return this.fieldElement&&e?(e.textContent=this.fieldElement.value.substring(0,this.getCursorPosition()),e.offsetWidth):0}getCursorPosition(){return this.inputSelectionStart===this.inputSelectionEnd||this.inputSelectionDirection===Nl.backward||this._isActuallyBackwardSelection?this.inputSelectionStart:this.inputSelectionEnd}calculateInputScrollLeft(){if(this.fieldElement){const e=this.getCaretClientPosition(),t=this.fieldElement.scrollLeft,n=this.fieldElement.clientWidth,i=1;e<t&&(this.fieldElement.scrollLeft=e),e>t+n-this._rightPaddingInput-this._leftPaddingInput&&(this.fieldElement.scrollLeft=e-n+this._rightPaddingInput+this._leftPaddingInput+i)}}processWheel(e){this.dispatchEvent(new Kl(e.deltaY))}applyTextPropertyCore(){super.applyTextPropertyCore(),this.applyMaskManagerSelection()}applyMaskManagerSelection(){this.isMaskDefined&&this.focused&&(this.inputSelectionStart!==this.syncSelectionStart||this.inputSelectionEnd!==this.syncSelectionEnd)&&(this.selectInputText(this.syncSelectionStart,this.syncSelectionEnd),this.fieldElement&&this.focused&&this.calculateInputScrollLeft())}get shouldProcessFieldTextVersion(){return!this.isMaskDefined&&super.shouldProcessFieldTextVersion}get shouldRaiseFieldTextEvents(){return!this.isMaskDefined}processFocusIn(){var e;super.processFocusIn(),this.allowInput&&this.isMaskDefined&&this.shouldApplySelectionOnFocus&&requestAnimationFrame((()=>this.applyMaskManagerSelection())),this.addEventListener("wheel",this.wheelHandler,{capture:!0,passive:!1}),h.Browser.WebKitTouchUI&&(null===(e=this.inputElement)||void 0===e||e.addEventListener("click",this.clickHandler))}processFocusOut(e){var t;super.processFocusOut(e),this.removeEventListener("wheel",this.wheelHandler,{capture:!0}),h.Browser.WebKitTouchUI&&(null===(t=this.inputElement)||void 0===t||t.removeEventListener("click",this.clickHandler)),this.isMaskDefined&&!this.contains(e.target)&&this.selectInputText(0,0)}processKeyDown(e){var t;if(super.processKeyDown(e),!this.shouldProcessKeyDown(e))return!1;if(H.markHandled(e),this._isActuallyBackwardSelection=e.shiftKey&&Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Left,this.raiseKeyDown(e),Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter){const n=new KeyboardEvent("keydown",{key:e.key,code:e.code,location:e.location,repeat:e.repeat,isComposing:e.isComposing,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0,composed:!0});null===(t=this.fieldElement)||void 0===t||t.dispatchEvent(n)}return!0}processPointerDown(e){super.processPointerDown(e);const t=H.containsInComposedPath(e,(e=>e===this.inputElement));return this.isMaskDefined&&!this.focused&&t&&(this.shouldApplySelectionOnFocus=!1),t&&document.addEventListener(Wl.pointerUpEventType,this.pointerUpHandler),!0}processKeyUp(e){if(!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return!1;this._isActuallyBackwardSelection=!1;const t=this.querySelector("input:-webkit-autofill");return this.isMaskDefined&&t&&t.value&&!this.isOpenDropDownShortcut(e)&&(this.dispatchEvent(new kl(t.value)),H.markHandled(e)),this.shouldProcessKeyUp(e)&&(this.bindValueMode===wl.OnLostFocus?this.raiseApplyValue():this.applyDefferedValue()),!0}applyDefferedValue(){this.bindValueMode===wl.OnDelayedInput&&this.inputDelayDeferredAction.execute((()=>this.raiseApplyValue()))}raiseApplyValue(){this.dispatchEvent(new Ml)}processBeforeInput(e){return!!super.processBeforeInput(e)||!!this.isMaskDefined&&(e.isComposing&&!h.Browser.AndroidMobilePlatform?(this.compositionProcessing||(this.inputElement.addEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!0),!0):(H.markHandled(e),this.shouldProcessBeforeInput(e)&&(this.applyInputSelection(),this.dispatchEvent(new ul(e)),this.applyDefferedValue()),!0))}updated(e){super.updated(e)}shouldProcessKeyUp(e){if(!this.isMaskDefined)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:case Ie.KeyCode.Down:return!0;case Ie.KeyCode.Delete:return this.bindValueMode!==wl.OnLostFocus;case Ie.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessKeyDown(e){if(!this.isMaskDefined)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:case Ie.KeyCode.Right:case Ie.KeyCode.Up:case Ie.KeyCode.Down:case Ie.KeyCode.Home:case Ie.KeyCode.Delete:case Ie.KeyCode.End:case Ie.KeyCode.Enter:return!0;case Ie.KeyCode.Key_a:case Ie.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessBeforeInput(e){switch(e.inputType){case"insertText":case"insertReplacementText":case"insertFromPaste":return null!==e.data&&e.data.length>0;case"deleteContentBackward":case"deleteContentForward":case"deleteByCut":return!0;case"insertCompositionText":return h.Browser.AndroidMobilePlatform}return!1}isOpenDropDownShortcut(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Down&&e.altKey}selectAll(){super.selectAll(),this.focused&&this.applyInputSelection()}processPointerUp(e){return this.focused&&setTimeout((()=>this.applyInputSelection()),0),this.shouldApplySelectionOnFocus||(this.shouldApplySelectionOnFocus=!0),document.removeEventListener(Wl.pointerUpEventType,this.pointerUpHandler),!0}applyInputSelection(){if(this.isMaskDefined&&(this.syncSelectionStart!==this.inputSelectionStart||this.syncSelectionEnd!==this.inputSelectionEnd)){const e=this.fieldElementValue.length===Math.abs(this.inputSelectionEnd-this.inputSelectionStart);this.raiseMaskSelectionChanged(this.inputSelectionStart,this.inputSelectionEnd,this.inputSelectionDirection,e)}}raiseMaskSelectionChanged(e,t,n,i){this.dispatchEvent(new Ol(e,t,n,i))}}Wl.pointerUpEventType=h.Browser.WebKitTouchUI?"touchend":"pointerup",C([xs({type:Number,attribute:zl.syncSelectionStart})],Wl.prototype,"syncSelectionStart",void 0),C([xs({type:Number,attribute:zl.syncSelectionEnd})],Wl.prototype,"syncSelectionEnd",void 0),C([xs({type:Boolean,attribute:zl.isMaskDefined})],Wl.prototype,"isMaskDefined",void 0),customElements.define(il,Wl);class $l{}$l.Button=pe.Prefix+"-btn",$l.SplitButton=$l.Button+"-split",$l.ButtonFirst=$l.Button+"-first",$l.ButtonLast=$l.Button+"-last",$l.ButtonTool=$l.Button+"-tool",$l.ButtonGroup=$l.Button+"-group",$l.ButtonGroupFirst=$l.ButtonGroup+"-first",$l.ButtonGroupVertical=$l.ButtonGroup+"-vertical",$l.ButtonGroupLeft=$l.ButtonGroup+"-left",$l.ButtonGroupRight=$l.ButtonGroup+"-right";class Gl{}Gl.ClassName=pe.Prefix+"-edit-dropdown",Gl.Header=Gl.ClassName+"-header",Gl.Body=pe.Prefix+"-body",Gl.DropDownButton=pe.Prefix+"-edit-btn-dropdown";class ql extends Ea{constructor(e,t,n){super(e,t),this._focusTrapElement=null,this._parentStrategy=n,this._needRestoreInputFocus=!1}get parentStrategy(){return this._parentStrategy}get dropDownEditor(){return this.parentStrategy.dropDownEditor}getHeaderButtons(){return Array.from(this.targetElement.querySelectorAll(`.${Gl.Header} > .${$l.Button}`))}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnDropDownEditorPointerDownHandler||(this.boundOnDropDownEditorPointerDownHandler=this.onDropDownEditorPointerDownHandler.bind(this),this.targetElement.addEventListener(xl.eventName,this.boundOnDropDownEditorPointerDownHandler)),this.boundOnPopupClosingResultRequestedHandler||(this.boundOnPopupClosingResultRequestedHandler=this.onPopupClosingResultRequested.bind(this),this.targetElement.addEventListener(Wr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.addEventListener(zr.eventName,this.boundOnPopupClosingResultRequestedHandler))}onDispose(){this.boundOnDropDownEditorPointerDownHandler&&(this.targetElement.removeEventListener(xl.eventName,this.boundOnDropDownEditorPointerDownHandler),this.boundOnDropDownEditorPointerDownHandler=void 0),this.boundOnPopupClosingResultRequestedHandler&&(this.targetElement.removeEventListener(Wr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.removeEventListener(zr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.boundOnPopupClosingResultRequestedHandler=void 0)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);return Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Tab&&(t===Ie.KeyCode.Esc||(e.altKey||e.metaKey)&&t===Ie.KeyCode.Up?(this._needRestoreInputFocus=!0,this.closeDropDown(),!0):super.handleKeyDown(e))}onDropDownEditorPointerDownHandler(){this.dropDownEditor.focused||this.parentStrategy.closeDropDown()}onPopupClosingResultRequested(){this.targetElement.contains(document.activeElement)?this.dropDownEditor.focusInternal():this.dropDownEditor.raiseFocusOutInternal(),this._needRestoreInputFocus=!1}closeDropDown(){this.parentStrategy.closeDropDown()}focusElementInRootPath(){return!1}handlePopupShown(){this._needRestoreInputFocus=!1;const e=this.getNestedContentElement();this._focusTrapElement=e||this.targetElement,Mr.activate(this._focusTrapElement,!1,!0),super.handlePopupShown(),Tn(this.dropDownEditor)&&Dn(this.targetElement),this.dropDownEditor.classList.add(pe.Focused)}onPopupClosed(){this.dropDownEditor.classList.remove(pe.Focused),Mr.deactivate(this._focusTrapElement,!1),this._focusTrapElement=null,this._needRestoreInputFocus&&this.dropDownEditor.focusInternal(),super.onPopupClosed()}}class Yl extends Ta{constructor(e,t,n){super(e,t),this._parentStrategy=n}get parentStrategy(){return this._parentStrategy}handlePopupShown(){super.handlePopupShown(),Tn(this.parentStrategy.dropDownEditor)&&Dn(this.targetElement)}}class Xl extends Tl{constructor(e){super(e)}get dropDownEditor(){return this._editor}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);return(e.altKey||e.metaKey)&&t===Ie.KeyCode.Down?(this.openDropDown(),!0):(e.altKey||e.metaKey)&&t===Ie.KeyCode.Up?(this.closeDropDown(),!0):e.altKey&&t===Ie.KeyCode.Delete?(this.tryClearEditorValue(),!0):super.handleKeyDown(e)}closeDropDown(){this.dropDownEditor.closeDropDown()}openDropDown(){this.dropDownEditor.openDropDown()}closeDropDownAndApplyValue(e){this.performShortcutEvent(e)}tryClearEditorValue(){this.dropDownEditor.enabled&&!this.dropDownEditor.isReadOnly&&this.dropDownEditor.dispatchClearEditorValue()}}class Jl extends Xl{constructor(e){super(e)}initialize(){super.initialize(),this.subscribeToEvents()}subscribeToEvents(){this.boundOnPopupKeyboardStrategyCreating||(this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyCreating))}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}onDispose(){this.boundOnPopupKeyboardStrategyCreating&&(this.targetElement.removeEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyCreating),this.boundOnPopupKeyboardStrategyCreating=void 0),super.onDispose()}createPopupStrategy(e,t){return new ql(e,t,this)}createModalStrategy(e,t){return new Yl(e,t,this)}}class jl extends Xl{constructor(e){super(e)}handleKeyDown(e){const t=this.dropDownEditor;return t&&t.shouldHandleKeyDown?t.shouldHandleKeyDown(e):super.handleKeyDown(e)}}var Zl;!function(e){e.ContentOrEditorWidth="ContentOrEditorWidth",e.ContentWidth="ContentWidth",e.EditorWidth="EditorWidth"}(Zl||(Zl={}));class eA extends Wl{constructor(){super(),this.boundOnClickHandler=this.onClick.bind(this),this.isDropDownOpen=!1,this.popupHelper=new Fl(this),this.dropDownWidthMode=Zl.ContentWidth,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}get useMobileFocusBehaviour(){return this.popupHelper.useMobileFocusBehaviour}get popupElement(){return this.popupHelper.popupElement}get popupDOMElement(){return this.popupElement}get dropDownElement(){return this.popupElement}get shouldProcessFocusOut(){if(!this.enabled||this.isReadOnly)return!1;return!(this.editBoxTemplateElement&&this.inputElement&&!T.DomUtils.isItParent(this.editBoxTemplateElement,this.inputElement))}connectedCallback(){super.connectedCallback(),this.popupHelper.onConnectedCallback(),this._componentResizeObserver.observe(this)}disconnectedCallback(){this.popupHelper.onDisconnectedCallback(),super.disconnectedCallback(),this._componentResizeObserver.disconnect()}contentChanged(){super.contentChanged(),this.popupHelper.onSlotChanged(),this.addEventListener("click",this.boundOnClickHandler)}focusInternal(){var e;this.shouldApplySelectionOnFocus=!1,null===(e=this.editBoxElement)||void 0===e||e.focus(),this.shouldApplySelectionOnFocus=!0}processFocusOut(e){var t,n,i;const s=H.getEventSource(e);if(null===(t=this.popupElement)||void 0===t?void 0:t.contains(s))return;const r=null!==(n=e.relatedTarget)&&void 0!==n?n:document.activeElement;this.contains(r)&&!this.isFocusableElementInMainElementTemplate(r)||(null===(i=this.popupElement)||void 0===i?void 0:i.contains(r))||this.raiseFocusOutInternal()}raiseFocusOutInternal(){this.raiseFocusOut(this.fieldElement?this.fieldElementValue:this.fieldText)}processFocusIn(){this.focused&&super.processFocusIn()}processPointerDown(e){return Dn(this),super.processPointerDown(e)}canHandlePointerDown(e){return this.contains(e.target)&&H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))||K.containsInComposedPath(e,this.inputElement)}processKeyDownServerCommand(e){return!1}shouldProcessKeyDown(e){return!e.altKey&&super.shouldProcessKeyDown(e)}shouldProcessKeyUp(e){return!e.altKey&&super.shouldProcessKeyUp(e)}ensurePopupElement(){}disposePopupElement(){}openDropDown(){this.dispatchEvent(new Il)}closeDropDown(){this.dispatchEvent(new Sl)}dispatchClearEditorValue(){this.dispatchEvent(new Dl)}async processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)&&(t.handled=!0),Promise.resolve()}createKeyboardStrategy(){return new Xl(this)}updated(e){super.updated(e),e.has("dropDownWidthMode")&&this.reconnectComponentResizeObserver()}toggleDropDownVisibility(){this.isDropDownOpen?this.closeDropDown():this.enabled&&!this.isReadOnly&&this.openDropDown()}tryOpenDropDown(){this.enabled&&!this.isReadOnly&&this.openDropDown()}tryCloseDropDown(){this.isDropDownOpen&&this.closeDropDown()}onSizeChanged(e,t){if(!this.dropDownElement)return;const n=`${e[0].target.getBoundingClientRect().width}px`;this.dropDownElement.desiredWidth=this.dropDownWidthMode===Zl.EditorWidth?n:null,this.dropDownElement.minDesiredWidth=this.dropDownWidthMode===Zl.ContentOrEditorWidth?n:null}dispatchDropDownEditorPointerDownEvent(){document.dispatchEvent(new xl)}isDropDownButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Gl.DropDownButton))}isEditBoxElement(e){return e===this.fieldElement||e===this.editBoxTemplateElement}isFieldElement(e){return e===this.fieldElement}isEditBoxTemplateElement(e){return e===this.editBoxTemplateElement}reconnectComponentResizeObserver(){this.isDOMAttached&&(this._componentResizeObserver.disconnect(),this.dropDownElement&&(this.dropDownElement.desiredWidth=null,this.dropDownElement.minDesiredWidth=null),this._componentResizeObserver.observe(this))}onClick(e){this.processClick(e)}processClick(e){return H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))&&(this.toggleDropDownVisibility(),this.focused||(this.focusInternal(),this.dispatchDropDownEditorPointerDownEvent()),H.markHandled(e)),!0}}C([xs({type:Boolean,attribute:"is-dropdown-open"})],eA.prototype,"isDropDownOpen",void 0),C([xs({type:Zl,attribute:"dropdown-width-mode"})],eA.prototype,"dropDownWidthMode",void 0);class tA{static selectInputValue(e){null!==e&&e instanceof HTMLInputElement&&ot.isTextInput(e)&&e.select()}static isCheckBoxInput(e){return e instanceof HTMLInputElement&&"checkbox"===e.type}static isEditableTextElement(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&!e.readOnly&&!e.disabled}static findFieldElement(e){return e instanceof El?e.fieldElement:e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e:void 0}static isDropDown(e){return e instanceof eA}static openDropDown(e){e.openDropDown()}}const nA=`:scope > *:not(.${[me.IndentCellClassName,me.HeaderIndentCellClassName,me.GroupFooterIndentCellClassName,me.EmptyCellClassName,me.HiddenEmptyCellClassName,me.RowDragAnchorClassName].join(",.")})`;class iA extends zs{constructor(e,t,n){super(t,n),this.obsolete=!1,this.tableStrategy=e}get isObsolete(){return this.obsolete}makeObsolete(){this.obsolete=!0}getRowVisibleIndex(e=!1){const t=e?null:this.tableStrategy.hiddenRowVisibleIndex;return null!=t?t:ot.getAttributeIntValue(this.targetElement,ai.VisibleIndexName,-1)}selectFirstCell(){this.firstItemSelected||this.moveToFirstItem()}selectLastCell(){this.lastItemSelected||this.moveToLastItem()}toggleSelectionCell(){const e=this.selectedItemElement.querySelector("input[type=checkbox]");e&&this.raiseClickEvent(e,!1,!1,!1)}getSyncSelectedColumnInfo(){return this.getSelectedColumnInfo()}syncSelectedColumn(e){const t=null!==e?this.findItemElementIndexByColumnUid(e.uID):-1;this.selectedItemIndex=Math.max(t,0)}leaveRow(){bn.removeTabIndex(this.selectedItemElement)}getSelectedColumnInfo(){var e;return null!==(e=this.getColumnInfo(this.selectedItemElement))&&void 0!==e?e:null}getColumnInfo(e){return this.getColumnInfoByCell(e)}findItemElementIndexByColumnUid(e){return this.items.findIndex((t=>this.getColumnUidByCell(t)===e))}get firstItemSelected(){return this.tableStrategy.isFirstCellSelected(this)||super.firstItemSelected}get lastItemSelected(){return this.tableStrategy.isLastCellSelected(this)||super.lastItemSelected}getShortcutContext(){var e,t,n,i;return{RowType:null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.getRowType())&&void 0!==t?t:this.getRowType(),ColumnUID:null!==(n=this.getSelectedColumnUid())&&void 0!==n?n:-1,VisibleIndex:null!==(i=this.getRowVisibleIndex())&&void 0!==i?i:-1}}tryRestoreSelection(){return!!super.tryRestoreSelection()||(this.tableStrategy.syncSelectedColumn(this),!1)}queryItems(){return this.queryItemsBySelector(nA)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(!this.isObsolete&&super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;const n=Ie.KeyUtils.getEventKeyCode(e);switch(n){case Ie.KeyCode.Left:return this.handleArrowLeftKeyDown(e);case Ie.KeyCode.Right:return this.handleArrowRightKeyDown(e);case Ie.KeyCode.Tab:return this.handleTabKeyDown(e);case Ie.KeyCode.Home:if(!e.ctrlKey)return this.selectFirstCell(),!0;break;case Ie.KeyCode.End:if(!e.ctrlKey)return this.selectLastCell(),!0;break;case Ie.KeyCode.Space:case Ie.KeyCode.Enter:if(this.isSelectionCell())return this.toggleSelectionCell(),!0}return n===Ie.KeyCode.Space}selectItem(e){const t=e!==this.selectedItemIndex;t&&this.tableStrategy.trySelectHiddenCell(e)||(super.selectItem(e),t&&this.saveSelectedColumn(),!this.navigator.isActive||!t&&this.preventScrollOnFocus||this.alignRequiredVisibleElement(this.selectedItemElement))}get selectedColumnUidSearchElement(){var e,t;return null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.selectedItemElement)&&void 0!==t?t:this.selectedItemElement}get preventScrollOnFocus(){return this.tableStrategy.preventScrollOnFocus}isImmediatelyClickEnabled(){return this.isActiveCommandCell()||this.isActiveExpandButtonCell()||this.isSelectionCell()}handleKeyDownForHiddenItem(e){return this.tableStrategy.handleKeyDownForHiddenRow(this,e)}handleArrowLeftKeyDown(e){return this.moveToPrevItem(),!0}handleArrowRightKeyDown(e){return this.moveToNextItem(),!0}getColumnUidByCell(e){var t;return null===(t=this.getColumnInfo(e))||void 0===t?void 0:t.uID}syncFocusedRowVisibleIndex(){if(!this.isFocusedRowEnabled)return;const e=this.getRowVisibleIndex();this.grid.notifyFocusedRowChanged(e)}isActiveCommandCell(){return Ws.isCommandCell(this.selectedItemElement)}isActiveExpandButtonCell(){return Ws.isExpandButtonCell(this.selectedItemElement)}isSelectionCell(){return Ws.isSelectionCell(this.selectedItemElement)}isStartEditingOnTypeKey(e){const t=Ie.KeyUtils.getEventKeyCode(e);return!!(t===Ie.KeyCode.Backspace||e.altKey&&t===Ie.KeyCode.Down)||this.isPrintableCharacterKey(e)}saveSelectedColumn(){const e=this.getRowType();BA.isColumnSyncRequired(e)&&this.tableStrategy.saveSelectedColumn(this)}getSelectedColumnUid(){const e=this.selectedColumnUidSearchElement;let t;return e&&(t=this.getColumnUidByCell(e)),null!=t?t:null}isFixedCell(e){return Ws.isFixedCell(e)}isFixedTablePart(){return this.tableStrategy.isFixed}alignRequiredVisibleElement(e){const t=this.getScrollViewerContent();t&&(e.scrollIntoView({block:"nearest"}),this.isFixedTablePart()||this.alignElementVertically(e,t),this.isFixedCell(e)||this.alignElementHorizontally(e,t))}alignElementVertically(e,t){const n=this.getScrollViewer();n&&Ya.alignElementVertically(e,n,t)}alignElementHorizontally(e,t){const n=this.findItemElementIndexByChild(e);if(n<0)return;const i=this.getFixedCells(n+1,this.itemCount);if(i.length>0){const n=Ya.calculateHorizontalScrollCorrection(e,i.reverse(),!1);t.scrollBy(n,0)}const s=this.getFixedCells(0,n);if(s.length>0){const n=Ya.calculateHorizontalScrollCorrection(e,s,!0);t.scrollBy(n,0)}}getFixedCells(e,t){const n=[];for(let i=e;i<t;i++){const e=this.getItem(i);e&&this.isFixedCell(e)&&n.push(e)}return n}}class sA extends iA{constructor(e,t,n){super(e,t,n)}getSelectedItemRowSpan(){return this.selectedItemElement.rowSpan}getSelectedItemLeafIndex(e){return this.getLeafIndex(this.selectedItemElement,e)}getRowType(){return _s.Header}handleKeyDown(e){if(!this.nestedContentSelected)switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Space:if(!this.isSelectionCell())return this.performShortcutEvent(e),!0;break;case Ie.KeyCode.Down:return e.altKey&&this.performShortcutEvent(e),e.altKey}return super.handleKeyDown(e)}isImmediatelyClickEnabled(){return!0}getColumnInfo(e){return this.getHeaderColumnInfo(e)}findItemElementIndexByColumnUid(e){let t=super.findItemElementIndexByColumnUid(e);return t<0&&(t=this.items.findIndex((t=>{var n;return null===(n=this.getColumnInfo(t))||void 0===n?void 0:n.containsLeaf(e)}))),t}getSyncSelectedColumnInfo(){const e=super.getSyncSelectedColumnInfo();if(e&&e.hasLeafs){const t=this.tableStrategy.getSavedColumnInfo();return t&&e.containsLeaf(t.uID)?t:e.getLeftLeaf()}return e}handleArrowLeftKeyDown(e){return!!(this.selectedItemIndex-1>=0&&this.isAdjacentColumn(-1))&&super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return!!(this.selectedItemIndex+1<this.itemCount&&this.isAdjacentColumn(1))&&super.handleArrowRightKeyDown(e)}isAdjacentColumn(e){const t=e<0,n=this.getSelectedItemLeafIndex(t);return this.getLeafIndex(this.getItem(this.selectedItemIndex+e),!t)===n+e}getLeafIndex(e,t){var n,i,s;const r=this.getColumnInfo(e);if(!r||!r.hasLeafs)return null!==(i=null===(n=this.getColumnInfo(e))||void 0===n?void 0:n.leafIndex)&&void 0!==i?i:-1;const o=t?r.getLeftLeaf():r.getRightLeaf();return null!==(s=null==o?void 0:o.leafIndex)&&void 0!==s?s:-1}}class rA extends iA{constructor(e,t,n){super(e,t,n)}focusNestedEditor(){return this.alignRequiredVisibleElement(this.selectedItemElement),!!this.switchToNestedContent()&&(this.selectFocusedInputValue(),!0)}updateSelectedItemByChildElement(e,t=null){t instanceof FocusEvent&&this.syncFocusedRowVisibleIndex(),super.updateSelectedItemByChildElement(e,t)}selectFocusedInputValue(){tA.selectInputValue(document.activeElement)}}class oA extends rA{constructor(e,t,n){super(e,t,n)}getNestedContentContainer(){return this.nestedContentSelected?this.targetElement:super.getNestedContentContainer()}activate(){this.nestedContentSelected&&!this.isNestedElementFocused()&&this.leaveFromNestedContent(),super.activate()}switchToNestedContent(){return this.getNestedContentElement()&&bn.scheduleResetTabIndex(this.selectedItemElement),super.switchToNestedContent()}leaveFromNestedContent(e=Mn.None){bn.makeElementFocusable(this.selectedItemElement),super.leaveFromNestedContent(e)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const n=Ie.KeyUtils.getEventKeyCode(e);this.nestedContentSelected&&(n===Ie.KeyCode.Tab&&this.alignToAdjacentFocusableItem(e.shiftKey),bn.removeTabIndex(this.selectedItemElement));const i=this.nestedContentSelected,s=super.handleKeyDown(e);return!(n===Ie.KeyCode.Tab&&s&&i&&!this.nestedContentSelected)&&s}alignToAdjacentFocusableItem(e){e&&bn.makeElementFocusable(this.selectedItemElement);const t=e?bn.findPrevFocusableElement(this.selectedItemElement):bn.findNextFocusableNotChildElement(document.activeElement);if(!t)return;const n=this.findItemElementIndexByChild(t);if(n<0||n===this.selectedItemIndex)return;const i=this.getItem(n);i&&this.alignRequiredVisibleElement(i)}}class aA extends oA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.Filter}handleKeyDown(e){if(this.isStartEditingOnTypeKey(e)&&!this.nestedContentSelected){const t=this.getNestedContentElement();this.switchToNestedContent();const n=document.activeElement;if(e.altKey&&Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Down&&tA.isDropDown(t))return tA.openDropDown(t),!0;n&&tA.isEditableTextElement(n)&&n.select()}return super.handleKeyDown(e)}isStartEditingOnTypeKey(e){const t=Ie.KeyUtils.getEventKeyCode(e);return!(!e.ctrlKey||t!==Ie.KeyCode.Key_v)||super.isStartEditingOnTypeKey(e)}}class lA extends oA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.Edit}selectItem(e){e!==this.selectedItemIndex&&this.nestedContentSelected&&this.leaveFromNestedContent(),super.selectItem(e),this.switchToNestedContent()}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const n=Ie.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(e.ctrlKey&&[Ie.KeyCode.Up,Ie.KeyCode.Down,Ie.KeyCode.Home,Ie.KeyCode.End].includes(n)||e.altKey&&n===Ie.KeyCode.Tab)return this.leaveFromNestedContent(),!1;if(n===Ie.KeyCode.Enter&&this.canSaveOnEnter()||n===Ie.KeyCode.Esc)return this.leaveFromNestedContent(),this.saveRowSelectedColumn(),this.performShortcutEvent(e),!0;n!==Ie.KeyCode.Space&&n!==Ie.KeyCode.Enter||this.saveRowSelectedColumn()}else if(n===Ie.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}saveRowSelectedColumn(){this.tableStrategy.saveRowSelectedColumn(this)}canSaveOnEnter(){if(!document.activeElement)return!1;const e=document.activeElement;return ot.isTextInput(e)&&!ot.isMultipleRowInput(e)}}class AA extends rA{constructor(e,t,n){super(e,t,n)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return _s.Edit}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e)&&!this.isNestedElementFocused())return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult&&!this.tableBodyStrategy.isEditPending)return!0;const n=Ie.KeyUtils.getEventKeyCode(e);if(this.isEditorCell()){if(n===Ie.KeyCode.Esc&&this.tableBodyStrategy.endEditRowItem(Wa.Cancel))return!0;if(this.isActiveEditorCell()){if(Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab){const t=this.isNewItemRow&&!e.shiftKey;if(this.tableBodyStrategy.startEditNearestRowItem(!e.shiftKey,t))return!0;if(this.tableBodyStrategy.endEditRowItem(t?Wa.SaveAndStartNewRow:Wa.Hide))return!0}if(n===Ie.KeyCode.Enter&&!this.editorManager.isEditorPopupShown){if(this.handleEnterKeyDownInActiveEditorCell(e))return!0}}else{if(n===Ie.KeyCode.Enter&&this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0;if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}}else if(n===Ie.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}handleTabKeyDown(e,t=!1,n=!1){return this.isNewItemRow&&!e.shiftKey&&this.lastItemSelected?!!this.tableBodyStrategy.endEditRowItem(Wa.SaveAndStartNewRow)||super.handleTabKeyDown(e,t,!0):super.handleTabKeyDown(e,t)}handleEnterKeyDownInActiveEditorCell(e){const t=document.activeElement;if(e.shiftKey&&t instanceof HTMLTextAreaElement&&tA.isEditableTextElement(t))return!1;return this.tableBodyStrategy.endEditRowItem(this.enterKeyDirection===Ks.Column||(e.shiftKey?this.firstItemSelected:this.lastItemSelected)&&this.enterKeyDirection===Ks.Row?Wa.Save:Wa.Hide,!0,e.shiftKey)}get isNewItemRow(){return this.targetElement.classList.contains(me.EditNewItemRowInplaceClassName)}isEditorCell(){return!Ws.isCommandCell(this.selectedItemElement)&&!Ws.isExpandButtonCell(this.selectedItemElement)&&!Ws.isSelectionCell(this.selectedItemElement)}isActiveEditorCell(){return Ws.getCellType(this.selectedItemElement)===Vs.Edit}}class dA extends rA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.EditForm}}class cA extends iA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.EditNewItemRow}handleKeyDown(e){if(this.editorManager.isPendingCommandResult)return!0;const t=Ie.KeyUtils.getEventKeyCode(e);if(!this.isObsolete&&t===Ie.KeyCode.Enter){const e=this.tableStrategy.getSavedColumnInfo();if(this.tableStrategy.startEditNewItemRow(this,e))return!0}return super.handleKeyDown(e)}}class hA extends iA{constructor(e,t,n){super(e,t,n)}get selectedColumnUidSearchElement(){var e;const t=super.selectedColumnUidSearchElement;return null!==(e=null==t?void 0:t.querySelector(`.${me.ExpandButtonCellClassName}`))&&void 0!==e?e:t}getRowType(){return _s.Group}queryItems(){return new Array}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);return null!==t?t:this.nestedContentSelected||Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Left&&Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Right?Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter?(this.switchToNestedContent()||this.performShortcutEvent(e),!0):super.handleKeyDown(e):(this.tableStrategy.trySelectHiddenCell(this.selectedItemIndex,(()=>this.dispatchKeyboardEventToSelectedItemStrategy(e)))||this.performShortcutEvent(e),!0)}isImmediatelyClickEnabled(){return!0}dispatchKeyboardEventToSelectedItemStrategy(e){const t=this.tableStrategy.getSelectedItemStrategy();null==t||t.targetElement.dispatchEvent(e)}}class uA extends iA{constructor(e,t,n){super(e,t,n)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return _s.Data}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e))return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult)return!0;const n=Ie.KeyUtils.getEventKeyCode(e);if(!this.nestedContentSelected){const t=this.isSelectionRowEnabled&&!this.isSelectionCell();if(n===Ie.KeyCode.Space&&t)return this.performShortcutEvent(e),!0;if(!this.isObsolete&&n===Ie.KeyCode.Enter){if(this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;if(this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0}if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}return!!super.handleKeyDown(e)||!(this.nestedContentSelected||n!==Ie.KeyCode.Enter||!this.hasRowClickEvent)&&(this.performShortcutEvent(e),!0)}}class pA extends iA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.EmptyData}}class mA extends iA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.Detail}}class gA extends iA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.Footer}}class CA extends iA{constructor(e,t,n){super(e,t,n)}getRowType(){return _s.GroupFooter}}class fA{constructor(e){this.cellInfo=e}}class vA{constructor(e){this.result=e}}class bA extends CustomEvent{constructor(e){super(bA.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!1})}}bA.eventName="dxbl-grid-request-start-editing";class wA extends CustomEvent{constructor(e){const t=new vA(e);super(wA.eventName,{detail:t,bubbles:!0,composed:!1,cancelable:!1})}}wA.eventName="dxbl-grid-cell-editor-shown";class yA extends zs{constructor(e,t){super(e,t),this.savedColumnInfo=null}getSavedColumnInfo(){return this.savedColumnInfo}saveSelectedColumn(e){this.savedColumnInfo=e.getSyncSelectedColumnInfo()}syncSelectedColumn(e){const t=this.getSavedColumnInfo();e.syncSelectedColumn(t)}queryItems(){return this.queryItemsBySelector(ks.DataTablePartsSelector)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new SA(this,this.grid,e):new IA(this,this.grid,e)}createItemStrategy(e){return e.matches("thead")?new EA(this,this.grid,e):e.matches("tbody")?this.createTableBodyItemStrategy(e):e.matches("tfoot")?new xA(this,this.grid,e):null}selectItem(e,t=-1){var n;const i=this.getStrategy(e),s=this.syncSelectedColumns(i);t>=0&&i.enterTablePartWithNewIndex(t),(t<0||s&&(null===(n=i.getStrategy(t))||void 0===n?void 0:n.getRowType())===_s.Header)&&(t=i.selectedItemIndex);const r=this.getSelectedItemStrategy();r&&r!==i&&r.leaveTablePart(),i.selectItem(t)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Ie.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Ie.KeyCode.Tab:return this.handleTabKeyDown(e);case Ie.KeyCode.PageUp:case Ie.KeyCode.PageDown:return this.handleBodyShortcut(e,!0);case Ie.KeyCode.Home:case Ie.KeyCode.End:return this.handleBodyShortcut(e,!1)}return!1}handleTabKeyDown(e){var t,n;if(e.altKey)return super.handleTabKeyDown(e,!0);if(e.shiftKey){if(this.firstItemSelected)return!1;null===(t=this.getStrategy(this.selectedItemIndex-1))||void 0===t||t.selectLastCell()}else{if(this.lastItemSelected)return!1;null===(n=this.getStrategy(this.selectedItemIndex+1))||void 0===n||n.selectFirstCell()}return!0}isVirtualScrollingEnabled(e){if(e.classList.contains(me.TopFixedBodyClassName))return!1;const t=this.getScrollViewer();return!!t&&Ya.isVirtualScrollingEnabled(t)}handleArrowUpKeyDown(e){if(0===this.selectedItemIndex)return!1;if(e)this.moveToPrevItem();else{const e=this.getStrategy(this.selectedItemIndex-1);this.selectItem(this.selectedItemIndex-1,e.itemCount-1)}return!0}handleArrowDownKeyDown(e){return!(this.selectedItemIndex>=this.itemCount-1)&&(e?this.moveToNextItem():this.selectItem(this.selectedItemIndex+1,0),!0)}handleBodyShortcut(e,t){const n=this.items.map(((e,t)=>e.matches("tbody")?t:-1)).filter((e=>e>=0));if(!n.length)return!1;const i=this.getStrategy(n[n.length-1]);return!(!i||i===this.getSelectedItemStrategy())&&(t&&this.syncSelectedColumns(i),i.handleKeyDown(e))}getStrategy(e){return this.getItemStrategy(e)}syncSelectedColumns(e){const t=this.getSelectedItemStrategy();if(t){const n=t.getSelectedItemStrategy(),i=e.getSelectedItemStrategy();if(n&&i)return e.syncSelectedColumns(n,i)}return!1}}class BA extends zs{constructor(e,t,n){super(t,n),this.parentTableStrategy=e}get selectedHiddenRowStrategy(){return null}get hiddenRowVisibleIndex(){return null}get isFixed(){return!0}get preventScrollOnFocus(){return!this.navigator.initialized}enterTablePartWithNewIndex(e){}isFirstCellSelected(e){return!1}isLastCellSelected(e){return!1}trySelectHiddenCell(e,t=null){return!1}handleKeyDownForHiddenRow(e,t){return null}leaveTablePart(){}getStrategy(e){const t=this.getItemStrategy(e);return t instanceof iA?t:null}selectFirstCell(){var e;this.selectItem(0),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()}selectLastCell(){var e;this.selectItem(this.itemCount-1),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()}getSavedColumnInfo(){return this.parentTableStrategy.getSavedColumnInfo()}saveRowSelectedColumn(e){this.saveSelectedColumn(e)}saveSelectedColumn(e){this.parentTableStrategy.saveSelectedColumn(e)}syncSelectedColumn(e){this.isColumnSyncRequired(e)&&this.parentTableStrategy.syncSelectedColumn(e)}syncSelectedColumns(e,t){return t&&e!==t&&(e&&this.isColumnSyncRequired(e)&&this.saveSelectedColumn(e),this.syncSelectedColumn(t)),!1}getShortcutContext(){return{AreaType:Os.DataTable}}queryItems(){return this.queryItemsBySelector(ks.RowSelector)}getSelectedItemStrategy(){const e=super.getSelectedItemStrategy();return e instanceof iA?e:null}selectItem(e){const t=this.getSelectedItemStrategy(),n=this.getStrategy(e);this.syncSelectedColumns(t,n),super.selectItem(e),t&&t!==n&&t.leaveRow()}updateSelectedItemByIndex(e){const t=this.getSelectedItemStrategy();t&&e!==this.selectedItemIndex&&t.leaveRow(),super.updateSelectedItemByIndex(e)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Ie.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Ie.KeyCode.Tab:return this.handleTabKeyDown(e)}return!1}handleTabKeyDown(e){const t=super.handleTabKeyDown(e);return t&&this.onAfterTabKeyDownHandled(e),t}onAfterTabKeyDownHandled(e){var t,n;e.shiftKey?null===(t=this.getSelectedItemStrategy())||void 0===t||t.selectLastCell():null===(n=this.getSelectedItemStrategy())||void 0===n||n.selectFirstCell()}getStrategyByRowVisibleIndex(e){const t=this.items.findIndex(((t,n)=>{var i;return(null===(i=this.getStrategy(n))||void 0===i?void 0:i.getRowVisibleIndex())===e}));return this.getItemStrategy(t)}handleArrowUpKeyDown(e){if(!e){if(this.firstItemSelected)return!1;this.moveToPrevItem()}return!e}handleArrowDownKeyDown(e){if(!e){if(this.lastItemSelected)return!1;this.moveToNextItem()}return!e}isColumnSyncRequired(e){const t=e.getRowType();return BA.isColumnSyncRequired(t)}static isColumnSyncRequired(e){switch(e){case _s.Header:case _s.Filter:case _s.Edit:case _s.Data:case _s.Footer:case _s.GroupFooter:return!0}return!1}}class EA extends BA{constructor(e,t,n){super(e,t,n),this.isTabKeyDownHandling=!1}selectItem(e){const t=this.getSelectedItemStrategy(),n=this.getStrategy(e),i=this.syncSelectedRows(t,n);super.selectItem(i>=0?i:e)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return this.moveHorizontally(!0);case Ie.KeyCode.Right:return this.moveHorizontally(!1)}return super.handleKeyDown(e)}createItemStrategy(e){switch(Ws.getRowType(e)){case _s.Header:return new sA(this,this.grid,e);case _s.Filter:return new aA(this,this.grid,e)}throw new Error("Not implemented")}syncSelectedColumns(e,t){if(e&&e!==t&&this.isColumnSyncRequired(t)){const n=this.syncSelectedRows(e,t);if(n>=0)return this.selectedItemIndex=n,t=this.getSelectedItemStrategy(),super.syncSelectedColumns(e,t),!0}return super.syncSelectedColumns(e,t)}syncSelectedRows(e,t){if(!this.isTabKeyDownHandling&&e&&!this.isHeaderRowStrategy(e)&&t&&this.isHeaderRowStrategy(t)){const t=this.isColumnSyncRequired(e)?e.getSyncSelectedColumnInfo():this.getSavedColumnInfo();if(t)return t.headerRowIndex}return-1}handleArrowDownKeyDown(e){const t=this.getSelectedItemStrategy();if(!e&&t&&this.isHeaderRowStrategy(t)){const e=t,n=e.getSelectedColumnInfo();if(n&&!n.hasLeafs){const t=n.headerRowIndex+e.getSelectedItemRowSpan();return!(t>=this.itemCount)&&(this.selectItem(t),!0)}}return super.handleArrowDownKeyDown(e)}handleTabKeyDown(e){this.isTabKeyDownHandling=!0;const t=super.handleTabKeyDown(e);return this.isTabKeyDownHandling=!1,t}isHeaderRowStrategy(e){return e.getRowType()===_s.Header}moveHorizontally(e){const t=this.getSelectedItemStrategy();if(t&&this.isHeaderRowStrategy(t)){const n=t.getSelectedItemLeafIndex(e);return this.selectColumn(n+(e?-1:1))}return!1}selectColumn(e){if(e>=0){const t=this.findHeaderCellByColumnIndex(e);if(t){const e=this.findItemElementIndexByChild(t),n=this.getStrategy(e);if(n){const i=n.getColumnInfo(t);if(i)return n.syncSelectedColumn(i),this.selectedItemIndex=e,this.selectItem(e),!0}}}return!1}}class IA extends BA{constructor(e,t,n){super(e,t,n),this.savedVisibleIndex=-1,this.restoreSelectedColumn=!1,this.expectedFocusedRowFromServer=!1,this.editPending=!1,this.editorValue=null,this.pendingEditEvents=[],this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnGridRequestStartCellEditingHandle=this.onRequestStartCellEditing.bind(this),this.addEventSubscriptions()}get isEditPending(){return this.editPending}get isFixed(){return this.targetElement.classList.contains(me.TopFixedBodyClassName)}queuePendingEditEvent(e){Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Backspace&&this.pendingEditEvents.pop(),this.pendingEditEvents.push(e)}onDispose(){super.onDispose(),this.removeEventSubscriptions()}createDataRowStrategy(e){return new uA(this,this.grid,e)}createEditRowStrategy(e){return new lA(this,this.grid,e)}createInplaceEditRowStrategy(e){return new AA(this,this.grid,e)}createItemStrategy(e){switch(Ws.getRowType(e)){case _s.Edit:return this.isInplaceEditingEnabled?this.createInplaceEditRowStrategy(e):this.createEditRowStrategy(e);case _s.EditForm:return new dA(this,this.grid,e);case _s.EditNewItemRow:return new cA(this,this.grid,e);case _s.Group:return new hA(this,this.grid,e);case _s.Data:return this.createDataRowStrategy(e);case _s.EmptyData:return new pA(this,this.grid,e);case _s.Detail:return new mA(this,this.grid,e);case _s.GroupFooter:return new CA(this,this.grid,e)}throw new Error("Not implemented")}selectItem(e){const t=this.getStrategy(e);this.saveFocusedRowVisibleIndex(t),super.selectItem(e),this.restoreSelectedColumn=!1}saveRowSelectedColumn(e){super.saveRowSelectedColumn(e),this.restoreSelectedColumn=!0}syncSelectedColumns(e,t){const n=super.syncSelectedColumns(e,t);return!n&&this.restoreSelectedColumn&&t&&this.parentTableStrategy.syncSelectedColumn(t),n||this.restoreSelectedColumn}handleKeyDown(e){switch(this.expectedFocusedRowFromServer=!1,Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.PageDown:return this.handlePageUpDown(e,!1)||this.performShortcutEvent(e),!0;case Ie.KeyCode.PageUp:return this.handlePageUpDown(e,!0)||this.performShortcutEvent(e),!0;case Ie.KeyCode.Home:return this.handleHomeKeyDown(e.ctrlKey);case Ie.KeyCode.End:return this.handleEndKeyDown(e.ctrlKey)}return super.handleKeyDown(e)}handleKeyUp(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:case Ie.KeyCode.Up:case Ie.KeyCode.PageUp:case Ie.KeyCode.PageDown:case Ie.KeyCode.Home:case Ie.KeyCode.End:case Ie.KeyCode.Tab:case Ie.KeyCode.Enter:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Pe.None)}moveToNextItem(){const e=this.getScrollViewer(),t=e&&Ya.bottomAlignmentRequired(this.selectedItemElement,e)?Qe.Bottom:null;super.moveToNextItem(),this.scrollToElement(t,Pe.None)}leaveTablePart(){super.leaveTablePart(),this.notifyFocusedRowChanged()}onHandlePageUpDownKey(e,t,n){const i=this.validateItemIndex(e);this.selectItem(i),this.scrollToElement(t,n)}scrollToElement(e,t){const n=this.getScrollViewer();n&&_e.scrollToElementRelyOnStickyDescendants(this.selectedItemElement,e,t,n)}onMakeRowVisible(e){this.selectItem(e)}handlePageUpDown(e,t){this.savedVisibleIndex=-1;const n=t?this.firstItemSelected:this.lastItemSelected,i=this.getSelectedItemStrategy(),s=i&&i.getRowType()===_s.EmptyData,r=this.targetElement.contains(e.target);if(n&&(s||r))return this.expectedFocusedRowFromServer=this.isFocusedRowEnabled,!1;const o=this.getScrollViewer();if(o){const e=t?Qe.Top:Qe.Bottom,n=Ya.calculateBoundaryItemIndex(this,o,!t);this.onHandlePageUpDownKey(n,e,Pe.None)}return!0}handleHomeKeyDown(e){return e&&this.selectFirstCell(),e}handleEndKeyDown(e){return e&&this.selectLastCell(),e}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.grid.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}shouldSaveFocusedRowVisibleIndex(e){return!this.expectedFocusedRowFromServer&&this.isFocusableRow(e.getRowType())}saveFocusedRowVisibleIndex(e){e&&this.shouldSaveFocusedRowVisibleIndex(e)&&(this.savedVisibleIndex=e.getRowVisibleIndex())}isFocusableRow(e){switch(e){case _s.Group:case _s.Edit:case _s.Data:return!0}return!1}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.grid.addEventListener(bA.eventName,this.boundOnGridRequestStartCellEditingHandle)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.grid.removeEventListener(bA.eventName,this.boundOnGridRequestStartCellEditingHandle)}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=this.items.indexOf(e.detail.element);this.onMakeRowVisible(t)}}onRequestStartCellEditing(e){let t=!1;const n=e.detail.cellInfo,i=this.findItemElementIndexByChild(n.element);if(i<0)return;const s=this.getStrategy(i);if(!(s instanceof cA)){if(s instanceof iA){this.saveRowSelectedColumn(s);const e=s.findItemElementIndexByColumnUid(n.columnInfo.uID);t=this.startEditRowItem(s,e,n.hitInnerElement,this.raiseStartCellEditingRequestComplete.bind(this))}t||(n.rowType===_s.Edit&&this.endEditRowItem(Wa.Hide),this.raiseStartCellEditingRequestComplete(!1))}}raiseStartCellEditingRequestComplete(e){this.grid.dispatchEvent(new wA(e))}startEditNewItemRow(e,t){const n=this.editorManager.showNewItemRowEditor(t);return n>=0&&(e.selectItem(n),this.saveRowSelectedColumn(e),!0)}startEditRowItem(e,t,n=null,i=null){if(null===e||!this.isInplaceEditableRow(e))return!1;if(t<0||t>=e.itemCount)return!1;return!!this.editorManager.showEditor(e.getItem(t),n,(e=>{const n=e===$a.Completed;if(n){const e=this.findEditRowStrategy();null!==e&&(e.updateSelectedItemByIndex(t),this.saveRowSelectedColumn(e),e.focusNestedEditor()||e.leaveFromNestedContent())}null!==i&&i(n)}))&&(e.selectItem(t),this.saveRowSelectedColumn(e),!0)}startEditingOnType(e,t){const n=this.startEditRowItem(e,t,null,(e=>{var t;if(e){const e=this.findEditRowStrategy(),n=document.activeElement;(null==e?void 0:e.nestedContentSelected)&&n&&(this.applyPendingEditEvents(n),this.editorValue=(null===(t=tA.findFieldElement(n))||void 0===t?void 0:t.value)||null)}this.editPending=!1,this.pendingEditEvents.splice(0),this.raiseStartCellEditingRequestComplete(e)}));return this.editPending=n,n}endEditRowItem(e,t=!1,n=!1){const i=this.getSelectedItemStrategy();if(null===i||!(i instanceof AA))return!1;if(this.isEditingOnTypeEnabled()){const e=i.getNestedContentElement(),t=tA.findFieldElement(e);t&&t.value===this.editorValue&&!tA.isCheckBoxInput(t)&&this.dispatchChangeEvent(t),this.editorValue=null}return i.leaveFromNestedContent(),e!==Wa.Hide&&this.saveRowSelectedColumn(i),this.editorManager.closeEditor(e,(s=>{e===Wa.Cancel&&s===$a.Failed?i.focusNestedEditor()||i.leaveFromNestedContent():t&&this.enterKeyDirection!==Ks.None&&this.selectNextItemByEnterKey(!n,!1)}))}startEditNearestRowItem(e,t=!1){const n=this.findNearestCellPosition(e,!0);if(null===n)return!1;const[i,s]=n;if(t&&i!==this.selectedItemIndex)return!1;const r=this.getSelectedItemStrategy(),o=this.getStrategy(i);return r&&r!==o&&r.updateSelectedItemByIndex(s),this.startEditRowItem(o,s,null,this.raiseStartCellEditingRequestComplete.bind(this))}selectNextItemByEnterKey(e,t){const n=this.findNextPositionForEnterKey(e,t);if(!n)return;const[i,s]=n;if(this.enterKeyDirection===Ks.Row){const e=this.getSelectedItemStrategy();null==e||e.updateSelectedItemByIndex(s)}const r=this.selectedItemIndex!==i;this.selectItem(i),r&&this.notifyFocusedRowChanged()}findNextPositionForEnterKey(e,t){if(this.enterKeyDirection===Ks.Row)return this.findNearestCellPosition(e,t);const n=this.getSelectedItemStrategy();if(!n||(e?this.lastItemSelected:this.firstItemSelected))return null;const i=e?1:-1;for(let e=this.selectedItemIndex+i;e>=0&&e<this.itemCount;e+=i){const i=this.getStrategy(e);if(!(i&&(!t||this.isInplaceEditableRow(i))))continue;return[e,Math.min(n.selectedItemIndex,i.itemCount-1)]}return null}findNearestCellPosition(e,t){const n=e?1:-1,i=this.itemCount,s=this.selectedItemIndex;for(let r=s;r>=0&&r<i;r+=n){const i=this.getStrategy(r);if(!(i&&(!t||this.isInplaceEditableRow(i))))continue;let o;o=r===s?i.selectedItemIndex+n:e?0:i.itemCount-1;for(let e=o;e>=0&&e<i.itemCount;e+=n){const n=i.getItem(e),s=this.getColumnInfoByCell(n);if(null!==s&&(!t||s.isEditable))return[r,e]}}return null}isInplaceEditableRow(e){if(!this.isInplaceEditingEnabled)return!1;const t=e.getRowType();return t===_s.Data||t===_s.Edit}findEditRowStrategy(){for(let e=0;e<this.itemCount;e++){const t=this.getStrategy(e),n=IA.castToEditRowStategy(t);if(n)return n}return null}applyPendingEditEvents(e){for(let t=0;t<this.pendingEditEvents.length;t++){const n=this.pendingEditEvents[t];this.dispatchKeyboardEvent(e,"keydown",n)||(this.dispatchKeyboardEvent(e,"keypress",n)||tA.isEditableTextElement(e)&&(this.dispatchInputEvent(e,"beforeinput",n.key)||this.processEditorInput(e,n,t)||this.isPrintableCharacterKey(n)&&this.dispatchInputEvent(e,"input",n.key)))}}processEditorInput(e,t,n){return tA.isCheckBoxInput(e)&&Ie.KeyUtils.getEventKeyCode(t)===Ie.KeyCode.Space?(e.click(),!0):((e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(0===n&&(e.value=""),this.isPrintableCharacterKey(t)&&(e.value+=t.key)),!1)}dispatchChangeEvent(e){const t=new Event("change",{bubbles:!0,cancelable:!0,composed:!0});return e.dispatchEvent(t),t.defaultPrevented}dispatchKeyboardEvent(e,t,n){const i=new KeyboardEvent(t,n);return e.dispatchEvent(i),i.defaultPrevented}dispatchInputEvent(e,t,n){const i=new InputEvent(t,{bubbles:!0,cancelable:!0,inputType:"insertText",data:n});return e.dispatchEvent(i),i.defaultPrevented}static castToEditRowStategy(e){return e instanceof rA&&e.getRowType()===_s.Edit?e:null}}class SA extends IA{constructor(e,t,n){super(e,t,n),this.selectedRowVirtualIndex=-1,this.selectedNonVirtualRowIndexOffset=0,this.selectedHiddenStrategy=null,this.isLastRowSelected=!1,this.rowVirtualIndexToShow=null,this.scrollRequired=!1,this.onRowMadeVisibleCallback=null,this.cellEditingStarted=!1,this.skipIndexCorrectionForIncomingEditRow=!1,this.boundOnScrollHandler=this.onScroll.bind(this),this.boundOnStartCellEditingRequestHandler=this.onStartCellEditingRequest.bind(this),this.addEventListeners()}onDispose(){this.removeEventListeners(),super.onDispose()}get preventScrollOnFocus(){return super.preventScrollOnFocus||this.isFocusHidden||!this.scrollRequired&&!this.isRowInView(this.selectedItemElement)}get firstItemSelected(){return super.firstItemSelected&&0===this.selectedRowVirtualIndex}get lastItemSelected(){return this.isLastRowSelected||!this.totalItemCount}get isFocusHidden(){return Tn(this.targetElement)}get lastVirtualIndexSelected(){return this.selectedRowVirtualIndex>=this.lastVirtualIndex}get lastVirtualIndex(){const e=this.totalItemCount;return e?e-1:0}get totalItemCount(){return this.getScrollViewer().totalItemCount}get makingRowVisibleStarted(){return null!==this.rowVirtualIndexToShow}initialize(){super.initialize(),this.cellEditingStarted=!1}isFirstCellSelected(e){var t,n;return null!==(n=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.firstItemSelected)&&void 0!==n?n:super.isFirstCellSelected(e)}isLastCellSelected(e){var t,n;return null!==(n=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.lastItemSelected)&&void 0!==n?n:super.isLastCellSelected(e)}isIndexWithinBoundaries(e){return!0}enterTablePartWithNewIndex(e){this.scrollRequired=!0;const t=0===e;this.updateSelectedVirtualIndex(t?0:this.lastVirtualIndex),this.selectedNonVirtualRowIndexOffset=t?-1:SA.maxOffset}selectItem(e){const t=this.correctSelectionIndex(e);t<0||(super.selectItem(t),this.scrollRequired=!1,this.isFocusHidden||this.updateSelectedVirtualState())}leaveTablePart(){super.leaveTablePart(),this.scrollRequired=!0}updateSelectedItemByChildElement(e,t=null){const n=this.selectedItemIndex;if(super.updateSelectedItemByChildElement(e,t),this.skipIndexCorrectionForIncomingEditRow=!1,t instanceof MouseEvent)return Fn(this.targetElement),void this.updateSelectedVirtualState();t instanceof FocusEvent&&this.selectedRowVirtualIndex<0&&this.updateSelectedVirtualIndex();(n!==this.selectedItemIndex||e.parentElement!==this.selectedItemElement)&&this.resetVirtualStateBySelectedStrategy(e)}moveToPrevItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(-1):super.moveToPrevItem()}moveToNextItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(1):super.moveToNextItem()}selectFirstCell(){this.selectedNonVirtualRowIndexOffset=-1,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()})),this.makeRowVisible(0)}selectLastCell(){this.selectedNonVirtualRowIndexOffset=SA.maxOffset,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()})),this.makeRowVisible(this.lastVirtualIndex)}get hiddenRowVisibleIndex(){return this.isFocusHidden?this.selectedNonVirtualRowIndexOffset?-1:this.selectedRowVirtualIndex:super.hiddenRowVisibleIndex}get selectedHiddenRowStrategy(){return this.isFocusHidden&&this.selectedHiddenStrategy?this.selectedHiddenStrategy:super.selectedHiddenRowStrategy}handleKeyDownForHiddenRow(e,t){const n=this.getSelectedHiddenStrategyNotEqualTo(e);return n?n.handleKeyDown(t):super.handleKeyDownForHiddenRow(e,t)}trySelectHiddenCell(e,t=null){return!!this.isFocusHidden&&(this.setOnRowMadeVisibleCallback((()=>{var n;null===(n=this.getSelectedItemStrategy())||void 0===n||n.selectItem(e),this.scrollToElement(null,Pe.None),null==t||t()})),this.makeRowVisible(this.selectedRowVirtualIndex),!0)}getSelectedItemStrategy(){var e;const t=null!==(e=super.getSelectedItemStrategy())&&void 0!==e?e:this.selectedHiddenStrategy;return t&&this.selectedHiddenStrategy&&t!==this.selectedHiddenStrategy&&this.syncSelectedColumns(this.selectedHiddenStrategy,t),t}onAfterTabKeyDownHandled(e){this.makingRowVisibleStarted?this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(null,Pe.None),super.onAfterTabKeyDownHandled(e)}),!0):super.onAfterTabKeyDownHandled(e)}onMakeRowVisible(e){var t;if(this.makingRowVisibleStarted)this.rowVirtualIndexToShow=null,this.scrollRequired=!0,super.onMakeRowVisible(null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e),this.callOnRowMadeVisibleCallback(),this.notifyFocusedRowChanged();else{const t=this.getStrategy(e);t&&this.resetVirtualStateForIncomingEditRow(t)||this.updateSelectedVirtualIndex(-1),super.onMakeRowVisible(e)}}onHandlePageUpDownKey(e,t,n){if(this.isFocusHidden)return void this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,t,n);const i=this.validateItemIndex(e),s=this.findClosestVisibleIndexWithVirtualIndex(i,null!=t?t:void 0),r=s.virtualIndex,o=e-s.visibleIndex;if(i===e)this.selectedNonVirtualRowIndexOffset=o,this.makeRowVisibleWithAlignment(r,t,n);else{this.setOnRowMadeVisibleCallback((()=>{this.selectedNonVirtualRowIndexOffset=0;const e=this.findVisibleIndexByVirtualIndex(r);e&&this.selectItem(e+o),this.scrollToElement(t,n)}));this.makeRowVisible(r+(t===Qe.Bottom?2:-1))}}shouldSaveFocusedRowVisibleIndex(e){return super.shouldSaveFocusedRowVisibleIndex(e)&&(this.selectedRowVirtualIndex!==e.getRowVisibleIndex()||0!==this.selectedNonVirtualRowIndexOffset||this.scrollRequired)}resetVirtualStateBySelectedStrategy(e){const t=this.getSelectedItemStrategy();t&&this.resetVirtualStateForIncomingEditRow(t)&&(t.updateSelectedItemByChildElement(e),t.switchToNestedContent(),this.saveRowSelectedColumn(t))}addEventListeners(){const e=this.getScrollViewer();e&&(e.addEventListener(ei.eventName,this.boundOnScrollHandler),this.grid.addEventListener(wA.eventName,this.boundOnStartCellEditingRequestHandler))}removeEventListeners(){const e=this.getScrollViewer();e&&(e.removeEventListener(ei.eventName,this.boundOnScrollHandler),this.grid.removeEventListener(wA.eventName,this.boundOnStartCellEditingRequestHandler))}onScroll(e){this.cellEditingStarted&&!this.isRowInView(this.selectedItemElement)&&(this.endEditRowItem(Wa.Save),this.cellEditingStarted=!1)}onStartCellEditingRequest(e){this.cellEditingStarted=e.detail.result,this.updateSelectedVirtualState()}correctSelectionIndex(e){var t,n,i;if(this.makingRowVisibleStarted||this.skipIndexCorrectionForIncomingEditRow)return this.skipIndexCorrectionForIncomingEditRow=!1,-1;if(this.selectedRowVirtualIndex<0)return e;if(e===this.selectedItemIndex&&!this.scrollRequired)this.isVirtualIndexRendered(this.selectedRowVirtualIndex)?(e=null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e,Fn(this.targetElement)):(Dn(this.targetElement),null===(n=this.selectedHiddenStrategy)||void 0===n||n.makeObsolete());else if(this.isFocusHidden||this.scrollRequired){if(!this.isVirtualIndexRendered(this.selectedRowVirtualIndex))return this.makeRowVisible(this.selectedRowVirtualIndex),-1;e=null!==(i=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==i?i:e,Fn(this.targetElement)}return e}resetVirtualStateForIncomingEditRow(e){if(this.skipIndexCorrectionForIncomingEditRow)return!1;const t=IA.castToEditRowStategy(e);return this.skipIndexCorrectionForIncomingEditRow=!!t&&e!==this.selectedHiddenStrategy&&this.isRowInView(t.targetElement),!!this.skipIndexCorrectionForIncomingEditRow&&(this.selectedRowVirtualIndex>=0&&(Fn(this.targetElement),this.updateSelectedVirtualIndex(-1),this.selectedHiddenStrategy=null),!0)}getSelectedHiddenStrategyNotEqualTo(e){return this.isFocusHidden&&this.selectedHiddenStrategy&&e!==this.selectedHiddenStrategy?this.selectedHiddenStrategy:null}callOnRowMadeVisibleCallback(){this.onRowMadeVisibleCallback&&(this.onRowMadeVisibleCallback(),this.onRowMadeVisibleCallback=null)}updateSelectedVirtualState(){this.selectedHiddenStrategy=super.getSelectedItemStrategy(),this.updateSelectedVirtualIndex()}setOnRowMadeVisibleCallback(e,t=!1){this.makingRowVisibleStarted&&!t||(this.onRowMadeVisibleCallback=e)}async makeRowVisible(e){var t;if(this.makingRowVisibleStarted)return;const n=this.getValidVirtualIndex(e);if(this.updateSelectedVirtualIndex(n),this.isVirtualIndexRendered(n))this.scrollRequired=!0,this.selectItem(null!==(t=this.findVisibleIndexByVirtualIndex(n))&&void 0!==t?t:0),this.callOnRowMadeVisibleCallback();else{this.rowVirtualIndexToShow=n,this.grid.makeRowVisible(n);const e=await this.waitForVirtualIndexToShow(n);this.rowVirtualIndexToShow===n&&(e?this.onMakeRowVisible(this.selectedItemIndex):this.rowVirtualIndexToShow=null)}}moveToSiblingRowByVirtualIndex(e){this.selectedNonVirtualRowIndexOffset+=e,this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,null,Pe.None)}makeRowVisibleWithAlignment(e,t,n){this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(t,n)})),this.makeRowVisible(e)}updateSelectedVirtualIndex(e=null){if(null===e){const t=this.findClosestVisibleIndexWithVirtualIndex(this.selectedItemIndex);this.selectedNonVirtualRowIndexOffset=this.selectedItemIndex-t.visibleIndex,e=t.virtualIndex}null!==e&&(this.selectedRowVirtualIndex=e,this.isLastRowSelected=this.lastVirtualIndexSelected&&super.lastItemSelected)}waitForVirtualIndexToShow(e,t=0){return new Promise((n=>{setTimeout((async()=>{try{if(this.rowVirtualIndexToShow!==e)return void n(!1);const i=this.isVirtualIndexRendered(e);if(i||t>1)n(i);else{const i=await this.waitForVirtualIndexToShow(e,++t);n(i)}}catch{n(!1)}}),1e3)}))}getValidVirtualIndex(e){if(e<0)return 0;const t=this.lastVirtualIndex;return e>t?t:e}isVirtualIndexRendered(e){const{virtualIndex:t}=this.findClosestVisibleIndexWithVirtualIndex(0),{virtualIndex:n}=this.findClosestVisibleIndexWithVirtualIndex(super.itemCount-1);return e>=t&&e<=n}findClosestVisibleIndexWithVirtualIndex(e,t=Qe.Top){let n=-1,i=t===Qe.Top?-1:1,s=e,r=!1;for(;super.isIndexWithinBoundaries(s)||!r;){const t=super.getItem(s);if(t){if(n=ot.getAttributeIntValue(t,Xn,-1),n>=0)break;s+=i}else r=!0,i*=-1,s=e+i}return n=n>=0?n:this.selectedRowVirtualIndex,{virtualIndex:n,visibleIndex:s}}findVisibleIndexByVirtualIndex(e){const t=e.toString(),n=super.itemCount;for(let e=0;e<n;++e){const n=super.getItem(e);if(n&&t===n.getAttribute(Xn))return super.validateItemIndex(e+this.selectedNonVirtualRowIndexOffset)}return null}isRowInView(e){const t=this.getScrollViewer();return!!t&&Ya.isElementInView(e,t)}}SA.maxOffset=1e3;class xA extends BA{constructor(e,t,n){super(e,t,n)}createItemStrategy(e){if(Ws.getRowType(e)===_s.Footer)return new gA(this,this.grid,e);throw new Error("Not implemented")}}class DA extends zs{constructor(e){super(e,e),this.searchBoxInputSelector=`.${me.SearchBoxClassName} > input`}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getToolbarContainer(),this.getPagerPanel(!0),this.getTopPanel(),this.getDataTable(),this.getPagerPanel(!1))}createDataTableStrategy(e){return new yA(this.grid,e)}createItemStrategy(e){switch(Ws.getNavigationAreaType(e)){case Os.ToolbarContainer:return new FA(this.grid,e);case Os.GroupPanel:case Os.SearchBox:return new TA(this.grid,e);case Os.DataTable:return this.createDataTableStrategy(e);case Os.Pager:return new HA(this.grid,e)}return null}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);return t===Ie.KeyCode.Tab?this.handleTabKeyDown(e):t===Ie.KeyCode.Up&&e.ctrlKey?(this.moveToPrevItem(),!0):t===Ie.KeyCode.Down&&e.ctrlKey?(this.moveToNextItem(),!0):!(t!==Ie.KeyCode.Key_f||!e.ctrlKey)&&this.tryFocusSearchBox()}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}getTopPanel(){var e,t;const n=null!==(e=this.getGroupPanelContentContainer())&&void 0!==e?e:this.getSearchBoxContainer();return null!==(t=null==n?void 0:n.closest(ks.TopPanelSelector))&&void 0!==t?t:null}tryFocusSearchBox(){const e=this.getSearchBoxContainer();if(e){const t=e.querySelector(this.searchBoxInputSelector);return bn.focusElement(null!=t?t:e),!0}return!1}}class FA extends zs{constructor(e,t){super(e,t,!0)}getShortcutContext(){return{AreaType:Os.ToolbarContainer}}}class TA extends zs{constructor(e,t){super(e,t),this.itemSelector=`.${me.HeaderElementClassName}`,this.searchBoxContainer=null,this.searchBoxContainer=this.getSearchBoxContainer()}getShortcutContext(){return{AreaType:this.getAreaType(),ColumnUID:this.getSelectedColumnUID()}}queryItems(){const e=this.queryItemsBySelector(this.itemSelector);return e.push(this.searchBoxContainer),e}handleKeyDown(e){if(e.ctrlKey&&(Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter||Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Space))return!0;if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return this.moveToPrevItem(),!0;case Ie.KeyCode.Right:return this.moveToNextItem(),!0;case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0;case Ie.KeyCode.Up:if(!this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView()){const e=this.items.findIndex((e=>Ws.isSearchBoxContainer(e)));return this.selectItem(e),!0}break;case Ie.KeyCode.Down:if(e.altKey&&!this.isSearchBoxItemSelected())return this.performShortcutEvent(e),!0;if(!e.altKey&&this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView())return this.selectItem(0),!0}return!1}isImmediatelyClickEnabled(){return this.selectedItemElement!==this.searchBoxContainer}getAreaType(){return Ws.isSearchBoxContainer(this.selectedItemElement)?Os.SearchBox:Os.GroupPanel}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}isSearchBoxItemSelected(){return this.getAreaType()===Os.SearchBox}isSearchBoxInMobileView(){return!!this.searchBoxContainer&&this.searchBoxContainer.offsetWidth===this.targetElement.offsetWidth}}class HA extends zs{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:Os.Pager}}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:case Ie.KeyCode.Right:case Ie.KeyCode.Home:case Ie.KeyCode.End:return this.performShortcutEvent(e),!0}return!1}tryRestoreSelectedItem(e){super.tryRestoreSelectedItem(e);const t=this.targetElement.querySelector(ks.PagerSizeSelector);(null==t?void 0:t.contains(document.activeElement))&&this.targetElement.scrollIntoView({block:"nearest"})}}class UA extends On{constructor(e,t){super(t,e),this.itemSelector=`.${me.ColumnChooserItemClassName}`,this.savedColumnUID=null,this.hasXafActionsContainer=!1,this.boundOnDragStopHandler=this.onDragStop.bind(this),this.columnChooser=e,this.addEventSubscriptions(),this.hasXafActionsContainer=this.targetElement.nextSibling instanceof HTMLElement&&this.targetElement.nextSibling.classList.contains("column-chooser-actions-container")}initialize(){super.initialize(),null!==this.savedColumnUID&&this.restoreSelectedColumn()}queryItems(){return this.queryItemsBySelector(this.itemSelector)}getShortcutContext(){return{AreaType:Os.ColumnChooser,ColumnUID:this.getSelectedColumnUID()}}isImmediatelyClickEnabled(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:return this.moveToPrevItem(),!0;case Ie.KeyCode.Down:return this.moveToNextItem(),!0;case Ie.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem(!0):this.lastItemSelected&&this.hasXafActionsContainer?this.leaveForward():this.moveToNextItem(!0),!0;case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}onDispose(){super.onDispose(),this.removeEventSubscriptions()}onDragStop(e){this.savedColumnUID=this.getSelectedColumnUID()}restoreSelectedColumn(){const e=this.findItemByColumnUID(this.savedColumnUID);e>=0&&this.selectItem(e),this.savedColumnUID=null}addEventSubscriptions(){this.columnChooser.addEventListener(l.eventName,this.boundOnDragStopHandler)}removeEventSubscriptions(){this.columnChooser.removeEventListener(l.eventName,this.boundOnDragStopHandler)}findItemByColumnUID(e){return this.items.findIndex((t=>this.getColumnUID(t)===e))}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}getColumnUID(e){var t;return null!==(t=this.columnChooser.getColumnUid(e))&&void 0!==t?t:-1}}var QA;!function(e){e[e.Append=0]="Append",e[e.Before=1]="Before",e[e.After=2]="After",e[e.Inside=3]="Inside"}(QA||(QA={}));class PA extends he{constructor(){super(),this.tableContainer=null,this.dropTargetElement=null,this.dropPosition=QA.Before,this.lastObservedWidth=0,this.resizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScrollHandler=this.onTableContainerScroll.bind(this)}get isHidden(){return!this.dropTargetElement}show(){this.classList.add(pe.Active),this.render()}hide(){this.dropTargetElement=null,this.classList.remove(pe.Active),this.removeAttribute("style")}updatePosition(e,t){this.dropTargetElement=e,this.dropPosition=t}initializeComponent(){super.initializeComponent(),this.tableContainer=this.closest(`.${Fe.ContentContainerClassName}`),this.tableContainer&&(this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.observe(this.tableContainer))}disposeComponent(){super.disposeComponent(),this.tableContainer&&(this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.unobserve(this.tableContainer))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.lastObservedWidth!==t&&(this.lastObservedWidth=t,this.render())}render(){this.isHidden||requestAnimationFrame(this.updateIndicatorStyle.bind(this))}updateIndicatorStyle(){const e=this.getTargetElement();this.style.height=e&&this.shouldFitIntoElement()?`${e.offsetHeight}px`:"";const t=this.calculatePosition();this.style.transform=`translateY(${t})`,this.style.marginLeft=this.calculateLeftOffset()}calculatePosition(){const e=this.getTargetElement(),t=this.calculateIndicatorPosition(e),n=this.shouldFitIntoElement()?t:PA.getCenteredPosition(t,this.offsetHeight);return`${Math.ceil(n)}px`}shouldFitIntoElement(){return this.dropPosition===QA.Append||this.dropPosition===QA.Inside}calculateIndicatorPosition(e){if(!e||!this.tableContainer)return 0;const t=e.getBoundingClientRect(),n=this.tableContainer.getBoundingClientRect(),i=t.top-n.top;return this.dropPosition===QA.After?i+e.offsetHeight:i}calculateLeftOffset(){return""}getTargetElement(){return this.dropPosition===QA.Append?this.tableContainer:this.dropTargetElement}static getCenteredPosition(e,t){return e-t/2}}customElements.define("dxbl-drop-target-indicator",PA);class NA{static getPointerPosition(e){return{x:e.pageX,y:e.pageY}}static getDocumentScrollPosition(){return{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}static getElementPosition(e){const{left:t,top:n}=e.getBoundingClientRect();return{x:t,y:n}}static calculateVerticalCenter(e){return e.y+e.height/2}static getDropPositionByCursor(e,t){return e>NA.calculateVerticalCenter(t)?QA.After:QA.Before}}const RA=new class{constructor(){this.draggingHelpersMap=new Map}register(e){this.draggingHelpersMap.set(e.getKey(),e)}remove(e){this.draggingHelpersMap.delete(e)}find(e){var t;return null!==(t=this.draggingHelpersMap.get(e))&&void 0!==t?t:null}getTargets(){return[...this.draggingHelpersMap.values()]}};class LA{constructor(){this.draggableContext=null,this.isRefreshUIRequested=!1,this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.boundOnDocumentScrollHandler=this.onDocumentScroll.bind(this)}start(e,t){const n=this.getDraggableElement(e);this.draggableContext=this.createDraggableContext(e,n,t),this.addEventSubscriptions(),this.updateDraggableElement(t)}stop(){this.draggableContext&&(this.draggableContext.isStarted=!1),this.isRefreshUIRequested=!1,this.hideDraggableElement(),this.removeEventSubscriptions(),this.draggableContext=null}isStarted(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.isStarted)}hideDraggableElement(){this.draggableContext&&(this.draggableContext.dragableElement.style.transform="",this.draggableContext.dragableElement.classList.remove(pe.Visible))}addEventSubscriptions(){document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.addEventListener("scroll",this.boundOnDocumentScrollHandler)}removeEventSubscriptions(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.removeEventListener("scroll",this.boundOnDocumentScrollHandler)}refreshUI(){this.isRefreshUIRequested||(this.isRefreshUIRequested=!0,requestAnimationFrame((()=>this.refreshUICore())))}refreshUICore(){if(this.isRefreshUIRequested=!1,!this.isStarted()||!this.draggableContext)return;const e=this.draggableContext;e.dragableElement.style.transform=`translate(${Math.round(e.draggableElementPosition.x)}px, ${Math.round(e.draggableElementPosition.y)}px)`,e.dragableElement.classList.add(pe.Visible)}createDraggableContext(e,t,n){const i=NA.getDocumentScrollPosition(),s=NA.getPointerPosition(n);return{isStarted:!0,srcElement:e,srcElementPosition:NA.getElementPosition(e),dragableElement:t,mouseOverElement:null,mouseOverElementRect:null,isPossibleDropItem:!1,initialCursorPosition:s,currentCursorPosition:{x:0,y:0},draggableElementOffset:NA.getElementPosition(t),draggableElementPosition:s,initialScrollPosition:i,currentScrollPosition:i}}clearMoveStateFromDraggableContext(){this.draggableContext&&(this.draggableContext.mouseOverElement=null,this.draggableContext.mouseOverElementRect=null,this.draggableContext.isPossibleDropItem=!1)}setMouseOverElementInfo(e){if(!this.draggableContext)return;const t=e.getBoundingClientRect(),{currentScrollPosition:n}=this.draggableContext;this.draggableContext.mouseOverElement=e,this.draggableContext.mouseOverElementRect={x:t.left+n.x,y:t.top+n.y,width:t.width,height:t.height}}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.currentCursorPosition.x-e.currentScrollPosition.x,y:e.currentCursorPosition.y-e.currentScrollPosition.y}}onElementMouseOut(e){this.clearMoveStateFromDraggableContext(),this.refreshUI()}onDocumentMouseMove(e){this.updateDraggableElement(e)}onDocumentScroll(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentScrollPosition=NA.getDocumentScrollPosition(),t.srcElementPosition=NA.getElementPosition(t.srcElement),t.mouseOverElement&&this.setMouseOverElementInfo(t.mouseOverElement),this.updateDraggableElementPosition(),this.refreshUI()}updateDraggableElement(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentCursorPosition={x:e.pageX,y:e.pageY},t.initialScrollPosition=t.currentScrollPosition,this.updateDraggableElementPosition(),this.refreshUI()}}class MA extends LA{constructor(){super(),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this)}get draggableItemContext(){return this.draggableContext}createItemDraggedHandlerArgs(){if(!this.draggableItemContext||!this.draggableItemContext.isPossibleDropItem||!this.draggableItemContext.target)return null;const e=this.draggableItemContext.target;return{sourceInfo:this.createSourceInfo(),targetInfo:e.createTargetInfo()}}createTargetInfo(){return{key:this.getKey()}}activateDropTarget(e){this.isWithinDragging()||(this.draggableContext=e),this.addElementListeners(this.getItemDropArea())}deactivateDropTarget(){this.removeElementListeners(this.getItemDropArea()),this.isWithinDragging()||(this.draggableContext=null)}start(e,t){var n,i;super.start(e,t),null===(i=null===(n=this.getDraggableHintElement())||void 0===n?void 0:n.show)||void 0===i||i.call(n),this.getDroppableTargets().forEach((e=>e.activateDropTarget.bind(e)(this.draggableContext)))}stop(){var e,t;this.getDroppableTargets().forEach((e=>e.deactivateDropTarget.bind(e)())),null===(t=null===(e=this.getDraggableHintElement())||void 0===e?void 0:e.hide)||void 0===t||t.call(e),super.stop()}createDraggableContext(e,t,n){return{...super.createDraggableContext(e,t,n),source:this,target:this,targetKey:null}}getDroppableTargets(){return RA.getTargets()}updateDraggableContext(e){if(!this.draggableItemContext)return;const{isPossibleDropItem:t,target:n}=this.draggableItemContext,i=this.getItemDropArea();n&&t&&MA.isDescendantElement(i,n.getItemDropArea())||(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableItemContext.target=this,this.draggableItemContext.targetKey=this.getKey(),this.draggableItemContext.isPossibleDropItem=this.isItemDropPossible(e))}isWithinDragging(){var e;return(null===(e=this.draggableItemContext)||void 0===e?void 0:e.source)===this}createSourceInfo(){return{key:this.getKey()}}addElementListeners(e){e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeElementListeners(e){e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}isItemDropPossible(e){return!0}getDraggableHintElement(){var e,t;return null!==(t=null===(e=this.draggableContext)||void 0===e?void 0:e.dragableElement)&&void 0!==t?t:null}static isDescendantElement(e,t){return e!==t&&e.contains(t)}}class kA{static getSvgHtml(e){return`\n<svg class="${pe.Image}" role="img" aria-hidden="true">\n    <use class="dxbl-icon-set-default" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}"></use>\n    <use class="dxbl-icon-set-fluent" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent"></use>\n    <use class="dxbl-icon-set-fluent-small" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-small"></use>\n    <use class="dxbl-icon-set-fluent-large" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-large"></use>\n</svg>`}}var KA,OA,_A,VA;kA.ArrowUpIconName="dx-arrow-up",kA.ArrowDownIconName="dx-arrow-down",function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(KA||(KA={}));class zA{constructor(e,t){this.downTargetCssClass=t,this.upTargetCssClass=e,this.downTargetElement=zA.addTargetToDom(this.downTargetCssClass,kA.ArrowDownIconName),this.upTargetElement=zA.addTargetToDom(this.upTargetCssClass,kA.ArrowUpIconName);const n=this.upTargetElement.getBoundingClientRect();this.targetElementSize={width:n.width,height:n.height},this.upTargetElementPosition=null,this.downTargetElementPosition=null,this.hide()}show(){this.upTargetElementPosition&&this.downTargetElementPosition&&(this.downTargetElement.style.transform=gr.translateByPoint(this.downTargetElementPosition),this.upTargetElement.style.transform=gr.translateByPoint(this.upTargetElementPosition),this.downTargetElement.classList.remove(pe.DisplayNone),this.upTargetElement.classList.remove(pe.DisplayNone))}hide(){this.downTargetElement.classList.add(pe.DisplayNone),this.upTargetElement.classList.add(pe.DisplayNone)}setPositionRelativeToElement(e,t){this.setUpTargetPosition(e,t),this.setDownTargetPosition(e,t)}setUpTargetPosition(e,t){this.upTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y+e.height}}setDownTargetPosition(e,t){this.downTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y-this.targetElementSize.height}}getTargetXCoordinate(e,t){let n=e.x-this.targetElementSize.width/2;return t===KA.Right&&(n+=e.width),n}dispose(){zA.removeElementsByClassName(this.downTargetCssClass),zA.removeElementsByClassName(this.upTargetCssClass)}static removeElementsByClassName(e){const t=document.querySelectorAll(`.${e}`);for(let e=0;e<t.length;e++)t[e].remove()}static addTargetToDom(e,t){const n=document.createElement("div");return n.className=e,n.innerHTML=kA.getSvgHtml(t),document.body.appendChild(n),n}}!function(e){e[e.HeaderRow=0]="HeaderRow",e[e.GroupPanel=1]="GroupPanel",e[e.ColumnChooser=2]="ColumnChooser"}(OA||(OA={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(_A||(_A={}));class WA extends LA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this.boundOnGroupPanelMouseMoveHandler=this.onGroupPanelMouseMove.bind(this),this.boundOnEmptyHeaderCellMouseMoveHandler=this.onEmptyHeaderCellMouseMove.bind(this),this.boundOnGroupFreeSpaceMouseMoveHandler=this.onGroupFreeSpaceMouseMove.bind(this),this.grid=e}start(e,t){this.isColumnDraggingAllowed(e)&&(super.start(e,t),this.grid.styleGenerator.notifyColumnDragStarted())}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(me.MoveCursorCssClassName),this.grid.styleGenerator.notifyColumnDragEnded()}getDraggableElement(e){return WA.addDraggableHeaderToDOM(e)}hideDraggableElement(){WA.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const n=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;n&&!n.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}onGroupPanelMouseMove(){const e=this.grid.getGroupPanelContentContainer();this.onPanelElementMouseMove(e,OA.GroupPanel)}onEmptyHeaderCellMouseMove(){const e=this.grid.getEmptyHeaderCellContentContainer();this.onPanelElementMouseMove(e,OA.HeaderRow)}onGroupFreeSpaceMouseMove(){const e=this.grid.getGroupContentFreeSpaceElement();this.onPanelElementMouseMove(e,OA.GroupPanel)}isColumnDraggingAllowed(e){const t=this.grid.getColumnInfo(e);return!!t&&(t.allowReorder||t.allowGroup&&!!this.grid.getGroupPanelContentContainer())}onPanelElementMouseMove(e,t){e&&this.draggableContext&&this.draggableContext.mouseOverElement!==e&&this.draggableContext.srcElement!==e.previousElementSibling&&(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableContext.dropArea=t,this.isPossibleDropToCurrentArea()&&(this.draggableContext.isPossibleDropItem=!0,this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,KA.Left)),this.refreshUI())}isPossibleDropToCurrentArea(){var e,t,n;return(null===(e=this.draggableContext)||void 0===e?void 0:e.allowGroup)||(null===(t=this.draggableContext)||void 0===t?void 0:t.dropArea)===(null===(n=this.draggableContext)||void 0===n?void 0:n.srcArea)}createColumnDraggedHandlerArgs(){var e;if(!this.draggableContext||!this.draggableContext.isPossibleDropItem)return null;const t=this.draggableContext;let n=t.beforeColumnUid;return t.dropArea===OA.HeaderRow&&(n=null!==(e=(e=>{var t;return e.dragRestrictions?null!==(t=e.dragRestrictions.nextColumnUid)&&void 0!==t?t:-1:null})(t.draggedColumn))&&void 0!==e?e:n),{columnUid:t.draggedColumn.uID,beforeColumnUid:n,srcArea:t.srcArea,dropArea:t.dropArea}}getLatestVisibleColumnIndex(){for(let t=this.grid.columnsInfo.length-1;t>=0;t--)if(!(e=this.grid.columnsInfo[t]).isIndent&&!e.isEmpty)return t;var e;return-1}getRestrictedDropHeaderInfo(e){const t=this.getDropColumnArea(e);if(!!(!this.draggableContext||!this.draggableContext.draggedColumn.dragRestrictions||this.draggableContext.srcArea!==OA.GroupPanel||this.draggableContext.dropArea===OA.GroupPanel||t!==OA.HeaderRow))return null;let n,i=_A.Left;const s=this.getLatestVisibleColumnIndex(),r=this.draggableContext.draggedColumn.dragRestrictions;let o=-1;return r&&null!==r.nextVisibleColumnUid?o=this.grid.columnsInfo.findIndex((e=>e.uID===r.nextVisibleColumnUid&&!e.isIndent)):(o=s,i=_A.Right),-1!==o&&(n=this.grid.getHeaderCells()[o]),n?{dropHeaderElement:n,position:i}:null}updateDraggableContextByElement(e,t){let n=this.grid.findHeaderElement(e);const i=this.grid.getColumnInfo(n);n&&i&&this.draggableContext&&this.draggableContext.draggedColumn.parentUID!==i.parentUID&&(n=this.findMatchingParentHeader(n)),n&&(this.updateDraggableContext(n,t),this.refreshUI())}findMatchingParentHeader(e){let t=this.grid.getColumnInfo(e);for(;t;){if(this.draggableContext&&this.draggableContext.draggedColumn.parentUID===t.parentUID)return this.grid.getHeaderCell(t.headerRowIndex,t.headerCellIndex);t=t.parent}return e}updateDraggableContext(e,t){var n;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;const i=e?this.getRestrictedDropHeaderInfo(e):null;if(i&&(e=i.dropHeaderElement),this.draggableContext.srcElement!==e&&(this.setMouseOverElementInfo(e),this.isPossibleDropToCurrentArea())){const s=void 0!==(null==i?void 0:i.position)?i.position===_A.Left:this.isThereCursorInLeftPart(t),r=this.grid.getColumnInfo(e);if(r&&!r.hasLeafs&&r.uID===this.draggableContext.draggedColumn.parentUID)this.draggableContext.beforeColumnUid=-1,this.draggableContext.isPossibleDropItem=!0;else if(s&&e.previousElementSibling!==this.draggableContext.srcElement||!s&&e.nextElementSibling!==this.draggableContext.srcElement){let t=s?r:this.grid.getColumnInfo(e.nextElementSibling),i=s?this.grid.getColumnInfo(e.previousElementSibling):r;s&&i&&i.parentUID!==(null==t?void 0:t.parentUID)&&(i=null),!s&&t&&t.parentUID!==(null==i?void 0:i.parentUID)&&(t=null);if(!this.canDropBetweenColumns(i,t))return void(this.draggableContext.isPossibleDropItem=!1);this.draggableContext.beforeColumnUid=null!==(n=null==t?void 0:t.uID)&&void 0!==n?n:-1,this.draggableContext.isPossibleDropItem=!0}this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,s?KA.Left:KA.Right)}}static canDropColumnWithDisabledReorderingBetweenColumns(e,t,n,i){var s,r;if(t!==OA.GroupPanel)return!1;const o=e.dragRestrictions;if(o){const e=null!==(s=null==n?void 0:n.uID)&&void 0!==s?s:null,t=null!==(r=null==i?void 0:i.uID)&&void 0!==r?r:null;if(o.previousColumnUid!==e&&o.nextColumnUid!==t&&o.nextVisibleColumnUid!==t)return!1}return!0}canDropBetweenColumns(e,t){if(!this.draggableContext)return!1;if(this.draggableContext.dropArea===OA.GroupPanel)return!0;if(!this.draggableContext.draggedColumn.allowReorder&&!WA.canDropColumnWithDisabledReorderingBetweenColumns(this.draggableContext.draggedColumn,this.draggableContext.srcArea,e,t))return!1;const n=this.draggableContext.draggedColumn.parentUID,i=t&&n===t.parentUID;if(!(!i&&e&&n===e.parentUID)&&!i)return!1;const s=e=>"left"===e?0:"right"===e?2:1,r=[];e&&r.push(s(e.fixedPosition)),r.push(s(this.draggableContext.draggedColumn.fixedPosition)),t&&r.push(s(t.fixedPosition));for(let e=0;e<r.length-1;++e)if(r[e]>r[e+1])return!1;return!0}getDropColumnArea(e){const t=this.grid.getGroupPanelContentContainer();return t&&WA.isThereHeaderInsideGroupPanel(t,e)?OA.GroupPanel:OA.HeaderRow}static isThereHeaderInsideGroupPanel(e,t){const n=e.childNodes.length;for(let i=0;i<n;i++)if(e.childNodes[i]===t)return!0;return!1}refreshUICore(){super.refreshUICore();const e=this.draggableContext;e&&(e.isPossibleDropItem?e.targets.show():e.targets.hide(),document.body.classList.add(me.MoveCursorCssClassName))}setMouseOverElementInfo(e){if(super.setMouseOverElementInfo(e),!this.draggableContext)return;const t=this.grid.getColumnInfo(e),n=null==t?void 0:t.getRightLeaf();if(n){const t=this.grid.getHeaderCell(n.headerRowIndex,n.headerCellIndex),i=null==t?void 0:t.getBoundingClientRect();if(i&&this.draggableContext.mouseOverElementRect){const t=e.getBoundingClientRect();this.draggableContext.mouseOverElementRect.height=i.height+i.top-t.top}}if(this.draggableContext.scrollViewerRect&&this.draggableContext.mouseOverElementRect){const e=this.draggableContext.scrollViewerRect;this.draggableContext.mouseOverElementRect.x<e.x&&(this.draggableContext.mouseOverElementRect.x=e.x),this.draggableContext.mouseOverElementRect.x+this.draggableContext.mouseOverElementRect.width>e.x+e.width&&(this.draggableContext.mouseOverElementRect.width=e.x+e.width-this.draggableContext.mouseOverElementRect.x)}this.draggableContext.dropArea=this.getDropColumnArea(e)}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions(),this.addGroupPanelEventSubscriptions(),this.addEmptyHeaderCellEventSubscriptions(),this.addGroupContentFreeSpaceElementEventSubscriptions()}addHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),n.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}addEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.addPanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}addGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.addPanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}addGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.addPanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}addPanelElementEventSubscriptions(e,t){e.addEventListener("pointermove",t),e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions(),this.removeGroupPanelEventSubscriptions(),this.removeEmptyHeaderCellEventSubscriptions(),this.removeGroupContentFreeSpaceElementEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),n.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.removePanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}removeEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.removePanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}removeGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.removePanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}removePanelElementEventSubscriptions(e,t){e.removeEventListener("pointermove",t),e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}shouldAddEventListenersToGroupPanel(){const e=this.grid.getGroupPanelContentContainer();return!!e&&!(null==e?void 0:e.querySelector(`.${me.HeaderElementClassName}`))}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=`${me.DraggableHeaderClassName}`,e.classList.contains(me.SelectionCellClassName)&&t.classList.add(me.SelectionCellClassName),e.classList.contains(me.CommandCellClassName)&&t.classList.add(me.CommandCellClassName);const n=e.getBoundingClientRect();t.style.width=`${n.width}px`,t.style.height=`${n.height}px`;const i=getComputedStyle(e);t.style.padding=i.padding,t.style.font=i.font,t.style.whiteSpace=i.whiteSpace;const s=this.getContentElement(e).cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static getContentElement(e){return e.querySelector(`.${me.HeaderContentClassName}`)}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${me.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,n){const i=super.createDraggableContext(e,t,n),s=this.grid.getScrollViewer(),r=this.grid.getColumnInfo(e);return{...i,allowGroup:r.allowGroup,scrollViewerRect:s&&s.getRectangle(),draggedColumn:r,beforeColumnUid:null,srcArea:e.closest(`.${me.GroupPanelContentContainerClassName}`)?OA.GroupPanel:OA.HeaderRow,dropArea:OA.HeaderRow,targets:new zA(me.DraggingUpTargetClassName,me.DraggingDownTargetClassName)}}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.beforeColumnUid=null)}}class $A{constructor(e){this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1,this.savedSelectedRows=[],this.boundOnRowPointerEnterHandler=this.onRowPointerEnter.bind(this),this.grid=e}get startSelectionRowIndex(){return this._startSelectionRowIndex}get endSelectionRowIndex(){return this._endSelectionRowIndex}start(e,t){this._startSelectionRowIndex=this.grid.getRowVisibleIndexByTarget(e),this._startSelectionRowIndex>-1&&(this._endSelectionRowIndex=this._startSelectionRowIndex,t&&this.storeSelectedRows(),this.addRowEventSubscriptions(),this.updateRowsSelection())}stop(){this._startSelectionRowIndex>-1&&(this.deselectRows(),this.removeRowEventSubscriptions(),this.restoreSelectedRows(),this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1)}isStarted(){return this._startSelectionRowIndex>-1&&this._endSelectionRowIndex>-1}updateSeletionByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateSeletionByElement(t)}findRowElement(e){return this.grid.getMainElement().querySelector(`tr[${ai.VisibleIndexName}="${e}"]`)}findRowElements(){return this.grid.getMainElement().querySelectorAll(`tr[${ai.VisibleIndexName}]`)}findSelectedRowElements(){return this.grid.getMainElement().querySelectorAll(`tr.${me.SelectedRowClassName}[${ai.VisibleIndexName}]`)}addRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].addEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}removeRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].removeEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}updateSeletionByElement(e){const t=this.grid.getRowVisibleIndexByTarget(e,!0);t>-1&&(this._endSelectionRowIndex=t,this.updateRowsSelection())}onRowPointerEnter(e){this.updateSeletionByElement(e.target)}selectRows(e){for(let t=0;t<e.length;t++){const n=this.findRowElement(e[t]);n&&n.classList.add(0===t||t===e.length-1?me.TouchSelectionEdgeClassName:me.TouchSelectionClassName)}}deselectRows(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(me.TouchSelectionClassName,me.TouchSelectionEdgeClassName)}updateRowsSelection(){if(-1===this.startSelectionRowIndex||-1===this.endSelectionRowIndex)return;this.deselectRows();const e=Math.min(this.startSelectionRowIndex,this.endSelectionRowIndex),t=Math.max(this.startSelectionRowIndex,this.endSelectionRowIndex),n=Array.from({length:t-e+1},((t,n)=>n+e));this.selectRows(n)}storeSelectedRows(){const e=this.findSelectedRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(me.SelectedRowClassName),this.savedSelectedRows.push(e[t])}restoreSelectedRows(){for(let e=0;e<this.savedSelectedRows.length;e++)this.savedSelectedRows[e].classList.add(me.SelectedRowClassName);this.savedSelectedRows=[]}}!function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(VA||(VA={}));class GA{get highlightLeftBorder(){return this.scrollStatus===VA.BetweenBorders||this.scrollStatus===VA.RightBorder||this.isDragging}get highlightRightBorder(){return this.scrollStatus===VA.BetweenBorders||this.scrollStatus===VA.LeftBorder||this.isDragging}constructor(e){this.grid=e,this.gridUid="",this.lastGeneratedStyle="",this.isDragging=!1,this.scrollStatus=VA.Disabled}notifyColumnDragStarted(){this.hasAnyFixedColumn()&&(this.isDragging=!0,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}notifyColumnDragEnded(){this.hasAnyFixedColumn()&&(this.isDragging=!1,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}scrollPositionUpdated(e){this.hasAnyFixedColumn()&&(this.scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle())))}updateFixedCellsStyle(){this.gridUid=this.grid.getAttribute(XA);const e=this.grid.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this.lastGeneratedStyle!==t&&(e.innerText=t,this.lastGeneratedStyle=t)}createPositionStyles(){const e=this.grid.getColElements(),t=this.getOffsetWidths(e),n=new Array(t.length),i=new Array(t.length);n[0]=0,i[t.length-1]=0;for(let e=1;e<t.length;++e)n[e]=n[e-1]+t[e-1];for(let e=t.length-2;e>=0;--e)i[e]=i[e+1]+t[e+1];const s=this.grid.columnsInfo.some((e=>"left"===e.fixedPosition));let r="";for(const e of this.grid.headerLayout)for(const t of e){let e=t.fixedPosition;if(t.isIndent&&s&&(e="left"),e){let s=t;const o="left"===e;s.hasLeafs&&(s=o?t.getLeftLeaf():t.getRightLeaf());r+=this.createPositionStyle(t,s.leafIndex,e,o?n[s.leafIndex]:i[s.leafIndex])}}return r}hasAnyBandColumn(){return this.grid.headerLayout.length>1}hasAnyFixedColumn(){return this.grid.columnsInfo.some((e=>!!e.fixedPosition))}calcScrollStatus(e){const t=this.grid.getDataTable().clientWidth;return t===e.clientWidth?VA.Disabled:0===e.scrollLeft?VA.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?VA.RightBorder:VA.BetweenBorders}createPositionStyle(e,t,n,i){const s=[],r=this.hasAnyBandColumn();if(r&&(s.push(this.getHeaderRowsSelector(e.headerRowIndex)),s.push(this.createPositionStyleForColumn("th",e.headerCellIndex,n,i))),!e.hasLeafs){const e=r?"td":"";s.push(this.getTableRowsSelector()),s.push(this.createPositionStyleForColumn(e,t,n,i))}return s.join("")}createPositionStyleForColumn(e,t,n,i){return` > ${e}.${me.FixedCellClassName}:nth-child(${t+1}) { ${n}: ${i}px; }`}createBorderStyles(){const e=[],t=this.hasAnyBandColumn();return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),this.highlightRightBorder&&(e.push(t?this.createHeaderRightBorderStyle():this.createRightBorderStyle("th")),e.push(this.createRightBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${me.LastLeftFixedCellClassName} { border-right-color: var(--dxbl-grid-fixed-column-border-color); }`}createRightBorderStyle(e){return this.getTableRowsSelector()+` > ${e}:not(.${me.FixedCellClassName}) + ${e}.${me.FixedCellClassName} { border-left-color: var(--dxbl-grid-fixed-column-border-color); }`}createHeaderRightBorderStyle(){const e=[];for(const t of this.grid.headerLayout){const n=t.find((e=>"right"===e.fixedPosition));n&&(e.push(this.getHeaderRowsSelector(n.headerRowIndex)),e.push(` > th.${me.FixedCellClassName}:nth-child(${n.headerCellIndex+1})`),e.push(" { border-left-color: var(--dxbl-grid-fixed-column-border-color); }"))}return e.join("")}getHeaderRowsSelector(e){return this.getTableRowsSelector()+`.${me.HeaderRowClassName}:nth-child(${e+1})`}getTableRowsSelector(){return[`${this.grid.getTagName()}[${XA}="${this.gridUid}"]`,`.${Fe.ClassName}`,`.${Fe.ContentContainerClassName}`,`.${me.DataTableClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let n=0;n<e.length;++n)t.push(this.grid.getColElementOffsetWidth(n));return t}}const qA="dxbl-tree-list",YA="dxbl-grid",XA="data-dx-grid-uid";const JA=document.createElement("template");JA.innerHTML="\n<style></style>\n<slot />";const jA="data-dx-grid-uid";class ZA extends he{constructor(){super(),this._columnsInfo=[],this._headerLayout=[],this._cachedColElements=null,this._allowSelectRowByClick=!1,this._enableFocusedRow=!1,this._enableInplaceEditing=!1,this._enableMultiSelect=!1,this._enableRowDrag=!1,this._enableItemDrop=!1,this._enablePositionalItemDrop=!1,this._hasRowClickEvent=!1,this._hasRowDblClickEvent=!1,this._isEditing=!1,this._focusedRowIndex=-1,this._latestAutoFitColumnWidthsRequestGuid=null,this._enableEditOnKeypress=!1,this._enterKeyDirection=0,this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnClickHandler=this.onClick.bind(this),this.boundOnDblClickHandler=this.onDblClick.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnStartCellEditingRequestCompleteHandler=this.onStartCellEditingRequestComplete.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnDocumentKeyDownHandler=this.onDocumentKeyDown.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.currentWidth=-1,this.focusedRowRestoreVisibilityTimeout=500,this.rowDraggingHelper=this.createRowDraggingHelper(),this.columnDraggingHelper=new WA(this),this.columnWidthsController=new Ve(this),this.selectionHelper=new $A(this),this._editorManager=this.createEditorManager(),this._styleGenerator=null,this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}initializeComponent(){super.initializeComponent(),this._editorManager.initialize(),this._styleGenerator=new GA(this),this._uiHandlersBridge=this.querySelector(Ce),this.initializeKeyboardNavigator(),this.ensureColumnResizeStrategy(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disposeComponent(){this.removeEventSubscriptions(),this.resizeObserver.unobserve(this),this._editorManager.dispose(),delete this._uiHandlersBridge,delete this.keyboardNavigator,super.disposeComponent()}createEditorManager(){return new qa(this)}get hoverTitleElementsSelector(){return ks.TitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}getMainElement(){return this}getDataTable(){return this.querySelector(ks.DataTableSelector)}getHeaderRows(){return this.querySelectorAll(`thead > tr.${me.HeaderRowClassName}`)}getFilterRow(){return this.querySelector(`thead > tr.${me.FilterRowClassName}`)}getHeaderCells(){return this.querySelectorAll(`.${me.HeaderElementClassName}`)}getToolbarContainer(){return this.querySelector(`.${me.ToolbarContainerClassName}`)}getGroupPanelContentContainer(){return this.querySelector(`.${me.GroupPanelContentContainerClassName}`)}getSearchBoxContainer(){return this.querySelector(`.${me.SearchBoxContainerClassName}`)}getEmptyHeaderCellContentContainer(){return this.querySelector(`.${me.EmptyHeaderCellContentContainerClassName}`)}getGroupContentFreeSpaceElement(){return this.querySelector(`.${me.GroupContentFreeSpaceClassName}`)}getColElements(){return null==this._cachedColElements&&(this._cachedColElements=this.querySelectorAll(ks.ColElementSelector),setTimeout((()=>{this._cachedColElements=null}))),this._cachedColElements}getFooterRow(){return this.querySelector(`.${me.FooterRowClassName}`)}getPagerPanel(e){return this.querySelector(`:scope > ${ks.PagerPanelSelector}.${e?me.TopPanelClassName:me.BottomPanelClassName}`)}getRowDragHint(){var e,t;const n=this.querySelector(`.${me.RowDragHintPortalClassName}`);return null!==(t=null===(e=null==n?void 0:n.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,ks.RowDragHintSelector)})))&&void 0!==t?t:null}getDropRestrictions(){return this.querySelector(ye)}getScrollViewer(){return this.querySelector(`.${Fe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${Fe.ContentContainerClassName}`)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColumnResizeSeparator(){return this.querySelector(`.${me.ColumnsSeparatorClassName}`)}getDropTargetIndicator(){return this.querySelector(`.${me.DropTargetIndicatorClassName}`)}createRootKeyboardNavigationStrategy(){return new DA(this)}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector(ks.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized){let e=null;const t=this.getScrollViewer();t&&Ya.isVirtualScrollingEnabled(t)&&(e=Xn),this.keyboardNavigator.initialize(this,this.createRootKeyboardNavigationStrategy(),e)}}getKeyboardNavigator(){return this.keyboardNavigator}getColElementOffsetWidth(e){let t=this.getColElements()[e].getBoundingClientRect().width;if(0===t&&(h.Browser.Safari||h.Browser.MacOSMobilePlatform||h.Browser.WebKitFamily||h.Browser.AndroidDefaultBrowser)){const n=this.findHeaderCellByColumnIndex(e);t=n?n.getBoundingClientRect().width:null}return t}addEventSubscriptions(){var e;this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(d.eventName,this.boundOnClickHandler),this.addEventListener(c.eventName,this.boundOnDblClickHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.addEventListener(wA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),document.addEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){var e;this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(d.eventName,this.boundOnClickHandler),this.removeEventListener(c.eventName,this.boundOnDblClickHandler),this.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.removeEventListener(wA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.unsubscribeFromScroll(),document.removeEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onDragStart(e){var t,n,i;const s=e.target,r=e.detail.source;if(this.isResizeAnchor(s)){const e=this.findHeaderElement(s),n=this.findLeafIndex(e);null===(t=this.columnResizeStrategy)||void 0===t||t.startDrag(n,r.pageX)}else if(this.isHeaderContentElement(s)){const e=this.findHeaderElement(s);e&&(this.columnDraggingHelper.start(e,r),null===(n=this.getScrollViewer())||void 0===n||n.startAutoScrolling(Re.Horizontal,(e=>this.columnDraggingHelper.updateDraggableContextByEvent(e))))}else if(this.isRowDragAnchor(r.target)){const e=this.getRowVisibleIndexByTarget(r.target,this.enableInplaceEditing),t=this.getMainElement().querySelector(`tr[${ai.VisibleIndexName}="${e}"]`);t&&this.rowDraggingHelper.start(t,r)}else this.selectionHelper.start(r.target,!r.ctrlKey&&!r.metaKey&&!e.detail.isLongTap),null===(i=this.getScrollViewer())||void 0===i||i.startAutoScrolling(Re.Vertical,(e=>this.selectionHelper.updateSeletionByEvent(e)),(e=>{const t=this.getDataTable();if(t){const n=t.querySelector("thead");n&&(e.y+=n.offsetHeight,e.height-=n.offsetHeight);const i=t.querySelector("tfoot");i&&(e.height-=i.offsetHeight)}}));e.stopPropagation()}onDragStop(e){var t,n;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)this.columnResizeStrategy.stopDrag();else if(this.columnDraggingHelper.isStarted()){const e=this.columnDraggingHelper.createColumnDraggedHandlerArgs();this.columnDraggingHelper.stop(),this.onColumnDragged(e)}else if(this.rowDraggingHelper.isStarted()){const e=this.rowDraggingHelper.createItemDraggedHandlerArgs();this.rowDraggingHelper.stop(),this.onRowDragged(e)}else if(this.selectionHelper.isStarted()){if(this.uiHandlersBridge&&this.selectionHelper.startSelectionRowIndex>-1&&this.selectionHelper.endSelectionRowIndex>-1){this.uiHandlersBridge.send("rowDragged",{startVisibleIndex:this.selectionHelper.startSelectionRowIndex,endVisibleIndex:this.selectionHelper.endSelectionRowIndex,cleanSelection:!e.detail.source.ctrlKey&&!e.detail.source.metaKey&&!e.detail.isLongTap})}this.selectionHelper.stop()}null===(n=this.getScrollViewer())||void 0===n||n.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t,n;(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)?this.columnResizeStrategy.cancelDrag():this.columnDraggingHelper.isStarted()?this.columnDraggingHelper.stop():this.rowDraggingHelper.isStarted()?this.rowDraggingHelper.stop():this.selectionHelper.isStarted()&&this.selectionHelper.stop(),null===(n=this.getScrollViewer())||void 0===n||n.stopAutoScrolling(),e.stopPropagation()}allowInplaceEditingOnCellElementClick(e){return!0}onClick(e){const t=e.detail.source.target,n=0===e.detail.source.button;if(this.isResizeAnchor(e.target))e.detail.source.stopPropagation();else if(n&&this.enableInplaceEditing){const e=this.getCellInfo(t);null!==e&&this.allowInplaceEditingOnCellElementClick(t)&&this.requestStartCellEditing(e)}}requestStartCellEditing(e){if(!this.keyboardNavigator)return;if(null===e||e.type===Vs.Edit)return;e.type===Vs.Data&&this.setFocusedRowVisible(!1);const t=new fA(e);setTimeout((()=>this.dispatchEvent(new bA(t))),0)}onStartCellEditingRequestComplete(){this.setFocusedRowVisible(!0)}onDblClick(e){var t;const n=e.target;if(this.isResizeAnchor(n)){e.stopPropagation();const i=this.findHeaderElement(n),s=this.findLeafIndex(i);null===(t=this.columnResizeStrategy)||void 0===t||t.autoFitColumnWidth(s)}}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),n=this.getDataTable();n&&(t&&(n.offsetHeight<t.clientHeight?T.DomUtils.addClassName(n,me.DataTableNoScrollClassName):n.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(n,me.DataTableNoScrollClassName)),this.updateTopFixedBodyPosition(n)),e.stopPropagation()}onScrollViewerScroll(){this.styleGenerator.scrollPositionUpdated(this.getScrollViewerContent())}getRowVisibleIndexByTarget(e,t){let n=e;for(;n&&n!==this&&(t||!n.classList.contains(me.EditRowClassName));){if("tr"===n.tagName.toLowerCase()&&n.dataset.visibleIndex)return parseInt(n.dataset.visibleIndex);n=n.parentElement}return-1}get allowSelectRowByClick(){return this._allowSelectRowByClick}set allowSelectRowByClick(e){this._allowSelectRowByClick=e,this.updateHandlePointerEventsMode()}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e,this.updateHandlePointerEventsMode()}get enableFocusedRow(){return this._enableFocusedRow}set enableFocusedRow(e){this._enableFocusedRow=e,this.updateHandlePointerEventsMode()}get enableRowDrag(){return this._enableRowDrag}set enableRowDrag(e){this._enableRowDrag=e,this.updateHandlePointerEventsMode()}get enableItemDrop(){return this._enableItemDrop}set enableItemDrop(e){this._enableItemDrop=e,this.onItemDropStateChanged()}get enablePositionalItemDrop(){return this._enablePositionalItemDrop}get enableInplaceEditing(){return this._enableInplaceEditing}set enableInplaceEditing(e){this._enableInplaceEditing=e,this.updateHandlePointerEventsMode()}get isEditing(){return this._isEditing}set isEditing(e){this._isEditing=e}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get keyboardNavigationEnabled(){return!!this.keyboardNavigator}get hasRowClickEvent(){return this._hasRowClickEvent}set hasRowClickEvent(e){this._hasRowClickEvent=e,this.updateHandlePointerEventsMode()}get hasRowDblClickEvent(){return this._hasRowDblClickEvent}set hasRowDblClickEvent(e){this._hasRowDblClickEvent=e,this.updateHandlePointerEventsMode()}get columnsInfo(){return this._columnsInfo}get headerLayout(){return this._headerLayout}get styleGenerator(){return this._styleGenerator}get editorManager(){return this._editorManager}get uiHandlersBridge(){return this._uiHandlersBridge}get uId(){return this.getAttribute(jA)}get enableEditOnKeypress(){return this._enableEditOnKeypress}get enterKeyDirection(){return this._enterKeyDirection}updateHandlePointerEventsMode(){this.handlePointerEventsMode=r.None,(this.hasRowClickEvent||this.enableFocusedRow||this.enableInplaceEditing)&&(this.handlePointerEventsMode|=r.Click),this.hasRowDblClickEvent&&(this.handlePointerEventsMode|=r.DblClick),this.enableRowDrag&&(this.handlePointerEventsMode|=r.Dragging),this.allowSelectRowByClick&&(this.handlePointerEventsMode|=r.Click,this.enableMultiSelect&&h.Browser.TouchUI&&(this.handlePointerEventsMode|=r.Dragging))}makeRowVisible(e){if(this.uiHandlersBridge&&e>=0){this.uiHandlersBridge.send("makeRowVisible",{visibleIndex:e})}}notifyFocusedRowChanged(e){if(e!==this.focusedRowIndex&&this.enableFocusedRow&&this.uiHandlersBridge){this.focusedRowIndex=e;this.uiHandlersBridge.send("focusedRowChanged",{visibleIndex:e})}}notifyColumnsInitialized(e,t){this._columnsInfo=e,this._headerLayout=t}notifyColumnsChanged(e,t){this._columnsInfo=e,this._headerLayout=t,this.correctWidths(Le.ColumnsChanged)}notifyColumnResizeAnchorFocus(e){var t;const n=this.findHeaderElement(e),i=this.findLeafIndex(n);null===(t=this.columnResizeStrategy)||void 0===t||t.anchorFocused(i)}notifyColumnResizeAnchorBlur(){var e;null===(e=this.columnResizeStrategy)||void 0===e||e.anchorUnfocused()}notifyColumnResizeAnchorMove(e){var t;null===(t=this.columnResizeStrategy)||void 0===t||t.performMoveStep(e)}updateEmptyColumnVisibility(){this.columnWidthsController.updateEmptyColumnVisibility()}autoFitColumnWidthsLegacy(e=!1){this.columnWidthsController.autoFitColumnWidthsLegacy(e)}autoFitColumnWidths(){this.columnWidthsController.autoFitColumnWidths()}updateTopFixedBodyPosition(e){const t=e.querySelector(":scope > thead"),n=e.querySelector(`:scope > tbody.${me.TopFixedBodyClassName}`);t&&n&&(n.style.top=window.getComputedStyle(t).height)}correctWidths(e){var t;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)return;this.columnWidthsController.correctWidths(e);const n=this.getScrollViewer();n&&n.refreshUI&&n.refreshUI()}getElementIndex(e){if(!e)return-1;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return-1}getColumnInfo(e){const t=this.findHeaderElement(e),n=this.getElementIndex(t);if(n>=0){const e=Array.from(this.getHeaderRows()).findIndex((e=>e===t.parentElement));let i=this.columnsInfo;if(e>=0&&(i=this.headerLayout[e]),n<i.length)return i[n]}return null}getCellInfo(e){return Va.fromElement(this,e)}getCellElement(e){return Va.getCellElement(this,e)}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this.columnsInfo.length)return this.columnsInfo[t]}return null}getColumnUID(e){const t=this.getColumnInfo(e);return t?t.uID:-1}findHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${me.HeaderElementClassName}`):null}findHeaderCellByColumnIndex(e){const t=this.columnsInfo[e];return this.getHeaderCell(t.headerRowIndex,t.headerCellIndex)}getHeaderCell(e,t){var n,i;return null!==(i=null===(n=this.getHeaderRow(e))||void 0===n?void 0:n.cells[t])&&void 0!==i?i:null}findLeafIndex(e){let t=this.getColumnInfo(e);return(null==t?void 0:t.hasLeafs)&&(t=t.getRightLeaf()),t?t.leafIndex:-1}getHeaderRow(e){return this.getHeaderRows().item(e)}isHeaderElement(e){return e&&e.classList.contains(me.HeaderElementClassName)}isHeaderContentElement(e){return e.tagName.toLowerCase()===ge}isResizeAnchor(e){return e.classList.contains(me.ColumnsResizeAnchorClassName)}isRowDragAnchor(e){return e.classList.contains(me.RowDragAnchorClassName)}onItemDropStateChanged(){this.rowDraggingHelper.initItemDropTarget(this.enableItemDrop)}onDocumentKeyDown(e){if(!this.keyboardNavigationEnabled&&("Enter"===e.key||" "===e.key)){const t=this.findHeaderElement(e.target);if(t){const n=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey});t.dispatchEvent(n)}}}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onColumnChooserItemDragged(e,t){this.onColumnDragged({columnUid:e,beforeColumnUid:t,srcArea:OA.ColumnChooser,dropArea:OA.ColumnChooser})}onRowDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("rowDropped",e)}onColumnDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("columnHeaderDragged",e)}onColumnWidthsChanged(e,t){this.uiHandlersBridge&&this.uiHandlersBridge.send("columnWidthsChanged",{columnUids:e,widths:t})}onSizeChanged(e){const t=e[0].contentRect.width;this.currentWidth!==t&&t>0&&(this.correctWidths(-1===this.currentWidth?Le.ColumnsChanged:Le.GridResize),this.currentWidth=t)}getContentTemplate(){return JA}static get observedAttributes(){return["allow-select-row-by-click","enable-multi-select","has-row-click-event","has-row-dbl-click-event","resize-mode","enable-focused-row","enable-inplace-editing","is-editing","request-auto-fit-column-widths","focus-pending-editor-column-uid","is-pending-editor-show","focused-row-index","enable-row-drag","enable-item-drop","enable-positional-item-drop","has-fixed-on-top-body","enable-edit-on-keypress","enter-key-direction"]}attributeChangedCallback(e,t,n){var i;switch(e){case"allow-select-row-by-click":this.allowSelectRowByClick=null!==n;break;case"enable-focused-row":this.enableFocusedRow=null!==n;break;case"enable-multi-select":this.enableMultiSelect=null!==n;break;case"enable-inplace-editing":this.enableInplaceEditing=null!=n;break;case"enable-row-drag":this.enableRowDrag=null!==n;break;case"enable-item-drop":this.enableItemDrop=null!==n;break;case"enable-positional-item-drop":this._enablePositionalItemDrop=null!==n;break;case"has-row-click-event":this.hasRowClickEvent=null!==n;break;case"has-row-dbl-click-event":this.hasRowDblClickEvent=null!==n;break;case"is-editing":this.isEditing=null!==n;break;case"focused-row-index":this.focusedRowIndex=parseInt(n);break;case"resize-mode":null===(i=this.columnResizeStrategy)||void 0===i||i.cancelDrag(),this.ensureColumnResizeStrategy();break;case"is-pending-editor-show":this.editorManager.notifyPendingEditorShow(null!==n);break;case"has-fixed-on-top-body":if(null!==n){const e=this.getDataTable();e&&setTimeout((()=>this.updateTopFixedBodyPosition(e)))}break;case"focus-pending-editor-column-uid":null!==n&&this.requestFocusEditor(parseInt(n));break;case"request-auto-fit-column-widths":if(n){const e=JSON.parse(n);if(e[0]&&e[0]!==this._latestAutoFitColumnWidthsRequestGuid)if(this._latestAutoFitColumnWidthsRequestGuid=e[0],2===e.length){const t=e[1];setTimeout((()=>{this.autoFitColumnWidthsLegacy(t)}))}else setTimeout((()=>{this.autoFitColumnWidths()}))}break;case"enable-edit-on-keypress":this._enableEditOnKeypress=null!==n;break;case"enter-key-direction":this._enterKeyDirection=parseInt(n)}}ensureColumnResizeStrategy(){const e=this.getAttribute("resize-mode");this.columnResizeStrategy=e?"next-column"===e?new We(this):new $e(this):void 0}requestFocusEditor(e){setTimeout((()=>this.focusEditor(e)),0)}focusEditor(e){const t=this.uId;if(null===t)return;const n=this.querySelector(ks.getBodyEditRowSelector(t,this.getTagName()));if(null===n)return;let i=null;for(const t of n.cells){const n=this.getCellInfo(t);if(null!==n&&n.columnInfo.uID===e&&n.type===Vs.Edit){i=t;break}}if(null===i)return;const s=bn.findFocusableElements(i),r=s.length>0?s[0]:null;if(!r)return;r.focus();const o=this.getScrollViewer(),a=this.getScrollViewerContent();o&&a&&Ya.alignElementVertically(r,o,a),tA.selectInputValue(r)}setFocusedRowVisible(e){e?(clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=void 0,this.hasAttribute(ai.FocusedRowHidden)&&this.removeAttribute(ai.FocusedRowHidden)):(this.enableFocusedRow&&this.setAttribute(ai.FocusedRowHidden,""),clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=setTimeout((()=>this.setFocusedRowVisible(!0)),this.focusedRowRestoreVisibilityTimeout))}static findGrid(e){let t=document.querySelector(`${YA}[${jA}="${e}"]`);return t||(t=document.querySelector(`${qA}[${jA}="${e}"]`)),t}}customElements.define(ge,class extends he{constructor(){super(),this.handlePointerEventsMode=r.Click|r.Dragging}get handlePointerEventsTarget(){return this.closest(`.${me.HeaderElementClassName}`)}}),customElements.define("dxbl-grid-columns-info",class extends he{get data(){if(!this._dataCache){const e=this.getAttribute("data");this._dataCache=e?JSON.parse(e):{}}return this._dataCache}get header(){if(!this._headerCache){const e=this.data["header-uids"];this._headerCache=e?this.parseHeaderLayout(e):[]}return this._headerCache}get leafs(){if(!this._leafsCache){const e=this.data["leaf-uids"];this._leafsCache=e?this.parseColumns(e,!0):[],this.attachLeafs(this._leafsCache)}return this._leafsCache}get columns(){if(!this._columnsInfoCache){const e=this.data.columns;this._columnsInfoCache=e?this.parseColumnsInfo(e):{},this.attachParents(this._columnsInfoCache)}return this._columnsInfoCache}get indents(){if(!this._indentsCache){const e=this.data.indents;this._indentsCache=e?this.parseInfoArray(e):[]}return this._indentsCache}get emptyColumn(){if(!this._emptyColumnCache){const e=this.data["empty-column"];this._emptyColumnCache=e?this.parseColumnInfo(e):null}return this._emptyColumnCache}constructor(){super(),this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null,this._gridElementPromise=null}initializeComponent(){super.initializeComponent(),this.grid=this.closest(`.${me.ClassName}`),this._gridElementPromise=customElements.whenDefined(this.grid.tagName.toLowerCase()),this._gridElementPromise.then(this.notifyColumnsInitialized.bind(this))}invalidateCaches(){this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null}parseHeaderLayout(e){const t=[];for(let n=0;n<e.length;n++){const i=this.parseColumns(e[n],0===n);this.updateHeaderLayoutInfo(i,n),t.push(i)}return t}updateHeaderLayoutInfo(e,t){for(let n=0;n<e.length;n++)e[n].updateHeaderLayoutInfo(t,n)}parseColumns(e,t){const n=t?this.indents.slice():[];for(let t=0;t<e.length;t++){n.push(this.columns[e[t]])}return t&&this.emptyColumn&&n.push(this.emptyColumn),n}parseColumnsInfo(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];t[i.UID]=this.parseColumnInfo(i)}return t}parseInfoArray(e){const t=[];for(let n=0;n<e.length;n++){t.push(this.parseColumnInfo(e[n]))}return t}parseColumnInfo(e){const t=e.DragRestrictions?new be(e.DragRestrictions.PreviousColumnUid,e.DragRestrictions.NextColumnUid,e.DragRestrictions.NextVisibleColumnUid):null;return new we(e.UID,e.ParentUID,e.AllowGroup,e.Width,e.MinWidth,e.FixedPosition,e.IsIndent,e.IsEmpty,e.IsDetail,e.IsEditable,e.AllowReorder,t)}attachParents(e){for(const t of Object.values(e)){const n=e[t.parentUID];n&&t.attachParent(n)}}attachLeafs(e){for(let t=0;t<e.length;t++){const n=e[t];n.isIndent||n.isRoot||this.attachLeafRecursive(n.parentUID,n),n.updateLeafIndex(t)}}attachLeafRecursive(e,t){const n=e>=0?this.columns[e]:null;n&&(n.attachLeaf(t),this.attachLeafRecursive(n.parentUID,t))}notifyColumnsInitialized(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsInitialized(this.leafs,this.header)}notifyColumnsChanged(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsChanged(this.leafs,this.header)}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,n){var i;this.invalidateCaches(),null===(i=this._gridElementPromise)||void 0===i||i.then(this.notifyColumnsChanged.bind(this))}}),customElements.define("dxbl-column-resize-anchor",class extends he{constructor(){super(),this.boundOnAnchorFocusHandler=this.onAnchorFocus.bind(this),this.boundOnAnchorBlurHandler=this.onAnchorBlur.bind(this),this.boundOnKeyDownHandler=this.onKeyDown.bind(this),this.handlePointerEventsMode=r.Click|r.DblClick|r.Dragging}handlePointerEventsDelay(e){return s.Default}initializeComponent(){var e,t,n;super.initializeComponent(),h.Browser.TouchUI&&this.classList.add(pe.Touch),this.grid=this.closest(`.${me.ClassName}`),this.focusableElement=this.querySelector("div"),null===(e=this.focusableElement)||void 0===e||e.addEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.addEventListener("blur",this.boundOnAnchorBlurHandler),null===(n=this.focusableElement)||void 0===n||n.addEventListener("keydown",this.boundOnKeyDownHandler)}disposeComponent(){var e,t,n;super.disposeComponent(),null===(e=this.focusableElement)||void 0===e||e.removeEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.removeEventListener("blur",this.boundOnAnchorBlurHandler),null===(n=this.focusableElement)||void 0===n||n.removeEventListener("keydown",this.boundOnKeyDownHandler)}onAnchorFocus(e){var t;null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorFocus(e.target)}onAnchorBlur(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnResizeAnchorBlur()}onKeyDown(e){var t,n;e.keyCode===Ie.KeyCode.Left&&(e.preventDefault(),null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorMove(ke.Left)),e.keyCode===Ie.KeyCode.Right&&(e.preventDefault(),null===(n=this.grid)||void 0===n||n.notifyColumnResizeAnchorMove(ke.Right))}}),customElements.define("dxbl-column-resize-separator",Ge),customElements.define("dxbl-grid-column-chooser",class extends he{constructor(){super(),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.grid=null,this.scrollViewer=null,this.itemsReorderHelper=new Je(this.onItemsReording.bind(this)),this.handlePointerEventsMode=r.Dragging}handlePointerEventsDelay(e){return s.Default}get useShadowDom(){return!1}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.grid=id.findGrid(this.getAttribute(XA)),this.scrollViewer=this.querySelector(`.${Fe.ClassName}`),this.initializeKeyboardNavigator()}disposeComponent(){super.disposeComponent(),this.removeEventSubscriptions(),delete this.keyboardNavigator}getColumnUid(e){return parseInt(e.getAttribute(qe))}getColumnParentUid(e){return e.getAttribute(Ye)}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Ln),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new UA(this,this.keyboardNavigator))}onDragStart(e){var t;const n=e.detail.source,i=n.target,s=i.closest(`.${me.ColumnChooserItemDragAnchorClassName}`),r=i.closest(`.${me.ColumnChooserItemClassName}`);if(null!=s&&null!=r){const e=Array.from(this.getElementsByClassName(me.ColumnChooserItemClassName));this.itemsReorderHelper.start(e,r,n),null===(t=this.scrollViewer)||void 0===t||t.startAutoScrolling(Re.Vertical,(()=>{this.itemsReorderHelper.refreshUI()}))}e.stopPropagation()}onDragStop(e){var t;this.itemsReorderHelper.stop(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t;this.itemsReorderHelper.cancel(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onItemsReording(e,t,n,i){const s=n.map((t=>e[t])),r=s[0],o=t.indexOf(n[0])+n.length;let a=null;if(!(o===t.length)){a=e[t[o]];this.getColumnParentUid(a)!==this.getColumnParentUid(r)&&(a=null)}this.applyStyles(e,s,a,i),i===Xe.Stop&&this.onItemsReorded(r,a)}applyStyles(e,t,n,i){for(let t=0;t<e.length;t++){const s=e[t],r=s.classList.contains(me.ColumnChooserDraggingItemNextSiblingClassName);(i!==Xe.ItemMoving||r&&s!==n)&&s.classList.remove(me.ColumnChooserDraggingItemNextSiblingClassName)}if(i===Xe.ItemMoving){for(const e of t)e.classList.contains(me.ColumnChooserDraggingItemClassName)||e.classList.add(me.ColumnChooserDraggingItemClassName);null==n||n.classList.contains(me.ColumnChooserDraggingItemNextSiblingClassName)||n.classList.add(me.ColumnChooserDraggingItemNextSiblingClassName)}else{for(const e of t)e.classList.remove(me.ColumnChooserDraggingItemClassName);null==n||n.classList.remove(me.ColumnChooserDraggingItemNextSiblingClassName)}}onItemsReorded(e,t){if(null==this.grid)return;const n=this.getColumnUid(e),i=null!=t?this.getColumnUid(t):null;setTimeout((()=>{var e;return null===(e=this.grid)||void 0===e?void 0:e.onColumnChooserItemDragged(n,i)}),200)}}),customElements.define("dxbl-grid-drop-target-indicator",class extends PA{calculateLeftOffset(){const e=this.getTargetElement();if(!e||Ws.getRowType(e)!==_s.Data)return"";const t=e.querySelectorAll(`.${me.IndentCellClassName}`);if(0===t.length)return"";const n=t[t.length-1];return`${n.offsetLeft+n.offsetWidth}px`}});class ed extends MA{constructor(){super(),this.boundOnDroppableMouseMoveHandler=this.onDroppableAreaMove.bind(this)}get draggableRowItemContext(){return this.draggableItemContext}addElementListeners(e){super.addElementListeners(e),e.addEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}removeElementListeners(e){super.removeElementListeners(e),e.removeEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}onDroppableAreaMove(e){const t=document.elementFromPoint(e.clientX,e.clientY),n=this.getItemDropArea(),i=this.findItemElementUpToParent(t,n);i&&(this.updateDraggableContext(i),this.refreshUI())}initItemDropTarget(e){e?RA.register(this):RA.remove(this.getKey())}createDraggableContext(e,t,n){return{...super.createDraggableContext(e,t,n),visibleIndex:this.getItemVisibleIndex(e),restrictions:this.getDropRestrictions()}}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}updateDraggableContext(e){super.updateDraggableContext(e),this.updateIndicator()}updateIndicator(){if(!this.draggableRowItemContext)return;const e=this.getDropTargetIndicator(),t=this.getDropPosition();e&&this.draggableRowItemContext.mouseOverElement&&e.updatePosition(this.draggableRowItemContext.mouseOverElement,t)}refreshUICore(){var e;super.refreshUICore();const t=this.getDropTargetIndicator();this.isStarted()&&(null===(e=this.draggableRowItemContext)||void 0===e?void 0:e.isPossibleDropItem)&&this.draggableRowItemContext.target===this?t.show():null==t||t.hide()}stop(){var e;null===(e=this.getDropTargetIndicator())||void 0===e||e.hide(),super.stop()}createSourceInfo(){return{...super.createSourceInfo(),visibleIndex:this.draggableRowItemContext.visibleIndex}}createTargetInfo(){return{...super.createTargetInfo(),visibleIndex:this.getItemVisibleIndex(this.draggableRowItemContext.mouseOverElement),dropPosition:this.getDropPosition()}}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.getDropTargetIndicator())||void 0===e||e.hide()}isWithinDeniedRange(e){var t,n,i;return(null!==(i=null===(n=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===n?void 0:n.reorderDeniedRanges)&&void 0!==i?i:[]).some((t=>t.Start<=e&&t.End>=e))}isTopAdjacentDeniedRange(e){var t,n,i;return(null!==(i=null===(n=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===n?void 0:n.reorderDeniedRanges)&&void 0!==i?i:[]).some((t=>e===t.Start-1))}isBottomAdjacentDeniedRange(e){var t,n,i;return(null!==(i=null===(n=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===n?void 0:n.reorderDeniedRanges)&&void 0!==i?i:[]).some((t=>e===t.End+1))}isRestrictedTopArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:n}=this.draggableRowItemContext;if(!n||!t)return!1;const i=this.getItemVisibleIndex(n),s=NA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y>s&&this.isTopAdjacentDeniedRange(i)}isRestrictedBottomArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:n}=this.draggableRowItemContext;if(!n||!t)return!1;const i=this.getItemVisibleIndex(n),s=NA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y<s&&this.isBottomAdjacentDeniedRange(i)}}class td extends ed{constructor(e){super(),this.grid=e}getKey(){return this.grid.uId}getItemDropArea(){return this.grid.getDataTable()}start(e,t){this.isRowDraggingAllowed(e)&&super.start(e,t)}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.grid.getScrollViewer())||void 0===t||t.startAutoScrolling(Re.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.grid.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getItemVisibleIndex(e){return this.grid.getRowVisibleIndexByTarget(e,this.grid.enableInplaceEditing)}getDropRestrictions(){return this.grid.getDropRestrictions()}getDraggableElement(e){return this.grid.getRowDragHint()}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>RA.find(e))):[]}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropPossible(e))}isDropPossible(e){const t=Ws.getRowType(e);return t===_s.Data||t===_s.Group||t===_s.EmptyData||t===_s.EmptyRow}isReorderPossible(e){const t=Ws.getRowType(e);if(!this.draggableRowItemContext||t!==_s.Data)return!1;const n=this.getItemDropArea();if(!n||e.closest(n.tagName)!==n)return!1;const i=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(i)}isPositionalDropAllowed(){return this.grid.enablePositionalItemDrop}findItemElementUpToParent(e,t){return Rt(e,null,(e=>e.matches(ks.TableBodyRows)&&e.closest(ks.DataTableSelector)===t))}isRowDraggingAllowed(e){return Ws.getRowType(e)===_s.Edit?this.grid.enableInplaceEditing:Ws.getRowType(e)===_s.Data}getDropTargetIndicator(){return this.grid.getDropTargetIndicator()}static isDataRow(e){return Ws.getRowType(e)===_s.Data}static isEmptyRow(e){const t=Ws.getRowType(e);return t===_s.EmptyData||t===_s.EmptyRow}}class nd extends td{getDropPosition(){if(!this.draggableRowItemContext)return QA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:n}=this.draggableRowItemContext;return n&&t?td.isEmptyRow(n)||td.isDataRow(n)&&!this.isPositionalDropAllowed()?QA.Append:td.isDataRow(n)?this.isRestrictedTopArea()?QA.Before:this.isRestrictedBottomArea()?QA.After:NA.getDropPositionByCursor(e.y,t):QA.Inside:QA.Inside}isReorderPossible(e){return this.isPositionalDropAllowed()&&super.isReorderPossible(e)}isWithinDeniedRange(e){return!(!this.isTopAdjacentDeniedRange(e)||!this.isBottomAdjacentDeniedRange(e))||super.isWithinDeniedRange(e)}}class id extends ZA{constructor(){super()}getTagName(){return YA}createRowDraggingHelper(){return new nd(this)}}customElements.define(YA,id);class sd{}sd.TreeNodeExpandControlsCell=`${ks.TableCell}.dxbl-grid-tree-node-expand-controls-cell`,sd.TreeNodeExpandControlsContainer=`${sd.TreeNodeExpandControlsCell} > .dxbl-grid-tree-node-expand-controls-container`,sd.TreeNodeExpandButton=`${sd.TreeNodeExpandControlsContainer} > .dxbl-grid-tree-node-expand-button`;class rd extends td{getDropPosition(){if(!this.draggableRowItemContext)return QA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:n}=this.draggableRowItemContext;return n&&t?td.isEmptyRow(n)?QA.Append:td.isDataRow(n)?this.isRestrictedArea(e.y,t)||rd.isCursorInMiddle(e.y,t)?QA.Inside:this.isPositionalDropAllowed()?NA.getDropPositionByCursor(e.y,t):QA.Append:QA.Inside:QA.Inside}isRestrictedArea(e,t){const{top:n,bottom:i}=rd.getBounds(t);return this.isRestrictedTopArea()&&e>n||this.isRestrictedBottomArea()&&e<i}static isCursorInMiddle(e,t){const{top:n,bottom:i}=rd.getBounds(t);return e>n&&e<i}static getBounds(e){const t=NA.calculateVerticalCenter(e),n=e.height/4;return{top:t-n,bottom:t+n}}}class od{static isExpandCollapseHotkey(e,t){const n=Ie.KeyUtils.getEventKeyCode(e);return(n===Ie.KeyCode.Right||n===Ie.KeyCode.Left)&&(t?e.metaKey:e.ctrlKey)}}class ad extends uA{constructor(e,t,n){super(e,t,n)}handleArrowLeftKeyDown(e){return od.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return od.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class ld extends AA{constructor(e,t,n){super(e,t,n)}handleArrowLeftKeyDown(e){return od.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return od.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class Ad extends yA{constructor(e,t){super(e,t)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new cd(this,this.grid,e):new dd(this,this.grid,e)}}class dd extends IA{constructor(e,t,n){super(e,t,n)}createDataRowStrategy(e){return new ad(this,this.grid,e)}createInplaceEditRowStrategy(e){return new ld(this,this.grid,e)}}class cd extends SA{constructor(e,t,n){super(e,t,n)}createDataRowStrategy(e){return new ad(this,this.grid,e)}createInplaceEditRowStrategy(e){return new ld(this,this.grid,e)}}class hd extends DA{constructor(e){super(e)}createDataTableStrategy(e){return new Ad(this.grid,e)}}class ud extends qa{constructor(e){super(e)}isDataCellInteractiveElement(e){return!!e&&(e.matches(sd.TreeNodeExpandControlsCell)||e.matches(sd.TreeNodeExpandButton))}}customElements.define(qA,class extends ZA{constructor(){super()}getTagName(){return qA}get bypassNonInlineHoverTitleElementChildSelector(){return sd.TreeNodeExpandControlsContainer}allowInplaceEditingOnCellElementClick(e){return!e.matches(`${sd.TreeNodeExpandButton} *`)}createRowDraggingHelper(){return new rd(this)}createRootKeyboardNavigationStrategy(){return new hd(this)}createEditorManager(){return new ud(this)}});const pd="dxbl-chart-legend",md="dxbl-chart-legend-icon",gd="dxbl-chart-legend-def-icon",Cd="dxbl-chart-legend-item",fd="--dxbl-chart";class vd{}vd.axisTitleFontColor=`${fd}-axis-title-font-color`,vd.axisLineColor=`${fd}-axis-line-color`,vd.constantLineColor=`${fd}-constant-line-color`,vd.errorBarColor=`${fd}-error-bar-color`,vd.annotationColor=`${fd}-annotation-color`,vd.annotationTextColor=`${fd}-annotation-text-color`,vd.containerBackgroundColor=`${fd}-container-background-color`,vd.candlestickInnerColor=`${fd}-candlestick-inner-color`,vd.zoomAndPanDragBoxColor=`${fd}-zoom-drag-box-color`,vd.axisLabelFontColor=`${fd}-axis-label-font-color`,vd.axisLabelFontOpacity=`${fd}-axis-label-font-opacity`;const bd="dxbl-chart-legend-listeners";var wd;function yd(e,t,n,i,s,r,o){if(!e)return;const a=Bd(t,n,i);if(!a)return;const l=e.querySelector("."+md+" rect");if(l){const e=a.getColor();T.DomUtils.hasClassName(l,gd)&&(l.style.fill=e),l.style.color=e}e.getAttribute(bd)||(Ed(e,t,n,i,["pointerover"],(function(e){const n=t.option("legend.hoverMode");s===wd.series?e.hover(n):"includePoints"===n&&e.hover()})),Ed(e,t,n,i,["pointerout"],(function(e){e.clearHover()})),Ed(e,t,n,i,["click"],(function(e){r.selectLegendItem(e,s),o.onLegendClick(n,i)})),e.setAttribute(bd,"true"))}function Bd(e,t,n){const i=e.getSeriesByPos(t);return n&&i?i.getPoints().filter((function(e){return e.tag===n}))[0]:i}function Ed(e,t,n,i,s,r){s.forEach((function(s){const o=function(){const e=Bd(t,n,i);e&&r(e)};e.addEventListener(s,o),En(e,(()=>{e.removeEventListener(s,o)}))}))}!function(e){e[e.series=0]="series",e[e.point=1]="point"}(wd||(wd={}));const Id=".dxbl-chart-tooltip";class Sd{constructor(e){this.currentPointInfo=null,this._owner=e}onTooltipHidden(e){e.isPointerOut&&this.hideTooltip(!1)}onTooltipShown(e,t){const n=e.target;if(!n||!n.series)return;const i=D.MathUtils.generateGuid();this.currentPointInfo={chartPoint:n,x:e.x,y:e.y,id:i};t({seriesIndex:n.series.index,data:n.data,tag:n.tag,id:i})}hideTooltip(e){var t,n;e&&(null===(n=null===(t=this.currentPointInfo)||void 0===t?void 0:t.chartPoint)||void 0===n?void 0:n.series)&&this.currentPointInfo.chartPoint.clearHover();const i=this._owner.querySelector(Id);i&&en((()=>i.classList.remove("dxbl-visible"))),this.currentPointInfo=null}positionTooltip(){if(!this.currentPointInfo)return;const e=this.currentPointInfo.x,t=this.currentPointInfo.y,n=this._owner,i=n.getWidgetElement(),s=null==n?void 0:n.querySelector(Id);if(!s)return;const r=s.offsetParent,o=t-T.DomUtils.getAbsolutePositionY(r);let a=e-T.DomUtils.getAbsolutePositionX(r),l=0;const A=this.getCorrectedTooltipLeft(a,s,n,i);null!==A&&(l=a-A,a=A),this.applyTooltipPosition(a,o,l,s)}getCorrectedTooltipLeft(e,t,n,i){let s=null;const r=t.getBoundingClientRect().width/2,o=i.getBoundingClientRect();if(e<r){const e=i.offsetParent,t=(null==e?void 0:e.getBoundingClientRect().left)||0;s=o.left-t+r}else{const t=(n.getBoundingClientRect().width+o.width)/2;e+r>t&&(s=t-r)}return s}applyTooltipPosition(e,t,n,i){const s=i.querySelector(".dxbl-chart-tooltip-pointer"),r=`calc(${t}px - 0.625rem)`,o=`${e}px`,a=i.classList,l=0!==n?`calc(50% + ${n}px)`:"50%";en((function(){i.style.top=r,i.style.left=o,s.style.left=l,a.contains("dxbl-visible")||a.add("dxbl-visible")}))}}class xd{}xd.pieChartName="dxPieChart",xd.polarChartName="dxPolarChart",xd.xyChartName="dxChart";class Dd{static compareValues(e,t){return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t}get seriesIndex(){return this._seriesIndex}get pointArgument(){return this._pointArgument}get pointValue(){return this._pointValue}constructor(e,t,n){this._seriesIndex=e,this._pointArgument=t,this._pointValue=n}}class Fd{get seriesIndex(){return this._seriesIndex}constructor(e){this._seriesIndex=e}}function Td(e){return e===xd.pieChartName?new Ud:new Hd}class Hd{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&Dd.compareValues(e.pointArgument,t.pointArgument)&&Dd.compareValues(e.pointValue,t.pointValue)}compareSeries(e,t){return e.seriesIndex===t.seriesIndex}}class Ud extends Hd{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&Dd.compareValues(e.pointArgument,t.pointArgument)}}class Qd{constructor(){this._seriesSelectionMode=null,this._pointSelectionMode=null,this._selectedSeries=new Array,this._selectedPoints=new Array,this._hoveredPoint=null,this._hoveredSeries=null,this._compareStrategy=Td()}get seriesSelectionMode(){return this._seriesSelectionMode}set seriesSelectionMode(e){this._seriesSelectionMode=e}get pointSelectionMode(){return this._pointSelectionMode}set pointSelectionMode(e){this._pointSelectionMode=e}setCompareStrategy(e){this._compareStrategy=e}changePointSelectionState(e,t){const n=this._compareStrategy.comparePoint,i=this._selectedPoints.findIndex((t=>n(t,e))),s=i>-1;t?s||this.appendPoint(e):s&&this._selectedPoints.splice(i,1)}changeSeriesSelectionState(e,t){const n=this._compareStrategy.compareSeries,i=this._selectedSeries.findIndex((t=>n(t,e))),s=i>-1;t?s||this.appendSeries(e):s&&this._selectedSeries.splice(i,1)}changePointHoverState(e,t){this._hoveredPoint=t?e:null}changeSeriesHoverState(e,t){this._hoveredSeries=t?e:null}restoreSelection(e){this._selectedPoints=this._selectedPoints.filter(e.selectPoint),this._selectedSeries=this._selectedSeries.filter(e.selectSeries),null===this._hoveredPoint||e.hoverPoint(this._hoveredPoint)||(this._hoveredPoint=null),null===this._hoveredSeries||e.hoverSeries(this._hoveredSeries)||(this._hoveredSeries=null)}reset(){this.resetSelectedPoints(),this.resetSelectedSeries(),this._hoveredPoint=null,this._hoveredSeries=null}isPointSingleSelectionMode(){return this.pointSelectionMode===Qd.singleSelectionModeKey}isSeriesSingleSelectionMode(){return this.seriesSelectionMode===Qd.singleSelectionModeKey}appendPoint(e){this.isPointSingleSelectionMode()&&this.resetSelectedPoints(),this._selectedPoints.push(e)}appendSeries(e){this.isSeriesSingleSelectionMode()&&this.resetSelectedSeries(),this._selectedSeries.push(e)}resetSelectedPoints(){this._selectedPoints=[]}resetSelectedSeries(){this._selectedSeries=[]}}Qd.singleSelectionModeKey="single";class Pd{constructor(e){this._eventsLocked=!1,this._disposed=!1,this._lastJob=Promise.resolve(),this._state=new Qd,this._owner=e}setSeriesSelectionMode(e){this._state.seriesSelectionMode=e}setPointSelectionMode(e){this._state.pointSelectionMode=e}setChartType(e){const t=Td(e);this._state.setCompareStrategy(t)}dispose(){this._lastJob=this._lastJob.catch((e=>{e.message!==Pd.disposedErrorKey&&console.error(e)})),this._disposed=!0}selectSeriesAndPoint(e,t){this.pointSelectionEnabled&&t?this.togglePointSelection(t):this.toggleSeriesSelection(e)}selectLegendItem(e,t){t===wd.series?this.toggleSeriesSelection(e):this.togglePointSelection(e)}togglePointSelection(e){this.pointSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectPointInternal(e)))}toggleSeriesSelection(e){this.seriesSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectSeriesInternal(e)))}restoreChartSelection(e){this.addJobToQueue((()=>this.restoreChartSelectionInternal(e)))}seriesSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.index,t.isSelected())}}pointSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.series.index,t.series.isSelected(),t.data,t.tag,t.isSelected())}}pointHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t&&void 0!==t.originalArgument&&void 0!==t.originalValue){const e=new Dd(t.series.index,t.originalArgument,t.originalValue);this._state.changePointHoverState(e,t.isHovered())}}}seriesHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t){const e=new Fd(t.index);this._state.changeSeriesHoverState(e,t.isHovered())}}}resetSelection(){this._state.reset()}onSelectionChanged(e,t,n=null,i=null,s=!1){this._owner.onSelectionChanged({seriesIndex:e,isSeriesSelected:t,data:n,tag:i,isPointSelected:s})}addJobToQueue(e){return this.disposed||(this._lastJob=this._lastJob.then((()=>{if(this.disposed)throw Error(Pd.disposedErrorKey);e()}))),this._lastJob}get disposed(){return this._disposed}get seriesSelectionEnabled(){return null!=this._state.seriesSelectionMode}get pointSelectionEnabled(){return null!=this._state.pointSelectionMode}eventsAreLocked(){return this._eventsLocked}lockEventsAction(e){this.eventsAreLocked()||(this._eventsLocked=!0,e(),this._eventsLocked=!1)}selectSeriesInternal(e){const t=new Fd(e.index),n=!e.isSelected();this._state.changeSeriesSelectionState(t,n),n?e.select():e.clearSelection()}selectPointInternal(e){if(void 0===e.originalArgument||void 0===e.originalValue)return;const t=new Dd(e.series.index,e.originalArgument,e.originalValue),n=!e.isSelected();this._state.changePointSelectionState(t,n),n?e.select():e.clearSelection()}restoreChartSelectionInternal(e){this.lockEventsAction((()=>{const t=this.getSelectedStateRestoreActions(e);this._state.restoreSelection(t)}))}getSelectedStateRestoreActions(e){const t=t=>{const n=e.getSeriesByPos(t.seriesIndex);return(null==n?void 0:n.getPointsByArg(t.pointArgument))||[]},n=t=>e.getSeriesByPos(t.seriesIndex);return{selectPoint(e){const n=t(e);return n.forEach((e=>e.select())),(null==n?void 0:n.length)>0},selectSeries(e){const t=n(e);return null==t||t.select(),!!t},hoverPoint(e){var n;const i=null===(n=t(e))||void 0===n?void 0:n[0];return null==i||i.hover(),!!i},hoverSeries(e){const t=n(e);return null==t||t.hover(),!!t}}}}Pd.disposedErrorKey="Disposed";const Nd="dx-theme-marker",Rd="generic.light",Ld=`.${Nd} { font-family: "dx.${Rd}"; }`;let Md=!1;class kd{constructor(){this._dxtThemeMarkerLoaded=!1,this._customThemesCache={}}static getInstance(){return kd.instance||(kd.instance=new kd),kd.instance}async initializeWidget(e,t,n,i){return new(await this.getWidgetClass(t,n))(e,i)}async registerCustomTheme(e,t){if(!e)return;const n=e.name,i=JSON.stringify(e);if(this._customThemesCache[n]!==i){const s=await this.getVizModule();s.registerTheme(e,Rd),t&&s.refreshTheme(),this._customThemesCache[n]=i}}ensureDxtThemeMarkerExists(){if(this._dxtThemeMarkerLoaded||(this._dxtThemeMarkerLoaded=this.checkDxtThemeMarkerExists()),this._dxtThemeMarkerLoaded)return;const e=Pt();e&&(e.insertRule(Ld),this._dxtThemeMarkerLoaded=!0)}checkDxtThemeMarkerExists(){const e=document.createElement("div");e.className=Nd,window.document.body.appendChild(e);const t=window.getComputedStyle(e).fontFamily;return e.remove(),t.indexOf("dx.")>-1}async getVizModule(){return await this.getDxtModuleOrClass("viz")}async setLocalization(e){(await this.getDxtModuleOrClass("localization")).locale(e)}async getWidgetClass(e,t){return await this.getDxtModuleOrClass(t,e)}async getDxtModuleOrClass(e,t=""){return this.ensureDxtThemeMarkerExists(),Md||await this.loadDxtScripts(),this.tryGetDxtModuleOrClass(e,t)}tryGetDxtModuleOrClass(e,t=""){const n=window.DevExpress,i=null==n?void 0:n[e];return t?null==i?void 0:i[t]:i}async loadDxtScripts(){const e=window;try{await function(e,t=100,n=1e4){return new Promise(((i,s)=>{const r=Date.now(),o=setInterval((()=>{const t=e();t?(i(t),clearInterval(o)):Date.now()-r>n&&(s(new Error("Timeout waiting for condition")),clearInterval(o))}),t)}))}((()=>{var t;return!!(null===(t=e.DevExpress)||void 0===t?void 0:t.ui)})),Md=!0}catch(e){console.error("Failed to load Devextreme scripts")}}}const Kd="dxbl-client-component-wrapper";class Od extends CustomEvent{constructor(e){super(e,{detail:new zd,bubbles:!0,composed:!0,cancelable:!0})}}class _d extends CustomEvent{constructor(e){super(_d.eventName,{detail:new Wd(e),bubbles:!0,composed:!0,cancelable:!0})}}_d.eventName=`${Kd}.options-loaded`;class Vd extends CustomEvent{constructor(e){super(Vd.eventName,{detail:new $d(e),bubbles:!0,composed:!0,cancelable:!0})}}Vd.eventName=`${Kd}.loading-panel-visibility-changed`;class zd{}class Wd{constructor(e){this.OptionChunkKeys=e}}class $d{constructor(e){this.Visible=e}}Ct.register(_d.eventName,(e=>e.detail)),Ct.register(Vd.eventName,(e=>e.detail)),de();const Gd=e=>e&&"object"==typeof e&&!Array.isArray(e);class qd extends Ja{constructor(){super(...arguments),this.optionChunks="",this._firstLoading=!0,this._loadedChunks=[]}connectedOrContentChanged(){super.connectedOrContentChanged(),this.createComponentIfRequired()}disconnectedCallback(){super.disconnectedCallback(),this.disposeComponent()}firstUpdated(){this._firstLoading=!1}createComponentIfRequired(){if(!this.canCreateComponent())return;const e={};this.deepAssign(e,this.createInitOptions(),this.getServerOptions()),this.createComponent(e)}processSpecialOptions(e){}willUpdate(e){if(!this._firstLoading&&e.has("optionChunks")){const e=this.getServerOptions();e&&this.updateComponent(e)}}parseServerOptions(e){const t=e&&JSON.parse(e);if(!t)return;const n=Object.keys(t).filter((e=>!this._loadedChunks.includes(e))),i=n.map((e=>t[e])),s=this.deepAssign({},...i);return this.processSpecialOptions(s),this.invokeOptionsLoadedEvent(n),this._loadedChunks.push(...n),s}deepAssign(e,...t){if(!t.length)return e;const n=t.shift();if(Gd(e)&&Gd(n))for(const[t,i]of Object.entries(n))Gd(i)?(e[t]||(e[t]={}),this.deepAssign(e[t],i)):e[t]=i;return this.deepAssign(e,...t)}resetEmptyOptions(e,t,n=""){if(!t)return;const i=Object.entries(t).filter((([e])=>!this.getSkippedEmptyOptions().includes(n+e)));for(const[s,r]of i){const i=n+s;Array.isArray(r)?r.forEach(((t,n)=>{Gd(t)&&this.resetEmptyOptions(e,t,`${i}[${n}].`)})):Gd(r)&&this.resetEmptyOptions(e,r,`${i}.`),null===r&&(delete t[s],e(i))}}changeLoadingPanelVisibility(e){this.dispatchEvent(new Vd(e))}invokeOptionsLoadedEvent(e){this.dispatchEvent(new _d(e))}getServerOptions(){return this.parseServerOptions(this.optionChunks)}getSkippedEmptyOptions(){return[]}}C([xs({attribute:"option-chunks"})],qd.prototype,"optionChunks",void 0);const Yd={dxBarGauge:"barGauge",dxBullet:"bullet",dxChart:"chart",dxFunnel:"funnel",dxCircularGauge:"gauge",dxLinearGauge:"gauge",dxVectorMap:"map",dxPieChart:"pie",dxPolarChart:"polar",dxRangeSelector:"rangeSelector",dxSankey:"sankey",dxSparkline:"sparkline",dxTreeMap:"treeMap"};function Xd(e,t,n,i){const s=Yd[t];if(!e||!s||!n)return null;null!=i||(i=`dx-${s}-blazor-theme`);const r=function(e,t){const n={},i=window.getComputedStyle(t);for(const[t,s]of Object.entries(e)){const e=i.getPropertyValue(s);if(!e)continue;Jd(t.split("."),e,n)}return n}(e,n);return Object.keys(r).length>0?{name:i,[s]:r}:null}function Jd(e,t,n){e.reduce(((n,i,s)=>{var r;return s===e.length-1?n[i]=t:null!==(r=n[i])&&void 0!==r?r:n[i]={}}),n)}const jd="dxInstance",Zd="width",ec="height",tc="visible",nc="locale";class ic extends qd{constructor(){super(...arguments),this._containerSizeChanged=!1}canCreateComponent(){return!this._widgetPromise&&!!this.getWidgetElement()}createComponent(e){this._widgetPromise=this.initializeWidget(e)}disposeComponent(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>this.disposeWidget(e))).catch((e=>{gn(this)||console.error(e)}))}afterWidgetResolved(e){if(this._widgetPromise)return this._widgetPromise.then(e).catch((e=>{gn(this)||console.error(e)}))}disposeWidget(e){e.dispose()}updateComponent(e){var t;Object.keys(e).length?null===(t=this._widgetPromise)||void 0===t||t.then((t=>this.updateWidgetOptions(t,e))):this._containerSizeChanged&&this.onlyContainerSizeChanged()}createInitOptions(){return{...this.createWidgetDefaultOptions(),...this.createWidgetHandlers()}}createWidgetDefaultOptions(){return{}}createWidgetHandlers(){return{onInitialized:e=>this.onWidgetInitialized(e),onDisposing:e=>this.onWidgetDisposing(e)}}getWidgetCustomTheme(){return Xd(this.getThemeDependentOptionsDict(),this.getWidgetTypeName(),this)}getThemeDependentOptionsDict(){return{}}async initializeWidget(e){const t=this.getWidgetCustomTheme();t&&(await this.widgetLoader.registerCustomTheme(t),e.theme=t.name),this.processLocalization(e),this.resetEmptyOptions((e=>{}),e);const n=this.getWidgetElement(),i=this.getWidgetTypeName(),s=this.getWidgetModuleName();return this.widgetLoader.initializeWidget(n,i,s,e)}async updateWidgetTheme(){const e=this.getWidgetCustomTheme();e&&await this.widgetLoader.registerCustomTheme(e,!0)}get widgetLoader(){var e;return null!==(e=this._loader)&&void 0!==e||(this._loader=kd.getInstance()),this._loader}getWidgetElement(){return this.getElementsByClassName(this.getWidgetElementClassName())[0]}getWidgetElementClassName(){return"dxbl-widget-container"}getWidgetModuleName(){return"viz"}async processLocalization(e){e[nc]&&(await this.widgetLoader.setLocalization(e[nc]),delete e[nc])}updateWidgetOptions(e,t){e.beginUpdate(),this.resetEmptyOptions((t=>{e.resetOption(t)}),t),e.option(t),e.endUpdate()}onWidgetInitialized(e){e.element[jd]=e.component}onWidgetDisposing(e){delete e.element[jd]}setStyleOptionForElement(e,t){this.getContainerToSetStyle().style.setProperty(e,t)}processSpecialOptions(e){const t=void 0!==e[Zd],n=void 0!==e[ec];this._containerSizeChanged=t||n,t&&(this.setStyleOptionForElement(Zd,this.getCorrectedSizeValue(e[Zd])),delete e[Zd]),n&&(this.setStyleOptionForElement(ec,this.getCorrectedSizeValue(e[ec])),delete e[ec]),void 0!==e[tc]&&T.DomUtils.toggleClassName(this,pe.Invisible,!e[tc])}getCorrectedSizeValue(e){if(/^[0-9]+$/.test(e)){const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return e}getContainerToSetStyle(){return this}onlyContainerSizeChanged(){this.changeLoadingPanelVisibility(!1)}executeClientMethod(e,...t){return this._widgetPromise?this._widgetPromise.then((n=>n[e](...t))).catch((e=>console.error(e))):Promise.resolve()}}function sc(e){let t=-1;return{execute:function(){this.reset(),t=setTimeout(e,100)},reset:function(){-1!==t&&clearTimeout(t)}}}class rc{}rc.argumentAxisKey="argumentAxis",rc.commonAnnotationSettingsKey="commonAnnotationSettings",rc.commonAxisSettingsKey="commonAxisSettings",rc.commonSeriesSettingsKey="commonSeriesSettings",rc.colorKey="color",rc.constantLineStyleKey="constantLineStyle",rc.customizeLabelKey="customizeLabel",rc.customizePointKey="customizePoint",rc.customizeTextKey="customizeText",rc.customLabelTextKey="texts",rc.dataSourceKey="dataSource",rc.dataPrepareSettingsKey="dataPrepareSettings",rc.legendKey="legend",rc.seriesKey="series",rc.seriesDataKey="seriesData",rc.seriesPointsKey="points",rc.seriesTemplateKey="seriesTemplate",rc.titleKey="title",rc.tooltipKey="tooltip",rc.visualRangeKey="visualRange",rc.defaultLegendHoverMode="includePoints",rc.defaultSeriesNameField="seriesId",rc.defaultSeriesArgumentField="argument",rc.defaultSeriesValueField="value",rc.defaultOpenValueField="openValue",rc.defaultHighValueField="highValue",rc.defaultLowValueField="lowValue",rc.defaultCloseValueField="closeValue",rc.defaultRangeValue1Field="startValue",rc.defaultRangeValue2Field="endValue",rc.defaultSizeField="size",rc.seriesTypeRangeBar="rangebar",rc.seriesTypeRangeArea="rangearea",rc.seriesTypeBar="bar",rc.seriesTypeDonut="donut",rc.defaultAxisLabelOverlappingBehavior="rotate",rc.defaultAxisLabelRotationAngle=45,rc.defaultAxisLabelFontOpacity=.75,rc.defaultAnnotationType="text",rc.defaultStripLabelAlignment="auto";class oc{convert(e,t=!1){const n=t?this.createDefaultSettings():{};return this.processServerSettings(n,e),n}createDefaultSettings(){return{dataPrepareSettings:{sortingMethod:!1},adaptiveLayout:{width:0,height:0},pathModified:!1,commonSeriesSettings:this.getDefaultCommonSeriesSettings(),commonAnnotationSettings:this.getDefaultAnnotationSettings(),legend:{visible:!1,hoverMode:rc.defaultLegendHoverMode}}}processServerSettings(e,t){e&&(this.processSettingsInCommon(e,t),this.processSpecialSettings(e,t))}processSettingsInCommon(e,t){const n=this.getSpecialProcessingOptionNames();for(const i in t){Object.prototype.hasOwnProperty.call(t,i)&&!n.includes(i)&&this.addOption(e,i,t[i])}}getSpecialProcessingOptionNames(){return[rc.legendKey,rc.tooltipKey,rc.seriesTemplateKey,rc.dataSourceKey,rc.seriesKey,rc.seriesDataKey,rc.titleKey]}isSeriesDeleted(e){var t;return 0===(null===(t=e.series)||void 0===t?void 0:t.length)&&!e[rc.seriesDataKey]}processSpecialSettings(e,t){var n,i;this.processSeriesSettings(e,t.series),this.processSeriesDataIfNeeded(e,t),(null===(n=t.legend)||void 0===n?void 0:n.hoverMode)&&this.addOption(e,rc.legendKey,{hoverMode:null===(i=t.legend)||void 0===i?void 0:i.hoverMode}),void 0!==t.sorted&&this.addOption(e,rc.dataPrepareSettingsKey,{sortingMethod:t.sorted}),void 0!==t[rc.tooltipKey]&&this.addOption(e,rc.tooltipKey,function(e){var t,n;return{enabled:!1,forceEvents:!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled),location:(null===(n=e.tooltip)||void 0===n?void 0:n.location)||void 0}}(t),!0)}processSeriesDataIfNeeded(e,t){this.isSeriesDeleted(t)?e[rc.dataSourceKey]=[]:this.processSeriesData(e,t[rc.seriesDataKey])}getDefaultCommonSeriesSettings(){return{argumentField:rc.defaultSeriesArgumentField,valueField:rc.defaultSeriesValueField}}getDefaultAnnotationSettings(){return{type:rc.defaultAnnotationType}}addOption(e,t,n,i=!1){i||!(void 0!==e[t])||!("object"==typeof n)||n instanceof Array?e[t]=n:Object.assign(e[t],n)}processSeriesSettings(e,t){if(t){const n={nameField:rc.defaultSeriesNameField,customizeSeries:function(e){return t.filter((function(t){return t.seriesId===e}))[0]}};this.addOption(e,rc.seriesTemplateKey,n,!0)}}processSeriesData(e,t){if(!t)return;const n=[];let i=!1,s=!1;for(let e=0;e<t.length;e++){const r=t[e],o=r[rc.defaultSeriesNameField],a=r[rc.seriesPointsKey];null==a||a.forEach((e=>{i||(i=!!e.pointLabel),s||(s=!!e.pointAppearance);const t=this.createWidgetDataitem(o,e);n.push(t)}))}e[rc.dataSourceKey]=n,e[rc.customizeLabelKey]=i?e=>this.createWidgetPointLabelSettings(e):null,e[rc.customizePointKey]=s?e=>e.data.pointAppearance:null}createWidgetDataitem(e,t){const n=Object.assign({},t);return n[rc.defaultSeriesNameField]=e,n}createWidgetPointLabelSettings(e){const t={...e.data.pointLabel},n=t[rc.customLabelTextKey];if(n){delete t[rc.customLabelTextKey];const i=e.series,s=i.type===rc.seriesTypeRangeBar||i.type===rc.seriesTypeRangeArea;t[rc.customizeTextKey]=t=>s&&n.length>1?t.value===e.minValue?n[0]:n[1]:n[0]}return t}}class ac extends oc{getDefaultCommonSeriesSettings(){const e={openValueField:rc.defaultOpenValueField,highValueField:rc.defaultHighValueField,lowValueField:rc.defaultLowValueField,closeValueField:rc.defaultCloseValueField,rangeValue1Field:rc.defaultRangeValue1Field,rangeValue2Field:rc.defaultRangeValue2Field,sizeField:rc.defaultSizeField,type:rc.seriesTypeBar};return Object.assign({},super.getDefaultCommonSeriesSettings(),e)}}class lc extends ac{createDefaultSettings(){const e=super.createDefaultSettings();return e.commonAxisSettings=this.getDefaultCommonAxisSettings(),e.resizePanesOnZoom=!0,e}processSpecialSettings(e,t){var n,i;super.processSpecialSettings(e,t),e.argumentAxis&&(null!==(n=(i=e.argumentAxis).categories)&&void 0!==n||(i.categories=[])),this.processStripSettings(e)}processStripSettings(e){var t,n,i;const s=null!==(n=null===(t=e.argumentAxis)||void 0===t?void 0:t.strips)&&void 0!==n?n:[],r=(null!==(i=e.valueAxis)&&void 0!==i?i:[]).reduce(((e,t)=>{var n;return e.concat(null!==(n=t.strips)&&void 0!==n?n:[])}),[]);s.concat(r).forEach((e=>{const t=e.label;(null==t?void 0:t.horizontalAlignment)===rc.defaultStripLabelAlignment&&(t.horizontalAlignment=void 0),(null==t?void 0:t.verticalAlignment)===rc.defaultStripLabelAlignment&&(t.verticalAlignment=void 0)}))}getDefaultCommonAxisSettings(){return{label:{overlappingBehavior:rc.defaultAxisLabelOverlappingBehavior,rotationAngle:rc.defaultAxisLabelRotationAngle}}}}class Ac extends oc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=rc.seriesTypeDonut,e}createDefaultSettings(){const e=super.createDefaultSettings();return e.innerRadius=0,e}}class dc extends oc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=rc.seriesTypeBar,e}}class cc extends ac{processSpecialChartSettings(e,t){this.processSeriesSettings(e.chart,t.series),this.processSeriesDataIfNeeded(e,t),void 0!==t.sorted&&this.addOption(t,rc.dataPrepareSettingsKey,{sortingMethod:t.sorted})}processSeriesSettings(e,t){super.processSeriesSettings(e,t),delete e.series}processSeriesDataIfNeeded(e,t){super.processSeriesDataIfNeeded(e,t),delete e.chart.seriesData,delete e.customizeLabel,delete e.customizePoint}}class hc{constructor(){}static getInstance(){return hc.instance||(hc.instance=new hc),hc.instance}get palette(){return this.getDefaultClientComponentPalette()}getDefaultClientComponentPalette(){const e=[hc.primaryColorKey,hc.successColorKey,hc.dangerColorKey,hc.warningColorKey,hc.infoColorKey],t=window.getComputedStyle(document.body);return e.map((e=>this.getPaletteColor(e,t)))}getPaletteColor(e,t){return t.getPropertyValue(hc.dxblClientComponentPrefix+e)}}hc.dxblPrefix="--dxbl-",hc.dxblClientComponentPrefix=hc.dxblPrefix+"client-component-palette-",hc.primaryColorKey="primary",hc.successColorKey="success",hc.dangerColorKey="danger",hc.warningColorKey="warning",hc.infoColorKey="info";var uc=function(e,t){return uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},uc(e,t)};function pc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}uc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var mc=function(){return mc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},mc.apply(this,arguments)};function gc(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))}function Cc(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function fc(e,t,n){if(n||2===arguments.length)for(var i,s=0,r=t.length;s<r;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||t)}for(var vc=function(){function e(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return e.prototype.add=function(t,n,i,s){return new e(this.left+t,this.top+n,this.width+i,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var i=Array.from(n).find((function(e){return 0!==e.width}));return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),bc=function(e,t){return vc.fromClientRect(e,t.getBoundingClientRect())},wc=function(e){for(var t=[],n=0,i=e.length;n<i;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t},yc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var i=[],s=-1,r="";++s<n;){var o=e[s];o<=65535?i.push(o):i.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===n||i.length>16384)&&(r+=String.fromCharCode.apply(String,i),i.length=0)}return r},Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ec="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ic=0;Ic<64;Ic++)Ec[Bc.charCodeAt(Ic)]=Ic;for(var Sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Dc=0;Dc<64;Dc++)xc[Sc.charCodeAt(Dc)]=Dc;for(var Fc=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Tc=function(){function e(e,t,n,i,s,r){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Qc=0;Qc<64;Qc++)Uc[Hc.charCodeAt(Qc)]=Qc;var Pc=10,Nc=13,Rc=15,Lc=17,Mc=18,kc=19,Kc=20,Oc=21,_c=22,Vc=24,zc=25,Wc=26,$c=27,Gc=28,qc=30,Yc=32,Xc=33,Jc=34,jc=35,Zc=37,eh=38,th=39,nh=40,ih=42,sh=[9001,65288],rh="",oh="",ah=function(e,t){var n,i,s,r=function(e){var t,n,i,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)n=xc[e.charCodeAt(t)],i=xc[e.charCodeAt(t+1)],s=xc[e.charCodeAt(t+2)],r=xc[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n}(r):new Uint16Array(r),l=Fc(a,12,o[4]/2),A=2===o[5]?Fc(a,(24+o[4])/2):(n=o,i=Math.ceil((24+o[4])/4),n.slice?n.slice(i,s):new Uint32Array(Array.prototype.slice.call(n,i,s)));return new Tc(o[0],o[1],o[2],o[3],l,A)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),lh=[qc,36],Ah=[1,2,3,5],dh=[Pc,8],ch=[$c,Wc],hh=Ah.concat(dh),uh=[eh,th,nh,Jc,jc],ph=[Rc,Nc],mh=function(e,t,n,i){var s=i[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var r=n;r<=i.length;){if((l=i[++r])===t)return!0;if(l!==Pc)break}if(s===Pc)for(r=n;r>0;){var o=i[--r];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var a=n;a<=i.length;){var l;if((l=i[++a])===t)return!0;if(l!==Pc)break}if(o!==Pc)break}return!1},gh=function(e,t){for(var n=e;n>=0;){var i=t[n];if(i!==Pc)return i;n--}return 0},Ch=function(e,t,n,i,s){if(0===n[i])return rh;var r=i-1;if(Array.isArray(s)&&!0===s[r])return rh;var o=r-1,a=r+1,l=t[r],A=o>=0?t[o]:0,d=t[a];if(2===l&&3===d)return rh;if(-1!==Ah.indexOf(l))return"!";if(-1!==Ah.indexOf(d))return rh;if(-1!==dh.indexOf(d))return rh;if(8===gh(r,t))return oh;if(11===ah.get(e[r]))return rh;if((l===Yc||l===Xc)&&11===ah.get(e[a]))return rh;if(7===l||7===d)return rh;if(9===l)return rh;if(-1===[Pc,Nc,Rc].indexOf(l)&&9===d)return rh;if(-1!==[Lc,Mc,kc,Vc,Gc].indexOf(d))return rh;if(gh(r,t)===_c)return rh;if(mh(23,_c,r,t))return rh;if(mh([Lc,Mc],Oc,r,t))return rh;if(mh(12,12,r,t))return rh;if(l===Pc)return oh;if(23===l||23===d)return rh;if(16===d||16===l)return oh;if(-1!==[Nc,Rc,Oc].indexOf(d)||14===l)return rh;if(36===A&&-1!==ph.indexOf(l))return rh;if(l===Gc&&36===d)return rh;if(d===Kc)return rh;if(-1!==lh.indexOf(d)&&l===zc||-1!==lh.indexOf(l)&&d===zc)return rh;if(l===$c&&-1!==[Zc,Yc,Xc].indexOf(d)||-1!==[Zc,Yc,Xc].indexOf(l)&&d===Wc)return rh;if(-1!==lh.indexOf(l)&&-1!==ch.indexOf(d)||-1!==ch.indexOf(l)&&-1!==lh.indexOf(d))return rh;if(-1!==[$c,Wc].indexOf(l)&&(d===zc||-1!==[_c,Rc].indexOf(d)&&t[a+1]===zc)||-1!==[_c,Rc].indexOf(l)&&d===zc||l===zc&&-1!==[zc,Gc,Vc].indexOf(d))return rh;if(-1!==[zc,Gc,Vc,Lc,Mc].indexOf(d))for(var c=r;c>=0;){if((h=t[c])===zc)return rh;if(-1===[Gc,Vc].indexOf(h))break;c--}if(-1!==[$c,Wc].indexOf(d))for(c=-1!==[Lc,Mc].indexOf(l)?o:r;c>=0;){var h;if((h=t[c])===zc)return rh;if(-1===[Gc,Vc].indexOf(h))break;c--}if(eh===l&&-1!==[eh,th,Jc,jc].indexOf(d)||-1!==[th,Jc].indexOf(l)&&-1!==[th,nh].indexOf(d)||-1!==[nh,jc].indexOf(l)&&d===nh)return rh;if(-1!==uh.indexOf(l)&&-1!==[Kc,Wc].indexOf(d)||-1!==uh.indexOf(d)&&l===$c)return rh;if(-1!==lh.indexOf(l)&&-1!==lh.indexOf(d))return rh;if(l===Vc&&-1!==lh.indexOf(d))return rh;if(-1!==lh.concat(zc).indexOf(l)&&d===_c&&-1===sh.indexOf(e[a])||-1!==lh.concat(zc).indexOf(d)&&l===Mc)return rh;if(41===l&&41===d){for(var u=n[r],p=1;u>0&&41===t[--u];)p++;if(p%2!=0)return rh}return l===Yc&&d===Xc?rh:oh},fh=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=function(e,t){void 0===t&&(t="strict");var n=[],i=[],s=[];return e.forEach((function(e,r){var o=ah.get(e);if(o>50?(s.push(!0),o-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return i.push(r),n.push(16);if(4===o||11===o){if(0===r)return i.push(r),n.push(qc);var a=n[r-1];return-1===hh.indexOf(a)?(i.push(i[r-1]),n.push(a)):(i.push(r),n.push(qc))}return i.push(r),31===o?n.push("strict"===t?Oc:Zc):o===ih||29===o?n.push(qc):43===o?n.push(e>=131072&&e<=196605||e>=196608&&e<=262141?Zc:qc):void n.push(o)})),[i,n,s]}(e,t.lineBreak),i=n[0],s=n[1],r=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[zc,qc,ih].indexOf(e)?Zc:e})));var o="keep-all"===t.wordBreak?r.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[i,s,o]},vh=function(){function e(e,t,n,i){this.codePoints=e,this.required="!"===t,this.start=n,this.end=i}return e.prototype.slice=function(){return yc.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),bh=45,wh=43,yh=-1,Bh=function(e){return e>=48&&e<=57},Eh=function(e){return Bh(e)||e>=65&&e<=70||e>=97&&e<=102},Ih=function(e){return 10===e||9===e||32===e},Sh=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},xh=function(e){return Sh(e)||Bh(e)||e===bh},Dh=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},Fh=function(e,t){return 92===e&&10!==t},Th=function(e,t,n){return e===bh?Sh(t)||Fh(t,n):!!Sh(e)||!(92!==e||!Fh(e,t))},Hh=function(e,t,n){return e===wh||e===bh?!!Bh(t)||46===t&&Bh(n):Bh(46===e?t:e)},Uh=function(e){var t=0,n=1;e[t]!==wh&&e[t]!==bh||(e[t]===bh&&(n=-1),t++);for(var i=[];Bh(e[t]);)i.push(e[t++]);var s=i.length?parseInt(yc.apply(void 0,i),10):0;46===e[t]&&t++;for(var r=[];Bh(e[t]);)r.push(e[t++]);var o=r.length,a=o?parseInt(yc.apply(void 0,r),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;e[t]!==wh&&e[t]!==bh||(e[t]===bh&&(l=-1),t++);for(var A=[];Bh(e[t]);)A.push(e[t++]);var d=A.length?parseInt(yc.apply(void 0,A),10):0;return n*(s+a*Math.pow(10,-o))*Math.pow(10,l*d)},Qh={type:2},Ph={type:3},Nh={type:4},Rh={type:13},Lh={type:8},Mh={type:21},kh={type:9},Kh={type:10},Oh={type:11},_h={type:12},Vh={type:14},zh={type:23},Wh={type:1},$h={type:25},Gh={type:24},qh={type:26},Yh={type:27},Xh={type:28},Jh={type:29},jh={type:31},Zh={type:32},eu=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(wc(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Zh;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(xh(t)||Fh(n,i)){var s=Th(t,n,i)?2:1;return{type:5,value:this.consumeName(),flags:s}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Rh;break;case 39:return this.consumeStringToken(39);case 40:return Qh;case 41:return Ph;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Vh;break;case wh:if(Hh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return Nh;case bh:var r=e,o=this.peekCodePoint(0),a=this.peekCodePoint(1);if(Hh(r,o,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Th(r,o,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===bh&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),Gh;break;case 46:if(Hh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint()))return this.consumeToken();if(l===yh)return this.consumeToken()}break;case 58:return qh;case 59:return Yh;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===bh&&this.peekCodePoint(2)===bh)return this.consumeCodePoint(),this.consumeCodePoint(),$h;break;case 64:var A=this.peekCodePoint(0),d=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Th(A,d,c))return{type:7,value:this.consumeName()};break;case 91:return Xh;case 92:if(Fh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Jh;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Lh;break;case 123:return Oh;case 125:return _h;case 117:case 85:var h=this.peekCodePoint(0),u=this.peekCodePoint(1);return h!==wh||!Eh(u)&&63!==u||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),kh;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Mh;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Kh;break;case yh:return Zh}return Ih(e)?(this.consumeWhiteSpace(),jh):Bh(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Sh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:yc(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Eh(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(yc.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(yc.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var i=parseInt(yc.apply(void 0,e),16);if(this.peekCodePoint(0)===bh&&Eh(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];Eh(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:i,end:parseInt(yc.apply(void 0,s),16)}}return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===yh)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===yh||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),zh)}for(;;){var i=this.consumeCodePoint();if(i===yh||41===i)return{type:22,value:yc.apply(void 0,e)};if(Ih(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===yh||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:yc.apply(void 0,e)}):(this.consumeBadUrlRemnants(),zh);if(34===i||39===i||40===i||Dh(i))return this.consumeBadUrlRemnants(),zh;if(92===i){if(!Fh(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),zh;e.push(this.consumeEscapedCodePoint())}else e.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;Ih(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===yh)return;Fh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var n=Math.min(5e4,e);t+=yc.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var i=this._value[n];if(i===yh||void 0===i||i===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(10===i)return this._value.splice(0,n),Wh;if(92===i){var s=this._value[n+1];s!==yh&&void 0!==s&&(10===s?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Fh(i,s)&&(t+=this.consumeStringSlice(n),t+=yc(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=4,n=this.peekCodePoint(0);for(n!==wh&&n!==bh||e.push(this.consumeCodePoint());Bh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(46===n&&Bh(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;Bh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((69===n||101===n)&&((i===wh||i===bh)&&Bh(s)||Bh(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;Bh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Uh(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),r=this.peekCodePoint(2);return Th(i,s,r)?{type:15,number:t,flags:n,unit:this.consumeName()}:37===i?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Eh(e)){for(var t=yc(e);Eh(this.peekCodePoint(0))&&t.length<6;)t+=yc(this.consumeCodePoint());Ih(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||function(e){return e>=55296&&e<=57343}(n)||n>1114111?65533:n}return e===yh?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(xh(t))e+=yc(t);else{if(!Fh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=yc(this.consumeEscapedCodePoint())}}},e}(),tu=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new eu;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||du(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?Zh:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),nu=function(e){return 15===e.type},iu=function(e){return 17===e.type},su=function(e){return 20===e.type},ru=function(e){return 0===e.type},ou=function(e,t){return su(e)&&e.value===t},au=function(e){return 31!==e.type},lu=function(e){return 31!==e.type&&4!==e.type},Au=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},du=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},cu=function(e){return 17===e.type||15===e.type},hu=function(e){return 16===e.type||cu(e)},uu=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},pu={type:17,number:0,flags:4},mu={type:16,number:50,flags:4},gu={type:16,number:100,flags:4},Cu=function(e,t,n){var i=e[0],s=e[1];return[fu(i,t),fu(void 0!==s?s:i,n)]},fu=function(e,t){if(16===e.type)return e.number/100*t;if(nu(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},vu="grad",bu="turn",wu=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case vu:return Math.PI/200*t.number;case"rad":return t.number;case bu:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},yu=function(e){return 15===e.type&&("deg"===e.unit||e.unit===vu||"rad"===e.unit||e.unit===bu)},Bu=function(e){switch(e.filter(su).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[pu,pu];case"to top":case"bottom":return Eu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[pu,gu];case"to right":case"left":return Eu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[gu,gu];case"to bottom":case"top":return Eu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[gu,pu];case"to left":case"right":return Eu(270)}return 0},Eu=function(e){return Math.PI*e/180},Iu=function(e,t){if(18===t.type){var n=Qu[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var i=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);return Du(parseInt(i+i,16),parseInt(s+s,16),parseInt(r+r,16),1)}if(4===t.value.length){i=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);var o=t.value.substring(3,4);return Du(parseInt(i+i,16),parseInt(s+s,16),parseInt(r+r,16),parseInt(o+o,16)/255)}if(6===t.value.length){i=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6);return Du(parseInt(i,16),parseInt(s,16),parseInt(r,16),1)}if(8===t.value.length){i=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6),o=t.value.substring(6,8);return Du(parseInt(i,16),parseInt(s,16),parseInt(r,16),parseInt(o,16)/255)}}if(20===t.type){var a=Nu[t.value.toUpperCase()];if(void 0!==a)return a}return Nu.TRANSPARENT},Su=function(e){return 0==(255&e)},xu=function(e){var t=255&e,n=255&e>>8,i=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+i+","+n+","+t/255+")":"rgb("+s+","+i+","+n+")"},Du=function(e,t,n,i){return(e<<24|t<<16|n<<8|Math.round(255*i)<<0)>>>0},Fu=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},Tu=function(e,t){var n=t.filter(lu);if(3===n.length){var i=n.map(Fu);return Du(i[0],i[1],i[2],1)}if(4===n.length){var s=n.map(Fu);return Du(s[0],s[1],s[2],s[3])}return 0};function Hu(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var Uu=function(e,t){var n=t.filter(lu),i=n[0],s=n[1],r=n[2],o=n[3],a=(17===i.type?Eu(i.number):wu(e,i))/(2*Math.PI),l=hu(s)?s.number/100:0,A=hu(r)?r.number/100:0,d=void 0!==o&&hu(o)?fu(o,1):1;if(0===l)return Du(255*A,255*A,255*A,1);var c=A<=.5?A*(l+1):A+l-A*l,h=2*A-c,u=Hu(h,c,a+1/3),p=Hu(h,c,a),m=Hu(h,c,a-1/3);return Du(255*u,255*p,255*m,d)},Qu={hsl:Uu,hsla:Uu,rgb:Tu,rgba:Tu},Pu=function(e,t){return Iu(e,tu.create(t).parseComponentValue())},Nu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ru={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(su(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Lu={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mu=function(e,t){var n=Iu(e,t[0]),i=t[1];return i&&hu(i)?{color:n,stop:i}:{color:n,stop:null}},ku=function(e,t){var n=e[0],i=e[e.length-1];null===n.stop&&(n.stop=pu),null===i.stop&&(i.stop=gu);for(var s=[],r=0,o=0;o<e.length;o++){var a=e[o].stop;if(null!==a){var l=fu(a,t);s.push(l>r?l:r),r=l}else s.push(null)}var A=null;for(o=0;o<s.length;o++){var d=s[o];if(null===d)null===A&&(A=o);else if(null!==A){for(var c=o-A,h=(d-s[A-1])/(c+1),u=1;u<=c;u++)s[A+u-1]=h*u;A=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}}))},Ku=function(e,t,n){var i="number"==typeof e?e:function(e,t,n){var i=t/2,s=n/2,r=fu(e[0],t)-i,o=s-fu(e[1],n);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)}(e,t,n),s=Math.abs(t*Math.sin(i))+Math.abs(n*Math.cos(i)),r=t/2,o=n/2,a=s/2,l=Math.sin(i-Math.PI/2)*a,A=Math.cos(i-Math.PI/2)*a;return[s,r-A,r+A,o-l,o+l]},Ou=function(e,t){return Math.sqrt(e*e+t*t)},_u=function(e,t,n,i,s){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var r=Ou(n-t[0],i-t[1]);return(s?r<e.optimumDistance:r>e.optimumDistance)?{optimumCorner:t,optimumDistance:r}:e}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Vu=function(e,t){var n=Eu(180),i=[];return Au(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(n=Bu(t));if(yu(r))return void(n=(wu(e,r)+Eu(270))%Eu(360))}var o=Mu(e,t);i.push(o)})),{angle:n,stops:i,type:1}},zu="closest-side",Wu="farthest-side",$u="closest-corner",Gu="farthest-corner",qu="circle",Yu="ellipse",Xu="cover",Ju="contain",ju=function(e,t){var n=0,i=3,s=[],r=[];return Au(t).forEach((function(t,o){var a=!0;if(0===o?a=t.reduce((function(e,t){if(su(t))switch(t.value){case"center":return r.push(mu),!1;case"top":case"left":return r.push(pu),!1;case"right":case"bottom":return r.push(gu),!1}else if(hu(t)||cu(t))return r.push(t),!1;return e}),a):1===o&&(a=t.reduce((function(e,t){if(su(t))switch(t.value){case qu:return n=0,!1;case Yu:return n=1,!1;case Ju:case zu:return i=0,!1;case Wu:return i=1,!1;case $u:return i=2,!1;case Xu:case Gu:return i=3,!1}else if(cu(t)||hu(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e}),a)),a){var l=Mu(e,t);s.push(l)}})),{size:i,shape:n,stops:s,position:r,type:2}},Zu=function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var i=tp[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)};var ep,tp={"linear-gradient":function(e,t){var n=Eu(180),i=[];return Au(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&"to"===r.value)return void(n=Bu(t));if(yu(r))return void(n=wu(e,r))}var o=Mu(e,t);i.push(o)})),{angle:n,stops:i,type:1}},"-moz-linear-gradient":Vu,"-ms-linear-gradient":Vu,"-o-linear-gradient":Vu,"-webkit-linear-gradient":Vu,"radial-gradient":function(e,t){var n=0,i=3,s=[],r=[];return Au(t).forEach((function(t,o){var a=!0;if(0===o){var l=!1;a=t.reduce((function(e,t){if(l)if(su(t))switch(t.value){case"center":return r.push(mu),e;case"top":case"left":return r.push(pu),e;case"right":case"bottom":return r.push(gu),e}else(hu(t)||cu(t))&&r.push(t);else if(su(t))switch(t.value){case qu:return n=0,!1;case Yu:return n=1,!1;case"at":return l=!0,!1;case zu:return i=0,!1;case Xu:case Wu:return i=1,!1;case Ju:case $u:return i=2,!1;case Gu:return i=3,!1}else if(cu(t)||hu(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e}),a)}if(a){var A=Mu(e,t);s.push(A)}})),{size:i,shape:n,stops:s,position:r,type:2}},"-moz-radial-gradient":ju,"-ms-radial-gradient":ju,"-o-radial-gradient":ju,"-webkit-radial-gradient":ju,"-webkit-gradient":function(e,t){var n=Eu(180),i=[],s=1;return Au(t).forEach((function(t,n){var r=t[0];if(0===n){if(su(r)&&"linear"===r.value)return void(s=1);if(su(r)&&"radial"===r.value)return void(s=2)}if(18===r.type)if("from"===r.name){var o=Iu(e,r.values[0]);i.push({stop:pu,color:o})}else if("to"===r.name){o=Iu(e,r.values[0]);i.push({stop:gu,color:o})}else if("color-stop"===r.name){var a=r.values.filter(lu);if(2===a.length){o=Iu(e,a[1]);var l=a[0];iu(l)&&i.push({stop:{type:16,number:100*l.number,flags:l.flags},color:o})}}})),1===s?{angle:(n+Eu(180))%Eu(360),stops:i,type:s}:{size:3,shape:0,stops:i,position:[],type:s}}},np={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return lu(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!tp[e.name])}(e)})).map((function(t){return Zu(e,t)}))}},ip={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(su(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},sp={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Au(t).map((function(e){return e.filter(hu)})).map(uu)}},rp={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Au(t).map((function(e){return e.filter(su).map((function(e){return e.value})).join(" ")})).map(op)}},op=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(ep||(ep={}));var ap,lp={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Au(t).map((function(e){return e.filter(Ap)}))}},Ap=function(e){return su(e)||hu(e)},dp=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cp=dp("top"),hp=dp("right"),up=dp("bottom"),pp=dp("left"),mp=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return uu(t.filter(hu))}}},gp=mp("top-left"),Cp=mp("top-right"),fp=mp("bottom-right"),vp=mp("bottom-left"),bp=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wp=bp("top"),yp=bp("right"),Bp=bp("bottom"),Ep=bp("left"),Ip=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return nu(t)?t.number:0}}},Sp=Ip("top"),xp=Ip("right"),Dp=Ip("bottom"),Fp=Ip("left"),Tp={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Hp={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},Up={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(su).reduce((function(e,t){return e|Qp(t.value)}),0)}},Qp=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Pp={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Np={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(ap||(ap={}));var Rp,Lp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?ap.STRICT:ap.NORMAL}},Mp={name:"line-height",initialValue:"normal",prefix:!1,type:4},kp=function(e,t){return su(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:hu(e)?fu(e,t):t},Kp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Zu(e,t)}},Op={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},_p={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Vp=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},zp=Vp("top"),Wp=Vp("right"),$p=Vp("bottom"),Gp=Vp("left"),qp={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(su).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Yp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Xp=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Jp=Xp("top"),jp=Xp("right"),Zp=Xp("bottom"),em=Xp("left"),tm={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},nm={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},im={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&ou(t[0],"none")?[]:Au(t).map((function(t){for(var n={color:Nu.TRANSPARENT,offsetX:pu,offsetY:pu,blur:pu},i=0,s=0;s<t.length;s++){var r=t[s];cu(r)?(0===i?n.offsetX=r:1===i?n.offsetY=r:n.blur=r,i++):n.color=Iu(e,r)}return n}))}},sm={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rm={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=om[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},om={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 16===t.length?[t[0],t[1],t[4],t[5],t[12],t[13]]:null}},am={type:16,number:50,flags:4},lm=[am,am],Am={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(hu);return 2!==n.length?lm:[n[0],n[1]]}},dm={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(Rp||(Rp={}));for(var cm={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Rp.BREAK_ALL;case"keep-all":return Rp.KEEP_ALL;default:return Rp.NORMAL}}},hm={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(iu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},um=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},pm={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return iu(t)?t.number:1}},mm={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gm={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(su).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},Cm={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],i=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:i.push(n.join(" ")),n.length=0}})),n.length&&i.push(n.join(" ")),i.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},fm={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},vm={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return iu(t)?t.number:su(t)&&"bold"===t.value?700:400}},bm={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(su).map((function(e){return e.value}))}},wm={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ym=function(e,t){return 0!=(e&t)},Bm={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},Em={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var i=[],s=t.filter(au),r=0;r<s.length;r++){var o=s[r],a=s[r+1];if(20===o.type){var l=a&&iu(a)?a.number:1;i.push({counter:o.value,increment:l})}}return i}},Im={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],i=t.filter(au),s=0;s<i.length;s++){var r=i[s],o=i[s+1];if(su(r)&&"none"!==r.value){var a=o&&iu(o)?o.number:0;n.push({counter:r.value,reset:a})}}return n}},Sm={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(nu).map((function(t){return um(e,t)}))}},xm={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var i=[],s=t.filter(ru);if(s.length%2!=0)return null;for(var r=0;r<s.length;r+=2){i.push({open:s[r].value,close:s[r+1].value})}return i}},Dm=function(e,t,n){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?n?i.open:i.close:""},Fm={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&ou(t[0],"none")?[]:Au(t).map((function(t){for(var n={color:255,offsetX:pu,offsetY:pu,blur:pu,spread:pu,inset:!1},i=0,s=0;s<t.length;s++){var r=t[s];ou(r,"inset")?n.inset=!0:cu(r)?(0===i?n.offsetX=r:1===i?n.offsetY=r:2===i?n.blur=r:n.spread=r,i++):n.color=Iu(e,r)}return n}))}},Tm={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[];return t.filter(su).forEach((function(e){switch(e.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}})),[0,1,2].forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n}},Hm={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Um={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return nu(t)?t.number:0}},Qm=function(){function e(e,t){var n,i;this.animationDuration=Rm(e,Sm,t.animationDuration),this.backgroundClip=Rm(e,Ru,t.backgroundClip),this.backgroundColor=Rm(e,Lu,t.backgroundColor),this.backgroundImage=Rm(e,np,t.backgroundImage),this.backgroundOrigin=Rm(e,ip,t.backgroundOrigin),this.backgroundPosition=Rm(e,sp,t.backgroundPosition),this.backgroundRepeat=Rm(e,rp,t.backgroundRepeat),this.backgroundSize=Rm(e,lp,t.backgroundSize),this.borderTopColor=Rm(e,cp,t.borderTopColor),this.borderRightColor=Rm(e,hp,t.borderRightColor),this.borderBottomColor=Rm(e,up,t.borderBottomColor),this.borderLeftColor=Rm(e,pp,t.borderLeftColor),this.borderTopLeftRadius=Rm(e,gp,t.borderTopLeftRadius),this.borderTopRightRadius=Rm(e,Cp,t.borderTopRightRadius),this.borderBottomRightRadius=Rm(e,fp,t.borderBottomRightRadius),this.borderBottomLeftRadius=Rm(e,vp,t.borderBottomLeftRadius),this.borderTopStyle=Rm(e,wp,t.borderTopStyle),this.borderRightStyle=Rm(e,yp,t.borderRightStyle),this.borderBottomStyle=Rm(e,Bp,t.borderBottomStyle),this.borderLeftStyle=Rm(e,Ep,t.borderLeftStyle),this.borderTopWidth=Rm(e,Sp,t.borderTopWidth),this.borderRightWidth=Rm(e,xp,t.borderRightWidth),this.borderBottomWidth=Rm(e,Dp,t.borderBottomWidth),this.borderLeftWidth=Rm(e,Fp,t.borderLeftWidth),this.boxShadow=Rm(e,Fm,t.boxShadow),this.color=Rm(e,Tp,t.color),this.direction=Rm(e,Hp,t.direction),this.display=Rm(e,Up,t.display),this.float=Rm(e,Pp,t.cssFloat),this.fontFamily=Rm(e,Cm,t.fontFamily),this.fontSize=Rm(e,fm,t.fontSize),this.fontStyle=Rm(e,wm,t.fontStyle),this.fontVariant=Rm(e,bm,t.fontVariant),this.fontWeight=Rm(e,vm,t.fontWeight),this.letterSpacing=Rm(e,Np,t.letterSpacing),this.lineBreak=Rm(e,Lp,t.lineBreak),this.lineHeight=Rm(e,Mp,t.lineHeight),this.listStyleImage=Rm(e,Kp,t.listStyleImage),this.listStylePosition=Rm(e,Op,t.listStylePosition),this.listStyleType=Rm(e,_p,t.listStyleType),this.marginTop=Rm(e,zp,t.marginTop),this.marginRight=Rm(e,Wp,t.marginRight),this.marginBottom=Rm(e,$p,t.marginBottom),this.marginLeft=Rm(e,Gp,t.marginLeft),this.opacity=Rm(e,pm,t.opacity);var s=Rm(e,qp,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Rm(e,Yp,t.overflowWrap),this.paddingTop=Rm(e,Jp,t.paddingTop),this.paddingRight=Rm(e,jp,t.paddingRight),this.paddingBottom=Rm(e,Zp,t.paddingBottom),this.paddingLeft=Rm(e,em,t.paddingLeft),this.paintOrder=Rm(e,Tm,t.paintOrder),this.position=Rm(e,nm,t.position),this.textAlign=Rm(e,tm,t.textAlign),this.textDecorationColor=Rm(e,mm,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=Rm(e,gm,null!==(i=t.textDecorationLine)&&void 0!==i?i:t.textDecoration),this.textShadow=Rm(e,im,t.textShadow),this.textTransform=Rm(e,sm,t.textTransform),this.transform=Rm(e,rm,t.transform),this.transformOrigin=Rm(e,Am,t.transformOrigin),this.visibility=Rm(e,dm,t.visibility),this.webkitTextStrokeColor=Rm(e,Hm,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Rm(e,Um,t.webkitTextStrokeWidth),this.wordBreak=Rm(e,cm,t.wordBreak),this.zIndex=Rm(e,hm,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return Su(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return ym(this.display,4)||ym(this.display,33554432)||ym(this.display,268435456)||ym(this.display,536870912)||ym(this.display,67108864)||ym(this.display,134217728)},e}(),Pm=function(e,t){this.content=Rm(e,Bm,t.content),this.quotes=Rm(e,xm,t.quotes)},Nm=function(e,t){this.counterIncrement=Rm(e,Em,t.counterIncrement),this.counterReset=Rm(e,Im,t.counterReset)},Rm=function(e,t,n){var i=new eu,s=null!=n?n.toString():t.initialValue;i.write(s);var r=new tu(i.read());switch(t.type){case 2:var o=r.parseComponentValue();return t.parse(e,su(o)?o.value:t.initialValue);case 0:return t.parse(e,r.parseComponentValue());case 1:return t.parse(e,r.parseComponentValues());case 4:return r.parseComponentValue();case 3:switch(t.format){case"angle":return wu(e,r.parseComponentValue());case"color":return Iu(e,r.parseComponentValue());case"image":return Zu(e,r.parseComponentValue());case"length":var a=r.parseComponentValue();return cu(a)?a:pu;case"length-percentage":var l=r.parseComponentValue();return hu(l)?l:pu;case"time":return um(e,r.parseComponentValue())}}},Lm=function(e,t){var n=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===n||t===n},Mm=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Lm(t,3),this.styles=new Qm(e,window.getComputedStyle(t,null)),_g(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=bc(this.context,t),Lm(t,4)&&(this.flags|=16)},km="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Km="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Om=0;Om<64;Om++)Km[km.charCodeAt(Om)]=Om;for(var _m=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Vm=function(){function e(e,t,n,i,s,r){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wm="undefined"==typeof Uint8Array?[]:new Uint8Array(256),$m=0;$m<64;$m++)Wm[zm.charCodeAt($m)]=$m;var Gm,qm=8,Ym=9,Xm=11,Jm=12,jm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var i=[],s=-1,r="";++s<n;){var o=e[s];o<=65535?i.push(o):i.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===n||i.length>16384)&&(r+=String.fromCharCode.apply(String,i),i.length=0)}return r},Zm=function(e,t){var n,i,s,r=function(e){var t,n,i,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)n=Km[e.charCodeAt(t)],i=Km[e.charCodeAt(t+1)],s=Km[e.charCodeAt(t+2)],r=Km[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n}(r):new Uint16Array(r),l=_m(a,12,o[4]/2),A=2===o[5]?_m(a,(24+o[4])/2):(n=o,i=Math.ceil((24+o[4])/4),n.slice?n.slice(i,s):new Uint32Array(Array.prototype.slice.call(n,i,s)));return new Vm(o[0],o[1],o[2],o[3],l,A)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),eg="",tg=function(e){return Zm.get(e)},ng=function(e,t,n){var i=n-2,s=t[i],r=t[n-1],o=t[n];if(2===r&&3===o)return eg;if(2===r||3===r||4===r)return"";if(2===o||3===o||4===o)return"";if(r===qm&&-1!==[qm,Ym,Xm,Jm].indexOf(o))return eg;if(!(r!==Xm&&r!==Ym||o!==Ym&&10!==o))return eg;if((r===Jm||10===r)&&10===o)return eg;if(13===o||5===o)return eg;if(7===o)return eg;if(1===r)return eg;if(13===r&&14===o){for(;5===s;)s=t[--i];if(14===s)return eg}if(15===r&&15===o){for(var a=0;15===s;)a++,s=t[--i];if(a%2==0)return eg}return""},ig=function(e){var t=function(e){for(var t=[],n=0,i=e.length;n<i;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t}(e),n=t.length,i=0,s=0,r=t.map(tg);return{next:function(){if(i>=n)return{done:!0,value:null};for(var e=eg;i<n&&(e=ng(0,r,++i))===eg;);if(e!==eg||i===n){var o=jm.apply(null,t.slice(s,i));return s=i,{value:o,done:!1}}return{done:!0,value:null}}}},sg=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},rg=function(e,t,n,i,s){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",i.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},og=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){return t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},ag={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(e.body.removeChild(n),123===s)return!0}}return!1}(document);return Object.defineProperty(ag,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ag.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var i=t.firstChild,s=wc(i.data).map((function(e){return yc(e)})),r=0,o={},a=s.every((function(e,t){n.setStart(i,r),n.setEnd(i,r+e.length);var s=n.getBoundingClientRect();r+=e.length;var a=s.x>o.x||s.y>o.y;return o=s,0===t||a}));return e.body.removeChild(t),a}(document);return Object.defineProperty(ag,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),i=n.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),n.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(ag,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,n,n);var s=new Image,r=t.toDataURL();s.src=r;var o=rg(n,n,0,0,s);return i.fillStyle="red",i.fillRect(0,0,n,n),og(o).then((function(t){i.drawImage(t,0,0);var s=i.getImageData(0,0,n,n).data;i.fillStyle="red",i.fillRect(0,0,n,n);var o=e.createElement("div");return o.style.backgroundImage="url("+r+")",o.style.height=n+"px",sg(s)?og(rg(n,n,0,0,o)):Promise.reject(!1)})).then((function(e){return i.drawImage(e,0,0),sg(i.getImageData(0,0,n,n).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(ag,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(ag,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(ag,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ag,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(ag,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},lg=function(e,t){this.text=e,this.bounds=t},Ag=function(e,t){var n=t.ownerDocument;if(n){var i=n.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(i,t);var r=bc(e,i);return i.firstChild&&s.replaceChild(i.firstChild,i),r}}return vc.EMPTY},dg=function(e,t,n){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var s=i.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},cg=function(e){if(ag.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,n=ig(e),i=[];!(t=n.next()).done;)t.value&&i.push(t.value.slice());return i}(e)},hg=function(e,t){return 0!==t.letterSpacing?cg(e):function(e,t){if(ag.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return pg(e,t)}(e,t)},ug=[32,160,4961,65792,65793,4153,4241],pg=function(e,t){for(var n,i=function(e,t){var n=wc(e),i=fh(n,t),s=i[0],r=i[1],o=i[2],a=n.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var e=rh;A<a&&(e=Ch(n,r,s,++A,o))===rh;);if(e!==rh||A===a){var t=new vh(n,e,l,A);return l=A,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],r=function(){if(n.value){var e=n.value.slice(),t=wc(e),i="";t.forEach((function(e){-1===ug.indexOf(e)?i+=yc(e):(i.length&&s.push(i),s.push(yc(e)),i="")})),i.length&&s.push(i)}};!(n=i.next()).done;)r();return s},mg=function(e,t,n){this.text=gg(t.data,n.textTransform),this.textBounds=function(e,t,n,i){var s=hg(t,n),r=[],o=0;return s.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ag.SUPPORT_RANGE_BOUNDS){var s=dg(i,o,t.length).getClientRects();if(s.length>1){var a=cg(t),l=0;a.forEach((function(t){r.push(new lg(t,vc.fromDOMRectList(e,dg(i,l+o,t.length).getClientRects()))),l+=t.length}))}else r.push(new lg(t,vc.fromDOMRectList(e,s)))}else{var A=i.splitText(t.length);r.push(new lg(t,Ag(e,i))),i=A}else ag.SUPPORT_RANGE_BOUNDS||(i=i.splitText(t.length));o+=t.length})),r}(e,this.text,n,t)},gg=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Cg,fg);case 2:return e.toUpperCase();default:return e}},Cg=/(^|\s|:|-|\(|\))([a-z])/g,fg=function(e,t,n){return e.length>0?t+n.toUpperCase():e},vg=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return pc(t,e),t}(Mm),bg=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return pc(t,e),t}(Mm),wg=function(e){function t(t,n){var i=e.call(this,t,n)||this,s=new XMLSerializer,r=bc(t,n);return n.setAttribute("width",r.width+"px"),n.setAttribute("height",r.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return pc(t,e),t}(Mm),yg=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.value=n.value,i}return pc(t,e),t}(Mm),Bg=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.start=n.start,i.reversed="boolean"==typeof n.reversed&&!0===n.reversed,i}return pc(t,e),t}(Mm),Eg=[{type:15,flags:0,unit:"px",number:3}],Ig=[{type:16,flags:0,number:50}],Sg="checkbox",xg="radio",Dg="password",Fg=707406591,Tg=function(e){function t(t,n){var i,s,r,o=e.call(this,t,n)||this;switch(o.type=n.type.toLowerCase(),o.checked=n.checked,o.value=0===(s=(i=n).type===Dg?new Array(i.value.length+1).join(""):i.value).length?i.placeholder||"":s,o.type!==Sg&&o.type!==xg||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(r=o.bounds).width>r.height?new vc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new vc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),o.type){case Sg:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Eg;break;case xg:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Ig}return o}return pc(t,e),t}(Mm),Hg=function(e){function t(t,n){var i=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return pc(t,e),t}(Mm),Ug=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.value=n.value,i}return pc(t,e),t}(Mm),Qg=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=Lg(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Pu(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Nu.TRANSPARENT,r=n.contentWindow.document.body?Pu(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Nu.TRANSPARENT;i.backgroundColor=Su(s)?Su(r)?i.styles.backgroundColor:r:s}}catch(e){}return i}return pc(t,e),t}(Mm),Pg=["OL","UL","MENU"],Ng=function(e,t,n,i){for(var s=t.firstChild,r=void 0;s;s=r)if(r=s.nextSibling,Kg(s)&&s.data.trim().length>0)n.textNodes.push(new mg(e,s,n.styles));else if(Og(s))if(nC(s)&&s.assignedNodes)s.assignedNodes().forEach((function(t){return Ng(e,t,n,i)}));else{var o=Rg(e,s);o.styles.isVisible()&&(Mg(s,o,i)?o.flags|=4:kg(o.styles)&&(o.flags|=2),-1!==Pg.indexOf(s.tagName)&&(o.flags|=8),n.elements.push(o),s.shadowRoot?Ng(e,s.shadowRoot,o,i):eC(s)||Gg(s)||tC(s)||Ng(e,s,o,i))}},Rg=function(e,t){return Jg(t)?new vg(e,t):Yg(t)?new bg(e,t):Gg(t)?new wg(e,t):zg(t)?new yg(e,t):Wg(t)?new Bg(e,t):$g(t)?new Tg(e,t):tC(t)?new Hg(e,t):eC(t)?new Ug(e,t):jg(t)?new Qg(e,t):new Mm(e,t)},Lg=function(e,t){var n=Rg(e,t);return n.flags|=4,Ng(e,t,n,n),n},Mg=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||qg(e)&&n.styles.isTransparent()},kg=function(e){return e.isPositioned()||e.isFloating()},Kg=function(e){return e.nodeType===Node.TEXT_NODE},Og=function(e){return e.nodeType===Node.ELEMENT_NODE},_g=function(e){return Og(e)&&void 0!==e.style&&!Vg(e)},Vg=function(e){return"object"==typeof e.className},zg=function(e){return"LI"===e.tagName},Wg=function(e){return"OL"===e.tagName},$g=function(e){return"INPUT"===e.tagName},Gg=function(e){return"svg"===e.tagName},qg=function(e){return"BODY"===e.tagName},Yg=function(e){return"CANVAS"===e.tagName},Xg=function(e){return"VIDEO"===e.tagName},Jg=function(e){return"IMG"===e.tagName},jg=function(e){return"IFRAME"===e.tagName},Zg=function(e){return"STYLE"===e.tagName},eC=function(e){return"TEXTAREA"===e.tagName},tC=function(e){return"SELECT"===e.tagName},nC=function(e){return"SLOT"===e.tagName},iC=function(e){return e.tagName.indexOf("-")>0},sC=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,i=e.counterReset,s=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var r=[];return s&&i.forEach((function(e){var n=t.counters[e.counter];r.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),r},e}(),rC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},oC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},AC=function(e,t,n,i,s,r){return e<t||e>n?fC(e,s,r.length>0):i.integers.reduce((function(t,n,s){for(;e>=n;)e-=n,t+=i.values[s];return t}),"")+r},dC=function(e,t,n,i){var s="";do{n||e--,s=i(e)+s,e/=t}while(e*t>=t);return s},cC=function(e,t,n,i,s){var r=n-t+1;return(e<0?"-":"")+(dC(Math.abs(e),r,i,(function(e){return yc(Math.floor(e%r)+t)}))+s)},hC=function(e,t,n){void 0===n&&(n=". ");var i=t.length;return dC(Math.abs(e),i,!1,(function(e){return t[Math.floor(e%i)]}))+n},uC=function(e,t,n,i,s,r){if(e<-9999||e>9999)return fC(e,4,s.length>0);var o=Math.abs(e),a=s;if(0===o)return t[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;0===A&&ym(r,1)&&""!==a?a=t[A]+a:A>1||1===A&&0===l||1===A&&1===l&&ym(r,2)||1===A&&1===l&&ym(r,4)&&e>100||1===A&&l>1&&ym(r,8)?a=t[A]+(l>0?n[l-1]:"")+a:1===A&&l>0&&(a=n[l-1]+a),o=Math.floor(o/10)}return(e<0?i:"")+a},pC="",mC="",gC="",CC="",fC=function(e,t,n){var i=n?". ":"",s=n?"":"",r=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=cC(e,48,57,!0,i);return a.length<4?"0"+a:a;case 4:return hC(e,"",s);case 6:return AC(e,1,3999,rC,3,i).toLowerCase();case 7:return AC(e,1,3999,rC,3,i);case 8:return cC(e,945,969,!1,i);case 9:return cC(e,97,122,!1,i);case 10:return cC(e,65,90,!1,i);case 11:return cC(e,1632,1641,!0,i);case 12:case 49:return AC(e,1,9999,oC,3,i);case 35:return AC(e,1,9999,oC,3,i).toLowerCase();case 13:return cC(e,2534,2543,!0,i);case 14:case 30:return cC(e,6112,6121,!0,i);case 15:return hC(e,"",s);case 16:return hC(e,"",s);case 17:case 48:return uC(e,"",pC,"",s,14);case 47:return uC(e,"",mC,"",s,15);case 42:return uC(e,"",pC,"",s,14);case 41:return uC(e,"",mC,"",s,15);case 26:return uC(e,"","",gC,s,0);case 25:return uC(e,"","",gC,s,7);case 31:return uC(e,"","",CC,r,7);case 33:return uC(e,"","",CC,r,0);case 32:return uC(e,"","",CC,r,7);case 18:return cC(e,2406,2415,!0,i);case 20:return AC(e,1,19999,lC,3,i);case 21:return cC(e,2790,2799,!0,i);case 22:return cC(e,2662,2671,!0,i);case 22:return AC(e,1,10999,aC,3,i);case 23:return hC(e,"");case 24:return hC(e,"");case 27:return cC(e,3302,3311,!0,i);case 28:return hC(e,"",s);case 29:return hC(e,"",s);case 34:return cC(e,3792,3801,!0,i);case 37:return cC(e,6160,6169,!0,i);case 38:return cC(e,4160,4169,!0,i);case 39:return cC(e,2918,2927,!0,i);case 40:return cC(e,1776,1785,!0,i);case 43:return cC(e,3046,3055,!0,i);case 44:return cC(e,3174,3183,!0,i);case 45:return cC(e,3664,3673,!0,i);case 46:return cC(e,3872,3881,!0,i);default:return cC(e,48,57,!0,i)}},vC="data-html2canvas-ignore",bC=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new sC,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,i=yC(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,r=e.defaultView.pageYOffset,o=i.contentWindow,a=o.document,l=IC(i).then((function(){return gc(n,void 0,void 0,(function(){var e,n;return Cc(this,(function(s){switch(s.label){case 0:return this.scrolledElements.forEach(TC),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:s.sent(),s.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,EC(a)]:[3,4];case 3:s.sent(),s.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(a,n)})).then((function(){return i}))]:[2,i]}}))}))}));return a.open(),a.write(DC(document.doctype)+"<html></html>"),FC(this.referenceElement.ownerDocument,s,r),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},e.prototype.createElementClone=function(e){if(Lm(e,2),Yg(e))return this.createCanvasClone(e);if(Xg(e))return this.createVideoClone(e);if(Zg(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Jg(t)&&(Jg(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),iC(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return xC(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),r=i.getContext("2d");if(r)if(!this.options.allowTaint&&s)r.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(o){var a=o.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}r.drawImage(e,0,0)}return i}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},e.prototype.appendChildNode=function(e,t,n){Og(t)&&("SCRIPT"===t.tagName||t.hasAttribute(vC)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Og(t)&&Zg(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Og(s)&&nC(s)&&"function"==typeof s.assignedNodes){var r=s.assignedNodes();r.length&&r.forEach((function(e){return i.appendChildNode(t,e,n)}))}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(Kg(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Og(e)&&(_g(e)||Vg(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=n.getComputedStyle(e),r=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&_g(i)&&(this.clonedReferenceElement=i),qg(i)&&PC(i);var a=this.counters.parse(new Nm(this.context,s)),l=this.resolvePseudoContent(e,i,r,Gm.BEFORE);iC(e)&&(t=!0),Xg(e)||this.cloneChildNodes(e,i,t),l&&i.insertBefore(l,i.firstChild);var A=this.resolvePseudoContent(e,i,o,Gm.AFTER);return A&&i.appendChild(A),this.counters.pop(a),(s&&(this.options.copyStyles||Vg(e))&&!jg(e)||t)&&xC(s,i),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(eC(e)||tC(e))&&(eC(i)||tC(i))&&(i.value=e.value),i}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,i){var s=this;if(n){var r=n.content,o=t.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==n.display){this.counters.parse(new Nm(this.context,n));var a=new Pm(this.context,n),l=o.createElement("html2canvaspseudoelement");xC(n,l),a.content.forEach((function(t){if(0===t.type)l.appendChild(o.createTextNode(t.value));else if(22===t.type){var n=o.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var i=t.values.filter(su);i.length&&l.appendChild(o.createTextNode(e.getAttribute(i[0].value)||""))}else if("counter"===t.name){var r=t.values.filter(lu),A=r[1];if((h=r[0])&&su(h)){var d=s.counters.getCounterValue(h.value),c=A&&su(A)?_p.parse(s.context,A.value):3;l.appendChild(o.createTextNode(fC(d,c,!1)))}}else if("counters"===t.name){var h,u=t.values.filter(lu),p=u[1];A=u[2];if((h=u[0])&&su(h)){var m=s.counters.getCounterValues(h.value),g=A&&su(A)?_p.parse(s.context,A.value):3,C=p&&0===p.type?p.value:"",f=m.map((function(e){return fC(e,g,!1)})).join(C);l.appendChild(o.createTextNode(f))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(o.createTextNode(Dm(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(Dm(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(t.value))}})),l.className=HC+" "+UC;var A=i===Gm.BEFORE?" "+HC:" "+UC;return Vg(t)?t.className.baseValue+=A:t.className+=A,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Gm||(Gm={}));var wC,yC=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(vC,"true"),e.body.appendChild(n),n},BC=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},EC=function(e){return Promise.all([].slice.call(e.images,0).map(BC))},IC=function(e){return new Promise((function(t,n){var i=e.contentWindow;if(!i)return n("No window assigned for iframe");var s=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var n=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))}),50)}}))},SC=["all","d","content"],xC=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e.item(n);-1===SC.indexOf(i)&&t.style.setProperty(i,e.getPropertyValue(i))}return t},DC=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},FC=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},TC=function(e){var t=e[0],n=e[2];t.scrollLeft=e[1],t.scrollTop=n},HC="___html2canvas___pseudoelement_before",UC="___html2canvas___pseudoelement_after",QC='{\n    content: "" !important;\n    display: none !important;\n}',PC=function(e){NC(e,"."+HC+":before"+QC+"\n         ."+UC+":after"+QC)},NC=function(e,t){var n=e.ownerDocument;if(n){var i=n.createElement("style");i.textContent=t,e.appendChild(i)}},RC=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),LC=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:zC(e)||OC(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return gc(this,void 0,void 0,(function(){var t,n,i,s,r=this;return Cc(this,(function(o){switch(o.label){case 0:return t=RC.isSameOrigin(e),n=!_C(e)&&!0===this._options.useCORS&&ag.SUPPORT_CORS_IMAGES&&!t,i=!_C(e)&&!t&&!zC(e)&&"string"==typeof this._options.proxy&&ag.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||_C(e)||zC(e)||i||n?(s=e,i?[4,this.proxy(s)]:[3,2]):[2];case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var i=new Image;i.onload=function(){return e(i)},i.onerror=t,(VC(s)||n)&&(i.crossOrigin="anonymous"),i.src=s,!0===i.complete&&setTimeout((function(){return e(i)}),500),r._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+r._options.imageTimeout+"ms) loading image")}),r._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise((function(s,r){var o=ag.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===o)s(a.response);else{var e=new FileReader;e.addEventListener("load",(function(){return s(e.result)}),!1),e.addEventListener("error",(function(e){return r(e)}),!1),e.readAsDataURL(a.response)}else r("Failed to proxy resource "+i+" with status code "+a.status)},a.onerror=r;var l=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),t._options.imageTimeout){var A=t._options.imageTimeout;a.timeout=A,a.ontimeout=function(){return r("Timed out ("+A+"ms) proxying "+i)}}a.send()}))},e}(),MC=/^data:image\/svg\+xml/i,kC=/^data:image\/.*;base64,/i,KC=/^data:image\/.*/i,OC=function(e){return ag.SUPPORT_SVG_DRAWING||!WC(e)},_C=function(e){return KC.test(e)},VC=function(e){return kC.test(e)},zC=function(e){return"blob"===e.substr(0,4)},WC=function(e){return"svg"===e.substr(-3).toLowerCase()||MC.test(e)},$C=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),GC=function(e,t,n){return new $C(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},qC=function(){function e(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return e.prototype.subdivide=function(t,n){var i=GC(this.start,this.startControl,t),s=GC(this.startControl,this.endControl,t),r=GC(this.endControl,this.end,t),o=GC(i,s,t),a=GC(s,r,t),l=GC(o,a,t);return n?new e(this.start,i,o,l):new e(l,a,r,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),YC=function(e){return 1===e.type},XC=function(e){var t=e.styles,n=e.bounds,i=Cu(t.borderTopLeftRadius,n.width,n.height),s=i[0],r=i[1],o=Cu(t.borderTopRightRadius,n.width,n.height),a=o[0],l=o[1],A=Cu(t.borderBottomRightRadius,n.width,n.height),d=A[0],c=A[1],h=Cu(t.borderBottomLeftRadius,n.width,n.height),u=h[0],p=h[1],m=[];m.push((s+a)/n.width),m.push((u+d)/n.width),m.push((r+p)/n.height),m.push((l+c)/n.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,r/=g,a/=g,l/=g,d/=g,c/=g,u/=g,p/=g);var C=n.width-a,f=n.height-c,v=n.width-d,b=n.height-p,w=t.borderTopWidth,y=t.borderRightWidth,B=t.borderBottomWidth,E=t.borderLeftWidth,I=fu(t.paddingTop,e.bounds.width),S=fu(t.paddingRight,e.bounds.width),x=fu(t.paddingBottom,e.bounds.width),D=fu(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||r>0?JC(n.left+E/3,n.top+w/3,s-E/3,r-w/3,wC.TOP_LEFT):new $C(n.left+E/3,n.top+w/3),this.topRightBorderDoubleOuterBox=s>0||r>0?JC(n.left+C,n.top+w/3,a-y/3,l-w/3,wC.TOP_RIGHT):new $C(n.left+n.width-y/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=d>0||c>0?JC(n.left+v,n.top+f,d-y/3,c-B/3,wC.BOTTOM_RIGHT):new $C(n.left+n.width-y/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=u>0||p>0?JC(n.left+E/3,n.top+b,u-E/3,p-B/3,wC.BOTTOM_LEFT):new $C(n.left+E/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||r>0?JC(n.left+2*E/3,n.top+2*w/3,s-2*E/3,r-2*w/3,wC.TOP_LEFT):new $C(n.left+2*E/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=s>0||r>0?JC(n.left+C,n.top+2*w/3,a-2*y/3,l-2*w/3,wC.TOP_RIGHT):new $C(n.left+n.width-2*y/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=d>0||c>0?JC(n.left+v,n.top+f,d-2*y/3,c-2*B/3,wC.BOTTOM_RIGHT):new $C(n.left+n.width-2*y/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=u>0||p>0?JC(n.left+2*E/3,n.top+b,u-2*E/3,p-2*B/3,wC.BOTTOM_LEFT):new $C(n.left+2*E/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=s>0||r>0?JC(n.left+E/2,n.top+w/2,s-E/2,r-w/2,wC.TOP_LEFT):new $C(n.left+E/2,n.top+w/2),this.topRightBorderStroke=s>0||r>0?JC(n.left+C,n.top+w/2,a-y/2,l-w/2,wC.TOP_RIGHT):new $C(n.left+n.width-y/2,n.top+w/2),this.bottomRightBorderStroke=d>0||c>0?JC(n.left+v,n.top+f,d-y/2,c-B/2,wC.BOTTOM_RIGHT):new $C(n.left+n.width-y/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=u>0||p>0?JC(n.left+E/2,n.top+b,u-E/2,p-B/2,wC.BOTTOM_LEFT):new $C(n.left+E/2,n.top+n.height-B/2),this.topLeftBorderBox=s>0||r>0?JC(n.left,n.top,s,r,wC.TOP_LEFT):new $C(n.left,n.top),this.topRightBorderBox=a>0||l>0?JC(n.left+C,n.top,a,l,wC.TOP_RIGHT):new $C(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||c>0?JC(n.left+v,n.top+f,d,c,wC.BOTTOM_RIGHT):new $C(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=u>0||p>0?JC(n.left,n.top+b,u,p,wC.BOTTOM_LEFT):new $C(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||r>0?JC(n.left+E,n.top+w,Math.max(0,s-E),Math.max(0,r-w),wC.TOP_LEFT):new $C(n.left+E,n.top+w),this.topRightPaddingBox=a>0||l>0?JC(n.left+Math.min(C,n.width-y),n.top+w,C>n.width+y?0:Math.max(0,a-y),Math.max(0,l-w),wC.TOP_RIGHT):new $C(n.left+n.width-y,n.top+w),this.bottomRightPaddingBox=d>0||c>0?JC(n.left+Math.min(v,n.width-E),n.top+Math.min(f,n.height-B),Math.max(0,d-y),Math.max(0,c-B),wC.BOTTOM_RIGHT):new $C(n.left+n.width-y,n.top+n.height-B),this.bottomLeftPaddingBox=u>0||p>0?JC(n.left+E,n.top+Math.min(b,n.height-B),Math.max(0,u-E),Math.max(0,p-B),wC.BOTTOM_LEFT):new $C(n.left+E,n.top+n.height-B),this.topLeftContentBox=s>0||r>0?JC(n.left+E+D,n.top+w+I,Math.max(0,s-(E+D)),Math.max(0,r-(w+I)),wC.TOP_LEFT):new $C(n.left+E+D,n.top+w+I),this.topRightContentBox=a>0||l>0?JC(n.left+Math.min(C,n.width+E+D),n.top+w+I,C>n.width+E+D?0:a-E+D,l-(w+I),wC.TOP_RIGHT):new $C(n.left+n.width-(y+S),n.top+w+I),this.bottomRightContentBox=d>0||c>0?JC(n.left+Math.min(v,n.width-(E+D)),n.top+Math.min(f,n.height+w+I),Math.max(0,d-(y+S)),c-(B+x),wC.BOTTOM_RIGHT):new $C(n.left+n.width-(y+S),n.top+n.height-(B+x)),this.bottomLeftContentBox=u>0||p>0?JC(n.left+E+D,n.top+b,Math.max(0,u-(E+D)),p-(B+x),wC.BOTTOM_LEFT):new $C(n.left+E+D,n.top+n.height-(B+x))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(wC||(wC={}));var JC=function(e,t,n,i,s){var r=(Math.sqrt(2)-1)/3*4,o=n*r,a=i*r,l=e+n,A=t+i;switch(s){case wC.TOP_LEFT:return new qC(new $C(e,A),new $C(e,A-a),new $C(l-o,t),new $C(l,t));case wC.TOP_RIGHT:return new qC(new $C(e,t),new $C(e+o,t),new $C(l,A-a),new $C(l,A));case wC.BOTTOM_RIGHT:return new qC(new $C(l,t),new $C(l,t+a),new $C(e+o,A),new $C(e,A));default:return new qC(new $C(l,A),new $C(l-o,A),new $C(e,t+a),new $C(e,t))}},jC=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},ZC=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},ef=function(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6},tf=function(e,t){this.path=e,this.target=t,this.type=1},nf=function(e){this.opacity=e,this.type=2,this.target=6},sf=function(e){return 1===e.type},rf=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},of=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},af=function(){function e(e,t){(this.container=e,this.parent=t,this.effects=[],this.curves=new XC(this.container),this.container.styles.opacity<1&&this.effects.push(new nf(this.container.styles.opacity)),null!==this.container.styles.transform)&&this.effects.push(new ef(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform));if(0!==this.container.styles.overflowX){var n=jC(this.curves),i=ZC(this.curves);rf(n,i)?this.effects.push(new tf(n,6)):(this.effects.push(new tf(n,2)),this.effects.push(new tf(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter((function(e){return!sf(e)}));if(t||0!==n.container.styles.position||!n.parent){if(i.unshift.apply(i,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var r=jC(n.curves),o=ZC(n.curves);rf(r,o)||i.unshift(new tf(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter((function(t){return ym(t.target,e)}))},e}(),lf=function(e,t,n,i){e.container.elements.forEach((function(s){var r=ym(s.flags,4),o=ym(s.flags,2),a=new af(s,e);ym(s.styles.display,2048)&&i.push(a);var l=ym(s.flags,8)?[]:i;if(r||o){var A=r||s.styles.isPositioned()?n:t,d=new of(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var c=s.styles.zIndex.order;if(c<0){var h=0;A.negativeZIndex.some((function(e,t){return c>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),A.negativeZIndex.splice(h,0,d)}else if(c>0){var u=0;A.positiveZIndex.some((function(e,t){return c>=e.element.container.styles.zIndex.order?(u=t+1,!1):u>0})),A.positiveZIndex.splice(u,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);lf(a,d,r?d:n,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),lf(a,t,n,l);ym(s.flags,8)&&Af(s,l)}))},Af=function(e,t){for(var n=e instanceof Bg?e.start:1,i=e instanceof Bg&&e.reversed,s=0;s<t.length;s++){var r=t[s];r.container instanceof yg&&"number"==typeof r.container.value&&0!==r.container.value&&(n=r.container.value),r.listValue=fC(n,r.container.styles.listStyleType,!0),n+=i?-1:1}},df=function(e,t){switch(t){case 0:return hf(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return hf(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return hf(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return hf(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},cf=function(e,t){var n=[];return YC(e)?n.push(e.subdivide(.5,!1)):n.push(e),YC(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},hf=function(e,t,n,i){var s=[];return YC(e)?s.push(e.subdivide(.5,!1)):s.push(e),YC(n)?s.push(n.subdivide(.5,!0)):s.push(n),YC(i)?s.push(i.subdivide(.5,!0).reverse()):s.push(i),YC(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},uf=function(e){var t=e.styles;return e.bounds.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},pf=function(e){var t=e.styles,n=e.bounds,i=fu(t.paddingLeft,n.width),s=fu(t.paddingRight,n.width),r=fu(t.paddingTop,n.width),o=fu(t.paddingBottom,n.width);return n.add(i+t.borderLeftWidth,r+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+s),-(t.borderTopWidth+t.borderBottomWidth+r+o))},mf=function(e,t,n){var i=function(e,t){return 0===e?t.bounds:2===e?pf(t):uf(t)}(vf(e.styles.backgroundOrigin,t),e),s=function(e,t){return 0===e?t.bounds:2===e?pf(t):uf(t)}(vf(e.styles.backgroundClip,t),e),r=ff(vf(e.styles.backgroundSize,t),n,i),o=r[0],a=r[1],l=Cu(vf(e.styles.backgroundPosition,t),i.width-o,i.height-a);return[bf(vf(e.styles.backgroundRepeat,t),l,r,i,s),Math.round(i.left+l[0]),Math.round(i.top+l[1]),o,a]},gf=function(e){return su(e)&&e.value===ep.AUTO},Cf=function(e){return"number"==typeof e},ff=function(e,t,n){var i=t[0],s=t[1],r=t[2],o=e[0],a=e[1];if(!o)return[0,0];if(hu(o)&&a&&hu(a))return[fu(o,n.width),fu(a,n.height)];var l=Cf(r);if(su(o)&&(o.value===ep.CONTAIN||o.value===ep.COVER))return Cf(r)?n.width/n.height<r!=(o.value===ep.COVER)?[n.width,n.width/r]:[n.height*r,n.height]:[n.width,n.height];var A=Cf(i),d=Cf(s),c=A||d;if(gf(o)&&(!a||gf(a)))return A&&d?[i,s]:l||c?c&&l?[A?i:s*r,d?s:i/r]:[A?i:n.width,d?s:n.height]:[n.width,n.height];if(l){var h=0,u=0;return hu(o)?h=fu(o,n.width):hu(a)&&(u=fu(a,n.height)),gf(o)?h=u*r:a&&!gf(a)||(u=h/r),[h,u]}var p=null,m=null;if(hu(o)?p=fu(o,n.width):a&&hu(a)&&(m=fu(a,n.height)),null===p||a&&!gf(a)||(m=A&&d?p/i*s:n.height),null!==m&&gf(o)&&(p=A&&d?m/s*i:n.width),null!==p&&null!==m)return[p,m];throw new Error("Unable to calculate background-size for element")},vf=function(e,t){var n=e[t];return void 0===n?e[0]:n},bf=function(e,t,n,i,s){var r=t[0],o=t[1],a=n[0],l=n[1];switch(e){case 2:return[new $C(Math.round(i.left),Math.round(i.top+o)),new $C(Math.round(i.left+i.width),Math.round(i.top+o)),new $C(Math.round(i.left+i.width),Math.round(l+i.top+o)),new $C(Math.round(i.left),Math.round(l+i.top+o))];case 3:return[new $C(Math.round(i.left+r),Math.round(i.top)),new $C(Math.round(i.left+r+a),Math.round(i.top)),new $C(Math.round(i.left+r+a),Math.round(i.height+i.top)),new $C(Math.round(i.left+r),Math.round(i.height+i.top))];case 1:return[new $C(Math.round(i.left+r),Math.round(i.top+o)),new $C(Math.round(i.left+r+a),Math.round(i.top+o)),new $C(Math.round(i.left+r+a),Math.round(i.top+o+l)),new $C(Math.round(i.left+r),Math.round(i.top+o+l))];default:return[new $C(Math.round(s.left),Math.round(s.top)),new $C(Math.round(s.left+s.width),Math.round(s.top)),new $C(Math.round(s.left+s.width),Math.round(s.height+s.top)),new $C(Math.round(s.left),Math.round(s.height+s.top))]}},wf="Hidden Text",yf=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),r=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",r.appendChild(n),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(wf)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(wf)),n.style.lineHeight="normal",i.style.verticalAlign="super";var a=i.offsetTop-n.offsetTop+2;return r.removeChild(n),{baseline:o,middle:a}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),Bf=function(e,t){this.context=e,this.options=t},Ef=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new yf(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return pc(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),sf(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return gc(this,void 0,void 0,(function(){return Cc(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return gc(this,void 0,void 0,(function(){return Cc(this,(function(t){switch(t.label){case 0:return ym(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,n){var i=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):cg(e.text).reduce((function(t,s){return i.ctx.fillText(s,t,e.bounds.top+n),t+i.ctx.measureText(s).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=Ff(e.fontFamily).join(", "),i=nu(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,i,n].join(" "),n,i]},t.prototype.renderTextNode=function(e,t){return gc(this,void 0,void 0,(function(){var n,i,s,r,o,a,l,A=this;return Cc(this,(function(d){return n=this.createFontStyle(t),i=n[1],s=n[2],this.ctx.font=n[0],this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(i,s),o=r.baseline,a=r.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(n){switch(n){case 0:A.ctx.fillStyle=xu(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,o);var i=t.textShadow;i.length&&e.text.trim().length&&(i.slice(0).reverse().forEach((function(n){A.ctx.shadowColor=xu(n.color),A.ctx.shadowOffsetX=n.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=n.offsetY.number*A.options.scale,A.ctx.shadowBlur=n.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,o)})),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=xu(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+a),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=xu(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var i=pf(e),s=ZC(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return gc(this,void 0,void 0,(function(){var n,i,s,r,o,a,l,A,d,c,h,u,p,m,g,C;return Cc(this,(function(f){switch(f.label){case 0:this.applyEffects(e.getEffects(4)),i=e.curves,s=(n=e.container).styles,r=0,o=n.textNodes,f.label=1;case 1:return r<o.length?[4,this.renderTextNode(o[r],s)]:[3,4];case 2:f.sent(),f.label=3;case 3:return r++,[3,1];case 4:if(!(n instanceof vg))return[3,8];f.label=5;case 5:return f.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return p=f.sent(),this.renderReplacedElement(n,i,p),[3,8];case 7:return f.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof bg&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof wg))return[3,12];f.label=9;case 9:return f.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return p=f.sent(),this.renderReplacedElement(n,i,p),[3,12];case 11:return f.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Qg&&n.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)]:[3,14];case 13:a=f.sent(),n.width&&n.height&&this.ctx.drawImage(a,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),f.label=14;case 14:if(n instanceof Tg&&(l=Math.min(n.bounds.width,n.bounds.height),n.type===Sg?n.checked&&(this.ctx.save(),this.path([new $C(n.bounds.left+.39363*l,n.bounds.top+.79*l),new $C(n.bounds.left+.16*l,n.bounds.top+.5549*l),new $C(n.bounds.left+.27347*l,n.bounds.top+.44071*l),new $C(n.bounds.left+.39694*l,n.bounds.top+.5649*l),new $C(n.bounds.left+.72983*l,n.bounds.top+.23*l),new $C(n.bounds.left+.84*l,n.bounds.top+.34085*l),new $C(n.bounds.left+.39363*l,n.bounds.top+.79*l)]),this.ctx.fillStyle=xu(Fg),this.ctx.fill(),this.ctx.restore()):n.type===xg&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+l/2,n.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=xu(Fg),this.ctx.fill(),this.ctx.restore())),If(n)&&n.value.length){switch(A=this.createFontStyle(s),d=this.fontMetrics.getMetrics(g=A[0],A[1]).baseline,this.ctx.font=g,this.ctx.fillStyle=xu(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xf(n.styles.textAlign),C=pf(n),c=0,n.styles.textAlign){case 1:c+=C.width/2;break;case 2:c+=C.width}h=C.add(c,0,0,-C.height/2+1),this.ctx.save(),this.path([new $C(C.left,C.top),new $C(C.left+C.width,C.top),new $C(C.left+C.width,C.top+C.height),new $C(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new lg(n.value,h),s.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ym(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(u=n.styles.listStyleImage).type)return[3,18];p=void 0,m=u.url,f.label=15;case 15:return f.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return p=f.sent(),this.ctx.drawImage(p,n.bounds.left-(p.width+10),n.bounds.top),[3,18];case 17:return f.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==n.styles.listStyleType&&(g=this.createFontStyle(s)[0],this.ctx.font=g,this.ctx.fillStyle=xu(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new vc(n.bounds.left,n.bounds.top+fu(n.styles.paddingTop,n.bounds.width),n.bounds.width,kp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new lg(e.listValue,C),s.letterSpacing,kp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),f.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return gc(this,void 0,void 0,(function(){var t,n,i,s,r,o,a,l,A,d,c,h,u,p;return Cc(this,(function(m){switch(m.label){case 0:return ym(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:m.sent(),t=0,n=e.negativeZIndex,m.label=2;case 2:return t<n.length?[4,this.renderStack(n[t])]:[3,5];case 3:m.sent(),m.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:m.sent(),i=0,s=e.nonInlineLevel,m.label=7;case 7:return i<s.length?[4,this.renderNode(s[i])]:[3,10];case 8:m.sent(),m.label=9;case 9:return i++,[3,7];case 10:r=0,o=e.nonPositionedFloats,m.label=11;case 11:return r<o.length?[4,this.renderStack(o[r])]:[3,14];case 12:m.sent(),m.label=13;case 13:return r++,[3,11];case 14:a=0,l=e.nonPositionedInlineLevel,m.label=15;case 15:return a<l.length?[4,this.renderStack(l[a])]:[3,18];case 16:m.sent(),m.label=17;case 17:return a++,[3,15];case 18:A=0,d=e.inlineLevel,m.label=19;case 19:return A<d.length?[4,this.renderNode(d[A])]:[3,22];case 20:m.sent(),m.label=21;case 21:return A++,[3,19];case 22:c=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return c<h.length?[4,this.renderStack(h[c])]:[3,26];case 24:m.sent(),m.label=25;case 25:return c++,[3,23];case 26:u=0,p=e.positiveZIndex,m.label=27;case 27:return u<p.length?[4,this.renderStack(p[u])]:[3,30];case 28:m.sent(),m.label=29;case 29:return u++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var i=YC(e)?e.start:e;0===n?t.ctx.moveTo(i.x,i.y):t.ctx.lineTo(i.x,i.y),YC(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,n,i){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},t.prototype.resizeImage=function(e,t,n){var i;if(e.width===t&&e.height===n)return e;var s=(null!==(i=this.canvas.ownerDocument)&&void 0!==i?i:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},t.prototype.renderBackgroundImage=function(e){return gc(this,void 0,void 0,(function(){var t,n,i,s,r;return Cc(this,(function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,Q,P;return Cc(this,(function(N){switch(N.label){case 0:if(0!==n.type)return[3,5];s=void 0,r=n.url,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,i.context.cache.match(r)];case 2:return s=N.sent(),[3,4];case 3:return N.sent(),i.context.logger.error("Error loading background-image "+r),[3,4];case 4:return s&&(o=mf(e,t,[s.width,s.height,s.width/s.height]),v=o[0],I=o[1],S=o[2],C=i.ctx.createPattern(i.resizeImage(s,y=o[3],B=o[4]),"repeat"),i.renderRepeat(v,C,I,S)),[3,6];case 5:1===n.type?(a=mf(e,t,[null,null,null]),v=a[0],I=a[1],S=a[2],l=Ku(n.angle,y=a[3],B=a[4]),A=l[0],d=l[1],c=l[2],h=l[3],u=l[4],(p=document.createElement("canvas")).width=y,p.height=B,m=p.getContext("2d"),g=m.createLinearGradient(d,h,c,u),ku(n.stops,A).forEach((function(e){return g.addColorStop(e.stop,xu(e.color))})),m.fillStyle=g,m.fillRect(0,0,y,B),y>0&&B>0&&(C=i.ctx.createPattern(p,"repeat"),i.renderRepeat(v,C,I,S))):function(e){return 2===e.type}(n)&&(f=mf(e,t,[null,null,null]),v=f[0],b=f[1],w=f[2],B=f[4],I=fu((E=0===n.position.length?[mu]:n.position)[0],y=f[3]),S=fu(E[E.length-1],B),x=function(e,t,n,i,s){var r=0,o=0;switch(e.size){case 0:0===e.shape?r=o=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-s)):1===e.shape&&(r=Math.min(Math.abs(t),Math.abs(t-i)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)r=o=Math.min(Ou(t,n),Ou(t,n-s),Ou(t-i,n),Ou(t-i,n-s));else if(1===e.shape){var a=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-i)),l=_u(i,s,t,n,!0);o=a*(r=Ou(l[0]-t,(l[1]-n)/a))}break;case 1:0===e.shape?r=o=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-s)):1===e.shape&&(r=Math.max(Math.abs(t),Math.abs(t-i)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)r=o=Math.max(Ou(t,n),Ou(t,n-s),Ou(t-i,n),Ou(t-i,n-s));else if(1===e.shape){a=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-i));var A=_u(i,s,t,n,!1);o=a*(r=Ou(A[0]-t,(A[1]-n)/a))}}return Array.isArray(e.size)&&(r=fu(e.size[0],i),o=2===e.size.length?fu(e.size[1],s):r),[r,o]}(n,I,S,y,B),F=x[1],(D=x[0])>0&&F>0&&(T=i.ctx.createRadialGradient(b+I,w+S,0,b+I,w+S,D),ku(n.stops,2*D).forEach((function(e){return T.addColorStop(e.stop,xu(e.color))})),i.path(v),i.ctx.fillStyle=T,D!==F?(H=e.bounds.left+.5*e.bounds.width,U=e.bounds.top+.5*e.bounds.height,P=1/(Q=F/D),i.ctx.save(),i.ctx.translate(H,U),i.ctx.transform(1,0,0,Q,0,0),i.ctx.translate(-H,-U),i.ctx.fillRect(b,P*(w-U)+U,y,B*P),i.ctx.restore()):i.ctx.fill())),N.label=6;case 6:return t--,[2]}}))},i=this,s=0,r=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return s<r.length?[5,n(r[s])]:[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,n){return gc(this,void 0,void 0,(function(){return Cc(this,(function(i){return this.path(df(n,t)),this.ctx.fillStyle=xu(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,n,i){return gc(this,void 0,void 0,(function(){var s,r;return Cc(this,(function(o){switch(o.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,i)]:[3,2];case 1:return o.sent(),[2];case 2:return s=function(e,t){switch(t){case 0:return hf(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return hf(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return hf(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return hf(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(i,n),this.path(s),this.ctx.fillStyle=xu(e),this.ctx.fill(),r=function(e,t){switch(t){case 0:return hf(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return hf(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return hf(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return hf(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(i,n),this.path(r),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return gc(this,void 0,void 0,(function(){var t,n,i,s,r,o,a,l,A=this;return Cc(this,(function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),n=!Su((t=e.container.styles).backgroundColor)||t.backgroundImage.length,i=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=Sf(vf(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),Su(t.backgroundColor)||(this.ctx.fillStyle=xu(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){A.ctx.save();var n,i,s,r,o=jC(e.curves),a=t.inset?0:1e4,l=(n=(t.inset?1:-1)*t.spread.number-a,i=(t.inset?1:-1)*t.spread.number,s=t.spread.number*(t.inset?-2:2),r=t.spread.number*(t.inset?-2:2),o.map((function(e,t){switch(t){case 0:return e.add(n,i);case 1:return e.add(n+s,i);case 2:return e.add(n+s,i+r);case 3:return e.add(n,i+r)}return e})));t.inset?(A.path(o),A.ctx.clip(),A.mask(l)):(A.mask(o),A.ctx.clip(),A.path(l)),A.ctx.shadowOffsetX=t.offsetX.number+a,A.ctx.shadowOffsetY=t.offsetY.number,A.ctx.shadowColor=xu(t.color),A.ctx.shadowBlur=t.blur.number,A.ctx.fillStyle=t.inset?xu(t.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()})),d.label=2;case 2:r=0,o=0,a=i,d.label=3;case 3:return o<a.length?0!==(l=a[o]).style&&!Su(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,2)]:[3,11]:[3,13];case 4:return d.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,r,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,r,e.curves)];case 10:d.sent(),d.label=11;case 11:r++,d.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,n,i,s){return gc(this,void 0,void 0,(function(){var r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b;return Cc(this,(function(w){return this.ctx.save(),r=function(e,t){switch(t){case 0:return cf(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return cf(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return cf(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return cf(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(i,n),o=df(i,n),2===s&&(this.path(o),this.ctx.clip()),YC(o[0])?(a=o[0].start.x,l=o[0].start.y):(a=o[0].x,l=o[0].y),YC(o[1])?(A=o[1].end.x,d=o[1].end.y):(A=o[1].x,d=o[1].y),c=0===n||2===n?Math.abs(a-A):Math.abs(l-d),this.ctx.beginPath(),this.formatPath(3===s?r:o.slice(0,2)),h=t<3?3*t:2*t,u=t<3?2*t:t,3===s&&(h=t,u=t),p=!0,c<=2*h?p=!1:c<=2*h+u?(h*=m=c/(2*h+u),u*=m):(g=Math.floor((c+u)/(h+u)),C=(c-g*h)/(g-1),u=(f=(c-(g+1)*h)/g)<=0||Math.abs(u-C)<Math.abs(u-f)?C:f),p&&this.ctx.setLineDash(3===s?[0,h+u]:[h,u]),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=xu(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(YC(o[0])&&(v=o[3],b=o[0],this.ctx.beginPath(),this.formatPath([new $C(v.end.x,v.end.y),new $C(b.start.x,b.start.y)]),this.ctx.stroke()),YC(o[1])&&(v=o[1],b=o[2],this.ctx.beginPath(),this.formatPath([new $C(v.end.x,v.end.y),new $C(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return gc(this,void 0,void 0,(function(){return Cc(this,(function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xu(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new af(e,null),i=new of(n),lf(n,i,i,s=[]),Af(n.container,s),[4,this.renderStack(i)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var n,i,s}))}))},t}(Bf),If=function(e){return e instanceof Ug||(e instanceof Hg||e instanceof Tg&&e.type!==xg&&e.type!==Sg)},Sf=function(e,t){switch(e){case 0:return jC(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return ZC(t)}},xf=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},Df=["-apple-system","system-ui"],Ff=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===Df.indexOf(e)})):e},Tf=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return pc(t,e),t.prototype.render=function(e){return gc(this,void 0,void 0,(function(){var t,n;return Cc(this,(function(i){switch(i.label){case 0:return t=rg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Hf(t)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xu(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(Bf),Hf=function(e){return new Promise((function(t,n){var i=new Image;i.onload=function(){t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Uf=function(){function e(e){var t=e.enabled;this.id=e.id,this.enabled=t,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,fc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,fc([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,fc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,fc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Qf=function(){function e(t,n){var i;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new Uf({id:this.instanceName,enabled:t.logging}),this.cache=null!==(i=t.cache)&&void 0!==i?i:new LC(this,t)}return e.instanceCount=1,e}(),Pf=function(e,t){return void 0===t&&(t={}),Nf(e,t)};"undefined"!=typeof window&&RC.setContext(window);var Nf=function(e,t){return gc(void 0,void 0,void 0,(function(){var n,i,s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,Q,P,N,R,L,M,k;return Cc(this,(function(K){switch(K.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=n.defaultView))throw new Error("Document is not attached to a Window");return s={allowTaint:null!==(B=t.allowTaint)&&void 0!==B&&B,imageTimeout:null!==(E=t.imageTimeout)&&void 0!==E?E:15e3,proxy:t.proxy,useCORS:null!==(I=t.useCORS)&&void 0!==I&&I},r=mc({logging:null===(S=t.logging)||void 0===S||S,cache:t.cache},s),o={windowWidth:null!==(x=t.windowWidth)&&void 0!==x?x:i.innerWidth,windowHeight:null!==(D=t.windowHeight)&&void 0!==D?D:i.innerHeight,scrollX:null!==(F=t.scrollX)&&void 0!==F?F:i.pageXOffset,scrollY:null!==(T=t.scrollY)&&void 0!==T?T:i.pageYOffset},a=new vc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new Qf(r,a),A=null!==(H=t.foreignObjectRendering)&&void 0!==H&&H,d={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),c=new bC(l,e,d),(h=c.clonedReferenceElement)?[4,c.toIFrame(n,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return u=K.sent(),p=qg(h)||"HTML"===h.tagName?function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new vc(0,0,i,s)}(h.ownerDocument):bc(l,h),m=p.width,g=p.height,C=p.left,f=p.top,v=Rf(l,h,t.backgroundColor),b={canvas:t.canvas,backgroundColor:v,scale:null!==(P=null!==(Q=t.scale)&&void 0!==Q?Q:i.devicePixelRatio)&&void 0!==P?P:1,x:(null!==(N=t.x)&&void 0!==N?N:0)+C,y:(null!==(R=t.y)&&void 0!==R?R:0)+f,width:null!==(L=t.width)&&void 0!==L?L:Math.ceil(m),height:null!==(M=t.height)&&void 0!==M?M:Math.ceil(g)},A?(l.logger.debug("Document cloned, using foreign object rendering"),[4,new Tf(l,b).render(h)]):[3,3];case 2:return w=K.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+C+","+f+" with size "+m+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),y=Lg(l,h),v===y.styles.backgroundColor&&(y.styles.backgroundColor=Nu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new Ef(l,b).render(y)];case 4:w=K.sent(),K.label=5;case 5:return(null===(k=t.removeContainer)||void 0===k||k)&&(bC.destroy(u)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,w]}}))}))},Rf=function(e,t,n){var i=t.ownerDocument,s=i.documentElement?Pu(e,getComputedStyle(i.documentElement).backgroundColor):Nu.TRANSPARENT,r=i.body?Pu(e,getComputedStyle(i.body).backgroundColor):Nu.TRANSPARENT,o="string"==typeof n?Pu(e,n):null===n?Nu.TRANSPARENT:4294967295;return t===i.documentElement?Su(s)?Su(r)?o:r:s:o};let Lf="";function Mf(e){if(!e)return"";const t=window.getComputedStyle(e);return function(e){const t=((null==e?void 0:e.backgroundColor)||"").replace(/\s+|rgba\(|\)/g,"").toLowerCase();if(""===t||"transparent"===t||"0"===(null==e?void 0:e.opacity))return!0;const n=t.split(",");return 4===n.length&&"0"===n[3]}(t)?Mf(e.parentElement):t.backgroundColor}async function kf(e,t,n,i,s,r){if(!(e=kt(e)))return Promise.reject();(await kd.getInstance().getVizModule()).exportFromMarkup("<div></div>",{fileName:t,format:n,width:e.clientWidth,height:e.clientHeight,backgroundColor:s||Mf(e),margin:i||void 0,svgToCanvas:async function(t,n){const i=await function(e){return new Promise(((t,n)=>{const i=e.cloneNode(!0);Kf(e,i);const s=document.createElement("IFRAME");s.style.cssText="position: absolute; left: -10000px; top: -10000px; visibility: hidden; opacity: 0;",s.onload=()=>{s.contentDocument.body.appendChild(i),s.contentDocument.body.style.margin="0px",t(s)},document.body.appendChild(s)}))}(e),r=i.contentDocument.body;await Pf(r,{canvas:n,backgroundColor:s,scale:1,width:e.clientWidth,height:e.clientHeight}),document.body.removeChild(i)},onFileSaving:r})}function Kf(e,t){!function(e,t){const n=window.getComputedStyle(e);for(let e=0;e<n.length;e++){const i=n[e],s=n.getPropertyValue(i);t.style.setProperty(i,s)}}(e,t);const n=e.childNodes,i=t.childNodes,s=n.length;for(let e=0;e<s;e++){const t=n[e];if(1===t.nodeType){Kf(t,i[e])}}}const Of="dxbl-chart-base";class _f extends Od{constructor(){super(_f.eventName)}}_f.eventName=Of+".drawn";class Vf extends CustomEvent{constructor(e){super(Vf.eventName,{detail:new Xf(e),bubbles:!0,composed:!0,cancelable:!0})}}Vf.eventName=Of+".tooltip-showing";class zf extends CustomEvent{constructor(e){super(zf.eventName,{detail:new Jf(e),bubbles:!0,composed:!0,cancelable:!0})}}zf.eventName=Of+".series-click";class Wf extends CustomEvent{constructor(e){super(Wf.eventName,{detail:new jf(e),bubbles:!0,composed:!0,cancelable:!0})}}Wf.eventName=Of+".selection-changed";class $f extends CustomEvent{constructor(e,t){super($f.eventName,{detail:new Zf(e,t),bubbles:!0,composed:!0,cancelable:!0})}}$f.eventName=Of+".legend-click";class Gf extends CustomEvent{constructor(e){super(Gf.eventName,{detail:new qf(e),bubbles:!0,composed:!0,cancelable:!0})}}Gf.eventName=Of+".visual-range-changed";class qf{constructor(e){this.IsArgumentAxis=e.axis.isArgumentAxis,this.PreviousRange=e.previousRange,this.CurrentRange=e.range,this.ChangeSource=e.actionType,this.AxisName=e.axis.name}}class Yf{constructor(e){this.SeriesIndex=e.seriesIndex,this.Tag=e.tag,this.Data=e.data}}class Xf extends Yf{constructor(e){super(e),this.Id=e.id}}class Jf extends Yf{}class jf extends Yf{constructor(e){super(e),this.IsSeriesSelected=e.isSeriesSelected,this.IsPointSelected=e.isPointSelected}}class Zf{constructor(e,t){this.SeriesIndex=e,this.PointId=t}}Ct.register(_f.eventName,(e=>e.detail)),Ct.register(Vf.eventName,(e=>e.detail)),Ct.register(zf.eventName,(e=>e.detail)),Ct.register(Wf.eventName,(e=>e.detail)),Ct.register($f.eventName,(e=>e.detail)),Ct.register(Gf.eventName,(e=>e.detail)),de();const ev="dxChartLegendElementHasMouseoverEvent";class tv extends ic{get widgetSettingsConverter(){return this._widgetSettingsConverter}get styleHelper(){return this._styleHelper}get selectionController(){return this._selectionController}constructor(){super(),this._isChartUpdating=!1,this.legendMouseOverHandler=this.onLegendMouseOver.bind(this),this._styleHelper=hc.getInstance(),this._drawnExecutor=sc(this.onChartDrawn.bind(this)),this._serverDrawnExecutor=sc(this.dispatchServerDrawnEvent.bind(this)),this._selectionController=new Pd(this),this._tooltipHelper=new Sd(this),this._selectionController.setChartType(this.getWidgetTypeName()),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}disposeComponent(){super.disposeComponent(),this._drawnExecutor.reset(),this._serverDrawnExecutor.reset(),this._selectionController.dispose(),this.removeLegendMouseHandler();const e=this.querySelectorAll("."+Cd);for(let t=0;t<e.length;t++){const n=e[t];n&&Bn(n)}}resetSelection(){this.selectionController.resetSelection(),this.afterWidgetResolved((e=>{e.clearSelection()}))}selectSeries(e){this.afterWidgetResolved((t=>{const n=t.getSeriesByPos(e);n&&!n.isSelected()&&this.selectionController.toggleSeriesSelection(n)}))}deselectSeries(e){this.afterWidgetResolved((t=>{const n=t.getSeriesByPos(e);(null==n?void 0:n.isSelected())&&this.selectionController.toggleSeriesSelection(n)}))}selectPoints(e,t){this.afterWidgetResolved((n=>{const i=n.getSeriesByPos(e);if(i)for(let e=0;e<t.length;e++){const n=tv.getPointByData(i,t[e]);n&&!n.isSelected()&&this.selectionController.togglePointSelection(n)}}))}deselectPoints(e,t){this.afterWidgetResolved((n=>{const i=n.getSeriesByPos(e);if(i)for(let e=0;e<t.length;e++){const n=tv.getPointByData(i,t[e]);(null==n?void 0:n.isSelected())&&this.selectionController.togglePointSelection(n)}}))}onSeriesVisibleChanged(e,t,n){var i;null===(i=this._widgetPromise)||void 0===i||i.then((function(i){const s=Bd(i,e,t);n?s.show():s.hide()})).catch((e=>console.error(e)))}exportToFile(e,t,n,i){return function(e,t,n,i,s){return kf(e,t,n,i,s,void 0)}(this,e,t,n,i)}exportToBase64AndGetLength(e,t,n){return async function(e,t,n,i){return new Promise(((s,r)=>{kf(e,"",t,n,i,(function(e){e.cancel=!0;const t=new FileReader;t.readAsDataURL(e.data),t.onloadend=function(){Lf=t.result,s(Lf.length)}}))}))}(this,e,t,n)}getBase64ImageChunk(e,t){return async function(e,t){return new Promise(((n,i)=>{n(Lf.substring(e,t))}))}(e,t)}clearBase64ImageData(){return async function(){return new Promise(((e,t)=>{Lf="",e()}))}()}showTooltipForPoint(e,t){var n;null===(n=this._widgetPromise)||void 0===n||n.then((n=>{const i=n.getSeriesByPos(t);if(!i)return;let s=e[rc.defaultSeriesArgumentField];"datetime"===i.argumentType&&"string"==typeof s&&(s=new Date(s));const r=i.getPointsByArg(s),o=(null==r?void 0:r.find((t=>t.originalValue===e[rc.defaultSeriesValueField])))||r[0];null==o||o.showTooltip()})).catch((e=>{gn(this)||console.error(e)}))}correctTooltipPosition(){this._tooltipHelper.positionTooltip()}hideTooltip(e){this._tooltipHelper.hideTooltip(e)}render(){this.executeClientMethod("render")}refreshTheme(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>e.option("palette",this._styleHelper.palette))),this.updateWidgetTheme()}onSeriesClick(e,t,n){const i=new zf({seriesIndex:e,data:t,tag:n});this.dispatchEvent(i)}onSelectionChanged(e){const t=new Wf(e);this.dispatchEvent(t)}onTooltipShowing(e){const t=new Vf(e);this.dispatchEvent(t)}createWidgetDefaultOptions(){return{...this.widgetSettingsConverter.createDefaultSettings(),palette:this.styleHelper.palette}}processSpecialOptions(e){super.processSpecialOptions(e),this.onBeforeChartOptionsCompleted(e);const t=this.widgetSettingsConverter.convert(e);Object.getOwnPropertyNames(e).forEach((t=>delete e[t])),Object.assign(e,t),this.correctChartElementHeight()}correctChartElementHeight(){const e=this.getWidgetElement();this.style.getPropertyValue("height")||e.style.setProperty("min-height","300px")}onBeforeChartOptionsCompleted(e){this.configureSelectionController(e),this.hasTooltip(e)&&this.addLegendMouseHandler()}configureSelectionController(e){void 0!==e.pointSelectionMode&&this._selectionController.setPointSelectionMode(e.pointSelectionMode)}hasTooltip(e){var t;return!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled)}addLegendMouseHandler(){const e=this.querySelector("."+pd);e&&!e.hasAttribute(ev)&&(e.addEventListener("mouseover",this.legendMouseOverHandler),e.setAttribute(ev,"true"))}removeLegendMouseHandler(){const e=this.querySelector("."+pd);null==e||e.removeEventListener("mouseover",this.legendMouseOverHandler),null==e||e.removeAttribute(ev)}onLegendMouseOver(){this._tooltipHelper.hideTooltip(!0)}createWidgetHandlers(){const e=this.selectionController;return{...super.createWidgetHandlers(),onPointClick:this.getChartOnPointClickHandler(),onSeriesClick:this.getChartOnSeriesClickHandler(),onPointSelectionChanged:t=>{e.pointSelectionChanged(t)},onSeriesSelectionChanged:t=>{e.seriesSelectionChanged(t)},onPointHoverChanged:t=>{this._isChartUpdating||e.pointHoverChanged(t)},onSeriesHoverChanged:t=>{this._isChartUpdating||e.seriesHoverChanged(t)},onDrawn:this.getChartOnDrawnHandler(),onOptionChanged:()=>this.onChartOptionChanged(),onTooltipShown:e=>this._tooltipHelper.onTooltipShown(e,this.onTooltipShowing.bind(this)),onTooltipHidden:e=>this._tooltipHelper.onTooltipHidden(e)}}getChartOnDrawnHandler(){return e=>{const t=this._selectionController;!function(e,t,n,i){var s;const r=e.querySelectorAll("."+Cd);for(let o=0;o<r.length;o++){const a=r[o];if(a){const r=+(null!==(s=a.getAttribute("data-series"))&&void 0!==s?s:""),o=a.getAttribute("data-point");yd(a,t,r,o,n,i,e)}}}(this,e.component,this.getLegendItemType(),t),t.restoreChartSelection(e.component),this.onChartDrawn()}}getChartOnSeriesClickHandler(){}onChartDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this._serverDrawnExecutor.execute(),this.endChartUpdating(),cn(this,"dxbl-chart-first-loading",!1)}dispatchServerDrawnEvent(){this.dispatchEvent(new _f)}onChartOptionChanged(){this._isChartUpdating&&this._drawnExecutor.execute()}onlyContainerSizeChanged(){this.onChartDrawn()}updateWidgetOptions(e,t){this.startChartUpdating(),t.animation={enabled:!1},this.prepareSpecialOptions(t,e),super.updateWidgetOptions(e,t)}prepareSpecialOptions(e,t){var n;const i=rc.argumentAxisKey,s=rc.visualRangeKey,r=null===(n=e[i])||void 0===n?void 0:n[s],o=t.option(`${i}.${s}`);r&&o&&(e[i][s]=Object.assign(o,r))}getSkippedEmptyOptions(){return["dataSource"]}startChartUpdating(){this._isChartUpdating=!0}endChartUpdating(){this._isChartUpdating=!1}static getPointByData(e,t){let n=t[rc.defaultSeriesArgumentField],i=t[rc.defaultSeriesValueField];const s=e.valueType;return"datetime"===e.argumentType&&"string"==typeof n&&(n=new Date(n)),"datetime"===s&&"string"==typeof i&&(i=new Date(i).getTime()),e.getPointsByArg(n).find((e=>"datetime"===s?e.originalValue.getTime()===i:e.originalValue===i))}onLegendClick(e,t){const n=new $f(e,t);this.dispatchEvent(n)}}const nv=`${rc.commonAxisSettingsKey}.title.font.${rc.colorKey}`,iv=`${rc.commonAxisSettingsKey}.${rc.constantLineStyleKey}.${rc.colorKey}`,sv=`${rc.commonAxisSettingsKey}.${rc.colorKey}`,rv=`${rc.commonSeriesSettingsKey}.valueErrorBar.${rc.colorKey}`,ov=`${rc.commonAnnotationSettingsKey}.${rc.colorKey}`,av=`${rc.commonAnnotationSettingsKey}.font.${rc.colorKey}`,lv=`${rc.commonSeriesSettingsKey}.candlestick.innerColor`,Av=`zoomAndPan.dragBoxStyle.${rc.colorKey}`,dv=`${rc.commonAxisSettingsKey}.label.font.${rc.colorKey}`,cv=`${rc.commonAxisSettingsKey}.label.font.opacity`;let hv=class extends tv{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return xd.xyChartName}getLegendItemType(){return wd.series}createWidgetSettingsConverter(){return new lc}getThemeDependentOptionsDict(){const e={[nv]:vd.axisTitleFontColor,[iv]:vd.constantLineColor,[sv]:vd.axisLineColor,containerBackgroundColor:vd.containerBackgroundColor,[rv]:vd.errorBarColor,[ov]:vd.annotationColor,[av]:vd.annotationTextColor,[lv]:vd.candlestickInnerColor,[Av]:vd.zoomAndPanDragBoxColor,[dv]:vd.axisLabelFontColor,[cv]:vd.axisLabelFontOpacity};return{...super.getThemeDependentOptionsDict(),...e}}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const n=e.target,i=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(n.index,null==i?void 0:i.data,null==i?void 0:i.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(n,i)}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onZoomEnd:e=>this.onChartVisualRangeChanged(e)}}onChartVisualRangeChanged(e){const t=new Gf(e);this.dispatchEvent(t)}resetVisualRange(){this.afterWidgetResolved((e=>{e.resetVisualRange()}))}setArgumentAxisVisualRange(e){this.afterWidgetResolved((t=>{t.getArgumentAxis().visualRange(e)}))}setValueAxisVisualRange(e,t){this.afterWidgetResolved((n=>{var i;null===(i=n.getValueAxis(t))||void 0===i||i.visualRange(e)}))}};hv=C([Es("dxbl-chart")],hv);let uv=class extends tv{getWidgetTypeName(){return xd.pieChartName}createWidgetSettingsConverter(){return new Ac}getLegendItemType(){return wd.point}getChartOnPointClickHandler(){const e=this.selectionController;return t=>{const n=t.target;this.onSeriesClick(n.series.index,n.data,n.tag),e.togglePointSelection(n)}}};uv=C([Es("dxbl-pie-chart")],uv);const pv="dxbl-polar-chart",mv=`--${pv}`;let gv=class extends tv{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return xd.polarChartName}createWidgetSettingsConverter(){return new dc}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getLegendItemType(){return wd.series}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const n=e.target,i=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(n.index,null==i?void 0:i.data,null==i?void 0:i.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(n,i)}}getThemeDependentOptionsDict(){const e={containerBackgroundColor:`${mv}-container-background-color`};return{...super.getThemeDependentOptionsDict(),...e}}};gv=C([Es(pv)],gv);const Cv="dxbl-map";class fv extends CustomEvent{constructor(e,t){super(fv.eventName,{detail:new bv(e,t),bubbles:!0,composed:!0,cancelable:!0})}}fv.eventName=Cv+".click";class vv extends CustomEvent{constructor(e){super(vv.eventName,{detail:new wv(e),bubbles:!0,composed:!0,cancelable:!0})}}vv.eventName=Cv+".marker-click";class bv{constructor(e,t){this.Latitude=e,this.Longitude=t}}class wv{constructor(e){this.Key=e}}var yv,Bv;Ct.register(fv.eventName,(e=>e.detail)),Ct.register(vv.eventName,(e=>e.detail)),null!==(yv=(Bv=window).sj_evt)&&void 0!==yv||(Bv.sj_evt={fire:()=>{},bind:()=>{}});const Ev="markerId";let Iv=class extends ic{createWidgetHandlers(){return{...super.createWidgetHandlers(),onClick:e=>this.onMapClick(e),onReady:e=>this.onMapReady(e),onOptionChanged:e=>this.onMapOptionChanged(e)}}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxMap"}disposeWidget(e){var t;null===(t=null==e?void 0:e._lastAsyncAction)||void 0===t||t.catch((e=>{})),super.disposeWidget(e)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.preapreMarkerClickHandlers(e.markers)}onMapClick(e){this.dispatchEvent(new fv(e.location.lat,e.location.lng))}onMapReady(e){this.changeLoadingPanelVisibility(!1)}onMapOptionChanged(e){this.changeLoadingPanelVisibility(!1)}preapreMarkerClickHandlers(e){null==e||e.forEach((e=>{if(e[Ev]){const t=e[Ev];e.onClick=()=>{this.onMarkerClick(t)},delete e[Ev]}}))}onMarkerClick(e){this.dispatchEvent(new vv(e))}};Iv=C([Es("dxbl-map")],Iv);const Sv="dxbl-html-editor";class xv extends CustomEvent{constructor(e,t,n){super(xv.eventName,{detail:new Uv(e,t,n),bubbles:!0,composed:!0,cancelable:!0})}}xv.eventName=Sv+".state-changed";class Dv extends CustomEvent{constructor(e){super(Dv.eventName,{detail:new Qv(e),bubbles:!0,composed:!0,cancelable:!0})}}Dv.eventName=Sv+".show-hyperlink-dialog";class Fv extends CustomEvent{constructor(e){super(Fv.eventName,{detail:new Pv(e),bubbles:!0,composed:!0,cancelable:!0})}}Fv.eventName=Sv+".show-image-dialog";class Tv extends Od{constructor(){super(Tv.eventName)}}Tv.eventName=Sv+".show-table-dialog";class Hv extends CustomEvent{constructor(e){super(Hv.eventName,{detail:new Nv(e),bubbles:!0,composed:!0,cancelable:!0})}}Hv.eventName=Sv+".value-changed";class Uv{constructor(e,t,n){this.Format=e,this.ButtonsVisibility=t,this.ReadOnly=n}}class Qv{constructor(e){this.Data=e}}class Pv{constructor(e){this.Data=e}}class Nv{constructor(e){this.Value=e}}Ct.register(xv.eventName,(e=>e.detail)),Ct.register(Hv.eventName,(e=>e.detail)),Ct.register(Dv.eventName,(e=>e.detail)),Ct.register(Fv.eventName,(e=>e.detail)),Ct.register(Tv.eventName,(e=>e.detail));class Rv{static moveFocus(e,t,n){const i=e.querySelectorAll(t);if(i.length<=1)return;const s=Array.from(i).filter((e=>!ot.isHidden(e)));if(s.length<=1)return;const r=document.activeElement,o=s.reduce(((e,t,n)=>t.contains(r)?n:e),-1);if(o<0)return;let a,l=o;if(n)if(l++,l>=s.length){const t=this.findFocusableElements(document),n=this.findFocusableElements(e),i=t.indexOf(n[n.length-1]);a=i>=0&&i<t.length-1?t[i+1]:t[0]}else a=s[l];else if(l--,l<0){const t=this.findFocusableElements(document),n=this.findFocusableElements(e),i=t.indexOf(n[0]);a=i>0?t[i-1]:t[t.length-1]}else a=s[l];null==a||a.focus()}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter((e=>e.tabIndex>-1&&e.offsetWidth&&e.offsetHeight&&!ot.isHidden(e)))}}const Lv="silent",Mv="user",kv="focusout",Kv="keydown",Ov="Normal text";var _v;!function(e){e.OnLostFocus="onLostFocus",e.OnDelayedInput="onDelayedInput"}(_v||(_v={}));let Vv=class extends ic{constructor(){super(...arguments),this._readOnly=!1,this._bindValueMode=_v.OnLostFocus,this._inputDelay=500,this._timer=0,this._lastQuillFormat={},this._lastButtonsVisibility="",this._valueChangesQueueTimer=0,this._valueChangesQueue=[],this.isBindingUse=!1}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxHtmlEditor"}createInitOptions(){const e=super.createInitOptions();return e.toolbar=void 0,e.mediaResizing={enabled:!0},e}updateWidgetOptions(e,t){if(1===Object.keys(t).length&&"value"in t){if(e.option("value")===t.value&&this.hideLoadingPanel(),this._valueChangesQueue.length>0){if(this._valueChangesQueue.shift()===t.value)return;this._valueChangesQueue=[]}}super.updateWidgetOptions(e,t),this.updateStates(t)}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValidationOptions(e),this.prepareResizingOptions(e),this.setBindValueOptions(e)}setBindValueOptions(e){e.bindMarkupMode&&(this._bindValueMode=e.bindMarkupMode,delete e.bindMarkupMode),e.inputDelay&&(this._inputDelay=e.inputDelay,delete e.inputDelay)}prepareValidationOptions(e){"showValidationMessageOnFocus"in e&&(e.validationMessageMode="always",delete e.showValidationMessageOnFocus),!1===e.isValid&&(e.validationStatus="invalid",delete e.isValid),e.validationMessage&&(e.validationError={message:e.validationMessage},delete e.validationMessage)}prepareResizingOptions(e){var t,n;"mediaResizeEnabled"in e&&(e.mediaResizing={enabled:e.mediaResizeEnabled},delete e.mediaResizeEnabled),"tableResizeEnabled"in e&&(e.tableResizing={enabled:e.tableResizeEnabled,minColumnWidth:null!==(t=e.tableColumnMinWidth)&&void 0!==t?t:40,minRowHeight:null!==(n=e.tableRowMinHeight)&&void 0!==n?n:24},delete e.tableResizeEnabled),delete e.tableColumnMinWidth,delete e.tableRowMinHeight}createComponent(e){var t;super.createComponent(e),null===(t=this._widgetPromise)||void 0===t||t.then((t=>{this._widgetInstance=t,this._widgetInstance.getQuillInstance().on("editor-change",this.onEditorChange.bind(this)),this.updateStates(e),this.getWidgetElement().removeAttribute("role")}));const n=this.getContainerToSetStyle();n.addEventListener(kv,this.onFocusOut),n.addEventListener(Kv,this.onKeyDown)}updateStates(e){this.applyHtmlEditorState(e.readOnly)}disposeComponent(){super.disposeComponent();const e=this.getContainerToSetStyle();e.removeEventListener(kv,this.onFocusOut),e.removeEventListener(Kv,this.onKeyDown)}createWidgetHandlers(){return{...super.createWidgetHandlers(),onContentReady:e=>this.hideLoadingPanel(),onValueChanged:e=>this.onValueChanged(e.value),onOptionChanged:e=>this.hideLoadingPanel()}}onWidgetInitialized(e){super.onWidgetInitialized(e),this.processMentionsModule(e.component)}processMentionsModule(e){const t=e.get("modules/mentions");e.register({"modules/mentions":class extends t{_getPopupConfig(){const e=super._getPopupConfig();return e.container="dxbl-html-editor",e}}})}hideLoadingPanel(){this.changeLoadingPanelVisibility(!1)}setValueInQueue(e){this._valueChangesQueue.push(e),clearTimeout(this._valueChangesQueueTimer),this._valueChangesQueueTimer=setTimeout((()=>{this._valueChangesQueue=[]}),500)}onValueChanged(e){this._bindValueMode===_v.OnDelayedInput?(clearTimeout(this._timer),this._timer=setTimeout((()=>{this.isBindingUse&&this.setValueInQueue(e),this.sendValue(e)}),this._inputDelay)):this._value=e}onFocusOut(e){this._bindValueMode!==_v.OnLostFocus||void 0===this._value||mt.containsElement(this.getContainerToSetStyle(),e.relatedTarget)||(this.sendValue(this._value),this._value=void 0)}onKeyDown(e){if(e.shiftKey&&e.altKey){const t=Ie.KeyUtils.getEventKeyCode(e);t===Ie.KeyCode.Down?(this.moveFocus(!0),e.stopPropagation()):t===Ie.KeyCode.Up&&(this.moveFocus(!1),e.stopPropagation())}}moveFocus(e){Rv.moveFocus(this.getContainerToSetStyle(),"dxbl-ribbon-internal, .ql-editor",e)}sendValue(e){let t;""!==e&&(t=this.getJsObjectReference(e)),this.dispatchEvent(new Hv(t))}getJsObjectReference(e){const t=(new TextEncoder).encode(e);return DotNet.createJSStreamReference(t)}onEditorChange(e,...t){"selection-change"===e&&null===t[0]?this._selection=t[1]:!this._readOnly&&this.applyHtmlEditorState()}applyHtmlEditorState(e){const t=!!e,n=this.getQuillFormat(),i=this.modifyFormat(n),s=this.getButtonsVisibility(n);this._readOnly===t&&JSON.stringify(this._lastQuillFormat)===JSON.stringify(n)&&this._lastButtonsVisibility===s||this.dispatchEvent(new xv(i,s,t)),this._readOnly=t,this._lastQuillFormat=n,this._lastButtonsVisibility=s}getQuillFormat(){var e,t;const n=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();return n?null===(t=this._widgetInstance)||void 0===t?void 0:t.getFormat(n.index,n.length):{}}modifyFormat(e){const t=this.prepareFormatParameters(e),n=this.getFullFormat(t);return JSON.stringify(n)}getFullFormat(e){return e.header||(e.header=Ov),e}getButtonsVisibility(e){if(!this._widgetInstance)return"{}";const t=this._widgetInstance.getQuillInstance().history,{undo:n,redo:i}=t.stack,s=this.isTableElement(e);return JSON.stringify({undo:n.length>0,redo:i.length>0,insertTable:!s,insertRowAbove:s,insertRowBelow:s,deleteRow:s,insertColumnLeft:s,insertColumnRight:s,deleteColumn:s,insertHeaderRow:s,deleteTable:s})}isTableElement(e){return!(!e.tableCellLine&&!e.tableHeaderCellLine)}prepareFormatParameters(e){const t={};for(const[n,i]of Object.entries(e))switch(n){case"align":"left"===i?t.alignLeft=!0:"center"===i?t.alignCenter=!0:"right"===i?t.alignRight=!0:t.alignJustify=!0;break;case"list":"ordered"===i?t.orderedList=!0:"bullet"===i&&(t.bulletList=!0);break;case"script":"sub"===i?t.subscript=!0:"super"===i&&(t.superscript=!0);break;case"indent":case"imageSrc":case"background":case"color":case"target":case"link":break;case"code-block":t["code-block"]=!0;break;case"header":t.header=this.getHeaderValue(i);break;default:t[n]=i}return t}parseFormatParameters(e,t){let n,i;switch(e){case"alignLeft":n="align",i=!!t&&"left";break;case"alignCenter":n="align",i=!!t&&"center";break;case"alignRight":n="align",i=!!t&&"right";break;case"alignJustify":n="align",i=!!t&&"justify";break;case"orderedList":n="list",i=!!t&&"ordered";break;case"bulletList":n="list",i=!!t&&"bullet";break;case"subscript":n="script",i=!!t&&"sub";break;case"superscript":n="script",i=!!t&&"super";break;case"increaseIndent":n="indent",i=!!t&&"+1";break;case"decreaseIndent":n="indent",i=!!t&&"-1";break;case"header":i=this.parseHeaderValue(t)}return{formatName:null!=n?n:e,formatValue:null!=i?i:t}}toggleUndoRedo(e){var t,n;"undo"===e?null===(t=this._widgetInstance)||void 0===t||t.undo():null===(n=this._widgetInstance)||void 0===n||n.redo(),this.applyHtmlEditorState()}clearFormat(){var e,t;const n=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();n&&(null===(t=this._widgetInstance)||void 0===t||t.removeFormat(n.index,n.length),this.applyHtmlEditorState())}toggleFontChanges(e,t){var n,i;this.focusEditor(),this._selection&&(null===(n=this._widgetInstance)||void 0===n||n.setSelection(this._selection.index,this._selection.length)),null===(i=this._widgetInstance)||void 0===i||i.format(e,t),this.applyHtmlEditorState()}parseHeaderValue(e){return e!==Ov&&e.split(" ")[1]}getHeaderValue(e){return e?`Heading ${e}`:Ov}getLeafSelection(e,t){const n=e.getLeaf(t),i=n[0].text;return{index:t-n[1],length:i?i.length:0}}getTableModule(){var e;const t=null===(e=this._widgetInstance)||void 0===e?void 0:e.getQuillInstance();return t.focus(),t.getModule("table")}insertRowAbove(){this.getTableModule().insertRowAbove()}insertRowBelow(){this.getTableModule().insertRowBelow()}deleteRow(){this.getTableModule().deleteRow()}insertColumnLeft(){this.getTableModule().insertColumnLeft()}insertColumnRight(){this.getTableModule().insertColumnRight()}deleteColumn(){this.getTableModule().deleteColumn()}insertHeaderRow(){this.getTableModule().insertHeaderRow()}deleteTable(){this.getTableModule().deleteTable()}insertVariable(e,t){var n,i;const s=null===(n=this._widgetInstance)||void 0===n?void 0:n.getSelection(),r=s?s.index:0,o=null===(i=this._widgetInstance)||void 0===i?void 0:i.getQuillInstance();s&&o.deleteText(r,s.length,Lv),this._widgetInstance.insertEmbed(r,"variable",{value:e,escapeChar:t||["{","}"]})}executeCommand(e,t,n){var i;const{formatName:s,formatValue:r}=this.parseFormatParameters(e,t);switch(s){case"undo":case"redo":this.toggleUndoRedo(s);break;case"clear":this.clearFormat();break;case"header":case"size":case"font":this.toggleFontChanges(s,r);break;case"insertRowAbove":this.insertRowAbove();break;case"insertRowBelow":this.insertRowBelow();break;case"deleteRow":this.deleteRow();break;case"insertColumnLeft":this.insertColumnLeft();break;case"insertColumnRight":this.insertColumnRight();break;case"deleteColumn":this.deleteColumn();break;case"insertHeaderRow":this.insertHeaderRow();break;case"deleteTable":this.deleteTable();break;case"variable":this.insertVariable(t,n);break;default:null===(i=this._widgetInstance)||void 0===i||i.format(s,r),this.applyHtmlEditorState()}}async applyPicture(e,t,n,i){var s,r,o,a;const l=null===(s=this._widgetInstance)||void 0===s?void 0:s.getFormat(),A=null===(r=this._widgetInstance)||void 0===r?void 0:r.getSelection(),d=null===(o=this._widgetInstance)||void 0===o?void 0:o.getQuillInstance(),c=await this.decodeStream(e);let h=null!==(a=A.index)&&void 0!==a?a:0;l.imageSrc&&0===A.length?(h=this.getLeafSelection(d,A.index).index,d.deleteText(h,1,Lv)):A.length&&d.deleteText(h,A.length,Lv),this._widgetInstance.insertEmbed(h,"extendedImage",{src:c,alt:t,width:n,height:i})}applyHyperlink(e,t,n){var i,s,r,o,a;const l=null===(i=this._widgetInstance)||void 0===i?void 0:i.getFormat(),A=null===(s=this._widgetInstance)||void 0===s?void 0:s.getSelection(),d=null===(r=this._widgetInstance)||void 0===r?void 0:r.getQuillInstance();if(A.length>0&&this.hasEmbeddedElement(A))null===(o=this._widgetInstance)||void 0===o||o.format("link",{href:e,target:n});else{const i=0===t.length?e:t;let s=null!==(a=A.index)&&void 0!==a?a:0;if(void 0!==l.link&&0===A.length){const{index:e,length:t}=this.getLeafSelection(d,A.index);s=e,d.deleteText(e,t,Lv)}else A.length&&d.deleteText(A.index,A.length,Lv);d.insertText(s,i,"link",{href:e,target:n},Mv),d.setSelection(s+i.length,0)}}insertTable(e,t){this.getTableModule().insertTable(e,t)}showDialog(e){switch(e){case"ShowHyperlinkDialog":this.passHyperlinkDialogData();break;case"ShowInsertPictureDialog":this.passImageDialogData();break;case"ShowInsertTableDialog":this.passTableDialogData()}}focusEditor(){var e;null===(e=this._widgetInstance)||void 0===e||e.focus()}getSelectedContent(){if(!this._widgetInstance)return;const{start:e,length:t}=this.getCurrentPosition();return this._widgetInstance.getText(e,t)}insertText(e,t){if(!this._widgetInstance)return;const{start:n,length:i}=this.getCurrentPosition();switch(t){case"after":this._widgetInstance.insertText(n+i,e,Mv),this._widgetInstance.setSelection(n+i,e.length);break;case"before":this._widgetInstance.insertText(n,e,Mv),this._widgetInstance.setSelection(n,e.length);break;case"replace":this._widgetInstance.delete(n,i),this._widgetInstance.insertText(n,e,Mv),this._widgetInstance.setSelection(n,e.length)}}getCurrentPosition(){const e=this._widgetInstance.getSelection(!0);return e&&e.length?{start:e.index,length:e.length}:{start:0,length:this._widgetInstance.getLength()}}hasEmbeddedElement(e){var t;const n=(null===(t=this._widgetInstance)||void 0===t?void 0:t.getQuillInstance()).getContents(e.index,e.length).ops;for(const e of n)if(e.insert.extendedImage||e.insert.variable||e.insert.mention)return!0;return!1}async decodeStream(e){const t=await e.arrayBuffer();return new TextDecoder("utf-8").decode(t)}passHyperlinkDialogData(){var e,t,n;let i={};const s=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat(),r=null===(t=this._widgetInstance)||void 0===t?void 0:t.getSelection(),o=null===(n=this._widgetInstance)||void 0===n?void 0:n.getQuillInstance();if(r.length>0&&this.hasEmbeddedElement(r))i={url:s.link,text:null,blank:s.link?!!s.target:void 0};else if(void 0===s.link){i={text:this._widgetInstance.getText(r.index,r.length)}}else{const e=o.getLeaf(r.index),t=this._widgetInstance.getText(r.index,r.length);i={url:s.link,text:0===r.length?e[0].text:t,blank:!!s.target}}this.dispatchEvent(new Dv(i))}passImageDialogData(){var e;let t={};const n=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat();t={stream:n.imageSrc&&this.getJsObjectReference(n.imageSrc),alt:n.alt,width:n.width,height:n.height},this.dispatchEvent(new Fv(t))}passTableDialogData(){this.dispatchEvent(new Tv)}};C([xs({attribute:"is-binding-use",type:Boolean})],Vv.prototype,"isBindingUse",void 0),Vv=C([Es("dxbl-html-editor")],Vv);const zv="dxbl-gauge-base";class Wv extends Od{constructor(){super(Wv.eventName)}}Wv.eventName=zv+".drawn";class $v extends Od{constructor(){super($v.eventName)}}$v.eventName=zv+".exported",Ct.register(Wv.eventName,(e=>e.detail)),Ct.register($v.eventName,(e=>e.detail));class Gv extends ic{constructor(){super(),this._styleHelper=hc.getInstance(),this._drawnExecutor=sc(this.onGaugeDrawn.bind(this))}createWidgetDefaultOptions(){return{palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onGaugeDrawn(),onOptionChanged:()=>this.onGaugeOptionChanged(),onExported:()=>this.onGaugeExported()}}onGaugeDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Wv)}onGaugeOptionChanged(){this._drawnExecutor.execute()}onGaugeExported(){this.dispatchEvent(new $v)}onlyContainerSizeChanged(){this.onGaugeDrawn()}exportTo(...e){return this.executeClientMethod("exportTo",...e)}print(...e){return this.executeClientMethod("print",...e)}svg(...e){return this.executeClientMethod("svg",...e)}}const qv="dxbl-bar-gauge",Yv="legend",Xv="itemCaptions",Jv="color",jv="font",Zv="subtitle",eb="title",tb=`${jv}.${Jv}`,nb=`${Yv}.${tb}`,ib=`${eb}.${tb}`,sb=`${eb}.${Zv}.${tb}`,rb=`${Yv}.${ib}`,ob=`${Yv}.${sb}`,ab=`--${qv}`,lb=`${ab}-${Yv}`,Ab=`${jv}-${Jv}`,db=`${eb}-${Ab}`,cb=`${Zv}-${Ab}`;let hb=class extends Gv{getWidgetTypeName(){return"dxBarGauge"}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareLegend(e[Yv])}prepareLegend(e){const t=null==e?void 0:e[Xv];t&&(e.customizeText=e=>{var n,i;const s=null===(n=e.item)||void 0===n?void 0:n.index;return null!==(i=t[s])&&void 0!==i?i:e.text},delete e[Xv])}getThemeDependentOptionsDict(){const e={[ib]:`${ab}-${db}`,[sb]:`${ab}-${cb}`,[nb]:`${lb}-item-${Ab}`,[rb]:`${lb}-${db}`,[ob]:`${lb}-${cb}`};return{...super.getThemeDependentOptionsDict(),...e}}};hb=C([Es(qv)],hb);const ub="dxbl-sankey";class pb extends Od{constructor(){super(pb.eventName)}}pb.eventName=ub+".drawn";class mb extends Od{constructor(){super(mb.eventName)}}mb.eventName=ub+".exported";class gb{constructor({label:e,linksIn:t,linksOut:n}){this.Node={label:e,linksIn:t,linksOut:n}}}class Cb{constructor(e){this.Connection=e}}class fb extends CustomEvent{constructor(e){super(fb.eventName,{detail:new gb(e),bubbles:!0,composed:!0,cancelable:!0})}}fb.eventName=ub+".nodeClick";class vb extends CustomEvent{constructor(e){super(vb.eventName,{detail:new Cb(e),bubbles:!0,composed:!0,cancelable:!0})}}vb.eventName=ub+".linkClick",Ct.register(pb.eventName,(e=>e.detail)),Ct.register(mb.eventName,(e=>e.detail)),Ct.register(fb.eventName,(e=>e.detail)),Ct.register(vb.eventName,(e=>e.detail));const bb="dxbl-sankey",wb="exportTo",yb="print",Bb="svg",Eb="getAllLinks",Ib="getAllNodes",Sb="color",xb="font",Db="subtitle",Fb="title",Tb="label",Hb=`${xb}.${Sb}`,Ub=`${Fb}.${Hb}`,Qb=`${Fb}.${Db}.${Hb}`,Pb=`${Tb}.${Hb}`,Nb=`--${bb}`,Rb=`${xb}-${Sb}`,Lb=`${Fb}-${Rb}`,Mb=`${Db}-${Rb}`,kb=`${Tb}-${Rb}`;let Kb=class extends ic{constructor(){super(),this._styleHelper=hc.getInstance(),this._drawnExecutor=sc(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSankey"}createWidgetDefaultOptions(){return{tooltip:{enabled:!1},palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onNodeClick:e=>this.onNodeClick(e.target),onLinkClick:e=>this.onLinkClick(e.target),onExported:()=>this.onExported()}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}_prepareDataSource(e){const t=e.sources||[],n=e.targets||[],i=e.weights||[],s=[];for(let e=0;e<t.length;e++)s.push({source:t[e],target:n[e],weight:i[e]});return s}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new pb)}onOptionChanged(){this._drawnExecutor.execute()}onNodeClick({label:e,linksIn:t,linksOut:n}){this.dispatchEvent(new fb({label:e,linksIn:t,linksOut:n}))}onLinkClick({connection:e}){this.dispatchEvent(new vb(e))}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}onExported(){this.dispatchEvent(new mb)}getThemeDependentOptionsDict(){const e={[Ub]:`${Nb}-${Lb}`,[Qb]:`${Nb}-${Mb}`,[Pb]:`${Nb}-${kb}`};return{...super.getThemeDependentOptionsDict(),...e}}[wb](...e){return this.executeClientMethod(wb,...e)}[yb](...e){return this.executeClientMethod(yb,...e)}[Bb](...e){return this.executeClientMethod(Bb,...e)}[Eb](...e){return this.executeClientMethod(Eb,...e).then((e=>e.map((e=>e.connection))))}[Ib](...e){return this.executeClientMethod(Ib,...e).then((e=>e.map((e=>({label:e.label,linksIn:e.linksIn,linksOut:e.linksOut})))))}};Kb=C([Es(bb)],Kb);const Ob="dxbl-sparkline";class _b extends Od{constructor(){super(_b.eventName)}}_b.eventName=Ob+".drawn";class Vb extends Od{constructor(){super(Vb.eventName)}}Vb.eventName=Ob+".exported",Ct.register(_b.eventName,(e=>e.detail)),Ct.register(Vb.eventName,(e=>e.detail));const zb="dxbl-sparkline",Wb=`--${zb}`,$b="exportTo",Gb="print",qb="svg";let Yb=class extends ic{constructor(){super(),this._drawnExecutor=sc(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSparkline"}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onExported:()=>this.onExported()}}createWidgetDefaultOptions(){return{ignoreEmptyPoints:!0,tooltip:{enabled:!1}}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}getContainerToSetStyle(){return this.getWidgetElement()}_prepareDataSource(e){const t=e.arg||[],n=e.val||[],i=[];for(let e=0;e<t.length;e++)i.push({arg:t[e],val:n[e]});return i}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new _b)}onExported(){this.dispatchEvent(new Vb)}onOptionChanged(){this._drawnExecutor.execute()}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}getSkippedEmptyOptions(){return["dataSource"]}[$b](...e){return this.executeClientMethod($b,...e)}[Gb](...e){return this.executeClientMethod(Gb,...e)}[qb](...e){return this.executeClientMethod(qb,...e)}getThemeDependentOptionsDict(){const e={pointColor:`${Wb}-point-color`};return{...super.getThemeDependentOptionsDict(),...e}}};Yb=C([Es(zb)],Yb);const Xb="dxbl-range-selector";class Jb extends Od{constructor(){super(Jb.eventName)}}Jb.eventName=Xb+".drawn";class jb extends CustomEvent{constructor(e,t){super(jb.eventName,{detail:new ew(e,t),bubbles:!0,composed:!0,cancelable:!0})}}jb.eventName=Xb+".value-changed";class Zb extends Od{constructor(){super(Zb.eventName)}}Zb.eventName=Xb+".exported";class ew{constructor(e,t){this.Value=e,this.PreviousValue=t}}Ct.register(Jb.eventName,(e=>e.detail)),Ct.register(jb.eventName,(e=>e.detail)),Ct.register(Zb.eventName,(e=>e.detail));const tw="title",nw="color",iw="scale",sw="sliderMarker",rw=`font.${nw}`,ow=`${tw}.${rw}`,aw=`${tw}.subtitle.${rw}`,lw=`${iw}.tick.${nw}`,Aw=`${iw}.minorTick.${nw}`,dw=`${sw}.${nw}`,cw=`${sw}.${rw}`,hw=`sliderHandle.${nw}`,uw=`shutter.${nw}`,pw=`${iw}.label.${rw}`,mw="--dxbl-range-selector",gw=`${mw}-scale-tick-color`,Cw=`${mw}-title-font-color`,fw=`${mw}-selected-range-color`,vw=`${mw}-slider-marker-color`,bw=`${mw}-slider-marker-font-color`,ww=`${mw}-slider-handle-color`,yw=`${mw}-shutter-color`,Bw=`${mw}-container-background-color`,Ew=`${mw}-scale-label-font-color`,Iw="exportTo",Sw="print",xw="svg";let Dw=class extends ic{get styleHelper(){return this._styleHelper}constructor(){super(),this._styleHelper=hc.getInstance(),this._drawnExecutor=sc(this.onDrawn.bind(this)),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onValueChanged:e=>this.onValueChanged(e),onExported:()=>this.onExported()}}getWidgetTypeName(){return"dxRangeSelector"}createWidgetSettingsConverter(){return new cc}createInitOptions(){const e=super.createInitOptions(),t=this._widgetSettingsConverter.createDefaultSettings();return e.scale={label:{font:{opacity:rc.defaultAxisLabelFontOpacity}}},e.chart={commonSeriesSettings:t.commonSeriesSettings,dataPrepareSettings:t.dataPrepareSettings,palette:this.styleHelper.palette},e}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Jb)}onlyContainerSizeChanged(){this.onDrawn()}onOptionChanged(){this._drawnExecutor.execute()}onValueChanged(e){this.dispatchEvent(new jb(e.value,e.previousValue))}onExported(){this.dispatchEvent(new Zb)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValueOptions(e),this.prepareImageOptions(e),this.prepareBehaviorOptions(e),e.chart&&this._widgetSettingsConverter.processSpecialChartSettings(e,e.chart)}prepareOptions(e,t,n){e[t]=e[t]||{};for(const[i,s]of Object.entries(n))i in e&&(e[t][s]=e[i],delete e[i])}prepareValueOptions(e){this.prepareOptions(e,"value",{selectedRangeStartValue:"startValue",selectedRangeEndValue:"endValue",selectedRangeLength:"length"})}prepareImageOptions(e){"background"in e&&this.prepareOptions(e.background,"image",{imagePosition:"location",imageUrl:"url"})}prepareBehaviorOptions(e){this.prepareOptions(e,"behavior",{allowSlidersSwap:"allowSlidersSwap",animationEnabled:"animationEnabled",manualRangeSelectionEnabled:"manualRangeSelectionEnabled",moveSelectedRangeByClick:"moveSelectedRangeByClick",snapToTicks:"snapToTicks",valueChangeMode:"valueChangeMode"})}[Iw](...e){return this.executeClientMethod(Iw,...e)}[Sw](...e){return this.executeClientMethod(Sw,...e)}[xw](...e){return this.executeClientMethod(xw,...e)}getThemeDependentOptionsDict(){const e={[ow]:Cw,[aw]:Cw,[lw]:gw,[Aw]:gw,selectedRangeColor:fw,[dw]:vw,[cw]:bw,[hw]:ww,[uw]:yw,containerBackgroundColor:Bw,[pw]:Ew};return{...super.getThemeDependentOptionsDict(),...e}}};Dw=C([Es("dxbl-range-selector")],Dw);const Fw="dxbl-calendar-table-container";class Tw{}Tw.MainElement=pe.Prefix+"-calendar",Tw.SelectedItem=Tw.MainElement+"-selected-item",Tw.SelectedRange=Tw.MainElement+"-selected-range",Tw.SelectedRangeFirst=Tw.SelectedRange+"-first",Tw.SelectedRangeLast=Tw.SelectedRange+"-last",Tw.Header=Tw.MainElement+"-header",Tw.Content=Tw.MainElement+"-content",Tw.DataTableContainerWrapperClassName=Tw.MainElement+"-data-table-container-wrapper",Tw.Footer=Tw.MainElement+"-footer",Tw.WeekRow=Tw.MainElement+"-week-row",Tw.YearRow=Tw.MainElement+"-year-row",Tw.DecadeRow=Tw.MainElement+"-decade-row",Tw.CenturyRow=Tw.MainElement+"-century-row",Tw.Cell=Tw.MainElement+"-cell",Tw.Day=Tw.MainElement+"-day",Tw.NotCurrentView=Tw.MainElement+"-not-current-view",Tw.HeaderHelper=Tw.MainElement+"-header",Tw.HeaderTitleButton=Tw.HeaderHelper+"-title-btn",Tw.HeaderPreviousYearButton=Tw.HeaderHelper+"-previous-year-btn",Tw.HeaderPreviousMonthButton=Tw.HeaderHelper+"-previous-month-btn",Tw.HeaderPreviousPeriodButton=Tw.HeaderHelper+"-previous-period-btn",Tw.HeaderNextYearButton=Tw.HeaderHelper+"-next-year-btn",Tw.HeaderNextMonthButton=Tw.HeaderHelper+"-next-month-btn",Tw.HeaderNextPeriodButton=Tw.HeaderHelper+"-next-period-btn";class Hw{}var Uw,Qw;Hw.MainElement=`.${Tw.MainElement}`,Hw.SelectedItem=`td.${Tw.SelectedItem}`,Hw.Header=`.${Tw.Header}`,Hw.FirstDataTableContainer=`${Fw}:nth-of-type(1)`,Hw.DateTableContainer=Fw,Hw.DataTable=`.${Tw.Content} > table`,Hw.DataTableContainerWrapperClassName=`.${Tw.DataTableContainerWrapperClassName}`,Hw.Footer=`.${Tw.Footer}`,Hw.Day=`.${Tw.Day}`,Hw.Cell=`.${Tw.Cell}`,function(e){e.class="class",e.view="view",e.minView="min-view",e.viewDate="view-date",e.enableMultiSelect="enable-multi-select",e.minDate="min-date",e.maxDate="max-date",e.visiblePeriodsCount="visible-periods-count",e.enableRangeSelect="enable-range-select",e.periodIndex="period-index",e.hasNullStartXorEndDate="has-null-start-xor-end-date",e.selectDateOnFirstFocus="select-date-on-first-focus"}(Uw||(Uw={})),function(e){e.dataDate="data-date",e.dataMonth="data-month",e.dataYear="data-year",e.dataDecade="data-decade"}(Qw||(Qw={}));const Pw=12,Nw=new Date(new Date(Date.UTC(1,0,1)).setUTCFullYear(1)),Rw=new Date(Date.UTC(9999,11,31)),Lw=864e5;class Mw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI(!1)}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI(!0))}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(!1),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Mw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Mw.addSelectedClassesToCell(t)}}refreshUI(e){const t=this.getStartPointedDateRange(),n=this.getEndPointedDateRange();for(let i=0;i<this.cellElements.length;i++){const s=this.cellElements[i];if(cy.isDateCellDisabled(s))continue;const r=Number(s.dataset.date);Mw.removeDayCellSelectedClasses(s),e&&this.isDateRangeBoundary(r,t,n)&&T.DomUtils.addClassName(s,Tw.SelectedRange),this.needApplySelectedStyle(r,t,n,e)&&Mw.addSelectedClassesToCell(s),s.hasAttribute("data-selected")&&!this.clearSelection&&Mw.addSelectedClassesToCell(s)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,n,i){return!(e<t||e>n)&&(!i||!this.isDateRangeBoundary(e,t,n))}isDateRangeBoundary(e,t,n){if(!this.isDateDisabled(e)&&(e===t||e===n))return!0;return!(!(e>t&&e<n)||e!==this.getBoundaryDate(t,e)&&e!==this.getBoundaryDate(n,e))}getBoundaryDate(e,t){const n=e<t,i=n?1:-1;let s=e;for(;(n?s<t:s>t)&&this.isDateDisabled(s);)s+=i*Lw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&cy.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute(Qw.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Tw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Tw.SelectedItem),T.DomUtils.removeClassName(e,Tw.SelectedRange),T.DomUtils.removeClassName(e,"text-white")}}class kw{constructor(e,t,n){this._pointerDownDate=e,this._pointerUpDate=null,this._clearSelection=t,this._callback=n}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate=e}get isValid(){var e;return this.pointerDownDate.getTime()===(null===(e=this.pointerUpDate)||void 0===e?void 0:e.getTime())}stop(){null!==this._callback&&this._pointerUpDate&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){}}class Kw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI()}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI())}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Kw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Kw.addSelectedClassesToCell(t)}}refreshUI(){const e=this.getStartPointedDateRange(),t=this.getEndPointedDateRange();for(let n=0;n<this.cellElements.length;n++){const i=this.cellElements[n];if(cy.isDateCellDisabled(i))continue;const s=Number(i.dataset.date);Kw.removeDayCellSelectedClasses(i),this.isDateDisabled(s)||(this.isDateRangeBoundary(s,e,t)&&T.DomUtils.addClassName(i,Tw.SelectedRange),s===e&&T.DomUtils.addClassName(i,Tw.SelectedRangeFirst),s===t&&T.DomUtils.addClassName(i,Tw.SelectedRangeLast)),this.needApplySelectedStyle(s,e,t)&&Kw.addSelectedClassesToCell(i),i.hasAttribute("data-selected")&&!this.clearSelection&&Kw.addSelectedClassesToCell(i)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,n){return!(e<t||e>n)&&!this.isDateRangeBoundary(e,t,n)}isDateRangeBoundary(e,t,n){if(e===t||e===n)return!0;return e>t&&e<n&&(e===this.getBoundaryDate(t,e)||e===this.getBoundaryDate(n,e))}getBoundaryDate(e,t){const n=e<t,i=n?1:-1;let s=e;for(;(n?s<t:s>t)&&this.isDateDisabled(s);)s+=i*Lw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&cy.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute(Qw.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Tw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Tw.SelectedItem),T.DomUtils.removeClassName(e,Tw.SelectedRange),T.DomUtils.removeClassName(e,Tw.SelectedRangeFirst),T.DomUtils.removeClassName(e,Tw.SelectedRangeLast),T.DomUtils.removeClassName(e,"text-white")}}var Ow,_w,Vw,zw;!function(e){e[e.PreviousYear=0]="PreviousYear",e[e.PreviousMonth=1]="PreviousMonth",e[e.Title=2]="Title",e[e.NextMonth=3]="NextMonth",e[e.NextYear=4]="NextYear",e[e.PreviousPeriod=5]="PreviousPeriod",e[e.NextPeriod=6]="NextPeriod"}(Ow||(Ow={})),function(e){e[e.Header=0]="Header",e[e.DataTable=1]="DataTable",e[e.Footer=2]="Footer"}(_w||(_w={})),function(e){e[e.Month=0]="Month",e[e.Year=1]="Year",e[e.Decade=2]="Decade",e[e.Century=3]="Century"}(Vw||(Vw={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(zw||(zw={}));class Ww extends Ja{constructor(){super(),this._handlePointerEventsMode=r.None,this.viewDate=new Date,this.viewType=Vw.Month,this.minViewType=Vw.Month,this.periodIndex=0,this._pointerEventsHelper=new q(this)}get calendar(){return this._calendar||(this._calendar=T.DomUtils.getParentByTagName(this,tl)),this._calendar}get IsMinMeasure(){return this.viewType===this.minViewType}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize()}disconnectedCallback(){super.disconnectedCallback(),this._pointerEventsHelper.dispose()}updated(e){e.has("viewDate")&&this.calendar.restoreFocus(),e.has("viewType")&&(this._handlePointerEventsMode=r.None,this.IsMinMeasure&&(this._handlePointerEventsMode=r.Click|r.Dragging)),super.updated(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([xs({attribute:Uw.viewDate,converter:e=>new Date(Number(e))})],Ww.prototype,"viewDate",void 0),C([xs({type:Number,attribute:Uw.view})],Ww.prototype,"viewType",void 0),C([xs({type:Number,attribute:Uw.minView})],Ww.prototype,"minViewType",void 0),C([xs({type:Number,attribute:Uw.periodIndex})],Ww.prototype,"periodIndex",void 0);class $w extends CustomEvent{constructor(e,t,n){super($w.eventName,{detail:new qw(e,t,n),bubbles:!0,composed:!0,cancelable:!0})}}$w.eventName=tl+".cellpointerup";class Gw extends Event{constructor(){super(Gw.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}Gw.eventName=tl+".keyboardnavigationleaved";class qw{constructor(e,t,n){this.PointerDownDate=e,this.PointerUpDate=t,this.ClearSelection=n}}Ct.register($w.eventName,(e=>e.detail));class Yw extends On{constructor(e,t){super(e.getKeyboardNavigator(),t),this.calendar=e}isFocusedFromOutside(){return this.calendar.isSameNode(document.activeElement)}isFocusedFromDataTable(){var e,t,n;return null!==(n=null===(t=null!==(e=this.getDataTableContainerWrapper())&&void 0!==e?e:this.getCurrentDataTableContainer())||void 0===t?void 0:t.contains(document.activeElement))&&void 0!==n&&n}getHeader(){return this.calendar.getHeaderElement()}getDataTableContainerWrapper(){return this.calendar.tableContainerWrapper}getCurrentDataTableContainer(){return this.calendar.currentTableContainer}getAllDataTableContainers(){return this.calendar.enumerateTableContainers}getFooter(){return this.calendar.getFooterElement()}}class Xw extends Yw{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${pe.Button}:not(.${pe.Disabled}), :scope > div.${Tw.HeaderTitleButton}:not(.${pe.Disabled})`,this.buttonClassToButtonType=new Map([[Tw.HeaderPreviousYearButton,Ow.PreviousYear],[Tw.HeaderPreviousMonthButton,Ow.PreviousMonth],[Tw.HeaderPreviousPeriodButton,Ow.PreviousPeriod],[Tw.HeaderTitleButton,Ow.Title],[Tw.HeaderNextYearButton,Ow.NextYear],[Tw.HeaderNextMonthButton,Ow.NextMonth],[Tw.HeaderNextPeriodButton,Ow.NextPeriod]]),this.buttonTypeToButtonClass=new Map([[Ow.PreviousYear,Tw.HeaderPreviousYearButton],[Ow.PreviousMonth,Tw.HeaderPreviousMonthButton],[Ow.PreviousPeriod,Tw.HeaderPreviousPeriodButton],[Ow.Title,Tw.HeaderTitleButton],[Ow.NextYear,Tw.HeaderNextYearButton],[Ow.NextMonth,Tw.HeaderNextMonthButton],[Ow.NextPeriod,Tw.HeaderNextPeriodButton]])}getShortcutContext(){return{AreaType:_w.Header,ButtonType:this.getSelectedButtonType()}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){const e=this.getButtonIndexByType(this.lastFocusedButtonType);this.selectedItemIndex=this.isFocusedFromOutside()?0:this.isFocusedFromDataTable()?this.itemCount-1:null!=e?e:0,super.activate()}leaveBackward(){this.lastFocusedButtonType=void 0,super.leaveBackward()}leaveForward(){this.lastFocusedButtonType=void 0,super.leaveForward()}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Ie.KeyCode.Space:case Ie.KeyCode.Enter:return this.calendar.scheduleFocusRestoration(!1),this.performShortcutEvent(e),!0;case Ie.KeyCode.Left:case Ie.KeyCode.Up:case Ie.KeyCode.Home:case Ie.KeyCode.PageUp:case Ie.KeyCode.Right:case Ie.KeyCode.Down:case Ie.KeyCode.End:case Ie.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}updateSelectedItemByIndex(e){super.updateSelectedItemByIndex(e),this.lastFocusedButtonType=this.getSelectedButtonType()}getSelectedButtonType(){for(const e of this.selectedItemElement.classList)if(this.buttonClassToButtonType.has(e))return this.buttonClassToButtonType.get(e)}getButtonIndexByType(e){return e?this.items.findIndex((t=>t.classList.contains(this.buttonTypeToButtonClass.get(e)))):void 0}}class Jw extends Yw{get isObsolete(){return this.calendar.currentView!==this.currentCalendarView}get targetElement(){return super.targetElement}constructor(e,t){super(e,t),this.boundCalendarFocusedDayChangedHandler=this.onCalendarFocusedDayChanged.bind(this),this.calendar.onFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler)}activate(){this.applyCalendarFocus(),super.activate()}onDispose(){this.calendar.offFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler),super.onDispose()}get dateSelectionRenderer(){return this.calendar.dateSelectionRenderer}getShortcutContext(){const e=this.lastShortcutArgs;return delete this.lastShortcutArgs,{AreaType:_w.DataTable,Offset:null==e?void 0:e.offset,Row:null==e?void 0:e.row,Column:null==e?void 0:e.column,PeriodIndex:null==e?void 0:e.periodIndex,Date:null==e?void 0:e.date}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevDay(e);case Ie.KeyCode.Right:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextDay(e);case Ie.KeyCode.Up:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevRow(e);case Ie.KeyCode.Down:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextRow(e);case Ie.KeyCode.Home:return this.handleHomeKey(e);case Ie.KeyCode.End:return this.handleEndKey(e);case Ie.KeyCode.PageUp:return this.calendar.scheduleFocusRestoration(),this.handlePageUpKey(e);case Ie.KeyCode.PageDown:return this.calendar.scheduleFocusRestoration(),this.handlePageDownKey(e);case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.handleItemClick(e),!0}return super.handleKeyDown(e)}handleKeyUp(e){return this.isShiftKeyCode(e)&&this.stopSelectingDays(),super.handleKeyUp(e)}isShiftKeyCode(e){return 16===Ie.KeyUtils.getEventKeyCode(e)}getSelectedItemRowIndex(){return Math.floor(this.selectedItemIndex/this.rowLength)}getSelectedItemColumnIndex(){return Math.floor(this.selectedItemIndex%this.rowLength)}handlePageUpKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?-12:-1,date:e.shiftKey?cy.getDateFromCell(this.selectedItemElement):void 0}),!0}handlePageDownKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?Pw:1,date:e.shiftKey?cy.getDateFromCell(this.selectedItemElement):void 0}),!0}prepareAndPerformShortcutEvent(e,t){t.periodIndex=this.targetElement.periodIndex,this.lastShortcutArgs=t,this.performShortcutEvent(e)}tryRemoveTabindexFromSelectedElement(){this.selectedItemElement&&bn.removeTabIndex(this.selectedItemElement)}onCalendarFocusedDayChanged(e,t=!0){this.tryRemoveTabindexFromSelectedElement(),this.isActive()&&e&&(this.tryRestoreSelectedItem(e),this.selectedItemElement&&bn.makeElementFocusable(this.selectedItemElement),t&&this.selectItem(this.selectedItemIndex))}applyCalendarFocus(){var e;this.tryRemoveTabindexFromSelectedElement();const t=null!==(e=this.calendar.getFocusedCellElementInView(this.currentCalendarView))&&void 0!==e?e:this.targetElement.querySelector(Hw.SelectedItem);t&&this.tryRestoreSelectedItem(t)}tryRestoreSelectedItem(e){if(!e.isConnected)return;const t=this.navigator.getStrategy(this.getCurrentDataTableContainer());if(!t)return;const n=t.items.indexOf(e);n>-1&&(t.selectedItemIndex=n)}initStartDaySelection(e){null===this.dateSelectionRenderer&&e.shiftKey&&this.calendar.createDateSelectionRenderer(cy.getDateFromCell(this.selectedItemElement),!e.ctrlKey&&!e.metaKey)}stopSelectingDays(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(this.selectedItemElement),this.calendar.stopSelectingDates())}updateSelectedItemFocusableState(){this.selectedItemElement&&(this.isActive()?bn.makeElementFocusable(this.selectedItemElement):bn.removeTabIndex(this.selectedItemElement))}isActive(){return this.targetElement===this.calendar.currentTableContainer}}class jw extends Jw{get rowLength(){return this._rowLength}get currentCalendarView(){return this._currentCalendarView}get itemSelector(){return`:scope tr > .${Tw.Cell}`}constructor(e,t,n,i){super(e,t),this._currentCalendarView=n,this._rowLength=i}activate(){super.activate(),this.extendSelection()}moveToPrevDay(e){var t,n;this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(n=i.periodsToSkip)&&void 0!==n?n:-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextDay(e){var t,n;this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(n=i.periodsToSkip)&&void 0!==n?n:1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToPrevRow(e){var t,n;this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(n=i.periodsToSkip)&&void 0!==n?n:-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextRow(e){var t,n;this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(n=i.periodsToSkip)&&void 0!==n?n:1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}handleHomeKey(e){var t;const n=this.getSelectedItemRowIndex()*this.rowLength,i={value:n-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(i,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:-1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:n),this.extendSelection()}return!0}handleEndKey(e){var t;const n=(this.getSelectedItemRowIndex()+1)*this.rowLength-1,i={value:n-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(i,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:n),this.extendSelection()}return!0}handlePageUpKey(e){const t={value:-(e.shiftKey?cy.getYearOffsetInDaysFrom(-1,this.selectedItemElement):cy.getMonthOffsetInDaysFrom(-1,this.selectedItemElement)),isHorizontal:!0};this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageUpKey(e,n.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}handlePageDownKey(e){const t={value:e.shiftKey?cy.getYearOffsetInDaysFrom(1,this.selectedItemElement):cy.getMonthOffsetInDaysFrom(1,this.selectedItemElement),isHorizontal:!0};this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageDownKey(e,n.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}extendSelection(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(this.selectedItemElement))}handleItemClick(e){const t=cy.getDateFromCell(this.selectedItemElement);this.calendar.tryCreateRangeSelectionRenderer(t),this.prepareAndPerformShortcutEvent(e,{date:t})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t,date:this.calendar.focusedDate})}}class Zw extends Jw{get rowLength(){return 4}moveToPrevDay(e){var t;const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextDay(e){var t;const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToPrevRow(e){var t;const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextRow(e){var t;const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}handleHomeKey(e){const t=this.getIndexOfFirstAccessibleItemInCurrentView(),n=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==n.unitsToSkip?this.selectedItemIndex+n.unitsToSkip:t)}return!0}handleEndKey(e){const t=this.getIndexOfLastAccessibleItemInCurrentView(),n=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==n.unitsToSkip?this.selectedItemIndex+n.unitsToSkip:t)}return!0}handlePageUpKey(e){const t=this.calendar.tryMoveFocus({value:-(this.calendar.currentView===Vw.Year?Pw:10),isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageUpKey(e,t.periodsToSkip)}return!0}handlePageDownKey(e){const t=this.calendar.tryMoveFocus({value:this.calendar.currentView===Vw.Year?Pw:10,isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageDownKey(e,t.periodsToSkip)}return!0}handleItemClick(e){this.calendar.scheduleFocusRestoration(),this.prepareAndPerformShortcutEvent(e,{row:this.getSelectedItemRowIndex(),column:this.getSelectedItemColumnIndex()})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t})}getIndexOfFirstAccessibleItemInCurrentView(){let e=0;for(;e<=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e++;return e}getIndexOfLastAccessibleItemInCurrentView(){let e=this.itemCount-1;for(;e>=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e--;return e}itemBelongsToCurrentView(e){var t;return!(null===(t=this.getItem(e))||void 0===t?void 0:t.classList.contains(Tw.NotCurrentView))}}class ey extends Zw{get currentCalendarView(){return Vw.Year}get itemSelector(){return`:scope .${Tw.YearRow} > td`}}class ty extends Zw{get currentCalendarView(){return Vw.Decade}get itemSelector(){return`:scope .${Tw.DecadeRow} > td:not(.${pe.Invisible})`}}class ny extends Zw{get currentCalendarView(){return Vw.Century}get itemSelector(){return`:scope .${Tw.CenturyRow} > td:not(.${pe.Invisible})`}}class iy extends Yw{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${pe.Button}`}getShortcutContext(){return{AreaType:_w.Footer,ButtonType:this.selectedItemIndex}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){this.selectedItemIndex=this.isFocusedFromOutside()?this.itemCount-1:0,super.activate()}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Ie.KeyCode.Space:case Ie.KeyCode.Enter:return this.performShortcutEvent(e),!0;case Ie.KeyCode.Left:case Ie.KeyCode.Up:case Ie.KeyCode.Home:case Ie.KeyCode.PageUp:case Ie.KeyCode.Right:case Ie.KeyCode.Down:case Ie.KeyCode.End:case Ie.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}}class sy extends Yw{constructor(e){super(e,e),this._isFirstFocus=!0}updateSelectedItemByChildElement(e,t=null){super.updateSelectedItemByChildElement(e,t),this.calendar.hasAttribute(Uw.selectDateOnFirstFocus)&&this._isFirstFocus&&(this._isFirstFocus=!1,this.selectedItemIndex=1)}queryItems(){return new Array(this.getHeader(),...this.getAllDataTableContainers(),this.getFooter())}activate(){this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex))&&(this.selectedItemIndex=this.findActiveDataTableStrategyIndex()),super.activate()}createItemStrategy(e){if(e.matches(Hw.Header))return new Xw(this.calendar,e);if(e.matches(Hw.DateTableContainer))return this.createDataTableStrategy(e);if(e.matches(Hw.Footer))return new iy(this.calendar,e);throw new Error("Not implemented")}createDataTableStrategy(e){switch(e.viewType){case Vw.Month:return new jw(this.calendar,e,Vw.Month,7);case Vw.Year:return e.IsMinMeasure?new jw(this.calendar,e,Vw.Year,4):new ey(this.calendar,e);case Vw.Decade:return e.IsMinMeasure?new jw(this.calendar,e,Vw.Decade,4):new ty(this.calendar,e);case Vw.Century:return e.IsMinMeasure?new jw(this.calendar,e,Vw.Century,4):new ny(this.calendar,e)}}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:return this.handleTab(e);case Ie.KeyCode.Up:return this.handleArrowUp(e);case Ie.KeyCode.Down:return this.handleArrowDown(e);case Ie.KeyCode.Left:case Ie.KeyCode.Home:case Ie.KeyCode.PageUp:return this.handleMove(e,!1);case Ie.KeyCode.Right:case Ie.KeyCode.End:case Ie.KeyCode.PageDown:return this.handleMove(e,!0)}return super.handleKeyDown(e)}handleTab(e){if(this.isDateTableStrategy(this.getSelectedItemStrategy())){const t=this.findNotDataTableStrategyIndex(!e.shiftKey);if(-1!==t)return this.selectItem(t),!0;this.updateDataTableStrategiesFocusableElements(),this.selectedItemIndex=e.shiftKey?0:this.itemCount-1}else{if(this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex+(e.shiftKey?-1:1))))return this.updateDataTableStrategiesFocusableElements(),this.selectItem(this.findActiveDataTableStrategyIndex()),!0}return e.shiftKey?(this.selectedItemIndex>0?this.moveToPrevItem():(this.leaveBackward(),this.dispatchKeyboardNavigationLeavedEvent()),!0):this.selectedItemIndex<this.itemCount-1?(this.moveToNextItem(),!0):super.handleKeyDown(e)}handleArrowUp(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!1)}handleArrowDown(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!0)}handleMove(e,t){return this.isAnyModifierKeyPressed(e)?super.handleKeyDown(e):(t?this.moveToNextItem():this.moveToPrevItem(),!0)}dispatchKeyboardNavigationLeavedEvent(){setTimeout((()=>this.targetElement.dispatchEvent(new Gw)),0)}isAnyModifierKeyPressed(e){return e.shiftKey||e.ctrlKey||e.metaKey||e.altKey}findNotDataTableStrategyIndex(e){if(e){for(let e=this.selectedItemIndex+1;e<this.itemCount;e++)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e}else for(let e=this.selectedItemIndex-1;e>=0;e--)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e;return-1}findActiveDataTableStrategyIndex(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(this.isDateTableStrategy(t)&&t.isActive())return e}return 0}updateDataTableStrategiesFocusableElements(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);this.isDateTableStrategy(t)&&t.updateSelectedItemFocusableState()}Mr.isActivated&&Mr.updateSubscriptions()}isDateTableStrategy(e){return e instanceof Jw}}class ry{get focusedItem(){return this._focusedItem}set focusedItem(e){this._focusedItem=e}get focusedElement(){return this._focusedElement}set focusedElement(e){this._focusedElement=e}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get calendar(){return this._calendar}constructor(e){this.boundCalendarMinMaxDatesChangedHandler=this.updateMinMaxDates.bind(this),this._calendar=e,this._focusedElement=null,this._minDate=this._calendar.minDate,this._maxDate=this._calendar.maxDate,this.calendar.onMinMaxDatesChanged(this.boundCalendarMinMaxDatesChangedHandler)}get calendarCurrentViewDate(){return this.calendar.currentViewDate}getUpdatedElementToFocus(){return this.focusedElement=this.findCellElementByItem(this.getUpdatedItemToFocus()),this.focusedElement}updateMinMaxDates(e,t){e&&(this._minDate=e),t&&(this._maxDate=t)}}class oy extends ry{tryMoveFocus(e,t){const n=cy.getMonthFromCell(t);this.focusedItem=this.getMonthRelativeTo(e,n),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const i=this.areMonthsDifferByYear(e,n);return{needChangePeriod:i,periodsToSkip:i?e.value:void 0,unitsToSkip:this.focusedItem&&n?this.focusedItem-n:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?cy.getMonthFromCell(e):this.calendarCurrentViewDate.getMonth()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Qw.dataMonth}="${zw[e]}"]`)}applyMinMaxDates(e){return this.calendarCurrentViewDate.getFullYear()===this.minDate.getFullYear()&&e<this.minDate.getMonth()?this.minDate.getMonth():this.calendarCurrentViewDate.getFullYear()===this.maxDate.getFullYear()&&e>this.maxDate.getMonth()?this.maxDate.getMonth():e}getMonthRelativeTo(e,t){if(void 0===t)return;const n=(this.getRawIndex(e,t)%Pw+Pw)%Pw;return zw[zw[n%Pw]]}areMonthsDifferByYear(e,t){if(void 0===t)return!1;const n=this.getRawIndex(e,t);return n<0||n>=Pw}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}getRawIndex(e,t){return t+this.getEffectiveOffset(e)}}class ay extends ry{tryMoveFocus(e,t){const n=cy.getYearFromCell(t);this.focusedItem=this.getYearRelativeTo(e,n),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const i=this.areYearsDifferByDecade(this.calendarCurrentViewDate.getFullYear(),this.focusedItem);return{needChangePeriod:i,periodsToSkip:i?e.value:void 0,unitsToSkip:this.focusedItem&&n?this.focusedItem-n:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?cy.getYearFromCell(e):this.calendarCurrentViewDate.getFullYear()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Qw.dataYear}="${e}"]`)}applyMinMaxDates(e){return e<this.minDate.getFullYear()?this.minDate.getFullYear():e>this.maxDate.getFullYear()?this.maxDate.getFullYear():e}getYearRelativeTo(e,t){if(void 0!==t)return t+this.getEffectiveOffset(e)}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}areYearsDifferByDecade(e,t){return void 0!==e&&void 0!==t&&Math.floor(e/10)!==Math.floor(t/10)}}class ly extends ry{tryMoveFocus(e,t){const n=cy.getDateFromCell(t);this.focusedItem=this.applyMinMaxDates(this.getDateRelativeTo(e,t)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const i=this.areDatesDifferByMonthOrYear(this.calendarCurrentViewDate,this.focusedItem);return{needChangePeriod:i,periodsToSkip:i?this.getShortcutOffsetInMonths(this.focusedItem,this.calendarCurrentViewDate):void 0,unitsToSkip:this.focusedItem?Math.round((this.focusedItem.getTime()-n.getTime())/Lw):void 0}}getUpdatedItemToFocus(){if(this.focusedItem=this.getFindCachedFocusedItem(),this.areDatesDifferByMonthOrYear(this.focusedItem,this.calendarCurrentViewDate)){const e=this.focusedItem.getDate();this.focusedItem=new Date(this.calendarCurrentViewDate);let t=this.trySetDate(this.focusedItem,e);null===t&&(t=this.trySetDate(this.focusedItem,this.calendarCurrentViewDate.getDate())),null===t&&(t=this.trySetDate(this.focusedItem,1)),this.focusedItem=t}return this.focusedItem=this.applyMinMaxDates(this.focusedItem),this.focusedItem}getFindCachedFocusedItem(){let e=this.focusedItem;if(void 0===e){const t=this.calendar.findSelectedCellElement();e=t?cy.getDateFromCell(t):this.calendarCurrentViewDate}return e}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`.${Tw.Day}[${Qw.dataDate}="${e.getTime()}"]`)}applyMinMaxDates(e){return e<this.minDate?new Date(this.minDate):e>this.maxDate?new Date(this.maxDate):new Date(e)}areDatesDifferByMonthOrYear(e,t){return e.getMonth()!==t.getMonth()||this.areDatesDifferByYear(e,t)}areDatesDifferByYear(e,t){return e.getUTCFullYear()!==t.getUTCFullYear()}trySetDate(e,t){const n=new Date(e);return n.setDate(t),this.areDatesDifferByMonthOrYear(n,e)?null:n}getShortcutOffsetInMonths(e,t){return e.getMonth()-t.getMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*Pw}getDateRelativeTo(e,t){const n=cy.getDateFromCell(t),i=new Date(n);return new Date(i.setDate(i.getDate()+e.value*(e.isHorizontal?1:7)))}}class Ay extends ry{tryMoveFocus(e,t){const n=cy.getDecadeFromCell(t);this.focusedItem=this.getDecadeRelativeTo(e,n),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const i=this.areDecadesDifferByCentury(this.getCurrentDecade(),this.focusedItem),s=this.focusedItem&&n?this.subtractDecade(this.focusedItem,n):void 0;return{needChangePeriod:i,periodsToSkip:i?e.value:void 0,unitsToSkip:s}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?cy.getDecadeFromCell(e):this.getCurrentDecade()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Qw.dataDecade}="${e.startYear}-${e.endYear}"]`)}applyMinMaxDates(e){return-1===this.compareDecades(e,this.getDecadeOfDate(this.minDate))?this.getDecadeOfDate(this.minDate):1===this.compareDecades(e,this.getDecadeOfDate(this.maxDate))?this.getDecadeOfDate(this.maxDate):e}getDecadeRelativeTo(e,t){if(void 0===t)return;const n=t.startYear+this.getEffectiveOffset(e);return{startYear:n,endYear:n+9}}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)*10}areDecadesDifferByCentury(e,t){if(void 0===(null==e?void 0:e.startYear)||void 0===(null==t?void 0:t.startYear))return!1;return Math.floor(e.startYear/100)!==Math.floor(t.startYear/100)}getCurrentDecade(){return this.getDecadeOfDate(this.calendarCurrentViewDate)}getDecadeOfDate(e){const t=e.getFullYear(),n=10*Math.floor(t/10);return{startYear:n,endYear:n+9}}compareDecades(e,t){return e.startYear<t.startYear?-1:e.startYear===t.startYear?0:1}subtractDecade(e,t){return(e.startYear-t.startYear)/10}}const dy=document.createElement("template");dy.innerHTML="\n<style></style>\n<slot />";class cy extends he{constructor(){super(),this.boundOnStartDateSelectionHandler=this.onStartDateSelection.bind(this),this.boundOnStopDaySelectionHandler=this.onStopDaySelection.bind(this),this.boundOnCancelDateSelectionHandler=this.onCancelDateSelection.bind(this),this.boundOnDateCellPointerEnterHandler=this.onDateCellPointerEnter.bind(this),this._enableMultiSelect=!1,this._enableRangeSelect=!1,this._hasNullStartXorEndDate=!1,this._visiblePeriodsCount=1,this._currentViewIndex=0,this._focusedCellElement=null,this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=!0,this._tableContainers=new Array,this._minDate=Nw,this._maxDate=Rw,this._dateSelectionRenderer=null,this.calendarTableResizeObservers=new Map,this.focusedDayChangedHandlers=new Set,this.minMaxDatesChangedHandlers=new Set}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e}get enableRangeSelect(){return this._enableRangeSelect}set enableRangeSelect(e){this._enableRangeSelect=e}get hasNullStartXorEndDate(){return this._hasNullStartXorEndDate}set hasNullStartXorEndDate(e){this._hasNullStartXorEndDate=e}get visiblePeriodsCount(){return this._visiblePeriodsCount}set visiblePeriodsCount(e){this._visiblePeriodsCount=e}get currentViewDate(){return this.currentTableContainer.viewDate}get baseViewDate(){return this.baseTableContainer.viewDate}get currentView(){var e,t;return null!==(t=null===(e=this.baseTableContainer)||void 0===e?void 0:e.viewType)&&void 0!==t?t:Vw.Month}get focusedDate(){return this._focusStrategies[Vw.Month].getFindCachedFocusedItem()}get enumerateTableContainers(){return this._tableContainers||this.registerTableContainers(),this._tableContainers}get currentTableContainer(){return this._tableContainers[this._currentViewIndex]}get baseTableContainer(){return this._baseTableContainer||(this._baseTableContainer=this.querySelector(Hw.FirstDataTableContainer)),this._baseTableContainer}get tableContainerWrapper(){return this._tableContainerWrapper||(this._tableContainerWrapper=this.querySelector(Hw.DataTableContainerWrapperClassName)),this._tableContainerWrapper}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get dateSelectionRenderer(){return this._dateSelectionRenderer}connectedCallback(){super.connectedCallback(),this.addEventSubscriptions()}initializeComponent(){super.initializeComponent(),this._focusStrategies={[Vw.Month]:new ly(this),[Vw.Year]:new oy(this),[Vw.Decade]:new ay(this),[Vw.Century]:new Ay(this)},this.registerTableContainers(),this.initializeKeyboardNavigator(),this.tryInitializeRangeSelectionSubscriptions()}disposeComponent(){this.removeEventSubscriptions(),this.focusedDayChangedHandlers.clear(),this.minMaxDatesChangedHandlers.clear(),super.disposeComponent()}disconnectedCallback(){this.calendarTableResizeObservers.forEach((e=>e.disconnect())),super.disconnectedCallback()}registerTableContainers(){this._tableContainers=Array.from(this.querySelectorAll(Hw.DateTableContainer))}applyTableSize(e,t,n){e.style.width=t+"px",e.style.height=n+"px"}onCalendarTableSizeChanged(e){var t;if(e.length<1)return;const n=e[0].target,i=e[0].contentRect;rt.fromDomRect(i).isEmpty||(this.applyTableSize(n,i.width,i.height),null===(t=this.calendarTableResizeObservers.get(n))||void 0===t||t.disconnect())}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.addEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.addEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.enableRangeSelect&&this.addEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.removeEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.removeEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.removeEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}addDayCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].addEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}removeDateCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].removeEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}tryInitializeRangeSelectionSubscriptions(){if(!this.hasNullStartXorEndDate)return;const e=this.findSelectedCellElement();if(!e)return;const t=cy.getDateFromCell(e);t&&(this.createDateSelectionRenderer(t,!0),this._dateSelectionRenderer&&!cy.isDateCellDisabled(e)&&(this._dateSelectionRenderer.pointerUpDate=t),this.addDayCellEventSubscriptions())}onStartDateSelection(e){if(T.DomUtils.hasClassName(this,pe.Disabled)||T.DomUtils.hasClassName(this,pe.ReadOnly))return;const t=cy.getCellByTarget(e.detail.source.target),n=cy.getDateFromTarget(e.detail.source.target);if(!t||!n)return;this.createDateSelectionRenderer(n,!e.detail.isLongTap&&(!(e.detail.source.ctrlKey||e.detail.source.metaKey)||e.detail.isTouch)),this._dateSelectionRenderer&&!cy.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(t)),this.addDayCellEventSubscriptions(),e.stopPropagation()}onStopDaySelection(e){if(!this._dateSelectionRenderer)return;const t=cy.getCellByTarget(e.detail.source.target);t?cy.isDateCellDisabled(t)||(this._dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(t)):this.cancelDateSelection(),this.stopSelectingDates(),this.removeDateCellEventSubscriptions(),e.stopPropagation()}onCancelDateSelection(e){this.cancelDateSelection(),e.stopPropagation()}cancelDateSelection(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.cancel(),this.removeDateCellEventSubscriptions(),this._dateSelectionRenderer=null)}stopSelectingDates(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.stop(),this._dateSelectionRenderer=null)}invokeCellPointerUp(e,t,n){this.dispatchEvent(new $w(e,t,n))}onDateCellPointerEnter(e){const t=cy.getCellByTarget(e.target);this._dateSelectionRenderer&&t&&!cy.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(t))}tryCreateRangeSelectionRenderer(e){this.enableRangeSelect&&(this._dateSelectionRenderer=this.createDateRangeSelectionRenderer(e,!1))}createDateSelectionRenderer(e,t){this._dateSelectionRenderer=this.enableRangeSelect?this.createDateRangeSelectionRenderer(e,t):this.enableMultiSelect?this.createMultipleDateSelectionRenderer(e,t):this.createSingleDateSelectionRenderer(e,t)}createMultipleDateSelectionRenderer(e,t){return new Mw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}createSingleDateSelectionRenderer(e,t){return new kw(e,t,this.invokeCellPointerUp.bind(this))}createDateRangeSelectionRenderer(e,t){return new Kw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}findCellElements(){return this.querySelectorAll(Hw.Cell)}findSelectedCellElement(){return this.querySelector(Hw.SelectedItem)}getMainElement(){return this.querySelector(Hw.MainElement)}getHeaderElement(){return this.querySelector(Hw.Header)}getTableElements(){return Array.from(this.querySelectorAll(Hw.DataTable))}getFooterElement(){return this.querySelector(Hw.Footer)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Ln),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new sy(this))}getKeyboardNavigator(){return this.keyboardNavigator}getFocusedCellElementInView(e){return this._focusStrategies[e].getUpdatedElementToFocus()}tryMoveFocus(e,t){const n=this._focusStrategies[this.currentView].tryMoveFocus(e,t);if(n.needChangePeriod&&n.periodsToSkip){this.scheduleFocusRestoration();const e=this._currentViewIndex+(this.currentView===Vw.Month?n.periodsToSkip:n.periodsToSkip>0?1:-1);e>=0&&e<this._visiblePeriodsCount&&(this._currentViewIndex=e,n.newPeriodFitsIntoVisibleRange=!0)}return n}scheduleFocusRestoration(e=!0){this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=e}restoreFocus(){const e=this._focusStrategies[this.currentView].getUpdatedElementToFocus();this._focusRestorationScheduled&&(this.tryFireFocusedDayChanged(e),this.dateSelectionRenderer&&e&&(this.dateSelectionRenderer.pointerUpDate=cy.getDateFromCell(e)),this._focusRestorationScheduled=!1,this._needImmediateSelectionAfterFocusRestored=!1)}onFocusedDayChanged(e){this.focusedDayChangedHandlers.add(e)}offFocusedDayChanged(e){this.focusedDayChangedHandlers.delete(e)}onMinMaxDatesChanged(e){this.minMaxDatesChangedHandlers.add(e)}tryFireFocusedDayChanged(e){if(null!==e)for(const t of this.focusedDayChangedHandlers)t(e,this._needImmediateSelectionAfterFocusRestored)}fireMinMaxDatesChanged(e,t){for(const n of this.minMaxDatesChangedHandlers)n(e,t)}static getDateFromTarget(e){const t=cy.getCellByTarget(e);return t?cy.getDateFromCell(t):null}static getCellByTarget(e){const t=e;return t?T.DomUtils.hasClassName(t,Tw.Cell)?t:t.closest(Hw.Cell):null}static getDateFromCell(e){return new Date(Number(e.getAttribute(Qw.dataDate)))}static getMonthFromCell(e){const t=e.getAttribute(Qw.dataMonth);if(t)return zw[t]}static getYearFromCell(e){const t=e.getAttribute(Qw.dataYear);if(t)return Number(t)}static getDecadeFromCell(e){const t=e.getAttribute(Qw.dataDecade);if(!t)return;const[n,i]=t.split("-").map(Number);return{startYear:n,endYear:i}}static getMonthOffsetInDaysFrom(e,t){const n=cy.getDateFromCell(t),i=n.getDate(),s=new Date(n);s.setDate(1),s.setMonth(s.getMonth()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(i>r?r:i),Math.round(Math.abs(s.getTime()-n.getTime())/Lw)}static getYearOffsetInDaysFrom(e,t){const n=cy.getDateFromCell(t),i=n.getDate(),s=new Date(n);s.setDate(1),s.setFullYear(s.getFullYear()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(i>r?r:i),Math.round(Math.abs(s.getTime()-n.getTime())/Lw)}static getLastDayOfTheMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}static isDateCellDisabled(e){return e.hasAttribute("data-disabled")}getContentTemplate(){return dy}static get observedAttributes(){return[Uw.class,Uw.enableMultiSelect,Uw.minDate,Uw.maxDate,Uw.enableRangeSelect,Uw.visiblePeriodsCount,Uw.hasNullStartXorEndDate]}attributeChangedCallback(e,t,n){switch(e){case Uw.enableMultiSelect:this.enableMultiSelect=null!==n;break;case Uw.minDate:{const e=new Date(Number(n));this.minDate=e>=Nw?e:Nw,this.fireMinMaxDatesChanged(this.minDate);break}case Uw.maxDate:{const e=new Date(Number(n));this.maxDate=e<=Rw?e:Rw,this.fireMinMaxDatesChanged(void 0,this.maxDate);break}case Uw.visiblePeriodsCount:this.visiblePeriodsCount=Number(n);break;case Uw.enableRangeSelect:this.enableRangeSelect=null!==n,this.removeEventSubscriptions(),this.addEventSubscriptions();break;case Uw.hasNullStartXorEndDate:this.hasNullStartXorEndDate=null!==n,this.removeDateCellEventSubscriptions(),this.tryInitializeRangeSelectionSubscriptions(),this.removeEventSubscriptions(),this.addEventSubscriptions()}}}customElements.define(tl,cy),customElements.define(Fw,Ww);class hy{}hy.Prefix=pe.Prefix+"-tabs",hy.Item=hy.Prefix+"-item",hy.Content=hy.Prefix+"-content",hy.TabList=hy.Prefix+"-tablist",hy.ContentPanel=hy.Content+"-panel",hy.Scrollable=hy.TabList+"-scrollable",hy.HasOverflow=hy.TabList+"-has-overflow",hy.ButtonScroll=hy.Prefix+"-scroll-btn",hy.ButtonScrollNext=hy.ButtonScroll+"-next",hy.ButtonScrollPrev=hy.ButtonScroll+"-prev",hy.CloseButton=hy.Prefix+"-close-button";class uy{}uy.Prefix="dxbl",uy.Carousel=uy.Prefix+"-carousel",uy.DrawerPanel=uy.Prefix+"-drawer-panel",uy.ExpandableContainer=uy.Prefix+"-expandable-container",uy.FormLayout=uy.Prefix+"-form-layout",uy.FormLayoutGroup=uy.FormLayout+"-group",uy.FormLayoutTab=uy.FormLayout+"-tab",uy.FormLayoutItem=uy.FormLayout+"-item",uy.GridLayout=uy.Prefix+"-grid-layout",uy.GridLayoutRoot=uy.GridLayout+"-root",uy.GridLayoutItem=uy.GridLayout+"-item",uy.GroupControl=uy.Prefix+"-group-control",uy.Splitter=uy.Prefix+"-splitter",uy.SplitterPane=uy.Splitter+"-pane",uy.SplitterSeparator=uy.Splitter+"-separator",uy.StackLayout=uy.Prefix+"-stack-layout",uy.StackLayoutRoot=uy.StackLayout+"-root",uy.StackLayoutItem=uy.StackLayout+"-item",uy.Tabs=uy.Prefix+"-tabs",uy.TabList=uy.Prefix+"-tab-list",uy.TabItem=uy.Prefix+"-tab-item";class py extends Event{constructor(){super(py.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}py.eventName=uy.Tabs+".active-tab-changed";class my extends CustomEvent{constructor(e,t){super(my.eventName,{detail:new gy(e,t),bubbles:!0,composed:!0,cancelable:!0})}}my.eventName=uy.Tabs+".tab-reorder";class gy{constructor(e,t){this.fromIndex=e,this.toIndex=t}}function Cy(e){return e*(2-e)}Ct.register(my.eventName,(e=>e.detail));class fy{constructor(){this.subscribers=[]}subscribe(e,t=!1){-1===this.subscribers.indexOf(e)&&this.subscribers.push(e)}unsubscribe(e){const t=this.subscribers.indexOf(e);-1!==t&&this.subscribers.splice(t,1)}}fy.Empty=new fy;class vy extends fy{emit(e){this.subscribers.forEach((t=>t(e)))}}class by extends fy{constructor(e){super(),this.isInitialized=1===arguments.length,this.value=e}update(e){this.isInitialized&&e===this.value||(this.isInitialized=!0,this.value=e,this.subscribers.forEach((t=>t(e))))}subscribe(e,t=!1){this.isInitialized&&!t&&e(this.value),super.subscribe(e,t)}asTrigger(e){const t=new by(null);return this.subscribe("function"!=typeof e?n=>t.update(-1!==e.indexOf(n)):n=>t.update(e(n))),t}or(e){const t=new by(null);return this.subscribe((n=>t.update(n||e.value))),e.subscribe((e=>t.update(this.value||e))),t}and(e){const t=new by(null);return this.subscribe((n=>t.update(n&&e.value))),e.subscribe((e=>t.update(this.value&&e))),t}join(e){const t=new by(null);return this.subscribe((n=>t.update([n,e.value]))),e.subscribe((e=>t.update([this.value,e]))),t}}function wy(e){return e/Math.abs(e)}function yy(e,t,n,i){let s=null;const r=e=>s?s(e,null):0,o=()=>{s=null},a=(e,i,r)=>{s=function(e,t,n,i,s){const r=t+n;let o=0;return(a,l)=>{if(l)return l(e-o,a,i(a/r));if(a<t)return null;a>=r&&s&&s();const A=e*i((Math.min(a,r)-t)/n)-o;return o+=A,A}}(i+e,r,t,n,o)},l=e=>{null===s?(a(e.value,0,e.timeStamp),i(r)):s(e.timeStamp,((t,n)=>a(e.value,t,n)))};return e.subscribe(l),()=>{s=null,e.unsubscribe(l)}}function By(e,t,n,i,s){const r=function(e,t,n){const i=new vy;return e.addEventListener(t,(e=>{e.preventDefault();const t=n(e);0===t||isNaN(t)||i.emit({value:t,timeStamp:e.timeStamp})}),{capture:!1,passive:!1}),i}(e,"wheel",(e=>wy(e.deltaY)*t)),o=function(e,t){const n=new vy;let i=0,s=1;return e.subscribe((e=>{(0===i||e.timeStamp>=i||wy(e.value)!==s)&&(i=e.timeStamp+t,s=wy(e.value),n.emit(e))})),n}(r,30);function a(e,t){qt((n=>{const s=e(n);0!==s?(null!==s&&i(s),a(e,t)):t()}))}yy(o,300,n,(function(e){s(new Promise(((t,n)=>{a(e,t)})))}))}class Ey{}Ey.Roller=pe.Prefix+"-roller",Ey.RollerContainer=Ey.Roller+"-container",Ey.RollerTitle=Ey.Roller+"-title",Ey.RollerItem=Ey.Roller+"-item",Ey.RollerAfter=Ey.Roller+"-after",Ey.RollerExpander=Ey.Roller+"-expander",Ey.RollerFooter=pe.Prefix+"-rollers-footer";class Iy extends Event{constructor(){super(Iy.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}function Sy(e,t,n){const i=n(e);return i?t||i.visible.value?i:Sy(i,t,n):null}function xy(e,t){const n=-1===t?"prevItem":"nextItem";return e[n]?e[n]:e[n]=(n=>{const i=e.value+t*n.delta;return-1===t&&-1!==n.min&&i<n.min?n.needLoop?new Fy(n,n.max,!1,null,e):null:1===t&&-1!==n.max&&i>n.max?n.needLoop?new Fy(n,n.min,!1,e,null):null:new Fy(n,i,!1,null,null)})(e.collection)}Iy.eventName="dxrollerinitialized";class Dy{constructor(e,t,n,i,s,r){this._collection=e,this.prevItem=s,this.nextItem=r,this.value=t,this.visible=n||new by(!0),this.selected=new by(!!i),s&&(s.nextItem=this),r&&(r.prevItem=this),this.displayText=new by(t);const o=this.collection.selectedItem;this.selected.subscribe((e=>{e&&(o.value&&o.value.selected.update(!1),o.update(this))})),this.visible.subscribe((e=>{if(!e&&this.selected.value){const e=this.getPrevious(!1);e&&e.selected.update(!0)}this.collection.visibleItemsChanged.emit(null)}),!0)}get collection(){return this._collection}getPrevious(e){return Sy(this,e,(e=>e.prevItem))}getNext(e){return Sy(this,e,(e=>e.nextItem))}getDisplayText(){return this.displayText.value||this.value}}class Fy extends Dy{constructor(e,t,n,i,s){super(e,t,null,n,i,s)}get collection(){return this._collection}getPrevious(e){return xy(this,-1)}getNext(e){return xy(this,1)}}class Ty extends Fy{constructor(e,t){super(e,t,!0,null,null)}}class Hy{constructor(e=!0){this.needLoop=e,this.items=[],this.selectedItem=new by(null),this.visibleItemsChanged=new vy}static createCollection(e,t,n=!0){const i=new Hy(n);for(let n=0;n<t.length;n++)i.add(n+1,null,n+1===e).displayText.value=t[n];return i.initialize(e),i}static createInconsistentCollection(e,t,n=!0){const i=new Hy(n);for(let n=0;n<t.length;n++)i.add(t[n][0],null,t[n][0]===e).displayText.value=t[n][1];return i.initialize(e),i}static createGenerator(e,t,n,i,s=!0){const r=new Uy(t,n,i,s);return r.initialize(e),r}initialize(e){const t=this.items.filter((t=>t.value===e));if(t.length>0)t[0].selected.update(!0);else{const t=function(e,t){if(0===e.length)return null;let n=e[0],i=Math.abs(n.value-t);for(let s=1;s<e.length;s++){const r=e[s],o=Math.abs(r.value-t);o<i&&(n=r,i=o)}return n}(this.items,e);t&&t.selected.update(!0)}this.needLoop&&(this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0])}add(e,t,n){const i=new Dy(this,e,t,n,this.items[this.items.length-1],null);return this.items.push(i),i}}class Uy extends Hy{constructor(e,t,n,i){super(i),this.min=e,this.max=t,this.delta=n,this.originItem=null}initialize(e){this.originItem=new Ty(this,e)}}class Qy{constructor(e,t,n,i,s){this.dataItem=null,this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=n,this.prevItem=s,this.nextItem=null,this.index=t,this.elements=n.createRollerItemElements(),this.offset=t*i,this.height=i,this.position=0,this.visibleItemCount=n.visibleItemCount,s&&(s.nextItem=this),this.updateDataItem(e),this.selectItem=this.selectItem.bind(this)}initialize(e){const t=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-t)*this.height+"px",e.appendChild(this.elements[1]),this.move(this.offset),this.elements[0].addEventListener("click",(()=>{qt(this.selectItem)}))}isSelected(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)}selectItem(e){if(!this.dataItem)return Promise.resolve();const t=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(My(fy.Empty,(e=>this.roller.move(e)),{divisor:this.roller.itemSize.height,startTimestamp:e,endTimestamp:e+300,easing:Cy,frameCallback:qt,value:(t-this.index)*this.height-(this.position-this.offset)}))}move(e){this.updatePosition(e);const t=this.position-this.offset;this.elements.forEach((e=>e.style.transform="matrix(1, 0, 0, 1, 0, "+t+")"))}updatePosition(e){this.position+=e,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem&&this.nextItem.dataItem?this.nextItem.dataItem.getPrevious(!1):null)):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem?this.prevItem.dataItem.getNext(!1):null))}updateDataItem(e){this.dataItem!==e&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=e,this.dataItem?this.dataItem.displayText.subscribe(this.displayTextSubscription):this.displayTextSubscription(""))}displayTextSubscription(e){this.elements.forEach((t=>Py(t,e)))}raiseChanges(){this.isSelected()&&this.dataItem&&this.dataItem.selected.update(!0)}}function Py(e,t){e.innerText=t}function Ny(e,t,n){const i=n(e);return i&&Math.abs(Math.round(i.position-e.position))===t?[i].concat(Ny(i,t,n)):[]}function Ry(e,t,n){0!==e.length&&(e.shift().updateDataItem(t),Ry(e,n(t),n))}class Ly{constructor(e,t,n,i,s,r){this.itemCollection=e,this.visibleItemCount=t,this.itemContainers=[],this.itemSize=i,this.caption=s,this.longestVisibleDisplayText=r,this.needLoop=e.needLoop,this.container=n,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.moveReversed=this.moveReversed.bind(this),this.afterMove=this.afterMove.bind(this),this.duplicateContainer=null}initialize(){this.initializeRollerElements();const e=[this.itemCollection.selectedItem.value];for(;e.length<this.visibleItemCount;)e.splice(0,0,e[0]?e[0].getPrevious(!1):null),e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);for(let t=0;t<e.length;t++)this.itemContainers.push(new Qy(e[t],t,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&Py(this.createRollerItemElement(Ey.RollerItem+" "+Ey.RollerExpander),this.longestVisibleDisplayText),this.duplicateContainer=this.createRollerItemElement(Ey.RollerAfter),this.duplicateContainer.setAttribute("role","spinbutton"),this.duplicateContainer.setAttribute(N.ariaLabel,this.caption),this.duplicateContainer.setAttribute(N.ariaValuenow,this.itemCollection.selectedItem.value.value),this.duplicateContainer.setAttribute(N.ariaValuetext,this.itemCollection.selectedItem.value.displayText.value),this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(let e=0;e<this.itemContainers.length;e++)this.itemContainers[e].initialize(this.duplicateContainer);this.itemCollection.selectedItem.subscribe((()=>this.updateVisibleDataItems()),!0),this.itemCollection.visibleItemsChanged.subscribe((()=>this.updateVisibleDataItems())),By(this.rollerElement,this.itemSize.height,Cy,this.moveReversed,this.afterMove),function(e,t,n,i){const s=new vy,r=new vy;let o=0;e.addEventListener("touchstart",(e=>{o=e.touches[0].clientY}),{capture:!1,passive:!0}),e.addEventListener("touchend",(()=>{o=0,qt((e=>r.emit(e)))}),{capture:!1,passive:!0}),e.addEventListener("touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0].clientY;s.emit(t-o),o=t}),{capture:!1,passive:!1});const a={divisor:t,accelerationTimeFrame:0};!function(e,t,n,i,s,r){let o,a,l,A=1,d=!1;const c=n.accelerationTimeFrame||300;function h(e){const t=Math.abs(a%n.divisor);return{value:(n.divisor-t)*Math.sign(a),endTimestamp:e+300,startTimestamp:e,easing:Cy,frameCallback:r,divisor:0}}function u(e,t){return(t*=A)>=o&&e-l<=c&&(A=Math.min(2,1.2*A)),a+=t,o=t,l=e,t}function p(e){a=0,l=e,A=1}e.subscribe((n=>{r((r=>{d||(d=!0,p(r),s(new Promise(((n,s)=>{const o=s=>{t.unsubscribe(o),My(e,i,h(s)).then((()=>{d=!1,n()})).catch((()=>{t.subscribe(o)})).finally((()=>p(r)))};t.subscribe(o)})))),i(u(r,n))}))}))}(s,r,a,n,i,qt)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer&&this.rollerContainer.addEventListener("keydown",(e=>{let t=null;e.keyCode===Ie.KeyCode.Up?t=this.itemCollection.selectedItem.value.getPrevious():e.keyCode===Ie.KeyCode.Down&&(t=this.itemCollection.selectedItem.value.getNext()),t&&(e.preventDefault(),t.selected.update(!0))}))}initializeRollerElements(){const e=this.rollerContainer=document.createElement("SPAN");e.className=Ey.RollerContainer,e.style.minWidth=this.itemSize.width.toString();const t=document.createElement("SPAN");t.innerText=this.caption,t.className=Ey.RollerTitle,e.appendChild(t);const n=this.rollerElement=document.createElement("DIV");n.className=Ey.Roller,n.tabIndex=-1,n.style.height=this.itemSize.height*this.visibleItemCount+"px",e.appendChild(n),this.container&&this.container.appendChild(e)}updateVisibleDataItems(){var e,t;const n=this.itemContainers.filter((e=>e.isSelected()))[0];if(!n)return;const i=Ny(n,this.itemSize.height,(e=>e.prevItem)),s=Ny(n,this.itemSize.height,(e=>e.nextItem)),r=this.itemCollection.selectedItem.value;n.updateDataItem(r),null===(e=this.duplicateContainer)||void 0===e||e.setAttribute(N.ariaValuenow,r.value),null===(t=this.duplicateContainer)||void 0===t||t.setAttribute(N.ariaValuetext,r.displayText.value),Ry(i.concat([]),r.getPrevious(),(e=>e?e.getPrevious(!1):null)),Ry(s.concat([]),r.getNext(),(e=>e?e.getNext(!1):null))}createRollerItemElement(e){const t=document.createElement("SPAN");return t.className=e||Ey.RollerItem,this.rollerElement&&this.rollerElement.appendChild(t),t}createRollerItemElements(){const e=this.createRollerItemElement(null);return[e,e.cloneNode()]}moveReversed(e){this.move(0-e)}move(e){if(0===e)return;const t=Math.sign(e),n=this.itemContainers.length-1,i=-1===t?n:0,s=(-1===t?0:n)+t;if(!this.needLoop){if(1===t){const n=Math.floor(this.visibleItemCount/2)*this.itemSize.height;for(let r=i;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position+this.itemSize.height-n<=0&&this.itemContainers[r].position+this.itemSize.height+e-n>0&&(e=Math.min(n-(this.itemContainers[r].position+this.itemSize.height),e))}else{const n=(Math.floor(this.visibleItemCount/2)+1)*this.itemSize.height;for(let r=i;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position-n>=0&&this.itemContainers[r].position+e-n<0&&(e=Math.max(n-this.itemContainers[r].position,e))}if(0===e)return}for(let n=i;n!==s;n+=t)this.itemContainers[n].move(e)}afterMove(e){return e.then((()=>Promise.resolve(this.itemContainers.forEach((e=>e.raiseChanges())))))}}function My(e,t,n){return new Promise(((i,s)=>{function r(){e.unsubscribe(r),s()}e.subscribe(r);let o=0;const a=n.frameCallback,l=s=>{if(s<n.endTimestamp){const e=n.easing((s-n.startTimestamp)/(n.endTimestamp-n.startTimestamp)),i=n.value*e-o;t(i),o+=i,a(l)}else e.unsubscribe(r),t(n.value-o),i()};a(l)}))}function ky(e){return e.value%4==0&&e.value%100!=0||e.value%400==0}function Ky(e){return 2!==e.value}function Oy(e){return-1!==[1,3,5,7,8,10,12].indexOf(e.value)}var _y;function Vy(e,t,n,i,s,r,o){const a=e.add(t,n,i);r.subscribe((([e,n])=>{if(o){const i=s[function(e,t,n){return new Date(e,t-1,n).getDay()}(n.value,e.value,t)];a.displayText.update(t+" "+i)}else a.displayText.value=s[t-1]}))}function zy(e){return e&&e.length?" "+e.concat([]).sort(((e,t)=>t.length-e.length))[0]:""}function Wy(e){let t="initial";for(;e;){if(t=window.getComputedStyle(e).backgroundColor,t&&"rgba(0, 0, 0, 0)"!==t&&"transparent"!==t)return t;e=e.parentElement}return t}!function(e){e[e.DayWithoutLeadingZero=0]="DayWithoutLeadingZero",e[e.DayWithLeadingZero=1]="DayWithLeadingZero",e[e.DayWithShortName=2]="DayWithShortName",e[e.DayWithFullName=3]="DayWithFullName",e[e.MonthWithShortName=4]="MonthWithShortName",e[e.MonthWithFullName=5]="MonthWithFullName",e[e.MonthWithoutLeadingZero=6]="MonthWithoutLeadingZero",e[e.MonthWithLeadingZero=7]="MonthWithLeadingZero",e[e.YearWithFourDigit=8]="YearWithFourDigit",e[e.YearWithThreeDigit=9]="YearWithThreeDigit",e[e.YearWithTwoDigit=10]="YearWithTwoDigit",e[e.YearWithOneDigit=11]="YearWithOneDigit"}(_y||(_y={}));const $y=1,Gy=2,qy=0,Yy=1,Xy=2,Jy=3;class jy extends On{constructor(e,t,n){super(e,t),this.dotNetRef=n}queryItems(){return this.queryItemsBySelector(`.${Ey.RollerContainer} .${Ey.Roller} .${Ey.RollerAfter}`)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);return t!==Ie.KeyCode.Tab&&t!==Ie.KeyCode.Right&&t!==Ie.KeyCode.Space||e.shiftKey||this.lastItemSelected?t===Ie.KeyCode.Tab&&e.shiftKey||t===Ie.KeyCode.Left?(this.selectedItemIndex>0?this.moveToPrevItem():t!==Ie.KeyCode.Left&&this.leaveBackward(),!0):super.handleKeyDown(e):(this.moveToNextItem(),!0)}}const Zy=new WeakMap;class eB{constructor(e,t,n,i){this.hoursCollection=e,this.minutesCollection=t,this.secondsCollection=n,this.AMPMCollection=i}update(e){if(this.AMPMCollection){let t=this.AMPMCollection?e.hours%12:e.hours;t=0===t?12:t,this.hoursCollection.initialize(t),this.AMPMCollection.initialize(e.hours>=12?Gy:$y)}else this.hoursCollection.initialize(e.hours);this.minutesCollection.initialize(e.minutes),this.secondsCollection.initialize(e.seconds)}}class tB{constructor(e,t,n){this.yearsCollection=e,this.monthsCollection=t,this.daysCollection=n}update(e){const t=e.filter((e=>e.type===_y.DayWithShortName||e.type===_y.DayWithFullName||e.type===_y.DayWithoutLeadingZero||e.type===_y.DayWithLeadingZero))[0],n=e.filter((e=>e.type===_y.MonthWithShortName||e.type===_y.MonthWithFullName||e.type===_y.MonthWithLeadingZero||e.type===_y.MonthWithoutLeadingZero))[0],i=e.filter((e=>e.type===_y.YearWithFourDigit||e.type===_y.YearWithThreeDigit||e.type===_y.YearWithTwoDigit||e.type===_y.YearWithOneDigit))[0];this.yearsCollection.initialize(i.value),this.monthsCollection.initialize(n.value),this.daysCollection.initialize(t.value)}}function nB(e){const t=document.createElement("span");t.className=Ey.RollerItem,t.textContent="01234567890",e.appendChild(t);let n=t.offsetHeight;return n||(n=Lt(e,"dxbl-lg")?42:Lt(e,"dxbl-sm")?30:36),e.removeChild(t),n}function iB(e,t,n){const i=[];let s=0;for(let r=e;r<=t;r+=n)i[s]=[r,r.toString()],s++;return i}const sB={initializeDateRoller:function(e,t,n,i,s){const r=t.items.filter((e=>e.type===_y.DayWithShortName||e.type===_y.DayWithFullName||e.type===_y.DayWithoutLeadingZero||e.type===_y.DayWithLeadingZero))[0],o=t.items.filter((e=>e.type===_y.MonthWithShortName||e.type===_y.MonthWithFullName||e.type===_y.MonthWithLeadingZero||e.type===_y.MonthWithoutLeadingZero))[0],a=t.items.filter((e=>e.type===_y.YearWithFourDigit||e.type===_y.YearWithThreeDigit||e.type===_y.YearWithTwoDigit||e.type===_y.YearWithOneDigit))[0],l=t.yearNames||[];let A=t.monthNames||[];const d=t.dayNames||[],c=nB(e);let h=r?r.value:1,u=null;o?u=o.value:(A=["","","","","","","","","","","",""],u=n);let p=a?a.value:i;const m=a?Hy.createCollection(p,l):Hy.createGenerator(p,1,9999,1),g=Hy.createCollection(u,A),C=g.selectedItem.asTrigger(Ky),f={29:m.selectedItem.asTrigger(ky).or(C),30:C,31:g.selectedItem.asTrigger(Oy)},v=g.selectedItem.join(m.selectedItem),b=r&&(r.type===_y.DayWithFullName||r.type===_y.DayWithShortName),w=new Hy;for(let e=1;e<=31;e++)Vy(w,e,f[e],e===h,d,v,b);w.initialize(h);const y=["25"+zy(d),zy(A),"0000"].reduce(((e,t)=>e.length>t.length?e:t)),B=document.createDocumentFragment(),E=document.createElement("STYLE");function I(e){return t=>{e(t),s.invokeMethodAsync("UpdateDateTime",[h,u,p]).catch((e=>console.error(e)))}}E.type="text/css",E.innerText=`.${Ey.Roller} { height: ${5*c}px; } .${Ey.RollerItem}, .${Ey.RollerAfter} { height: ${c}px; } .${Ey.RollerAfter} { background-color: ${Wy(e)}; } `,B.appendChild(E),t.items.forEach((e=>{switch(e.type){case _y.DayWithoutLeadingZero:case _y.DayWithLeadingZero:case _y.DayWithFullName:case _y.DayWithShortName:new Ly(w,5,B,{width:-1,height:c},e.name,y).initialize();break;case _y.MonthWithFullName:case _y.MonthWithShortName:case _y.MonthWithLeadingZero:case _y.MonthWithoutLeadingZero:new Ly(g,5,B,{width:-1,height:c},e.name,y).initialize();break;case _y.YearWithFourDigit:case _y.YearWithThreeDigit:case _y.YearWithTwoDigit:case _y.YearWithOneDigit:new Ly(m,5,B,{width:-1,height:c},e.name,y).initialize();break}})),B.appendChild(document.createElement(Ln)),e.textContent="",e.appendChild(B),w.selectedItem.subscribe(I((e=>{h=e.value}))),g.selectedItem.subscribe(I((e=>{u=e.value}))),m.selectedItem.subscribe(I((e=>{p=e.value}))),Zy.set(e,new tB(m,g,w));const S=e.querySelector(Ln);return S&&!S.initialized&&S.initialize(e,new jy(S,e,s)),e.dispatchEvent(new Iy),Promise.resolve()},initializeTimeRoller:function(e,t,n){if(i.removeLoaded(e),!t)return Promise.reject();const s=t.twelveHourFormat;let r=s?t.time.hours%12:t.time.hours;s&&0===r&&(r=12);let o=t.time.minutes,a=t.time.seconds,l=t.time.hours>=12?Gy:$y;const A=nB(e),d=1===t.secondDelta?Hy.createGenerator(a,0,59,1):Hy.createInconsistentCollection(a,iB(0,59,t.secondDelta),!0),c=1===t.minuteDelta?Hy.createGenerator(o,0,59,1):Hy.createInconsistentCollection(o,iB(0,59,t.minuteDelta),!0),h=1===t.hourDelta?s?Hy.createGenerator(r,1,12,1):Hy.createGenerator(r,0,23,1):Hy.createInconsistentCollection(r,s?iB(1,12,t.hourDelta):iB(0,23,t.hourDelta),!0);let u=null;t.ampmDesignators&&t.ampmDesignators[0]&&t.ampmDesignators[1]&&(u=Hy.createCollection(l,t.ampmDesignators,!1));const p=document.createDocumentFragment(),m=document.createElement("STYLE");function g(e){return t=>{e(t),n.invokeMethodAsync("UpdateDateTime",[r,o,a,l]).catch()}}m.type="text/css",m.innerText=`.${Ey.Roller} { height: ${5*A}px; } .${Ey.RollerItem}, .${Ey.RollerAfter} { height: ${A}px; } .${Ey.RollerAfter} { background-color: ${Wy(e)}; }`,p.appendChild(m),t.items.forEach((e=>{switch(e.type){case qy:new Ly(h,5,p,{width:-1,height:A},e.name,"15").initialize();break;case Yy:new Ly(c,5,p,{width:-1,height:A},e.name,"55").initialize();break;case Xy:new Ly(d,5,p,{width:-1,height:A},e.name,"55").initialize();break;case Jy:if(u){new Ly(u,5,p,{width:-1,height:A},e.name,"AM").initialize()}}})),h.selectedItem.subscribe(g((e=>{r=e.value}))),c.selectedItem.subscribe(g((e=>{o=e.value}))),d.selectedItem.subscribe(g((e=>{a=e.value}))),u&&u.selectedItem.subscribe(g((e=>{l=e.value}))),p.appendChild(document.createElement(Ln)),Zy.set(e,new eB(h,c,d,u)),e.textContent="",e.appendChild(p);const C=e.querySelector(Ln);return C&&!C.initialized&&C.initialize(e,new jy(C,e,n)),e.dispatchEvent(new Iy),i.setLoaded(e),Promise.resolve()},updateRoller:function(e,t){if(!Zy.has(e))return;const n=Zy.get(e);if(n)return void n.update(t);const i=Zy.get(e);i&&i.update(t)}};class rB extends Jl{createPopupStrategy(e,t){return new oB(e,t,this)}}class oB extends ql{constructor(e,t,n){super(e,t,n)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);if(e.shiftKey&&t===Ie.KeyCode.Tab&&this.isFirstHeaderButtonSelected()&&!this.isRollerFooterExist()){const e=this.getLastRollerItem();if(e)return this.focusItem(e),!0}return t===Ie.KeyCode.Enter&&this.isTimeRollerSelected()||t===Ie.KeyCode.Space&&this.isLastTimeRollerSelected()?(this.closeDropDownAndApplyValue(e),!0):super.handleKeyDown(e)}handlePopupShown(){this.editorFocused=this.dropDownEditor.focused,this.editorFocused||Dn(this.dropDownEditor),super.handlePopupShown(),this.editorFocused&&this.focusFirstRollerItem()}onRollerInitialized(){this.editorFocused&&this.focusFirstRollerItem()}focusFirstRollerItem(){this.focusItem(this.getFirstRollerItem())}focusLastRollerItem(){this.focusItem(this.getLastRollerItem())}focusItem(e){e&&(bn.makeElementFocusable(e),bn.focusElement(e))}getFirstRollerItem(){return this.targetElement.querySelector(`.${Ey.RollerAfter}`)}getLastRollerItem(){const e=this.targetElement.querySelectorAll(`.${Ey.RollerAfter}`);return e[e.length-1]}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnRollerInitializedHandler||(this.boundOnRollerInitializedHandler=this.onRollerInitialized.bind(this),this.targetElement.addEventListener(Iy.eventName,this.boundOnRollerInitializedHandler))}onDispose(){this.boundOnRollerInitializedHandler&&(this.targetElement.removeEventListener(Iy.eventName,this.boundOnRollerInitializedHandler),this.boundOnRollerInitializedHandler=void 0)}isTimeRollerSelected(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(`${Ey.RollerAfter}`)}isLastTimeRollerSelected(){var e;return this.isTimeRollerSelected()&&!(null===(e=document.activeElement)||void 0===e?void 0:e.nextElementSibling)}isFirstHeaderButtonSelected(){return this.getHeaderButtons()[0]===document.activeElement}isRollerFooterExist(){return!!this.targetElement.querySelector(`.${Ey.RollerFooter}`)}closeDropDownAndApplyValue(e){this.parentStrategy.closeDropDownAndApplyValue(e)}}class aB extends rB{createPopupStrategy(e,t){return new lB(e,t,this)}}class lB extends oB{constructor(e,t,n){super(e,t,n)}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Space&&this.isLastDateRollerSelected()?(this.performShortcutEvent(e),!0):super.handleKeyDown(e)}handlePopupShown(){super.handlePopupShown(),this.editorFocused&&this.focusItem(this.getSelectedDay())}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnActiveTabChangedHandler||(this.boundOnActiveTabChangedHandler=this.onActiveTabChanged.bind(this),this.targetElement.addEventListener(py.eventName,this.boundOnActiveTabChangedHandler)),this.boundOnCalendarKeyboardNavigationLeavedHandler||(this.boundOnCalendarKeyboardNavigationLeavedHandler=this.onCalendarKeyboardNavigationLeaved.bind(this),this.targetElement.addEventListener(Gw.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler))}onDispose(){this.boundOnActiveTabChangedHandler&&(this.targetElement.removeEventListener(py.eventName,this.boundOnActiveTabChangedHandler),this.boundOnActiveTabChangedHandler=void 0),this.boundOnCalendarKeyboardNavigationLeavedHandler&&(this.targetElement.removeEventListener(Gw.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler),this.boundOnCalendarKeyboardNavigationLeavedHandler=void 0),super.onDispose()}onActiveTabChanged(){var e;(null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(hy.Item))||this.focusFirstRollerItem()}onCalendarKeyboardNavigationLeaved(){if(!this.getTabs()){const e=bn.findFocusableElements(this.targetElement).pop();e&&this.focusItem(e)}}isLastTimeRollerSelected(){const e=this.getTabs();return null!==e&&e.activeTabIndex===e.tabCount-1&&super.isLastTimeRollerSelected()}isLastDateRollerSelected(){const e=this.getTabs();return null!==e&&0===e.activeTabIndex&&super.isLastTimeRollerSelected()}getCalendar(){return this.targetElement.querySelector(`.${Tw.MainElement}`)}getTabs(){return this.targetElement.querySelector(`.${hy.Prefix}`)}getSelectedDay(){var e;return null===(e=this.getCalendar())||void 0===e?void 0:e.querySelector(`.${Tw.SelectedItem}`)}}class AB extends eA{connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}toggleDropDownVisibility(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.toggleDropDownVisibility()}openDropDown(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.openDropDown()}createKeyboardStrategy(){return new aB(this)}}const dB="dxbl-dropdown",cB="data-dropdown-thumb";class hB{constructor(e,t){this.width=Math.floor(e),this.height=Math.floor(t)}}class uB extends CustomEvent{constructor(e,t){super(uB.eventName,{detail:new hB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}uB.eventName=dB+".resizeStarted",Ct.register(uB.eventName,(e=>e.detail));class pB extends CustomEvent{constructor(e,t){super(pB.eventName,{detail:new hB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}pB.eventName=dB+".resizeCompleted",Ct.register(pB.eventName,(e=>e.detail));class mB extends go{constructor(){super(...arguments),this.dragStart=null,this.dragBounds=null,this.dragStartedHandler=this.handleDragStarted.bind(this),this.dragDeltaHandler=this.handleDragDelta.bind(this),this.dragCompletedHandler=this.handleDragCompleted.bind(this),this.dragWidth=0,this.dragHeight=0,this.dragMaxWidth=0,this.dragMaxHeight=0,this.isInDragOperation=!1,this.dragCssStyle=null}get branchType(){return ui.DropDown}renderTemplate(){return ns`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-dropdown-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-dropdown-root>
            </dxbl-branch>
        `}getRootTagName(){return"dxbl-dropdown-root"}connectedCallback(){super.connectedCallback(),this.addEventListener(Wn.eventName,this.dragStartedHandler),this.addEventListener($n.eventName,this.dragDeltaHandler),this.addEventListener(Gn.eventName,this.dragCompletedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(Wn.eventName,this.dragStartedHandler),this.removeEventListener($n.eventName,this.dragDeltaHandler),this.removeEventListener(Gn.eventName,this.dragCompletedHandler)}get child(){return this.root}handleDragStarted(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(cB))return;if(!this.child)return;this.lockPlacement(),this.dragStart=new et(e.detail.x,e.detail.y);const n=this.getRestrictBounds(),i=this.getPlacementTargetInterestPoints(this.placement),s=this.actualDropAlignment,r=this.actualDropDirection,o=at.getRelativeElementRect(this.child);this.dragBounds=this.calcResizeRect(n,i,s,r),this.dragMaxWidth=this.dragBounds.width,this.dragMaxHeight=this.dragBounds.height,this.isInDragOperation=!0,this.dragWidth=o.width,this.dragHeight=o.height,this.raiseResizeStarted(this.dragWidth,this.dragHeight)}willUpdate(e){super.willUpdate(e),this.dragCssStyle=this.isInDragOperation?`width: ${ot.toPx(this.dragWidth)}; height: ${ot.toPx(this.dragHeight)}; max-width: ${ot.toPx(this.dragMaxWidth)}; max-height: ${ot.toPx(this.dragMaxHeight)};`:null}updated(e){super.updated(e),this.root.offsetWidth<this.root.scrollWidth&&(this.dragWidth=this.root.scrollWidth),this.root.offsetHeight<this.root.scrollHeight&&(this.dragHeight=this.root.scrollHeight)}handleDragDelta(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(cB))return;const n=Math.min(this.dragMaxWidth,this.actualDropDirection===Xr.Near?e.detail.x-this.offset.x:this.offset.x+this.childSize.width-e.detail.x),i=Math.min(this.dragMaxHeight,this.actualDropAlignment===Jr.bottom?e.detail.y-this.offset.y:this.offset.y+this.childSize.height-e.detail.y),s=ca(this.minWidth,this),r=ca(this.minHeight,this);this.dragWidth=s?n>s?n:s:n>0?n:0,this.dragHeight=r?i>r?i:r:i>0?i:0}handleDragCompleted(e){var t,n;const i=H.getOriginalSource(e);i&&i.hasAttribute(cB)&&(this.isInDragOperation=!1,this.dragWidth=null!==(t=this.branch.offsetWidth)&&void 0!==t?t:0,this.dragHeight=null!==(n=this.branch.offsetHeight)&&void 0!==n?n:0,this.desiredWidth=ot.toPx(this.dragWidth),this.desiredHeight=ot.toPx(this.dragHeight),this.unlockPlacement(),this.raiseResizeCompleted(this.dragWidth,this.dragHeight))}calcResizeRect(e,t,n,i){if(i===Xr.Near){if(n===Jr.top){return rt.intersect(e,st.createFromPoints(t[qr.TopLeft],e.topRight))}return rt.intersect(e,st.createFromPoints(t[qr.BottomLeft],e.bottomRight))}if(n===Jr.top){return rt.intersect(e,st.createFromPoints(t[qr.TopRight],e.topLeft))}return rt.intersect(e,st.createFromPoints(t[qr.BottomRight],e.bottomLeft))}raiseResizeStarted(e,t){this.dispatchEvent(new uB(e,t))}raiseResizeCompleted(e,t){this.dispatchEvent(new pB(e,t))}calcRenderWidth(){return this.isInDragOperation?null:super.calcRenderWidth()}calcRenderHeight(){return this.isInDragOperation?null:super.calcRenderHeight()}shouldUpdateRootCssStyle(e){return super.shouldUpdateRootCssStyle(e)||e.has("isInDragOperation")||e.has("dragWidth")||e.has("dragHeight")||e.has("dragMaxWidth")||e.has("dragMaxHeight")}createKeyboardNavigationStrategy(){return new Sa(this.keyboardNavigator,this)}}C([Fs("#root",!0)],mB.prototype,"root",void 0),C([Fs("#branch")],mB.prototype,"branch",void 0),C([xs({type:Number,reflect:!1})],mB.prototype,"dragWidth",void 0),C([xs({type:Number,reflect:!1})],mB.prototype,"dragHeight",void 0),C([xs({type:Number,reflect:!1})],mB.prototype,"dragMaxWidth",void 0),C([xs({type:Number,reflect:!1})],mB.prototype,"dragMaxHeight",void 0),C([xs({type:Boolean,reflect:!1})],mB.prototype,"isInDragOperation",void 0),C([xs({type:String,reflect:!1})],mB.prototype,"dragCssStyle",void 0);let gB=class extends mB{updated(e){e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange(),super.updated(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new lo(new ao(this.zIndex)))}))}};gB=C([Es(dB)],gB);let CB=class extends ys{constructor(){super(...arguments),this.topLeftClass=null,this.topRightClass=null,this.bottomLeftClass=null,this.bottomRightClass=null,this.dropOpposite=!1,this.dropDirection=Xr.Near,this.dropAlignment=Jr.bottom,this.resizing=!1}static get styles(){return Ei`
            :host {
                display: flex;
                position: relative;
                flex: 1 1 auto;
                flex-direction: column;
                box-sizing: border-box;
                min-height: 0;
            }
            .hidden {
                display: none;
            }
            ::slotted([slot="top-right"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                right: 0px;
                transform: rotate(270deg);
                cursor: ne-resize;
            }
            ::slotted([slot="top-left"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                left: 0px;
                transform: rotate(180deg);
                cursor: nw-resize;
            }
            ::slotted([slot="bottom-left"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                left: 0px;
                transform: rotate(90deg);
                cursor: sw-resize;
            }
            ::slotted([slot="bottom-right"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                right: 0px;
                cursor: se-resize;
                transform: rotate(0deg);
            }
        }`}connectedCallback(){super.connectedCallback(),this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}willUpdate(e){(e.has("dropAlignment")||e.has("dropDirection")||e.has("resizing"))&&this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}calculateStyles(e,t,n){this.topLeftClass=e&&t===Jr.top&&n===Xr.Far?null:"hidden",this.topRightClass=e&&t===Jr.top&&n===Xr.Near?null:"hidden",this.bottomLeftClass=e&&t===Jr.bottom&&n===Xr.Far?null:"hidden",this.bottomRightClass=e&&t===Jr.bottom&&n===Xr.Near?null:"hidden"}render(){return ns`
            <slot></slot>
            <dxbl-thumb data-qa-thumb-location="top-left" data-dropdown-thumb class="${this.topLeftClass}">
                <slot name="top-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="top-right" data-dropdown-thumb class="${this.topRightClass}">
                <slot name="top-right"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-left" data-dropdown-thumb class="${this.bottomLeftClass}">
                <slot name="bottom-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-right" data-dropdown-thumb class="${this.bottomRightClass}">
                <slot name="bottom-right"></slot>
            </dxbl-thumb>`}};C([xs({type:String,reflect:!1})],CB.prototype,"topLeftClass",void 0),C([xs({type:String,reflect:!1})],CB.prototype,"topRightClass",void 0),C([xs({type:String,reflect:!1})],CB.prototype,"bottomLeftClass",void 0),C([xs({type:String,reflect:!1})],CB.prototype,"bottomRightClass",void 0),C([xs({type:Object,attribute:"drop-opposite"})],CB.prototype,"dropOpposite",void 0),C([xs({type:String,attribute:"drop-direction"})],CB.prototype,"dropDirection",void 0),C([xs({type:String,attribute:"drop-alignment"})],CB.prototype,"dropAlignment",void 0),C([xs({type:Boolean,attribute:"resizing"})],CB.prototype,"resizing",void 0),CB=C([Es("dxbl-dropdown-root")],CB);let fB=class extends cr{get popup(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(pt(t,["branchType","reposition","desiredWidth","desiredHeight","minDesiredWidth","minDesiredHeight","closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"]))return t;return null}get popupBase(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(At(t))return t;return null}};fB=C([Es("dxbl-popup-portal")],fB);let vB=class extends ys{constructor(){super(),this.eventsSet=new Set,this.events=null,this.eventListener=this.handleEvent.bind(this),this._value=null}get value(){return this._value}updated(e){var t,n;e.has("events")&&(this.unsubscribe(null!==(t=e.get("events"))&&void 0!==t?t:null),this.eventsSet=new Set(null===(n=this.events)||void 0===n?void 0:n.split(";")),this.subscribe(this.events))}subscribe(e){var t;null===(t=this.events)||void 0===t||t.split(";").forEach((e=>{this.addEventListener(e,this.eventListener)}))}unsubscribe(e){null==e||e.split(";").forEach((e=>{this.removeEventListener(e,this.eventListener)}))}raise(e,t){try{if(!this.eventsSet.has(e))return;this._value=JSON.stringify([e,t]),this.dispatchEvent(new Event("change",{bubbles:!0}))}finally{this._value=null}}handleEvent(e){}};C([xs({type:String,attribute:"events"})],vB.prototype,"events",void 0),vB=C([Es("dxbl-events-interceptor")],vB);let bB=class extends ys{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChange.bind(this)}render(){return ns`
            <slot @slotchange=${this.slotChangedHandler}></slot>
        `}handleSlotChange(e){const t=e.target.assignedNodes().find((e=>e instanceof pa)),n=this.closest(Ua);n&&(t?(n.notifyDialogConnected(t),n.notifyRootConnected()):(n.notifyDialogDisconnected(),n.notifyRootDisconnected()))}};var wB;bB=C([Es("dxbl-modal-root")],bB);let yB=wB=class extends ys{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.interceptorSlotChangedHandler=this.handleInterceptorSlotChange.bind(this),this.interceptor=null,this.resizeHandler=this.handleResize.bind(this),this._adaptivityEnabled=!1,this._popupAccessor=null,this.adaptiveWidth=576}get popup(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popup)||null}get popupBase(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popupBase)||null}get adaptivityEnabled(){return this._adaptivityEnabled}set adaptivityEnabled(e){this._adaptivityEnabled!==e&&(this._adaptivityEnabled=e,this.raiseEnableAdaptivity(e))}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler);const n=document.createElement("slot");return n.name="interceptor",e.appendChild(n),n.addEventListener("slotchange",this.interceptorSlotChangedHandler),e}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.resizeHandler,{passive:!0}),setTimeout((()=>this.updateAdaptivity()))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.resizeHandler)}handleResize(e){this.updateAdaptivity()}updateAdaptivity(){this.adaptivityEnabled=this.getActualAdaptivityEnabled(),this.raiseEvent("adaptivityChanged",{enabled:this.adaptivityEnabled})}getActualAdaptivityEnabled(){return window.innerWidth<=this.adaptiveWidth}handleSlotChanged(e){const t=e.target.assignedNodes();this._popupAccessor=wB.findPopupAccessor(t)}handleInterceptorSlotChange(e){const t=e.target.assignedNodes();this.interceptor=t[0]}raiseEvent(e,t){this.interceptor&&this.interceptor.raise&&this.interceptor.raise(e,t)}raiseEnableAdaptivity(e){this.raiseEvent("adaptivityChanged",{enabled:e})}static findPopupAccessor(e){const t=e.find((e=>lt(e)));return t||null}};C([xs({type:Number,attribute:"adaptive-width"})],yB.prototype,"adaptiveWidth",void 0),yB=wB=C([Es("dxbl-adaptive-dropdown")],yB);customElements.define("dxbl-date-edit",class extends AB{});customElements.define("dxbl-date-range-picker",class extends AB{processPointerDown(e){return H.containsInComposedPath(e,this.isFieldElement.bind(this))&&!this.isDropDownOpen&&this.tryOpenDropDown(),super.processPointerDown(e)}});class BB{}BB.ClassName=pe.Prefix+"-list-box",BB.ContainerNoScrollClassName=BB.ClassName+"-container-no-scroll",BB.TableHeaderRowClassName=BB.ClassName+"-table-header-row",BB.TableSelectionCellClassName=BB.ClassName+"-selection-cell",BB.MultiSelectClassName=BB.ClassName+"-multi-select",BB.SelectedItemClassName=BB.ClassName+"-item-selected",BB.FocusedItemClassName=BB.ClassName+"-item-focused",BB.EmptyDataItemClassName=BB.ClassName+"-empty-data-item",BB.GroupRowClassName=BB.ClassName+"-group-item",BB.ItemDisplayTemplateContainer=BB.ClassName+"-item-display-template-container",BB.RenderContainer=BB.ClassName+"-render-container",BB.SearchContainer=BB.ClassName+"-search-container",BB.ListSelectAllContainer=BB.ClassName+"-select-all-container",BB.ItemDraggingHint=BB.ClassName+"-dragging-hint",BB.ItemDraggingHintPortal=BB.ClassName+"-dragging-hint-portal",BB.DropTargetIndicatorClassName=BB.ClassName+"-drop-target-indicator",BB.EmptyListItem=BB.ClassName+"-empty-list-item",BB.CheckedClassName=BB.ClassName+"-checked",BB.MoveCursorCssClassName=BB.ClassName+"-move-cursor",BB.NotAllowedCursorCssClassName=BB.ClassName+"-not-allowed-cursor";class EB{}EB.VisibleIndexAttributeName="data-visible-index",EB.ItemIdAttributeName="id",EB.ComponentIdAttributeName="id",EB.AllowDragItemsAttributeName="allow-drag-items",EB.DropMode="drop-mode";class IB{}IB.TableSelector=`.${Fe.ContentContainerClassName} > table`,IB.ListSelector=`.${Fe.ContentContainerClassName} > ul`,IB.TableBodyRows=`table > tbody > tr:not([${Jn}]):not([${jn}])`,IB.ListItems=`ul > li:not([${Jn}]):not([${jn}])`,IB.MultiSelectClassSelector=`.${BB.MultiSelectClassName}`,IB.TablePartsSelector=":scope > *:not(colgroup)",IB.TableBodySelector=":scope > tbody",IB.KeyboardNavigatorSelector=`:scope > ${Ln}`,IB.HeaderRowSelector=`.${BB.TableHeaderRowClassName}`,IB.TableDataRowSelector=`:scope > tr:not([${Jn}]):not([${jn}]):not(.${BB.GroupRowClassName}):not(.${BB.EmptyListItem})`,IB.TableVisibleRowGeneralSelector=`tr[${EB.VisibleIndexAttributeName}]`,IB.TableVisibleRowSelector=`:scope > ${IB.TableVisibleRowGeneralSelector}`,IB.ItemGeneralSelector=`li:not([${Jn}]):not([${jn}]):not(.${BB.GroupRowClassName}):not(.${BB.EmptyListItem})`,IB.ItemSelector=`:scope > ${IB.ItemGeneralSelector}`,IB.ListVisibleItemGeneralSelector=`li[${EB.VisibleIndexAttributeName}]`,IB.ListVisibleItemSelector=`:scope > ${IB.ListVisibleItemGeneralSelector}`,IB.VisibleItemSelector=`:scope > [${EB.VisibleIndexAttributeName}]`,IB.ListItemDisplayTemplateConrainerSelector=`.${BB.ItemDisplayTemplateContainer}`,IB.SelectedItemSelector=`.${BB.SelectedItemClassName}`,IB.FocusedItemSelector=`.${BB.FocusedItemClassName}`,IB.EmptyDataItemSelector=`.${BB.EmptyDataItemClassName}`,IB.EmptyListItemSelector=`.${BB.EmptyListItem}`,IB.SearchBoxSelector=`:scope > .${BB.SearchContainer} > .${Bl.TextEdit}`,IB.GroupRowSelector=`.${BB.GroupRowClassName}`,IB.ListSelectAllContainerSelector=`.${BB.ListSelectAllContainer}`,IB.ItemDragHintSelector=`${Ms}.${BB.ItemDraggingHint}`,IB.ItemDisplayTemplateSelector=`.${BB.ItemDisplayTemplateContainer}`,IB.DropTargetIndicatorSelector=`.${BB.DropTargetIndicatorClassName}`;class SB extends CustomEvent{constructor(e){super(SB.eventName,{detail:new xB(e),bubbles:!0,composed:!0,cancelable:!0})}}SB.eventName=al+".focusedrowchanged";class xB{constructor(e){this.VisibleIndex=e}}class DB extends CustomEvent{constructor(e,t){super(DB.eventName,{detail:new FB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}DB.eventName=al+".makeelementvisible";class FB{constructor(e,t){this.VisibleIndex=e,this.VerticalEdge=t}}class TB extends CustomEvent{constructor(e){super(TB.eventName,{detail:new HB(e),bubbles:!0,composed:!0,cancelable:!0})}}TB.eventName=al+".itemdropped";class HB{constructor(e){this.SourceInfo=new UB(e.sourceInfo),this.TargetInfo=new QB(e.targetInfo)}}class UB{constructor(e){this.Key=e.key,this.VisibleIndex=e.visibleIndex}}class QB extends UB{constructor(e){super(e),this.DropPosition=e.dropPosition}}Ct.register(SB.eventName,(e=>e.detail)),Ct.register(DB.eventName,(e=>e.detail)),Ct.register(TB.eventName,(e=>e.detail));class PB{static getVerticalEdge(e){switch(e){case Qe.Top:return 0;case Qe.Bottom:return 1;default:return-1}}static getElementVisibleIndex(e){return ot.getAttributeIntValue(e,EB.VisibleIndexAttributeName,-1)}static findItemIndex(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(i&&this.getElementVisibleIndex(i)===e)return n}return-1}static queryItemsBySelector(e,t){return Array.from(e.querySelectorAll(t))}static isGroupRowElement(e){return!!e&&(e.matches&&e.matches(IB.GroupRowSelector))}static getRow(e,t){const n=e.getItemsContainer();return n?n.querySelector(`:scope > [${EB.VisibleIndexAttributeName}="${t}"]`):null}static isGroupRow(e,t){const n=PB.getRow(e,t);return!!n&&PB.isGroupRowElement(n)}static getElementHeight(e,t,n=0){const i=PB.getRow(e,t);return i?i.getBoundingClientRect().height:n}static calculateItemAverageHeight(e){const t=e[0];return(e[e.length-1].getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.length}static isOutsideViewportItemRequired(e,t,n,i){const s=i?n+1:n-1,r=PB.getRow(e,s);if(r){const n=r.getBoundingClientRect(),o=t.getElementsRectangle(t.getHeaderElements());if(!i&&o)return!Ya.getIntersectionRectangle(n,o).isEmpty;return Ya.getIntersectionRectangle(n,t.getBoundingClientRect()).height<=PB.getElementHeight(e,s)}return!0}static calculateRowHeight(e,t,n,i){const s=PB.getRow(e,n);let r=PB.getElementHeight(e,n);return s&&r&&!PB.isOutsideViewportItemRequired(e,t,n,i)&&(r+=Ya.calculateHeightOffsetValue(s,t,i)),r}static calculateBoundaryItemVisibleIndex(e,t,n){const i=Math.ceil(Ya.getDataAreaViewportHeight(t)),s=n?0:e.getLastAvailableVisibleIndex();let r=n&&e.getSelectedVisibleIndex()<=s||!n&&e.getSelectedVisibleIndex()>=s?s:e.getSelectedVisibleIndex(),o=PB.calculateRowHeight(e,t,r,n);const a=Ya.isVirtualScrollingEnabled(t)?PB.calculateItemAverageHeight(e.getRows()):void 0,l=n?1:-1;let A=r+l;for(;e.isElementInsideViewport(A)&&(o+=PB.getElementHeight(e,A,a),!(o>i&&r!==e.getSelectedVisibleIndex()));)r=A,A+=l;return r}}class NB{constructor(e){this._selectedItemIndex=-1,this._selectedVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._firstAvailableVisibleIndex=0,this._lastAvailableVisibleIndex=-1,this._tabKeyPressed=!1,this._isActive=!1,this._renderContainer=null,this._requireUpdateSelectedItemState=-1,this.boundOnRenderContainerMutationHandler=this.onRenderContainerMutation.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this._component=e,this._items=[],this._rows=[],this._renderContainerMutationObserver=new MutationObserver(this.boundOnRenderContainerMutationHandler)}get tabKeyPressed(){return this._tabKeyPressed||Rn.keyboardEventProcessed&&Rn.processingKeyCode===Ie.KeyCode.Tab}get items(){return this._items}get itemCount(){return this.items.length}get selectedItemElement(){return this.selectedItemIndex>=0&&this.selectedItemIndex<this.itemCount?this.items[this.selectedItemIndex]:null}get selectedItemIndex(){return this._selectedItemIndex}get isFirstItemSelected(){return this._selectedVisibleIndex<=this._firstAvailableVisibleIndex}get isLastItemSelected(){return this._selectedVisibleIndex>=this._lastAvailableVisibleIndex}get isVirtualRenderModeEnabled(){return this._component.enableVirtualRenderMode}get totalItemCount(){const e=this._component.getScrollViewer();return e&&e instanceof oi?e.totalItemCount:this._rows.length}get searchIsAppliedAndReturnsNoneEmptyData(){return this.itemCount>0&&this._component.searchIsApplied}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}onPopupShown(){this._isActive=!0,this.initialize(),this.addEventSubscriptions()}onPopupClosed(){this.removeEventSubscriptions(),this.dispose(),this._isActive=!1}processKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:this._tabKeyPressed=!0;break;case Ie.KeyCode.Enter:case Ie.KeyCode.Esc:return!this._isActive&&(this._component.dispatchKeyDownEvent(e),!0);case Ie.KeyCode.Up:return this._component.handleCloseDropDown(e);case Ie.KeyCode.Down:return this._component.handleOpenDropDown(e);case Ie.KeyCode.Delete:return this._component.handleTryClearEditorValue(e)}return!1}processCapturedKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Tab:this._tabKeyPressed=!0;break;case Ie.KeyCode.Enter:case Ie.KeyCode.Esc:return this._component.dispatchKeyDownEvent(e),!0;case Ie.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Ie.KeyCode.Down:return!(e.altKey||e.metaKey)&&this.handleArrowDownKeyDown();case Ie.KeyCode.PageUp:return this.handlePageUp();case Ie.KeyCode.PageDown:return this.handlePageDown();case Ie.KeyCode.Home:return e.ctrlKey&&e.shiftKey&&this.handleHomeKeyDown();case Ie.KeyCode.End:return e.ctrlKey&&e.shiftKey&&this.handleEndKeyDown()}return!1}processKeyUp(e){switch(this._tabKeyPressed=!1,Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:case Ie.KeyCode.Up:case Ie.KeyCode.PageUp:case Ie.KeyCode.PageDown:this.notifyFocusedRowChanged();break;case Ie.KeyCode.Home:case Ie.KeyCode.End:e.shiftKey&&e.ctrlKey&&this.notifyFocusedRowChanged()}return!1}updateState(){this._isActive?(this.udpdateFocusState(),this.updateSelectedItemState()):this._requireUpdateSelectedItemState++}shouldHandleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Enter:case Ie.KeyCode.Esc:return this._isActive;default:return!1}}getItem(e){return this.items[e]}addFocusHiddenAttribute(){this._renderContainer&&!Tn(this._renderContainer)&&Dn(this._renderContainer)}removeFocusHiddenAttribute(){this._renderContainer&&Tn(this._renderContainer)&&Fn(this._renderContainer)}addDataQaLoadedAttribute(){this._renderContainer&&!i.hasLoaded(this._renderContainer)&&i.setLoaded(this._renderContainer)}removeDataQaLoadedAttribute(){this._renderContainer&&i.hasLoaded(this._renderContainer)&&i.removeLoaded(this._renderContainer)}containsFocusHiddenAttribute(){return!!this._renderContainer&&Tn(this._renderContainer)}dispose(){this.removeFocusHiddenAttribute(),this.removeDataQaLoadedAttribute(),this._renderContainerMutationObserver.disconnect(),this.setSelectedItem(-1,!0),this.notifyFocusedRowChanged(),this._firstAvailableVisibleIndex=-1,this._lastAvailableVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._items=[],this._rows=[]}initialize(){if(this._items=this.queryItems(),this._rows=this.queryRows(),this.updateBoundaries(),this._renderContainer=this._component.renderContainer,this._renderContainer&&this._renderContainerMutationObserver.observe(this._renderContainer,{childList:!0,subtree:!0}),this.addFocusHiddenAttribute(),this.updateViewportBoundaries(),this._component.useCustomInput){const e=this.findSelectedDataItemIndex();e>=0&&(this.setSelectedItem(e),this.notifyFocusedRowChanged())}else this.restoreFocusedState();this.addDataQaLoadedAttribute()}restoreFocusedState(){if(this.searchIsAppliedAndReturnsNoneEmptyData&&this._requireUpdateSelectedItemState>=0)this.removeFocusHiddenAttribute(),this._requireUpdateSelectedItemState=-1,this.setSelectedItem(0,!0);else{const e=this.findSelectedDataItemIndex();e>=0&&this.setSelectedItem(e,!0)}this.notifyFocusedRowChanged()}handleArrowUpKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualItem():this.moveToPrevItem(),!0)}handleArrowDownKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualItem():this.moveToNextItem(),!0)}handlePageUp(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem(),!0)}handlePageDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualPageItem():this.moveToNextPageItem(),!0)}moveToNextPageItem(){const e=this._lastAvailableVisibleIndex,t=this._component.getScrollViewer();if(t){const n=PB.calculateBoundaryItemVisibleIndex(this,t,!0),i=n>e?e:n,s=PB.isGroupRow(this,i),r=PB.findItemIndex(s?i-1:i,this.items);this.setSelectedItem(r);const o=s?PB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Qe.Bottom,Pe.None,o)}}moveToPrevPageItem(){const e=this._component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!1),n=t<0?0:t,i=PB.isGroupRow(this,n),s=PB.findItemIndex(i?n+1:n,this.items);this.setSelectedItem(s);const r=i?PB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,r)}}moveToPrevVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=PB.isGroupRow(this,t),n=PB.findItemIndex(e?t+1:t,this.items);this.setSelectedItem(n);const i=e?PB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,i)}else this.notifyMakeElementVisible(t,Qe.Top)}}moveToNextVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=PB.isGroupRow(this,t),n=PB.findItemIndex(e?t-1:t,this.items);this.setSelectedItem(n);const i=e?PB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Qe.Bottom,Pe.None,i)}else this.notifyMakeElementVisible(t,Qe.Bottom)}}handleHomeKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToFirstVirtualItem():this.moveToFirstItem(),!0)}handleEndKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToLastVirtualItem():this.moveToLastItem(),!0)}moveToPrevItem(){this.selectedItemIndex>0&&this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)}moveToNextItem(){this.selectedItemIndex<this.itemCount-1&&this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)}moveToNextVirtualItem(){let e=this._selectedVisibleIndex+1;this.isElementInsideViewport(e)&&PB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Qe.Bottom)}moveToPrevVirtualItem(){let e=this._selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&PB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Qe.Top))}moveToFirstItem(){if(this._component.getScrollViewer()){const e=PB.isGroupRow(this,0);this.setSelectedItem(0);const t=e?PB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.setSelectedItem(0),this.scrollToElement(Qe.Top,Pe.None)):this.notifyMakeElementVisible(0,Qe.Top)}moveToLastItem(){this._component.getScrollViewer()&&(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Qe.Bottom,Pe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Qe.Bottom,Pe.None)):this.notifyMakeElementVisible(e,Qe.Bottom)}updateViewportBoundaries(){if(0===this._rows.length||0===this.itemCount)return;this._firstVisibleIndex=this.getElementVisibleIndex(this._rows[0]);this._lastVisibleIndex=this.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return this.itemsContainer?Array.from(this.itemsContainer.querySelectorAll(IB.VisibleItemSelector)):[]}get itemsContainer(){const e=this._component.getTable();return e?e.querySelector(IB.TableBodySelector):this._component.getList()}updateBoundaries(){let e=0;0!==this._firstAvailableVisibleIndex&&(e++,this._firstAvailableVisibleIndex=0);const t=this.totalItemCount-1;return this._lastAvailableVisibleIndex!==t&&(e++,this._lastAvailableVisibleIndex=t),e>0}isElementInsideViewport(e){return e>=this._firstVisibleIndex&&e<=this._lastVisibleIndex}findItemIndex(e){for(let t=0;t<this.itemCount;t++){const n=this.items[t];if(n&&this.getElementVisibleIndex(n)===e)return t}return-1}getElementVisibleIndex(e){return ot.getAttributeIntValue(e,EB.VisibleIndexAttributeName,-1)}findSelectedDataItemIndex(){for(let e=0;e<this.itemCount;e++){const t=this.items[e];if(t&&t.matches(IB.SelectedItemSelector))return e}return-1}notifyFocusedRowChanged(){this._component.notifyFocusedRowChanged(this._selectedVisibleIndex)}notifyMakeElementVisible(e,t=null){e<0||this._component.notifyMakeElementVisible(e,PB.getVerticalEdge(t))}setSelectedItem(e,t=!1){(this.selectedItemIndex!==e||t)&&(this.removeFocusMarkerClass(this.selectedItemElement),this._selectedItemIndex=e,this.selectedItemElement?(this.addFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=this.getElementVisibleIndex(this.selectedItemElement)):(this.removeFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=-1))}updateActiveDescendantAttribute(e){if(this.containsFocusHiddenAttribute())return;const t=e&&e.getAttribute(EB.ItemIdAttributeName);this._component.updateActiveDescendantAttributeValue(null!=t?t:"")}removeFocusMarkerClass(e){e&&T.DomUtils.hasClassName(e,BB.FocusedItemClassName)&&T.DomUtils.removeClassName(e,BB.FocusedItemClassName)}addFocusMarkerClass(e){this.containsFocusHiddenAttribute()||!e||T.DomUtils.hasClassName(e,BB.FocusedItemClassName)||T.DomUtils.hasClassName(e,BB.EmptyDataItemClassName)||T.DomUtils.addClassName(e,BB.FocusedItemClassName)}queryItems(){const e=this._component.getTable();if(e){const t=e.querySelector(IB.TableBodySelector);if(t)return PB.queryItemsBySelector(t,IB.TableDataRowSelector)}else{const e=this._component.getList();if(e)return PB.queryItemsBySelector(e,IB.ItemSelector)}return[]}addEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}udpdateFocusState(){this._component.useCustomInput?this.addFocusHiddenAttribute():this.removeFocusHiddenAttribute()}updateSelectedItemState(){this.setSelectedItem(this.searchIsAppliedAndReturnsNoneEmptyData&&!this._component.useCustomInput?0:-1,!0),this.notifyFocusedRowChanged()}onRenderContainerMutation(e,t){if(this._isActive)if(this.removeFocusMarkerClass(this.selectedItemElement),this._items=this.queryItems(),this._rows=this.queryRows(),this.updateViewportBoundaries(),this.updateBoundaries())this.udpdateFocusState(),this.updateSelectedItemState();else if(this.isElementInsideViewport(this._selectedVisibleIndex)){const e=this.findItemIndex(this._selectedVisibleIndex);e>-1&&(this.setSelectedItem(e,!0),this.notifyFocusedRowChanged())}}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=PB.getElementVisibleIndex(e.detail.element),n=PB.isGroupRow(this,t),i=PB.findItemIndex(n?t+1:t,this.items);this.setSelectedItem(i),this.notifyFocusedRowChanged()}}scrollToElement(e,t,n=this.selectedItemElement){const i=this._component.getScrollViewer();i&&n&&_e.scrollToElementRelyOnStickyDescendants(n,e,t,i)}getLastAvailableVisibleIndex(){return this._lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this._selectedVisibleIndex}getItemsContainer(){return this.itemsContainer}getRows(){return this._rows}}class RB extends CustomEvent{constructor(e,t,n,i){super(RB.eventName,{detail:new LB(e,t,n,i),bubbles:!0,composed:!0,cancelable:!0})}}RB.eventName=Al+".keydown";class LB{constructor(e,t,n,i){this.Key=e,this.AltKey=t,this.CtrlKey=n,this.ShiftKey=i}}class MB extends CustomEvent{constructor(){super(MB.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}MB.eventName=Al+".dropdownclosed",Ct.register(RB.eventName,(e=>e.detail)),Ct.register(MB.eventName,(e=>e.detail));class kB{}var KB,OB;kB.AriaActiveDescendant="aria-activedescendant",function(e){e.Default="Default",e.None="None",e.AutoSearch="AutoSearch"}(KB||(KB={}));class _B extends eA{constructor(){super(),this._columnsInfo=[],this._focusedRowIndex=-1,this._elementHasCalculatedWidthAttribute="has-calculated-width",this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnRenderContainerPointerDownHandler=this.onRenderContainerPointerDown.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this._tableHeaderCellSelector=`.${Fe.ContentContainerClassName} > table > thead > ${IB.HeaderRowSelector} > th`,this._tableBodyCellSelector=`.${Fe.ContentContainerClassName} > table > tbody > ${IB.TableVisibleRowGeneralSelector} > td`,this._hoverTitleElementsSelector=[this._tableBodyCellSelector,this._tableHeaderCellSelector].join(", "),this._kbdNavigationHelper=new NB(this),this.dropDownWidthMode=Zl.ContentOrEditorWidth,this.searchMode=KB.Default,this.useCustomInput=!1,this._pointerEventsHelper=new q(this)}connectedCallback(){super.connectedCallback(),this.prepareRenderContainer()}disconnectedCallback(){super.disconnectedCallback(),this.releaseRenderContainer()}ensurePopupElement(){super.ensurePopupElement(),this.popupElement&&(this.popupElement.addEventListener(ro.eventName,this.boundOnPopupShownHandler),this.popupElement.addEventListener(oo.eventName,this.boundOnPopupClosedHandler))}disposePopupElement(){this.popupElement&&(this.popupElement.removeEventListener(ro.eventName,this.boundOnPopupShownHandler),this.popupElement.removeEventListener(oo.eventName,this.boundOnPopupClosedHandler)),super.disposePopupElement()}createKeyboardStrategy(){return new jl(this)}get renderContainer(){return this.popupDOMElement?this.popupDOMElement.querySelector(`.${BB.RenderContainer}`):null}getScrollViewer(){return this.renderContainer?this.renderContainer.querySelector(`.${Fe.ClassName}`):null}getScrollViewerContent(){return this.renderContainer?this.renderContainer.querySelector(`.${Fe.ContentContainerClassName}`):null}getTable(){return this.renderContainer?this.renderContainer.querySelector(`.${Fe.ContentContainerClassName} > table`):null}getList(){return this.renderContainer?this.renderContainer.querySelector(IB.ListSelector):null}notifyFocusedRowChanged(e){e!==this._focusedRowIndex&&(this.dispatchEvent(new SB(e)),this._focusedRowIndex=e)}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new DB(e,t))}notifyColumnsChanged(e){this._columnsInfo=e}handleOpenDropDown(e){return!(!this.enabled||this.isReadOnly||this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.openDropDown(),!0)}handleCloseDropDown(e){return!(!this.enabled||this.isReadOnly||!this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.closeDropDown(),!0)}handleTryClearEditorValue(e){return!(!this.enabled||this.isReadOnly||!e.altKey)&&(this.dispatchClearEditorValue(),!0)}dispatchKeyDownEvent(e){const t=new RB(e.key,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey);this.dispatchEvent(t)}updateActiveDescendantAttributeValue(e){this.inputElement&&this.inputElement.hasAttribute(kB.AriaActiveDescendant)&&this.inputElement.setAttribute(kB.AriaActiveDescendant,e)}get isTableRender(){return!!this.getTable()}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof oi}get isSearchActive(){switch(this.searchMode){case KB.None:case KB.Default:return!1;default:return!0}}get searchIsApplied(){const e=this.fieldElement?this.fieldElementValue:this.fieldText;return this.isSearchActive&&(e?e.length:-1)>0}onTextInput(e){this.inputElement&&(this.ensureDropDownOpened(e),this._kbdNavigationHelper.updateState(),this.raiseFieldText())}raiseFocusOut(e){super.raiseFocusOut(e,this._kbdNavigationHelper.tabKeyPressed)}ensureDropDownOpened(e){!this.isDropDownOpen&&e.data&&e.data.length>0&&this.tryOpenDropDown()}processKeyDown(e){return!!this.tryProcessKeyDown(e)||super.processKeyDown(e)}processKeyUp(e){return!!this.tryProcessKeyUp(e)||super.processKeyUp(e)}tryProcessKeyDown(e){return this._kbdNavigationHelper.processKeyDown(e)}tryProcessKeyUp(e){return this._kbdNavigationHelper.processKeyUp(e)}processCapturedKeyDownAsync(e,t){return this._kbdNavigationHelper.processCapturedKeyDown(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}onPopupShown(e){setTimeout((()=>{this.prepareRenderContainer(),this._kbdNavigationHelper.onPopupShown()}))}onPopupClosed(e){setTimeout((()=>{this._kbdNavigationHelper.onPopupClosed(),this.releaseRenderContainer()}))}prepareRenderContainer(){this.renderContainer&&(this.renderContainer.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.addEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this.renderContainer.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.resizeDropDownElement(),this._pointerEventsHelper.initialize())}onVisibleElementChanged(e){this.resizeDropDownElement()}resizeDropDownElementCore(){const e=this.getTable();if(e){const t=Array.from(e.querySelectorAll(":scope > colgroup > col")),n=Array.from(e.querySelectorAll(":scope > thead > tr > th")),i=[],s=[];for(let e=0;e<t.length;e++){const n=t[e];(n.style.width.indexOf("%")>0||n.hasAttribute(this._elementHasCalculatedWidthAttribute))&&(n.style.removeProperty("width"),n.removeAttribute(this._elementHasCalculatedWidthAttribute)),n.style.width?i.push(e):s.push(e)}if(s.length<1)return;const r=i.map((e=>n[e])),o=s.map((e=>n[e])),a=r.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),l=e.style.width;e.style.width="auto";const A=o.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),d=this.dropDownElement.minDesiredWidth?T.DomUtils.pxToInt(this.dropDownElement.minDesiredWidth):0;if(this.needAdjustNarrowContent(a,A,d)){if(s.length>1){const e=(d-a)/A;for(let i=0;i<s.length-1;i++){const r=s[i],o=t[r];o.style.width=ot.toPx(Math.ceil(n[r].getBoundingClientRect().width*e)),o.setAttribute(this._elementHasCalculatedWidthAttribute,"")}}}else s.forEach((e=>{const i=t[e];i.style.width=ot.toPx(Math.ceil(n[e].getBoundingClientRect().width)),i.setAttribute(this._elementHasCalculatedWidthAttribute,"")}));e.style.width=l}else{const e=this.getList(),t=window.innerWidth,n=this.getScrollViewerContent(),i=this.popupDOMElement&&n?this.popupDOMElement.getBoundingClientRect().width-n.getBoundingClientRect().width:0,s=Math.ceil(e.getBoundingClientRect().width+i);this.dropDownElement.desiredWidth=ot.toPx(Math.min(s,t))}}needAdjustNarrowContent(e,t,n){if(n){return this.dropDownWidthMode===Zl.ContentOrEditorWidth&&e+t<n}return!1}resizeDropDownElement(){this.dropDownElement&&this.isDropDownWidthDependsOnContent&&this.resizeDropDownElementCore()}releaseRenderContainer(){this.renderContainer&&(this.renderContainer.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.renderContainer.removeEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this._pointerEventsHelper.dispose()),this.isDropDownWidthDependsOnContent&&this.dropDownElement&&(this.dropDownElement.desiredWidth=null)}onSizeChanged(e,t){if(!this.dropDownElement)return;const n=this.getScrollViewer();n&&n.refreshUI&&n.refreshUI(),super.onSizeChanged(e,t)}onRenderContainerPointerDown(e){var t;h.Browser.Firefox&&this.isTableRender&&e.ctrlKey&&e.preventDefault(),null!==(null===(t=this.renderContainer)||void 0===t?void 0:t.querySelector(IB.EmptyDataItemSelector))&&H.markHandled(e)}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),n=this.getTable();t&&n&&(n.offsetHeight<t.clientHeight?T.DomUtils.addClassName(n,BB.ContainerNoScrollClassName):n.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(n,BB.ContainerNoScrollClassName)),e.stopPropagation()}shouldHandleKeyDown(e){return this._kbdNavigationHelper.shouldHandleKeyDown(e)}get isDropDownWidthDependsOnContent(){return this.dropDownWidthMode===Zl.ContentWidth||this.dropDownWidthMode===Zl.ContentOrEditorWidth}get handlePointerEventsMode(){return r.None}get handlePointerEventsTarget(){var e;return null!==(e=this.getTable())&&void 0!==e?e:this}get hoverTitleElementsSelector(){return this._hoverTitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([xs({type:KB,attribute:"search-mode"})],_B.prototype,"searchMode",void 0),C([xs({type:Boolean,attribute:"use-custom-input"})],_B.prototype,"useCustomInput",void 0),function(e){e.Input="Input",e.Click="Click"}(OB||(OB={}));class VB extends _B{constructor(){super(),this.dropDownTriggerMode=OB.Input}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}applyTextPropertyCore(){super.applyTextPropertyCore(),this.allowInput||this.fieldElement&&this.fieldText&&""!==this.fieldText&&this.fieldElement.setSelectionRange(0,0)}ensureDropDownOpened(e){if(!this.isDropDownOpen){(e.data&&e.data.length>0||(this.fieldElement?this.fieldElementValue:this.fieldText))&&super.tryOpenDropDown()}}processPointerDown(e){const t=H.containsInComposedPath(e,this.isFieldElement.bind(this));let n=!1;return H.containsInComposedPath(e,this.isEditBoxTemplateElement.bind(this))?n=!0:t&&(n=this.dropDownTriggerMode===OB.Click||this.isFieldElementReadonly),n&&this.toggleDropDownVisibility(),super.processPointerDown(e)}}C([xs({type:OB,attribute:"drop-down-trigger-mode"})],VB.prototype,"dropDownTriggerMode",void 0),customElements.define(ll,VB);class zB extends Jl{createPopupStrategy(e,t){return new WB(e,t,this)}}class WB extends ql{constructor(e,t,n){super(e,t,n),this._focusableElements=[],this._timeoutId=null,this.boundWaitForNavigatorInitialization=this.waitForNavigatorInitialization.bind(this)}get editDropDownElement(){return this.targetElement.querySelector(`.${Gl.ClassName}`)}updateFocusableElementsList(){if(this.editDropDownElement){const e=bn.findFocusableElements(this.editDropDownElement);this._focusableElements=e.length>0?e:[this.editDropDownElement]}}get focusableElements(){return this._focusableElements}handlePopupShown(){super.handlePopupShown(),this.addDropDownElementsEventSubscriptions();const e=this.editDropDownElement.querySelector(Ln);e&&!e.initialized?this.waitForNavigatorInitialization(e,this.handlePopupShownInternal.bind(this)):this.handlePopupShownInternal()}handlePopupClosed(){super.handlePopupClosed(),this.targetElement.removeEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&this.editDropDownElement.removeEventListener("focus",this.boundEditDropDownElementFocusHandler)}addDropDownElementsEventSubscriptions(){this.boundDropDownElementFocusHandler||(this.boundDropDownElementFocusHandler=this.dropDownElementFocusHandler.bind(this)),this.targetElement.addEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&(this.boundEditDropDownElementFocusHandler||(this.boundEditDropDownElementFocusHandler=this.editDropDownElementFocusHandler.bind(this)),this.editDropDownElement.addEventListener("focus",this.boundEditDropDownElementFocusHandler))}waitForNavigatorInitialization(e,t){this._timeoutId&&clearTimeout(this._timeoutId),document.activeElement===this.targetElement&&(e.initialized?t():this._timeoutId=setTimeout((()=>this.boundWaitForNavigatorInitialization(e,t)),50))}handlePopupShownInternal(){this.updateFocusableElementsList(),this.tryFocusFirstFocusableElement()}tryFocusFirstFocusableElement(){this.focusableElements.length>0&&bn.focusElement(this.focusableElements[0])}tryFocusLastFocusableElement(){this.focusableElements.length>0&&bn.focusElement(this.focusableElements[this.focusableElements.length-1])}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&this.focusableElements.length<=1?(H.markHandled(e),!1):super.handleKeyDown(e)}onDropDownEditorPointerDownHandler(){T.DomUtils.isItParent(this.targetElement,document.activeElement)||super.onDropDownEditorPointerDownHandler()}dropDownElementFocusHandler(e){this.tryFocusFirstFocusableElement()}editDropDownElementFocusHandler(e){this.tryFocusLastFocusableElement()}}let $B=class extends eA{constructor(){super()}processPointerDown(e){const t=e.target===this.editBoxElement,n=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(e.target)&&!this.isFocusableElementInMainElementTemplate(e.target);return this.isDropDownOpen||!t&&!n||this.tryOpenDropDown(),super.processPointerDown(e)}createKeyboardStrategy(){return new zB(this)}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}};$B=C([Es("dxbl-dropdown-box")],$B);let GB=class extends El{constructor(){super(),this.textAreaObserver=new MutationObserver(this.textAreaSizeChanged.bind(this))}connectedOrContentChanged(){super.connectedOrContentChanged();const e=this.getFieldElement();e&&this.textAreaObserver.observe(e,{attributes:!0})}disconnectedCallback(){this.textAreaObserver.disconnect(),super.disconnectedCallback()}textAreaSizeChanged(e,t){var n,i;const s=e[0].target,r=parseInt(s.style.width);if(!isNaN(r)){const e=this.offsetWidth-this.clientWidth+r;this.offsetWidth!==e&&(this.style.width=e+"px")}const o=parseInt(s.style.height),a=parseInt(s.style.marginBottom);if(!isNaN(o)){const e=parseInt(getComputedStyle(s).minHeight),t=o>=e?o:e,r=null!==(i=null===(n=this.getButtonsArea())||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==i?i:0,l=this.offsetHeight-this.clientHeight+t+r+a;this.offsetHeight!==l&&(this.style.height=l+"px")}}get shouldForceInputOnEnter(){return!1}getFieldElement(){return this.querySelector("textarea")}getButtonsArea(){return this.querySelector(".dxbl-memo-edit-buttons-area")}};GB=C([Es("dxbl-memo-editor")],GB);customElements.define("dxbl-date-time-edit",class extends AB{createKeyboardStrategy(){return new rB(this)}});class qB extends On{constructor(e,t){super(e.getKeyboardNavigator(),t),this.component=e}getTable(){return this.component.getTable()}getList(){return this.component.getList()}getSearchBox(){return this.component.getSearchBox()}getListSelectAll(){return this.component.getListSelectAll()}getScrollViewer(){return this.component.getScrollViewer()}getScrollViewerContent(){return this.component.getScrollViewerContent()}getColumnInfoByCell(e){return this.component.getColumnInfoByCell(e)}get isFocusedRowEnabled(){return this.component.enableFocusedRow}get isMultipleSelectionEnabled(){return this.component.enableMultipleSelection}get isShowCheckboxesEnabled(){return this.component.isShowCheckboxesEnabled}canSwitchToNestedContentMode(){return!0}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class YB extends qB{constructor(e,t,n){super(t,n),this.lockScroll=0}isImmediatelyClickEnabled(){return!1}get preventScrollOnFocus(){return this.lockScroll>0}getVisibleIndex(){return ot.getAttributeIntValue(this.targetElement,EB.VisibleIndexAttributeName,-1)}leave(){bn.removeTabIndex(this.selectedItemElement)}lockScrollOnFocus(){this.lockScroll++}unlockScrollOnFocus(){this.lockScroll--}getShortcutContext(){return{ElementType:this.getElementType(),VisibleIndex:this.getVisibleIndex()}}}class XB extends YB{handleKeyDown(e){return this.nestedContentSelected||Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Space?super.handleKeyDown(e):(this.performShortcutEvent(e),!0)}}class JB extends qB{constructor(e,t){super(e,t),this.savedVisibleIndex=-1,this.selectedVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1,this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=-1,this.requestRestoreSelectedElementIndex=-1,this.boundOnVisibleElementChangedHandler=this.onMakeRowVisible.bind(this),this._rows=[],this.addEventSubscriptions()}get enableVirtualRenderMode(){return this.component.enableVirtualRenderMode}get isFirstItemSelected(){return this.selectedVisibleIndex<=this.firstAvailableVisibleIndex}get isLastItemSelected(){return this.selectedVisibleIndex>=this.lastAvailableVisibleIndex}get totalItemCount(){const e=this.component.virtualItemCount;return e>=0?e:this._rows.length}get preventScrollOnFocus(){return this.enableVirtualRenderMode}updateSelectedItemByChildElement(e,t=null){const n=this.findItemElementIndexByChild(e);if(n<0)return;const i=t instanceof MouseEvent;if(i&&(this.selectedVisibleIndex=PB.getElementVisibleIndex(this.items[n])),this.enableVirtualRenderMode)return!i&&n!==this.selectedItemIndex&&this.isElementInsideViewport(this.selectedVisibleIndex)&&(this.requestRestoreSelectedElementIndex=this.selectedVisibleIndex),void this.updateSelectedItemByIndex(n);super.updateSelectedItemByChildElement(e,t)}initialize(){super.initialize(),this._rows=this.queryRows(),this.resetState(),this.updateBoundaries(),this.updateViewportBoundaries()}activate(){if(this.enableVirtualRenderMode)if(this.requestRestoreSelectedElementIndex>-1)this.notifyMakeElementVisible(this.requestRestoreSelectedElementIndex,null),this.requestRestoreSelectedElementIndex=-1;else if(this.selectedVisibleIndex>-1)if(this.isElementInsideViewport(this.selectedVisibleIndex)){const e=PB.findItemIndex(this.selectedVisibleIndex,this.items);e>-1&&this.selectViewportItem(e)}else Dn(this.targetElement);else this.selectViewportItem(this.selectedItemIndex);else super.activate()}onDispose(){this._rows=[],this.resetState(),this.removeEventSubscriptions(),super.onDispose()}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}selectItem(e){const t=this.getSelectedItemStrategy(),n=this.getStrategy(e),i=n.getVisibleIndex();this.selectedVisibleIndex=i,this.savedVisibleIndex=i,Fn(this.targetElement),super.selectItem(e),t&&t!==n&&t.leave()}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Ie.KeyCode.Down:return this.handleArrowDownKeyDown();case Ie.KeyCode.PageDown:return this.handlePageDown();case Ie.KeyCode.PageUp:return this.handlePageUp();case Ie.KeyCode.Home:return this.handleHomeKeyDown(e)||this.performShortcutEvent(e),!0;case Ie.KeyCode.End:return this.handleEndKeyDown(e)||this.performShortcutEvent(e),!0;case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}handleKeyUp(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:case Ie.KeyCode.Up:case Ie.KeyCode.PageUp:case Ie.KeyCode.PageDown:case Ie.KeyCode.Home:case Ie.KeyCode.End:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Pe.None)}moveToNextItem(){super.moveToNextItem(),this.scrollToElement(null,Pe.None)}selectViewportItem(e){const t=this.getStrategy(e);t.lockScrollOnFocus(),this.selectItem(e),t.unlockScrollOnFocus()}moveToPrevVirtualItem(){let e=this.selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&PB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.selectViewportItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Qe.Top))}moveToNextVirtualItem(){let e=this.selectedVisibleIndex+1;this.isElementInsideViewport(e)&&PB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.selectViewportItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Qe.Bottom)}handleArrowUpKeyDown(){return this.isFirstItemSelected||(this.enableVirtualRenderMode?this.moveToPrevVirtualItem():this.moveToPrevItem()),!0}handleArrowDownKeyDown(){return this.isLastItemSelected||(this.enableVirtualRenderMode?this.moveToNextVirtualItem():this.moveToNextItem()),!0}handleHomeKeyDown(e){return!!this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToFirstVirtualItem():this.moveToFirstItem(),!(e.ctrlKey&&e.shiftKey))}moveToFirstItem(){if(this.getScrollViewer()){const e=PB.isGroupRow(this,0);this.selectItem(0);const t=e?PB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.selectViewportItem(0),this.scrollToElement(Qe.Top,Pe.None)):this.notifyMakeElementVisible(0,Qe.Top)}handleEndKeyDown(e){return!!this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToLastVirtualItem():this.moveToLastItem(),!(e.ctrlKey&&e.shiftKey))}moveToLastItem(){this.component.getScrollViewer()&&(this.selectItem(this.itemCount-1),this.scrollToElement(Qe.Bottom,Pe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.selectViewportItem(this.itemCount-1),this.scrollToElement(Qe.Bottom,Pe.None)):this.notifyMakeElementVisible(e,Qe.Bottom)}handlePageUp(){return this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem()),!0}moveToPrevPageItem(){const e=this.component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!1),n=t<0?0:t,i=PB.isGroupRow(this,n),s=PB.findItemIndex(i?n+1:n,this.items);this.selectItem(s);const r=i?PB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,r)}}moveToPrevVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=PB.isGroupRow(this,t),n=PB.findItemIndex(e?t+1:t,this.items);this.selectViewportItem(n);const i=e?PB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Qe.Top,Pe.None,i)}else this.notifyMakeElementVisible(t,Qe.Top)}}handlePageDown(){return this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToNextVirtualPageItem():this.moveToNextPageItem()),!0}moveToNextPageItem(){const e=this.lastAvailableVisibleIndex,t=this.component.getScrollViewer();if(t){const n=PB.calculateBoundaryItemVisibleIndex(this,t,!0),i=n>e?e:n,s=PB.isGroupRow(this,i),r=PB.findItemIndex(s?i-1:i,this.items);this.selectItem(r);const o=s?PB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Qe.Bottom,Pe.None,o)}}moveToNextVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=PB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=PB.isGroupRow(this,t),n=PB.findItemIndex(e?t-1:t,this.items);this.selectViewportItem(n);const i=e?PB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Qe.Bottom,Pe.None,i)}else this.notifyMakeElementVisible(t,Qe.Bottom)}}onMakeRowVisible(e){if(e.detail.isFocusRequired){const t=PB.getElementVisibleIndex(e.detail.element),n=PB.isGroupRow(this,t),i=PB.findItemIndex(n?t+1:t,this.items);this.selectItem(i)}}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}getStrategy(e){return this.getItemStrategy(e)}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.component.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}scrollToElement(e,t,n=this.selectedItemElement){const i=this.getScrollViewer();i&&n&&_e.scrollToElementRelyOnStickyDescendants(n,e,t,i)}notifyMakeElementVisible(e,t=null){e<0||this.component.notifyMakeElementVisible(e,PB.getVerticalEdge(t))}updateBoundaries(){this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=this.totalItemCount-1}updateViewportBoundaries(){if(0===this._rows.length)return;this.firstVisibleIndex=PB.getElementVisibleIndex(this._rows[0]);this.lastVisibleIndex=PB.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return Array.from(this.targetElement.querySelectorAll(IB.VisibleItemSelector))}isElementInsideViewport(e){return e>=this.firstVisibleIndex&&e<=this.lastVisibleIndex}resetState(){this.firstAvailableVisibleIndex=-1,this.lastAvailableVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1}getLastAvailableVisibleIndex(){return this.lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this.selectedVisibleIndex}getItemsContainer(){return this.targetElement}getRows(){return this._rows}}var jB,ZB;!function(e){e[e.Undefined=0]="Undefined",e[e.HeaderRow=1]="HeaderRow",e[e.DataRow=2]="DataRow",e[e.ListItem=3]="ListItem",e[e.EmptyData=4]="EmptyData",e[e.EmptyItem=5]="EmptyItem"}(jB||(jB={})),function(e){e[e.None=0]="None",e[e.Table=1]="Table",e[e.List=2]="List",e[e.SearchBox=3]="SearchBox",e[e.ListSelectAll=4]="ListSelectAll"}(ZB||(ZB={}));class eE{static getElementType(e){return e.matches(IB.HeaderRowSelector)?jB.HeaderRow:e.matches(IB.TableVisibleRowGeneralSelector)?jB.DataRow:e.matches(IB.EmptyDataItemSelector)?jB.EmptyData:e.matches(IB.ListVisibleItemGeneralSelector)?jB.ListItem:e.matches(IB.EmptyListItemSelector)?jB.EmptyItem:jB.Undefined}static getNavigationAreaType(e){return e.matches(IB.TableSelector)?ZB.Table:e.matches(IB.ListSelector)?ZB.List:e.matches(IB.SearchBoxSelector)?ZB.SearchBox:e.matches(IB.ListSelectAllContainerSelector)?ZB.ListSelectAll:ZB.None}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${BB.TableSelectionCellClassName}`))&&void 0!==t&&t}static isItemDisplayTemplateContainer(e){var t;return null!==(t=null==e?void 0:e.matches(`.${BB.ItemDisplayTemplateContainer}`))&&void 0!==t&&t}}class tE extends qB{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(IB.TablePartsSelector)}createItemStrategy(e){return e.matches("thead")?new nE(this.component,e):e.matches("tbody")?new iE(this,this.component,e):null}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&this.handleTabKeyDown(e)}getShortcutContext(){return{AreaType:ZB.Table}}}class nE extends qB{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(IB.HeaderRowSelector)}createItemStrategy(e){if(eE.getElementType(e)===jB.HeaderRow)return new sE(this.component,e);throw new Error("Not implemented")}}class iE extends JB{constructor(e,t,n){super(t,n)}createItemStrategy(e){return e.matches(IB.TableVisibleRowGeneralSelector)?new rE(this,this.component,e):e.matches(IB.EmptyDataItemSelector)?new oE(this,this.component,e):null}queryItems(){return this.queryItemsBySelector(IB.TableDataRowSelector)}}class sE extends qB{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Space:return this.handleSpace(e);case Ie.KeyCode.Enter:case Ie.KeyCode.Down:case Ie.KeyCode.Up:case Ie.KeyCode.PageDown:case Ie.KeyCode.PageUp:case Ie.KeyCode.Home:case Ie.KeyCode.End:return!0}return super.handleKeyDown(e)}handleSpace(e){return this.performShortcutEvent(e),!0}getShortcutContext(){return{ElementType:jB.HeaderRow}}}class rE extends XB{getElementType(){return jB.DataRow}handleKeyDown(e){if(!this.nestedContentSelected&&Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter){const e=this.findFocusableElements().length;if(this.isShowCheckboxesEnabled&&1===e||0===e)return!0}return super.handleKeyDown(e)}}class oE extends YB{constructor(e,t,n){super(e,t,n)}getElementType(){return jB.EmptyData}}class aE extends JB{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:ZB.List}}queryItems(){return this.queryItemsBySelector(IB.ItemSelector)}createItemStrategy(e){return e.matches(IB.ListVisibleItemGeneralSelector)?new lE(this,this.component,e):e.matches(IB.EmptyDataItemSelector)?new AE(this,this.component,e):null}}class lE extends XB{getElementType(){return jB.ListItem}hasItemDisplayTemplate(){return!!this.targetElement.querySelector(IB.ItemDisplayTemplateSelector)}handleKeyDown(e){if(!this.nestedContentSelected){const t=this.findFocusableElements().length;if(Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter&&(!this.hasItemDisplayTemplate()||0===t||1===t&&this.isShowCheckboxesEnabled))return!0}return super.handleKeyDown(e)}}class AE extends YB{constructor(e,t,n){super(e,t,n)}getElementType(){return jB.EmptyData}}class dE extends qB{constructor(e,t){super(e,t)}}class cE extends qB{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Down:case Ie.KeyCode.Up:case Ie.KeyCode.PageDown:case Ie.KeyCode.PageUp:case Ie.KeyCode.Home:case Ie.KeyCode.End:return!0}return super.handleKeyDown(e)}getShortcutContext(){return{AreaType:ZB.ListSelectAll}}}class hE extends qB{constructor(e){super(e,e)}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getSearchBox(),this.getListSelectAll(),this.getList(),this.getTable())}createItemStrategy(e){switch(eE.getNavigationAreaType(e)){case ZB.SearchBox:return new dE(this.component,e);case ZB.ListSelectAll:return new cE(this.component,e);case ZB.Table:return new tE(this.component,e);case ZB.List:return new aE(this.component,e)}return null}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class uE{constructor(e){this._uID=e}get uID(){return this._uID}}var pE;!function(e){e[e.Item=0]="Item",e[e.Component=1]="Component"}(pE||(pE={}));class mE extends ed{constructor(e){super(),this.listBox=e}getKey(){return this.listBox.uId}getItemDropArea(){return this.listBox.getList()}getDropMode(){return this.listBox.getDropMode()}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.listBox.getScrollViewer())||void 0===t||t.startAutoScrolling(Re.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.listBox.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getDraggableElement(e){return this.listBox.getItemDragHint()}getItemVisibleIndex(e){return this.listBox.getItemVisibleIndex(e)}getDropRestrictions(){return this.listBox.getDropRestrictions()}start(e,t){this.isItemDraggingAllowed(e)&&super.start(e,t)}stop(){super.stop(),document.body.classList.remove(BB.MoveCursorCssClassName,BB.NotAllowedCursorCssClassName)}findItemElementUpToParent(e,t){return Rt(e,null,(e=>e.matches(IB.ListItems)&&e.closest(IB.ListSelector)===t))}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>RA.find(e))):[]}getDropTargetIndicator(){return this.listBox.getDropTargetIndicator()}static isEmptyItem(e){const t=eE.getElementType(e);return t===jB.EmptyData||t===jB.EmptyItem}getDropPosition(){if(!this.draggableRowItemContext)return QA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:n,target:i}=this.draggableRowItemContext;return i.getDropMode()===pE.Component?QA.Append:n&&t?mE.isEmptyItem(n)?QA.Append:this.isRestrictedTopArea()?QA.Before:this.isRestrictedBottomArea()?QA.After:NA.getDropPositionByCursor(e.y,t):QA.Inside}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropAllowed())}isReorderPossible(e){const t=eE.getElementType(e);if(!this.draggableRowItemContext)return!1;const{target:n}=this.draggableRowItemContext;if(n.getDropMode()===pE.Component)return!1;if(t===jB.EmptyItem)return!0;if(t!==jB.ListItem)return!1;const i=this.getItemDropArea();if(!i||e.closest(i.tagName)!==i)return!1;const s=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(s)}refreshUICore(){if(super.refreshUICore(),!this.draggableRowItemContext)return;const e=this.isDropAllowed();document.body.classList.toggle(BB.MoveCursorCssClassName,e),document.body.classList.toggle(BB.NotAllowedCursorCssClassName,!e)}isDropAllowed(){const e=this.listBox.getDragMediator();return!e||!this.draggableRowItemContext||e.isDropAllowed(this.draggableRowItemContext.srcElement,this.draggableRowItemContext.mouseOverElement)}isItemDraggingAllowed(e){const t=eE.getElementType(e);return t===jB.DataRow||t===jB.ListItem}}function gE(e){return{fromAttribute:t=>e[t],toAttribute:t=>e[t]}}const CE=-1;let fE=class extends Ja{constructor(){super(),this._focusedRowIndex=CE,this._columnsInfo=[],this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this._handlePointerEventsMode=r.None,this.allowDragItems=!1,this.dropMode=pE.Item,this._pointerEventsHelper=new q(this),this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this.itemDraggingHelper=new mE(this)}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disconnectedCallback(){delete this.keyboardNavigator,this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this.resizeObserver.disconnect(),super.disconnectedCallback()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}getScrollViewer(){return this.querySelector(`.${Fe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${Fe.ContentContainerClassName}`)}getTable(){return this.querySelector(IB.TableSelector)}getList(){return this.querySelector(IB.ListSelector)}getSearchBox(){return this.querySelector(IB.SearchBoxSelector)}getListSelectAll(){return this.querySelector(IB.ListSelectAllContainerSelector)}getItemDragHint(){var e,t;const n=this.querySelector(`.${BB.ItemDraggingHintPortal}`);return null!==(t=null===(e=null==n?void 0:n.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,IB.ItemDragHintSelector)})))&&void 0!==t?t:null}getKeyboardNavigator(){return this.keyboardNavigator}getDropTargetIndicator(){return this.querySelector(IB.DropTargetIndicatorSelector)}getDropRestrictions(){return this.querySelector(ye)}getDragMediator(){const e=this.dataset.dragMediatorSelector;return void 0===e||0===e.length?null:this.querySelector(e)}getDropMode(){return this.dropMode}notifyFocusedRowChanged(e){e!==this.focusedRowIndex&&this.enableFocusedRow&&(this.focusedRowIndex=e,this.dispatchEvent(new SB(e)))}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new DB(e,t))}notifyColumnsChanged(e){this._columnsInfo=e}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this._columnsInfo.length)return this._columnsInfo[t]}return null}getItemVisibleIndex(e){if(e){const t=e.getAttribute(EB.VisibleIndexAttributeName);return t?parseInt(t):CE}return CE}get isTableRender(){return!!this.getTable()}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get enableFocusedRow(){return!1}get enableMultipleSelection(){return this.classList.contains(BB.MultiSelectClassName)}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof oi}get isShowCheckboxesEnabled(){return this.classList.contains(BB.CheckedClassName)}get virtualItemCount(){const e=this.getScrollViewer();return e&&e instanceof oi?e.totalItemCount:CE}get uId(){return this.getAttribute(EB.ComponentIdAttributeName)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(IB.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new hE(this))}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onScrollViewerUpdate(e){var t;const n=this.getScrollViewerContent(),i=null!==(t=this.getTable())&&void 0!==t?t:this.getList();n&&i&&(i.offsetHeight<n.clientHeight?T.DomUtils.addClassName(i,BB.ContainerNoScrollClassName):i.offsetHeight>n.clientHeight&&T.DomUtils.removeClassName(i,BB.ContainerNoScrollClassName)),e.stopPropagation()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}getListItemElement(e){return hn(e,IB.ItemGeneralSelector)}onDragStart(e){const t=e.detail.source,n=this.getListItemElement(t.target);n&&this.itemDraggingHelper.start(n,t),e.stopPropagation()}onDragStop(e){if(this.itemDraggingHelper.isStarted()){const e=this.itemDraggingHelper.createItemDraggedHandlerArgs();this.itemDraggingHelper.stop(),this.notifyItemDropped(e)}e.stopPropagation()}onDragCancel(e){this.itemDraggingHelper.isStarted()&&this.itemDraggingHelper.stop(),e.stopPropagation()}notifyItemDropped(e){e&&this.dispatchEvent(new TB(e))}getElementIndex(e){if(!e)return CE;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return CE}updateHandlePointerEventsMode(){this._handlePointerEventsMode|=r.None,this.allowDragItems&&(this._handlePointerEventsMode|=r.Dragging)}onAllowDragItemsStateChanged(){this.itemDraggingHelper.initItemDropTarget(this.allowDragItems),this.updateHandlePointerEventsMode()}updated(e){super.updated(e),e.has("allowDragItems")&&this.onAllowDragItemsStateChanged()}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}};var vE,bE,wE;C([xs({attribute:EB.AllowDragItemsAttributeName,type:Boolean})],fE.prototype,"allowDragItems",void 0),C([xs({attribute:EB.DropMode,type:pE,converter:gE(pE)})],fE.prototype,"dropMode",void 0),fE=C([Es(al)],fE),customElements.define("dxbl-list-box-columns-info",class extends he{get data(){return this.getAttribute("data")}get componentClassName(){return this.getAttribute("component-class-name")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}constructor(){super()}connectedCallback(){var e;super.connectedCallback(),this.component=this.closest(`.${this.componentClassName}`),null===(e=this.component)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),n=[];for(let e=0;e<t.length;e++){const i=new uE(t[e].UID);n.push(i)}return n}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,n){var i;if("data"===e)null===(i=this.component)||void 0===i||i.notifyColumnsChanged(this.parseColumns(n))}});class yE{}vE=yE,yE.TagClass=pe.Prefix+"-tag",yE.TagTemplateClass=vE.TagClass+"-tmpl",yE.TagCloseButtonClass=vE.TagClass+"-btn-close";customElements.define("dxbl-tag-box",class extends _B{constructor(){super()}connectedCallback(){super.connectedCallback()}isFocusableElementInMainElementTemplate(e){return!(!hn(e,`.${yE.TagTemplateClass}`)||!Qn(e))||super.isFocusableElementInMainElementTemplate(e)}disconnectedCallback(){super.disconnectedCallback()}get isSearchActive(){return this.searchMode!==KB.None}processPointerDown(e){var t;const n=H.containsInComposedPath(e,this.isTagCloseButtonElement),i=H.containsInComposedPath(e,El.isClearButtonElement),s=H.containsInComposedPath(e,El.isEditorButtonElement),r=e.target===this.fieldElement,o=!n&&!this.isFocusableElementInMainElementTemplate(e.target);return(r||o)&&this.toggleDropDownVisibility(),Dn(this),s&&this.focused&&this.raiseFieldChange(),(i||s||n)&&e.preventDefault(),this.focused||!s||this.useAdaptiveLayout||null===(t=this.editBoxElement)||void 0===t||t.focus(),!0}applyTextPropertyCore(){super.applyTextPropertyCore(),this.fieldElementValue&&(this.selectAll(),this.raiseFieldText()),this.setInputSizeAttribute()}onFieldReady(e,t){super.onFieldReady(e,t),t&&this.setInputSizeAttribute()}updatePlaceholder(){super.updatePlaceholder(),this.setInputSizeAttribute()}onTextInput(e){super.onTextInput(e),this.setInputSizeAttribute()}tryProcessKeyDown(e){return!!super.tryProcessKeyDown(e)||Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Backspace&&(!this.fieldElementValue&&(this.dispatchKeyDownEvent(e),!0))}setInputSizeAttribute(){this.inputElement&&this.inputElement.setAttribute("size",this.getInputSize().toString())}getInputSize(){return this.fieldElementValue?this.fieldElementValue.length:this.placeholder?this.placeholder.length:1}isTagTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(yE.TagTemplateClass))}isTagCloseButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(yE.TagCloseButtonClass))}});class BE extends CustomEvent{constructor(e,t){super(BE.eventName,{detail:new EE(e,t),bubbles:!0,composed:!0,cancelable:!0})}}BE.eventName=el+".incrementValue";class EE{constructor(e,t){this.Increment=e,this.PreviousValue=t}}Ct.register(BE.eventName,(e=>e.detail)),function(e){e.allowMouseWheel="allow-mouse-wheel",e.needExponentialView="need-exponential-view",e.decimalSeparator="decimal-separator"}(wE||(wE={}));const IE=e=>e;class SE{}bE=SE,SE.Prefix=pe.Prefix+"-spin",SE.BtnsContainer=bE.Prefix+"-btns",SE.IncBtn=bE.Prefix+"-btn-inc",SE.DecBtn=bE.Prefix+"-btn-dec";class xE extends Wl{constructor(){super(...arguments),this.regex=/^-?(\d)*$/,this.pointerDownTimer={id:-1,button:null},this.buttonObserver=new MutationObserver(this.buttonRemovedHandler.bind(this)),this.boundButtonOnPointerUpHandler=this.onButtonPointerUp.bind(this),this.allowMouseWheel=!1,this.needExponentialView=!1}get pointerDownTimerId(){return this.pointerDownTimer.id}get shouldProcessWheel(){return this.allowMouseWheel}disconnectedCallback(){this.buttonObserver.disconnect(),this.stopPointerLongTap(),super.disconnectedCallback()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.buttonObserver.observe(this,{childList:!0})}onTextInput(e){if(this.isMaskDefined)return;if(!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return;let t=this.fieldElementValue.trim();this.decimalSeparator&&(t=t.replace(/[.|,]/g,this.decimalSeparator)),this.regex.test(t)||(t=t.replace(/[^0-9]/g,"")),t!==this.fieldElementValue&&(this.fieldElementValue=t),super.onTextInput(e)}processKeyDown(e){const t=this.getFieldElement();return!!H.containsInComposedPath(e,(e=>e===t))&&(this.isNavigationKey(e)?(H.markHandled(e),this.incrementValue(e.keyCode===Ie.KeyCode.Up),!0):!!super.processKeyDown(e))}processWheel(e){this.incrementValue(e.deltaY<0)}processPointerDown(e){const t=this.getButton(e);if(t&&this.inputElement){e.preventDefault(),this.useAdaptiveLayout||T.DomUtils.setFocus(this.inputElement);const n=T.DomUtils.hasClassName(t,SE.IncBtn);this.incrementValue(n),this.pointerDownTimer={id:window.setTimeout(this.startPointerLongTap.bind(this),1e3,n),button:t},t.addEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.addEventListener("pointerout",this.boundButtonOnPointerUpHandler)}return super.processPointerDown(e)}getButton(e){const t=e.composedPath();for(const e in t){const n=t[e];if(n&&this.hasSpinBtnClass(n))return n}return null}hasSpinBtnClass(e){return T.DomUtils.hasClassName(e,SE.IncBtn)||T.DomUtils.hasClassName(e,SE.DecBtn)}startPointerLongTap(e,t){this.pointerDownTimer={id:window.setInterval(this.incrementValue.bind(this),50,e),button:t}}stopPointerLongTap(){-1!==this.pointerDownTimer.id&&(clearTimeout(this.pointerDownTimer.id),this.pointerDownTimer={id:-1,button:null},this.bindValueMode===wl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue())}onButtonPointerUp(e){let t=e.target;this.hasSpinBtnClass(t)||(t=T.DomUtils.getParentByTagName(t,"button")),this.stopPointerLongTap(),t.removeEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.removeEventListener("pointerout",this.boundButtonOnPointerUpHandler)}buttonRemovedHandler(e,t){if(-1===this.pointerDownTimer.id)return;const n=e.some((e=>Array.from(e.removedNodes).some((e=>{var t,n;return T.DomUtils.isElementNode(e)&&e.classList.contains(SE.BtnsContainer)&&((null===(t=this.pointerDownTimer.button)||void 0===t?void 0:t.isEqualNode(T.DomUtils.getChildNodesByClassName(e,SE.IncBtn)[0]))||(null===(n=this.pointerDownTimer.button)||void 0===n?void 0:n.isEqualNode(T.DomUtils.getChildNodesByClassName(e,SE.DecBtn)[0])))}))));n&&this.stopPointerLongTap()}incrementValue(e){this.dispatchEvent(new BE(e,this.fieldElementValue))}isNavigationKey(e){return e.keyCode===Ie.KeyCode.Up||e.keyCode===Ie.KeyCode.Down}updated(e){super.updated(e),(e.has(IE("decimalSeparator"))||e.has(IE("needExponentialView")))&&this.applyRegex()}applyRegex(){this.decimalSeparator&&(this.regex=this.needExponentialView?/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?([eE]?[+-]?(\d)*)?$/:/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?$/)}shouldProcessKeyUp(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.isMaskDefined||this.bindValueMode===wl.OnDelayedInput}return super.shouldProcessKeyUp(e)}}var DE,FE,TE,HE,UE;C([xs({type:Boolean,attribute:wE.allowMouseWheel})],xE.prototype,"allowMouseWheel",void 0),C([xs({type:Boolean,attribute:wE.needExponentialView})],xE.prototype,"needExponentialView",void 0),C([xs({type:String,attribute:wE.decimalSeparator})],xE.prototype,"decimalSeparator",void 0),customElements.define(el,xE);class QE{}DE=QE,QE.DefaultCssClass=pe.Prefix+"-color-palette",QE.SelectedTileCssClass=DE.DefaultCssClass+"-selected-tile",QE.NoColorContainerCssClass=DE.DefaultCssClass+"-no-color-container",QE.ColorValueAttribute="color-value",function(e){e[e.Undefined=0]="Undefined",e[e.ColorTile=1]="ColorTile",e[e.NoColorTile=2]="NoColorTile"}(FE||(FE={})),function(e){e[e.First=0]="First",e[e.LastSelected=1]="LastSelected",e[e.Last=2]="Last"}(TE||(TE={}));class PE extends On{constructor(e,t,n){super(e,n),this.rootStrategy=t}getItemStrategy(e){return super.getItemStrategy(e)}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}getShortcutContext(){return{ElementType:this.getElementType(),Value:this.getElementValue()}}selectItem(e){this.resetFocusableState(),super.selectItem(e)}resetFocusableState(){const e=this.findLastSelectedStrategy().selectedItemElement;e&&bn.removeTabIndex(e)}getElementType(){return FE.Undefined}getElementValue(){return null}move(e,t,n=!0){const i=this.selectedItemIndex+(e?1:-1);if(!this.isIndexWithinBoundaries(i))return!1;if(n){const n=this.getItemStrategy(i);if(!n||!this.canMove(n,e,t))return!1;this.setSelectedItemIndex(n,e,t)}return e?this.moveToNextItem():this.moveToPrevItem(),!0}canMove(e,t,n){return!0}}class NE extends PE{constructor(e,t,n){super(e,t,n)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:case Ie.KeyCode.Right:return!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}setSelectedItemIndex(e,t,n){}getElementType(){return FE.NoColorTile}}class RE extends PE{constructor(e,t,n){super(e,t,n)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return this.move(!1,!1,!1);case Ie.KeyCode.Right:return this.move(!0,!1,!1);case Ie.KeyCode.Home:return this.moveToFirstItem(),!0;case Ie.KeyCode.End:return this.moveToLastItem(),!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.rootStrategy)||void 0===e||e.setLastColumnIndex(this.selectedItemIndex)}setRowSelectedItemIndex(e){var t,n;switch(e){case TE.First:this.selectedItemIndex=0;break;case TE.LastSelected:this.selectedItemIndex=null!==(n=null===(t=this.rootStrategy)||void 0===t?void 0:t.getLastColumnIndex())&&void 0!==n?n:0;break;case TE.Last:this.selectedItemIndex=this.itemCount-1}}findAndSetRowSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItem(e);if(t&&t.classList.contains(QE.SelectedTileCssClass))return this.selectedItemIndex=e,!0}return!1}queryItems(){return this.queryItemsBySelector("td > div")}getElementType(){return FE.ColorTile}getElementValue(){return this.selectedItemElement.getAttribute(QE.ColorValueAttribute)}setSelectedItemIndex(e,t,n){}}class LE{static isGroupStrategy(e){return e instanceof ME}static isRowStrategy(e){return e instanceof RE}static isButtonStrategy(e){return e instanceof NE}}class ME extends PE{constructor(e,t,n){super(e,t,n)}queryItems(){return this.queryItemsBySelector("tbody > tr")}createItemStrategy(e){if(e.matches("tr"))return new RE(this.navigator,this.rootStrategy,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return this.move(!1,!1);case Ie.KeyCode.Up:return this.move(!1,!0);case Ie.KeyCode.Right:return this.move(!0,!1);case Ie.KeyCode.Down:return this.move(!0,!0)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setGroupSelectedItemIndex(e,t){this.selectedItemIndex=t===TE.First?0:this.itemCount-1;const n=this.getItemStrategy(this.selectedItemIndex);LE.isRowStrategy(n)&&n.setRowSelectedItemIndex(e)}findAndSetGroupSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(LE.isRowStrategy(t)&&t.findAndSetRowSelectedTile())return void(this.selectedItemIndex=e)}}setSelectedItemIndex(e,t,n){LE.isRowStrategy(e)&&e.setRowSelectedItemIndex(n?TE.LastSelected:t?TE.First:TE.Last)}}class kE extends PE{constructor(e,t){super(e,null,t),this.lastColumnIndex=0}queryItems(){return new Array(...this.queryItemsBySelector("& > table"),...this.queryItemsBySelector(`& > div.${QE.NoColorContainerCssClass}`))}createItemStrategy(e){if(e.matches("table"))return new ME(this.navigator,this,e);if(e.matches(`div.${QE.NoColorContainerCssClass}`))return new NE(this.navigator,this,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Left:return this.move(!1,!1);case Ie.KeyCode.Up:return this.move(!1,!0);case Ie.KeyCode.Right:return this.move(!0,!1);case Ie.KeyCode.Down:return this.move(!0,!0);case Ie.KeyCode.Tab:return this.handleTab(e)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setLastColumnIndex(e){this.lastColumnIndex=e}getLastColumnIndex(){return this.lastColumnIndex}setSelectedItemIndex(e,t,n){LE.isGroupStrategy(e)&&(t?e.setGroupSelectedItemIndex(n?TE.LastSelected:TE.First,TE.First):e.setGroupSelectedItemIndex(n?TE.LastSelected:TE.Last,TE.Last))}canMove(e,t,n){return!t||n||!LE.isButtonStrategy(e)}handleTab(e){const t=this.selectedItemIndex+(e.shiftKey?-1:1);if(this.isIndexWithinBoundaries(t)){const e=this.getItemStrategy(t);return LE.isGroupStrategy(e)&&e.findAndSetGroupSelectedTile(),this.selectItem(t),!0}return e.shiftKey?(this.leaveBackward(),!0):super.handleKeyDown(e)}}customElements.define("dxbl-color-palette",class extends Ja{constructor(){super()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}disconnectedCallback(){delete this.keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Ln),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new kE(this.getKeyboardNavigator(),this))}getKeyboardNavigator(){return this.keyboardNavigator}}),function(e){e[e.TopStart=1]="TopStart",e[e.Top=2]="Top",e[e.TopEnd=4]="TopEnd",e[e.RightStart=8]="RightStart",e[e.Right=16]="Right",e[e.RightEnd=32]="RightEnd",e[e.BottomStart=64]="BottomStart",e[e.Bottom=128]="Bottom",e[e.BottomEnd=256]="BottomEnd",e[e.LeftStart=512]="LeftStart",e[e.Left=1024]="Left",e[e.LeftEnd=2048]="LeftEnd"}(UE||(UE={}));class KE extends to{constructor(e,t,n,i,s,r){super(t,n,i,s,r),this.flyoutPosition=e}}let OE=HE=class extends go{get actualDistance(){var e;return null!==(e=this.flyoutDistance)&&void 0!==e?e:2}get actualOffset(){var e;return null!==(e=this.flyoutOffset)&&void 0!==e?e:0}get branchType(){return ui.DropDown}constructor(){super(),this.slotChangedHandler=this.handleSlotChange.bind(this),this.dialog=null,this.flyoutDistance=null,this.flyoutOffset=null,this.calcStartAlignment=()=>0,this.calcEndAlignment=(e,t)=>t-e,this.calcAlignment=(e,t)=>t/2-e/2,this.placement=Yr.Custom,this.fitToRestriction=!0,this.flyoutPosition=0}get child(){return this.root}processCustomPlacement(e,t){return this.calcCustomPlacements(e,t)}calcCustomPlacements(e,t){const n=[];if(!this.dialog||!this.dialog.arrow)return n;const i=this.getBounds(t),s=this.getBounds(e),r=this.dialog.arrow.arrowSize;return this.flyoutPosition&UE.Bottom&&n.push(this.calcBottomPlacement(i,r,this.calcAlignment(s.width,i.width),UE.Bottom)),this.flyoutPosition&UE.BottomStart&&n.push(this.calcBottomPlacement(i,r,this.calcStartAlignment(),UE.BottomStart)),this.flyoutPosition&UE.BottomEnd&&n.push(this.calcBottomPlacement(i,r,this.calcEndAlignment(s.width,i.width),UE.BottomEnd)),this.flyoutPosition&UE.Top&&n.push(this.calcTopPlacement(s,r,this.calcAlignment(s.width,i.width),UE.Top)),this.flyoutPosition&UE.TopStart&&n.push(this.calcTopPlacement(s,r,this.calcStartAlignment(),UE.TopStart)),this.flyoutPosition&UE.TopEnd&&n.push(this.calcTopPlacement(s,r,this.calcEndAlignment(s.width,i.width),UE.TopEnd)),this.flyoutPosition&UE.Left&&n.push(this.calcLeftPlacement(s,r,this.calcAlignment(s.height,i.height),UE.Left)),this.flyoutPosition&UE.LeftStart&&n.push(this.calcLeftPlacement(s,r,this.calcStartAlignment(),UE.LeftStart)),this.flyoutPosition&UE.LeftEnd&&n.push(this.calcLeftPlacement(s,r,this.calcEndAlignment(s.height,i.height),UE.LeftEnd)),this.flyoutPosition&UE.Right&&n.push(this.calcRightPlacement(i,r,this.calcAlignment(s.height,i.height),UE.Right)),this.flyoutPosition&UE.RightStart&&n.push(this.calcRightPlacement(i,r,this.calcStartAlignment(),UE.RightStart)),this.flyoutPosition&UE.RightEnd&&n.push(this.calcRightPlacement(i,r,this.calcEndAlignment(s.height,i.height),UE.RightEnd)),n}calcLeftPlacement(e,t,n,i){const s=new et(-e.width-t.width-this.actualDistance,n+this.actualOffset);return new KE(i,s,jr.Horizontal,!0,Xr.Near,Jr.bottom)}calcTopPlacement(e,t,n,i){const s=new et(n+this.actualOffset,-e.height-t.height-this.actualDistance);return new KE(i,s,jr.Vertical,!0,Xr.Near,Jr.top)}calcRightPlacement(e,t,n,i){const s=new et(e.width+t.width+this.actualDistance,n+this.actualOffset);return new KE(i,s,jr.Horizontal,!1,Xr.Far,Jr.bottom)}calcBottomPlacement(e,t,n,i){const s=new et(n+this.actualOffset,e.height+t.height+this.actualDistance);return new KE(i,s,jr.Vertical,!1,Xr.Near,Jr.bottom)}processBestTranslationResults(e,t,n,i,s,r,o,a,l){if(super.processBestTranslationResults(e,t,n,i,s,r,o,a,l),!this.dialog||!this.dialog.arrow)return;const A=this.calcArrowAlignment(r,o,a);this.dialog.arrowAlignment=A;const d=this.dialog.arrow;d.position=this.getArrowPosition(d,t,n,i,a,null==l?void 0:l.flyoutPosition),d.alignment=A}getArrowPosition(e,t,n,i,s,r){const o=s===jr.Vertical,a=o?e.arrowSize.width:e.arrowSize.height,l=it.rectToRange(n,o),A=it.rectToRange(t,o),d=it.rectToRange(i,o);let c=A.start,h=A.end;this.fitToRestriction&&(A.start<=d.start?(c=d.start,h=c+A.size):A.end>=d.end&&(c=d.end-A.size,h=c+A.size));const[u,p]=[Math.max(c,l.start),Math.min(h,l.end)];let m;m=r&(UE.RightStart|UE.RightEnd|UE.LeftStart|UE.LeftEnd)?l.start:l.start+l.size/2;const g=this.alignWithinBoundaries(m-a/2,u,p),C=this.calculateArrowOffsetFromEdge(l,a,A);return o?new ur(Math.min(Math.max(g-c,C),t.width-C-a),0):new ur(0,Math.min(Math.max(g-h,C-t.height),-C-a))}calcArrowAlignment(e,t,n){return n===jr.Vertical?t===Jr.bottom?fa.bottom:fa.top:e===Xr.Near?fa.start:fa.end}alignWithinBoundaries(e,t,n){return t>=n?(t+n)/2:Math.min(Math.max(e,t),n)}calculateArrowOffsetFromEdge(e,t,n){const i=Math.min(e.size-t,e.size/2-t/2);return Math.max(HE.DefaultArrowOffsetFromEdge,Math.min(i,.2*n.size))}renderTemplate(){return ns`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${ui.Flyout}">
                <dxbl-flyout-root
                    id="root"
                    style="${this.rootCssStyle}">
                    ${this.renderDefaultSlot()}
                    ${this.renderBridgeSlot()}
                </dxbl-flyout-root>
            </dxbl-branch>
        `}renderDefaultSlot(){return ns`<slot @slotchange="${this.slotChangedHandler}"></slot>`}handleSlotChange(e){const t=e.target.assignedNodes();this.dialog=t.find((e=>e instanceof ya)),this.dialog&&(this.dialog.animationEnabled=this.animationEnabled),this.reposition()}updated(e){super.updated(e),this.dialog&&e.has("animationEnabled")&&(this.dialog.animationEnabled=this.animationEnabled)}createKeyboardNavigationStrategy(){return new Da(this.keyboardNavigator,this)}};OE.DefaultArrowOffsetFromEdge=8,C([Fs("#root",!0)],OE.prototype,"root",void 0),C([xs({type:Number,attribute:"flyout-position"})],OE.prototype,"flyoutPosition",void 0),C([xs({type:Number,attribute:"flyout-distance"})],OE.prototype,"flyoutDistance",void 0),C([xs({type:Number,attribute:"flyout-offset"})],OE.prototype,"flyoutOffset",void 0),OE=HE=C([Es("dxbl-flyout")],OE);let _E=class extends ys{constructor(){super(...arguments),this.dropOpposite=!1,this.dropDirection=Xr.Near,this.dropAlignment=Jr.bottom}static get styles(){return Ei`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                align-items: stretch;
                justify-items: stretch;
                min-height: 0;
            }
        }`}render(){return ns`
            <slot></slot>
            <slot name="arrow"/>
        `}};function VE(){return new Promise(((e,t)=>{requestAnimationFrame((()=>{setTimeout(e)}))}))}var zE,WE,$E;C([xs({type:Object,attribute:"drop-opposite"})],_E.prototype,"dropOpposite",void 0),C([xs({type:String,attribute:"drop-direction"})],_E.prototype,"dropDirection",void 0),C([xs({type:String,attribute:"drop-alignment"})],_E.prototype,"dropAlignment",void 0),_E=C([Es("dxbl-flyout-root")],_E),function(e){e.Center="Center",e.Left="Left",e.Right="Right"}(WE||(WE={})),function(e){e.Top="Top",e.Center="Center",e.Bottom="Bottom"}($E||($E={}));let GE=class extends Mo{constructor(){super(...arguments),this.allowResize=!1}get header(){return this.querySelector(".dxbl-window-header")}render(){return this.allowResize?ns`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:ns`<slot></slot>`}};C([xs({type:Boolean,attribute:"allow-resize",reflect:!1})],GE.prototype,"allowResize",void 0),GE=C([Es("dxbl-window-dialog")],GE);let qE=class extends CB{constructor(){super()}};qE=C([Es(ir)],qE);let YE=zE=class extends mB{constructor(){super(),this.actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.positionYDirty=!1,this.positionXDirty=!1,this.showAnchorElement=null,this._showOptionsToApply=null,this.childContentObserver=null,this.isAdjustDialogEnabled=!0,this.horizontalAlignment=WE.Center,this.verticalAlignment=$E.Center,this.closeOnEscape=!1,this.placement=Yr.Custom,this.closeMode=Gr.None,ha(this)}get branchType(){return ui.Window}get canAdjustZIndexOnShow(){return!1}get positionY(){return this.offset.y}set positionY(e){this.positionYDirty=!0,this.offset=new et(this.positionX||0,e||0)}get positionX(){return this.offset.x}set positionX(e){this.positionXDirty=!0,this.offset=new et(e||0,this.positionY||0)}get showOptionsToApply(){return this._showOptionsToApply}set showOptionsToApply(e){this._showOptionsToApply=e,this.positionXDirty=!1,this.positionYDirty=!1}move(e){return this.showOptionsToApply=e,this.forceReposition(),VE()}showAt(e){return this.showOptionsToApply=e,this.observeChildContent(this),super.show(),VE()}show(){this.showAt(this.showOptionsToApply).catch((e=>{}))}observeChildContent(e){var t;null===(t=this.childContentObserver)||void 0===t||t.disconnect(),this.contentLoaded()?this.enableVisibility():(this.childContentObserver=new MutationObserver(this.handleChildContentChanged.bind(this)),this.childContentObserver.observe(e,{childList:!0}))}handleChildContentChanged(e){var t;const n=this.querySelector(sr);n?n.childElementCount>0?(this.enableVisibility(),null===(t=this.childContentObserver)||void 0===t||t.disconnect()):this.observeChildContent(n):this.observeChildContent(this)}contentLoaded(){const e=this.querySelector(sr);return null!==e&&e.childElementCount>0}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.childContentObserver)||void 0===e||e.disconnect()}static getPlacementTargetClientRect(e){if(null!==e){if(null!==e.targetReference&&e.targetReference instanceof HTMLElement)return e.targetReference.getBoundingClientRect();if(null!==e.targetSelector){const t=document.querySelector(e.targetSelector);if(null!==t)return t.getBoundingClientRect()}}return{x:0,y:0,width:window.innerWidth,height:window.innerHeight}}static getShowAtBox(e){return null===e?null:null!==e.targetReference&&e.targetReference instanceof HTMLElement?zE.getElementTopLeftPoint(e.targetReference):null!==e.targetSelector?zE.getElementTopLeftPoint(document.querySelector(e.targetSelector)):e.targetPoint}static getElementTopLeftPoint(e){if(null===e)return null;const t=e.getBoundingClientRect();return new et(t.left,t.top)}canProcessEscapeKeyDown(){return this.closeOnEscape}activatePopupContent(){this.dispatchEvent(new uo(this.initialVisibility))}renderTemplate(){return ns`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-window-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-window-root>
            </dxbl-branch>
        `}raiseResizeCompleted(e,t){this.sizeDirty=!0,super.raiseResizeCompleted(e,t)}processCustomPlacement(e,t){if(this.positionXDirty||this.positionYDirty||this.isInDragOperation||this.sizeDirty)return null;const n=this.showOptionsToApply;if(n){const e=n.targetPoint||this.calcShowPoint(n);return[new to(e,jr.None,!1,Xr.Near,Jr.bottom)]}return null}calcShowPoint(e){const t=zE.getPlacementTargetClientRect(e),n=this.getBoundingClientRect(),i=document.body.getBoundingClientRect(),s=null!=window.visualViewport?{x:0,y:0,width:window.visualViewport.width,height:window.visualViewport.height}:i,r=this.calcShowXPoint(n,t),o=this.calcShowYPoint(n,t),a=s.y+s.height-n.height;return new et(Math.max(0,r+window.scrollX-Math.max(0,r-(s.x+s.width-n.width))),Math.max(0,o+window.scrollY-Math.max(0,o-a)))}calcShowXPoint(e,t){return Math.floor((()=>{switch(this.horizontalAlignment){case WE.Left:return t.x;case WE.Right:return t.x+t.width-e.width;case WE.Center:return t.x+t.width/2-e.width/2}throw new Error("calcShowXPoint not supported for horizontalAlignment:"+this.horizontalAlignment)})())}calcShowYPoint(e,t){return Math.floor((()=>{switch(this.verticalAlignment){case $E.Top:return t.y;case $E.Bottom:return t.y+t.height-e.height;case $E.Center:return t.y+t.height/2-e.height/2}throw new Error("calcShowYPoint not supported for horizontalAlignment:"+this.verticalAlignment)})())}updated(e){super.update(e),e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange()}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new lo(new ao(this.zIndex)))}))}createKeyboardNavigationStrategy(){return new xa(this.keyboardNavigator,this,!0)}};C([xs({type:WE,attribute:"horizontal-alignment",reflect:!1})],YE.prototype,"horizontalAlignment",void 0),C([xs({type:WE,attribute:"vertical-alignment",reflect:!1})],YE.prototype,"verticalAlignment",void 0),C([xs({type:Number,attribute:"position-y",reflect:!1})],YE.prototype,"positionY",null),C([xs({type:Number,attribute:"position-x",reflect:!1})],YE.prototype,"positionX",null),C([xs({type:Boolean,attribute:"close-on-escape"})],YE.prototype,"closeOnEscape",void 0),YE=zE=C([Es(nr)],YE);const XE="dxbl-upload";class JE{constructor(e){this.progress=e}}class jE{constructor(e){this.requestOptions=e}}class ZE{constructor(e){this.lastErrorCode=e}}class eI extends CustomEvent{constructor(e){super(eI.eventName,{detail:new JE(e),bubbles:!0,composed:!0})}}eI.eventName=XE+".uploadprogress",Ct.register(eI.eventName,(e=>e.detail));class tI extends CustomEvent{constructor(e){super(tI.eventName,{detail:new jE(e),bubbles:!0,composed:!0})}}tI.eventName=XE+".customizeformdata",Ct.register(tI.eventName,(e=>e.detail));class nI extends CustomEvent{constructor(e){super(nI.eventName,{detail:new ZE(e),bubbles:!0,composed:!0})}}nI.eventName=XE+".erroroccurred",Ct.register(nI.eventName,(e=>e.detail));var iI,sI,rI,oI,aI;!function(e){e.acceptedFileTypes="accepted-file-types",e.allowedFileExtensions="allowed-file-extensions",e.externalSelectButtonCssSelector="external-select-button-css-selector",e.showEmbeddedSelectButton="show-embedded-select-button",e.chunkSize="chunk-size",e.maxFileSize="max-file-size",e.minFileSize="min-file-size",e.maxFileCount="max-file-count",e.multiple="multiple",e.uploadMode="upload-mode",e.uploadTechnology="upload-technology",e.dragOverClassName="drag-over-class-name",e.dropZoneCssSelector="drop-zone-css-selector",e.customizeFormData="customize-form-data"}(iI||(iI={})),function(e){e[e.Instant=0]="Instant",e[e.OnButtonClick=1]="OnButtonClick"}(sI||(sI={})),function(e){e[e.Http=0]="Http",e[e.JsInterop=1]="JsInterop"}(rI||(rI={})),function(e){e[e.WaitingStart=0]="WaitingStart",e[e.PendingUpload=1]="PendingUpload",e[e.Uploading=2]="Uploading",e[e.Paused=3]="Paused",e[e.Complete=4]="Complete",e[e.Canceled=5]="Canceled",e[e.Error=6]="Error",e[e.Removing=7]="Removing"}(oI||(oI={})),function(e){e[e.MaxFileCountExceeded=0]="MaxFileCountExceeded",e[e.DragAndDropMultipleFiles=1]="DragAndDropMultipleFiles"}(aI||(aI={}));class lI{constructor(){this.guids=[],this.actions=[],this.reloadedFileGuids=[]}}class AI{constructor(e){this.FileName=e.fileInfo.name,this.FileSize=e.fileInfo.size,this.FileType=e.fileInfo.type,this.LastModified=e.fileInfo.lastModified,this.FileGuid=e.fileInfo.guid,this.Index=e.chunkIndex,this.TotalCount=e.totalChunkCount}}class dI{constructor(e,t,n){this._value=e,this._status=n.uploadMode===sI.Instant?oI.PendingUpload:oI.WaitingStart,this._chunkIndex=0,this._loadedBytes=0,this._totalChunkCount=0,this._isFileExtensionValid=dI.validateFileExtension(e,n),this._isMinSizeValid=dI.validateMinFileSize(e,n),this._isMaxSizeValid=dI.validateMaxFileSize(e,n),this._fileInfo={name:e.name,size:e.size,type:e.type,lastModified:1e4*e.lastModified+621355968e9,guid:t},this._request=null,this._onLoadStart=null,this._onProgress=null,this._onAbort=null,this._onPause=null,this._onError=null,this._onLoadEnd=null,this.isValid()||(this._status=oI.Error)}get value(){return this._value}get status(){return this._status}set status(e){this._status=e}get chunkIndex(){return this._chunkIndex}set chunkIndex(e){this._chunkIndex=e}get loadedBytes(){return this._loadedBytes}set loadedBytes(e){this._loadedBytes=e}get totalChunkCount(){return this._totalChunkCount}set totalChunkCount(e){this._totalChunkCount=e}get isFileExtensionValid(){return this._isFileExtensionValid}get isMinSizeValid(){return this._isMinSizeValid}get isMaxSizeValid(){return this._isMaxSizeValid}get fileInfo(){return this._fileInfo}get request(){return this._request}set request(e){this._request=e}get onLoadStart(){return this._onLoadStart}set onLoadStart(e){this._onLoadStart=e}get onProgress(){return this._onProgress}set onProgress(e){this._onProgress=e}get onAbort(){return this._onAbort}set onAbort(e){this._onAbort=e}get onError(){return this._onError}set onError(e){this._onError=e}get onLoadEnd(){return this._onLoadEnd}set onLoadEnd(e){this._onLoadEnd=e}isValid(){return this.isFileExtensionValid&&this.isMaxSizeValid&&this.isMinSizeValid}isUploadComplete(){return this.loadedBytes>=this.fileInfo.size}loadStart(){this.status!==oI.Uploading&&(this.status=oI.Uploading,this.onLoadStart&&this.onLoadStart.call(this))}progress(){this.onProgress&&this.onProgress.call(this)}loadEnd(){this.isUploadComplete()&&(this.status=oI.Complete,this.onLoadEnd&&this.onLoadEnd.call(this))}abort(e=!0){this.status!==oI.Canceled&&(this.status=oI.Canceled,this.request&&this.request.abort(),e&&this.onAbort&&this.onAbort.call(this),this.chunkIndex=0,this.loadedBytes=0)}error(e){this.status=oI.Error,this.onError&&this.onError.call(this,e)}static validateFileExtension(e,t){const n=t.allowedFileExtensions,i=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(0===n.length)return!0;for(let e=0;e<n.length;e++)if(i===n[e].toLowerCase())return!0;return!1}static validateMinFileSize(e,t){const n=t.minFileSize;return!(n>0)||e.size>=n}static validateMaxFileSize(e,t){const n=t.maxFileSize;return!(n>0)||e.size<=n}updateStatus(e,t){var n,i,s,r,o,a,l;switch(this.status=e,this.status){case oI.WaitingStart:case oI.PendingUpload:break;case oI.Uploading:null===(n=this.onLoadStart)||void 0===n||n.call(this);break;case oI.Paused:break;case oI.Complete:this.loadedBytes=this.value.size,null===(i=this.onLoadEnd)||void 0===i||i.call(this);break;case oI.Canceled:null===(s=this.onAbort)||void 0===s||s.call(this);break;case oI.Error:{const e=new EventTarget;e.status=null!==(r=null==t?void 0:t.status)&&void 0!==r?r:-1,e.statusText=null!==(o=null==t?void 0:t.statusText)&&void 0!==o?o:"Unexpected error",e.responseText=null!==(a=null==t?void 0:t.responseText)&&void 0!==a?a:"Unexpected error",null===(l=this.onError)||void 0===l||l.call(this,e);break}}}}class cI{constructor(e){this.control=e,this.requestMetadata=null}customizeFormData(e){return this.control.dispatchEvent(new tI(e)),Promise.resolve()}}class hI extends cI{constructor(e){super(e)}upload(e,t,n,i){if(!e)return Promise.reject();e.totalChunkCount||(e.chunkIndex=0,e.totalChunkCount=hI.calculateTotalChunkCount(e.fileInfo.size,t));const s=t.chunkSize*e.chunkIndex,r=e.value.slice(s,s+t.chunkSize);return this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:i},this.createFormData(t.name,r,e,n)}createFormData(e,t,n,i){var s,r;const o=new AI(n);return null===(s=this.requestMetadata)||void 0===s||s.formData.append(e,t),null===(r=this.requestMetadata)||void 0===r||r.formData.append("chunkMetadata",JSON.stringify(o)),this.control.customizeFormData||i||(i={}),i?this.onCustomizeChunkMetadataResponse(i):this.customizeFormData(o)}onCustomizeChunkMetadataResponse(e){return new Promise(((t,n)=>{if(null==this.requestMetadata)return void n();const{formData:i,request:s,file:r,loadEnd:o}=this.requestMetadata;if(r.status!==oI.Paused&&r.status!==oI.Canceled){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];i.append(t,n instanceof Object?JSON.stringify(n):n)}for(const e in s.requestData)Object.prototype.hasOwnProperty.call(s.requestData,e)&&i.append(e,s.requestData[e]);r.request=pI.sendRequest(i,{crossDomain:!1,url:s.uploadUrl,method:"POST",headers:s.requestHeaders,onAbort:()=>{r.abort(),n()},onProgress:()=>{},onError:e=>{e.target&&r.error(e.target),n()},onLoadStart:()=>{r.loadStart()},onLoad:e=>{if(e.target)if(200===e.target.status){const a=i.get(s.name);r.chunkIndex++,r.loadedBytes+=a.size,r.progress(),o(r).then(t,n).catch((()=>{n(),r.error(e.target)}))}else r.error(e.target),n()},onLoadEnd:null})}else n()}))}static calculateTotalChunkCount(e,t){let n=Math.trunc(e/t.chunkSize);return e%t.chunkSize>0&&n++,n}}class uI extends cI{constructor(e){super(e)}upload(e,t,n,i){return e?(this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:i},this.createFormData(t.name,e,n)):Promise.reject()}createFormData(e,t,n){var i;return null===(i=this.requestMetadata)||void 0===i||i.formData.append(e,t.value),this.onCustomizeChunkMetadataResponse(n||{})}onCustomizeChunkMetadataResponse(e){return new Promise(((e,t)=>{if(null==this.requestMetadata)return void t();const{formData:n,request:i,file:s,loadEnd:r}=this.requestMetadata;for(const e in i.requestData)Object.prototype.hasOwnProperty.call(i.requestData,e)&&n.append(e,i.requestData[e]);let o=!1;s.request=pI.sendRequest(n,{url:i.uploadUrl,method:"POST",headers:i.requestHeaders,crossDomain:!1,onProgress:e=>{o=!0,s.loadedBytes=e.loaded>s.fileInfo.size?s.fileInfo.size:e.loaded,s.progress()},onAbort:e=>{s.abort(),t()},onError:e=>{e.target&&s.error(e.target),t()},onLoadStart:e=>{s.loadStart()},onLoad:n=>{n.target&&(200===n.target.status?(o||(s.loadedBytes=s.fileInfo.size,s.progress()),r(s,n).then(e,t).catch((()=>{t(),s.error(n.target)}))):(s.error(n.target),t()))},onLoadEnd:null})}))}}class pI{static sendRequest(e,t){const n=new XMLHttpRequest;t.crossDomain=pI.isCrossDomain(t.url);const i=pI.getRequestHeaders(t);n.open(t.method,t.url,!0),t.onLoadStart&&(n.upload.onloadstart=t.onLoadStart),t.onLoad&&(n.onload=t.onLoad),t.onLoadEnd&&(n.upload.onloadend=t.onLoadEnd),t.onProgress&&(n.upload.onprogress=t.onProgress),t.onError&&(n.upload.onerror=t.onError),t.onAbort&&(n.upload.onabort=t.onAbort);for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&i[e]&&n.setRequestHeader(e,i[e]);return n.send(e),n}static getRequestHeaders(e){const t=e.headers||{};return t.Accept=t.Accept||pI.getAcceptHeader(),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t}static getAcceptHeader(){return"*/*"}static isCrossDomain(e){let t=!1;const n=document.createElement("a"),i=document.createElement("a");n.href=window.location.href;try{i.href=e,i.href=i.href,t=n.protocol+"//"+n.host!=i.protocol+"//"+i.host}catch(e){t=!0}return t}}class mI{constructor(e){this.control=e,this.state=new gI,this.indexMap=new Map,this.dispatchTimerId=-1,this.idleTimerId=-1}dispatch(e,t,n=null){const i=this.getFileIndex(t),s=new CI(i,e,t.loadedBytes,t.status);this.state.progressInfos.push(s),n&&this.state.errors.push(n),this.tryPerformDispatch()}forceDelayedDispatch(){-1!==this.dispatchTimerId&&clearTimeout(this.dispatchTimerId),this.performDispatch()}tryPerformDispatch(){if(-1===this.dispatchTimerId){let e=50;-1!==this.idleTimerId&&(clearTimeout(this.idleTimerId),this.idleTimerId=-1,e=200),this.dispatchTimerId=setTimeout((()=>this.performDispatch()),e)}}performDispatch(){this.dispatchTimerId=-1,this.control.dispatchEvent(new eI(this.state)),this.state=new gI,this.indexMap.clear(),this.idleTimerId=setTimeout((()=>{this.idleTimerId=-1}),1e3)}cancelSendingOfLastEvent(){clearTimeout(this.dispatchTimerId),this.dispatchTimerId=-1}getFileIndex(e){let t=this.indexMap.get(e.fileInfo.guid);return void 0!==t||(t=this.state.fileGuids.length,this.state.fileGuids.push(e.fileInfo.guid),this.indexMap.set(e.fileInfo.guid,t)),t}}class gI{constructor(){this.fileGuids=[],this.progressInfos=[],this.errors=[]}}class CI{constructor(e,t,n,i){this.index=e,this.type=t,this.loaded=n,this.status=i}}var fI,vI;!function(e){e[e.Started=0]="Started",e[e.Progress=1]="Progress",e[e.Uploaded=2]="Uploaded",e[e.Aborted=3]="Aborted",e[e.Error=4]="Error"}(fI||(fI={}));class bI{}bI.MainElement=pe.Prefix+"-upload",bI.SelectButton=bI.MainElement+"-select-btn",function(e){e.accept="accept",e.multiple="multiple"}(vI||(vI={}));class wI extends Ja{constructor(){super(),this.onInputChangeHandler=this.onFileInputChange.bind(this),this.onSelectButtonClickHandler=this.onSelectButtonClick.bind(this),this.onFilesDropHandler=this.onFilesDrop.bind(this),this.onFilesDragOverHandler=this.onFilesDragOver.bind(this),this.onFilesDragLeaveHandler=this.onFilesDragLeave.bind(this),this.acceptedFileTypes=null,this.allowedFileExtensions=[],this.externalSelectButtonCssSelector="",this.showEmbeddedSelectButton=!0,this.chunkSize=0,this.maxFileSize=0,this.minFileSize=0,this.maxFileCount=1e3,this.multiple=!1,this.uploadMode=sI.Instant,this.uploadTechnology=rI.Http,this.dragOverClassName="",this.dropZoneCssSelector="",this.customizeFormData=!1,this.files=new Map,this.progressDispatcher=new mI(this),this.recentlyAddedFilesStream=null}firstUpdated(e){super.firstUpdated(e),this.initEvents(),this.prepareInputElement()}initDotNetReference(e){this.dotnetHelper=e,this.dotnetHelper&&this.attachSelectButtonClickHandler()}updateFileStatus(e,t,n){var i,s;null===(s=null===(i=this.files.get(e))||void 0===i?void 0:i.updateStatus)||void 0===s||s.call(i,t,n)}getFileBytes(e){var t;return null===(t=this.files.get(e))||void 0===t?void 0:t.value}getFileInput(){return this.querySelector("input")}getSelectButton(e){return null!=e||(e=this.externalSelectButtonCssSelector),e?document.querySelector(e):this.querySelector(`.${bI.SelectButton}`)}getDropZoneContainer(){return this.dropZoneCssSelector?document.querySelector(this.dropZoneCssSelector):null}initEvents(){this.getFileInput().addEventListener("change",this.onInputChangeHandler),this.dotnetHelper&&this.attachSelectButtonClickHandler();const e=this.getDropZoneContainer();e&&(e.addEventListener("drop",this.onFilesDropHandler),e.addEventListener("dragover",this.onFilesDragOverHandler),e.addEventListener("dragleave",this.onFilesDragLeaveHandler))}attachSelectButtonClickHandler(){var e;null===(e=this.getSelectButton())||void 0===e||e.addEventListener("click",this.onSelectButtonClickHandler)}detachSelectButtonClickHandler(e){var t;null===(t=this.getSelectButton(e))||void 0===t||t.removeEventListener("click",this.onSelectButtonClickHandler)}prepareInputElement(){const e=this.getFileInput();this.multiple?e.setAttribute(vI.multiple,""):e.removeAttribute(vI.multiple),this.acceptedFileTypes&&e.setAttribute(vI.accept,this.acceptedFileTypes.join(","))}onFileInputChange(e){this.addFiles(this.createFileItems(this.getFileInput().files)),this.getFileInput().value=""}onSelectButtonClick(e){this.getFileInput().click()}onFilesDrop(e){e.preventDefault(),this.addFiles(this.createFileItems(this.getFileFromDataTransfer(e.dataTransfer))),this.onFilesDragLeave(e)}onFilesDragOver(e){this.dragOverClassName&&e.srcElement&&T.DomUtils.addClassName(e.srcElement,this.dragOverClassName),e.preventDefault()}onFilesDragLeave(e){this.dragOverClassName&&T.DomUtils.removeClassName(e.srcElement,this.dragOverClassName)}raiseErrorOccurred(e){this.dispatchEvent(new nI(e))}createFileItems(e){if(!e)return[];const t=[],n=this.getAllowedFileTypes();for(let i=0,s=e[i];s;i++,s=e[i]){const r=new dI(s,this.getUUID4(),this);r.isValid()&&n&&!this.isFileTypeAllowed(e[i],n)||t.push(r)}return t}isFileTypeAllowed(e,t){return t.some((function(t){if("."===t[0]){if(t=t.replace(".","\\."),e.name.match(new RegExp(t+"$","i")))return!0}else if(t=t.replace("*",""),e.type.match(new RegExp(t,"i")))return!0}))}addFiles(e){this.dotnetHelper&&0!==e.length&&(this.maxFileCount>0&&this.files.size+e.length>this.maxFileCount?this.raiseErrorOccurred(aI.MaxFileCountExceeded):(e.forEach((e=>this.files.set(e.fileInfo.guid,e))),this.registerFileInfos(e)))}registerFileInfos(e){var t;this.recentlyAddedFilesStream=(new TextEncoder).encode(JSON.stringify(this.getFileInfosCollection(e))),null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("RegisterAddedFiles",this.recentlyAddedFilesStream.length)}getRecentlyAddedFileInfosStream(){return this.recentlyAddedFilesStream}getFileFromDataTransfer(e){const t=[];if(e)if(e.items){if(!this.multiple&&this.files.size+e.items.length>1)return this.raiseErrorOccurred(aI.DragAndDropMultipleFiles),null;for(let n=0,i=e.items[n];i;n++,i=e.items[n])if("file"===i.kind){const e=i.getAsFile();e&&t.push(e)}}else for(let n=0,i=e.files[n];i;n++,i=e.files[n])t.push(i);return t}getFileInfosCollection(e){return e.map(this.createFileViewInfo)}createFileViewInfo(e){return{name:e.fileInfo.name,size:e.fileInfo.size,type:e.fileInfo.type,lastModified:e.fileInfo.lastModified,guid:e.fileInfo.guid,loadedBytes:e.loadedBytes,status:e.status,isFileExtensionValid:e.isFileExtensionValid,isMinSizeValid:e.isMinSizeValid,isMaxSizeValid:e.isMaxSizeValid}}getAllowedFileTypes(){return this.acceptedFileTypes&&this.acceptedFileTypes.length>0?this.acceptedFileTypes.map((e=>e.trim())):null}getUUID4(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[8]&=63,e[8]|=128,e[6]&=15,e[6]|=64;let t=0;return"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX".replace(/XX/g,(()=>e[t++].toString(16).padStart(2,"0")))}reloadFile(e,t){if(e.status===oI.Canceled&&t){const n=this.createFileItems([e.value])[0];n.status=oI.PendingUpload,n.fileInfo.guid=t,this.files=wI.replaceFileInFilesMap(this.files,e.fileInfo.guid,n)}}static replaceFileInFilesMap(e,t,n){const i=new Map;for(const s of e.values()){const e=s.fileInfo.guid===t?n:s;i.set(e.fileInfo.guid,e)}return i}attachEventsToFileItem(e){e.onLoadStart||(e.onLoadStart=()=>{this.fileUploadStarted(e)}),e.onProgress||(e.onProgress=()=>{this.fileProgress(e)}),e.onAbort||(e.onAbort=()=>{this.fileUploadAborted(e)}),e.onError||(e.onError=t=>{this.fileUploadError(e,t.status,t.statusText,t.responseText)}),e.onLoadEnd||(e.onLoadEnd=()=>{this.fileUploaded(e)})}fileUploadStarted(e){this.progressDispatcher.dispatch(fI.Started,e)}fileUploaded(e){this.progressDispatcher.dispatch(fI.Uploaded,e)}fileUploadAborted(e){this.progressDispatcher.dispatch(fI.Aborted,e)}fileProgress(e){e.status!==oI.WaitingStart&&e.status!==oI.PendingUpload&&e.status!==oI.Uploading||this.progressDispatcher.dispatch(fI.Progress,e)}fileUploadError(e,t,n,i){this.progressDispatcher.dispatch(fI.Error,e,{status:t,statusText:n,responseText:i})}processUploadedFilesOptions(e){this.updateFileStates(e),this.processUploadedFilesOptionsCore(e)}updateFileStates(e){var t;for(const n of e){const e=this.files.get(null!==(t=n.beforeReloadGuid)&&void 0!==t?t:n.fileGuid);e&&(e.status!==n.status&&this.changeStatus(e,n.status,n.fileGuid))}}createActionRequest(e){const t=new lI,n=new Map;return e.forEach((e=>{const i=e.file.fileInfo.guid;let s=n.get(i);void 0===s&&(s=t.guids.length,t.guids.push(i),n.set(i,s)),t.actions.push(e.action,s),e.action===oI.PendingUpload&&e.newReloadedFile&&t.reloadedFileGuids.push(e.newReloadedFile.fileInfo.guid)})),t}changeStatus(e,t,n){switch(t){case oI.PendingUpload:this.reloadFile(e,n);break;case oI.Paused:e.status=oI.Paused;break;case oI.Canceled:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1);break;case oI.Removing:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1),this.files.delete(e.fileInfo.guid);break;default:throw new Error("Status not supported.")}}update(e){super.update(e);const t=e.has("showEmbeddedSelectButton"),n=e.has("externalSelectButtonCssSelector");this.dotnetHelper&&(t||n)&&this.detachSelectButtonClickHandler(e.get("externalSelectButtonCssSelector"))}updated(e){(e.has("acceptedFileTypes")||e.has("multiple"))&&this.prepareInputElement();const t=e.has("showEmbeddedSelectButton")&&this.showEmbeddedSelectButton,n=e.has("externalSelectButtonCssSelector")&&this.externalSelectButtonCssSelector;this.dotnetHelper&&(t||n)&&this.attachSelectButtonClickHandler()}disconnectedCallback(){super.disconnectedCallback(),this.detachSelectButtonClickHandler()}showFileSelectorDialog(){var e;null===(e=this.getFileInput())||void 0===e||e.click()}}function yI(e,t){var n,i;null===(i=null===(n=EI(e))||void 0===n?void 0:n.initDotNetReference)||void 0===i||i.call(n,t)}function BI(e){var t;return(null===(t=EI(e))||void 0===t?void 0:t.getRecentlyAddedFileInfosStream())||null}function EI(e){return e.isConnected?e:null}C([xs({attribute:iI.acceptedFileTypes,type:Array})],wI.prototype,"acceptedFileTypes",void 0),C([xs({attribute:iI.allowedFileExtensions,type:Array})],wI.prototype,"allowedFileExtensions",void 0),C([xs({attribute:iI.externalSelectButtonCssSelector})],wI.prototype,"externalSelectButtonCssSelector",void 0),C([xs({attribute:iI.showEmbeddedSelectButton,type:Boolean})],wI.prototype,"showEmbeddedSelectButton",void 0),C([xs({attribute:iI.chunkSize,type:Number})],wI.prototype,"chunkSize",void 0),C([xs({attribute:iI.maxFileSize,type:Number})],wI.prototype,"maxFileSize",void 0),C([xs({attribute:iI.minFileSize,type:Number})],wI.prototype,"minFileSize",void 0),C([xs({attribute:iI.maxFileCount,type:Number})],wI.prototype,"maxFileCount",void 0),C([xs({attribute:iI.multiple,type:Boolean})],wI.prototype,"multiple",void 0),C([xs({attribute:iI.uploadMode,type:Number})],wI.prototype,"uploadMode",void 0),C([xs({attribute:iI.uploadTechnology,type:Number})],wI.prototype,"uploadTechnology",void 0),C([xs({attribute:iI.dragOverClassName})],wI.prototype,"dragOverClassName",void 0),C([xs({attribute:iI.dropZoneCssSelector})],wI.prototype,"dropZoneCssSelector",void 0),C([xs({attribute:iI.customizeFormData,type:Boolean})],wI.prototype,"customizeFormData",void 0);customElements.define("dxbl-upload",class extends wI{constructor(){super(),this.uploaders=new Map,this.uploadPromises=new Set,this.pendingFiles=new Array}processUploadedFilesOptionsCore(e){for(const t of e)t.status===oI.PendingUpload&&t.uploadStartOptions&&this.onUploadStartCallback(t.uploadStartOptions,t.customFormDataOptions)}onUploadStartCallback(e,t){const{guid:n,requestJSOptions:i}=e,s=this.files.get(n);s&&(this.attachEventsToFileItem(s),i?this.uploadTechnology!==rI.Http||i.uploadUrl?this.startUpload(s,i,(null==t?void 0:t.customData)||{}):s.error(new EventTarget):s.abort())}startUpload(e,t,n){e.status=oI.PendingUpload,this.scheduleUpload(e,t,n)}handleUploadError(e,t){var n;e&&e.status&&e.statusText&&e.responseText&&(null===(n=t.onError)||void 0===n||n.call(t,e))}scheduleUpload(e,t,n){if(this.uploadPromises.size<10){const i=this.uploadFileCore(e,t,n);this.uploadPromises.add(i),i.catch((t=>this.handleUploadError(t,e))).finally((()=>{this.onAfterUpload(i)}))}else this.pendingFiles.push({file:e,requestOptions:t,customData:n})}onAfterUpload(e){if(this.uploadPromises.delete(e),this.pendingFiles.length>0){const e=this.pendingFiles.shift(),t=e.file,n=this.uploadFileCore(t,e.requestOptions,e.customData);this.uploadPromises.add(n),n.catch((e=>this.handleUploadError(e,t))).finally((()=>{this.onAfterUpload(n)}))}}getUploadStrategy(e){const t=this.chunkSize>0?new hI(this):new uI(this),n=this.uploaders.get(e.fileInfo.guid);return(n!==t&&e.status!==oI.Uploading||!n)&&this.uploaders.set(e.fileInfo.guid,t),this.uploaders.get(e.fileInfo.guid)}uploadFileCore(e,t,n){return this.getUploadStrategy(e).upload(e,t,n,(e=>(e.loadEnd(),e.isUploadComplete()||e.status!==oI.Uploading?Promise.resolve():this.uploadFileCore(e,t,null))))}onCustomizeFormDataCallback(e){var t;const n=e.fileGuid;null===(t=this.uploaders.get(n))||void 0===t||t.onCustomizeChunkMetadataResponse(e.customData),this.uploaders.delete(n)}});const II={initDotNetReference:yI,getRecentlyAddedFileInfosStream:BI};customElements.define("dxbl-file-input",class extends wI{processUploadedFilesOptionsCore(e){var t;const n=e.filter((e=>e.status===oI.PendingUpload&&e.uploadStartOptions));for(const e of n){const t=this.files.get(e.fileGuid);t&&(this.attachEventsToFileItem(t),t.loadStart())}const i=n.map((e=>e.fileGuid));i.length&&(null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("UploadFileViaJsInterop",i))}});const SI={initDotNetReference:yI,getFileBytes:function(e,t){var n,i;return null===(i=null===(n=EI(e))||void 0===n?void 0:n.getFileBytes)||void 0===i?void 0:i.call(n,t)},updateFileStatus:function(e,t,n,i){var s;null===(s=EI(e))||void 0===s||s.updateFileStatus(t,n,i)},getRecentlyAddedFileInfosStream:BI};class xI extends Od{constructor(){super(xI.eventName)}}xI.eventName=uy.Carousel+".swipe-start";class DI extends CustomEvent{constructor(e){super(DI.eventName,{detail:new FI(e),bubbles:!0,composed:!0,cancelable:!0})}}DI.eventName=uy.Carousel+".swipe-end";class FI{constructor(e){this.Direction=e}}class TI extends CustomEvent{constructor(e){super(TI.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}TI.eventName=uy.Carousel+".mouse-scroll";class HI extends CustomEvent{constructor(e){super(HI.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}HI.eventName=uy.Carousel+".shortcut",Ct.register(xI.eventName,(e=>e.detail)),Ct.register(DI.eventName,(e=>e.detail)),Ct.register(TI.eventName,(e=>{const t=e.detail;return{DeltaX:t.deltaX,DeltaY:t.deltaY,DeltaZ:t.deltaZ,DeltaMode:t.deltaMode}})),Ct.register(HI.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}}));const UI="none";var QI;!function(e){e[e.None=0]="None",e[e.Touch=1]="Touch",e[e.TouchAndPointer=2]="TouchAndPointer"}(QI||(QI={}));let PI=class extends Ja{get content(){return this.querySelector(".dxbl-carousel-content")}constructor(){super(),this.width=0,this.swipingStart=new et(0,0),this.isSwiping=!1,this.lastWheelExecutionTime=null,this.gestureCover=null,this.keyDownHandler=this.onKeyDown.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.pointerDownHandler=this.onPointerDown.bind(this),this.stopSwipingHandler=this.stopSwiping.bind(this),this.cancelSwipingHandler=this.cancelSwiping.bind(this),this.performSwipingHandler=this.performSwiping.bind(this),this.allowMouseWheel=!1,this.animation="",this.activeIndex=-1,this.displayIndex=-1,this.loop=!1,this.swipeMode=QI.Touch,this.resizeObserver=new ResizeObserver((e=>{for(const t of e)this.width=t.contentRect.width}))}moveNext(e=this.animation){var t;if(this.setTransition(e),this.activeIndex===this.displayIndex){const e=this.getTransform(this.activeIndex);this.content&&this.content.style.transform!==e&&this.applyTransform(e)}else{const e=this.getTransform(this.displayIndex);if(this.content&&this.content.style.transform!==e){const n=this.activeIndex;this._moveFast=()=>{var e,t;null===(e=this.content)||void 0===e||e.removeEventListener("transitionend",this._moveFast),this.setTransition(UI),this.applyTransform(this.getTransform(n)),null===(t=this.content)||void 0===t||t.getBoundingClientRect(),this._moveFast=void 0},null===(t=this.content)||void 0===t||t.addEventListener("transitionend",this._moveFast),this.applyTransform(e)}}}createRenderRoot(){return this}updated(e){super.updated(e),e.has("loop")?this.moveNext(UI):e.has("activeIndex")&&(this._moveFast&&this._moveFast(),this.moveNext())}connectedOrContentChanged(){super.connectedOrContentChanged(),this.applyTransform(this.getTransform(this.activeIndex))}connectedCallback(){this.addEventListener("pointerdown",this.pointerDownHandler),this.addEventListener("wheel",this.mouseWheelHandler),this.addEventListener("keydown",this.keyDownHandler),super.connectedCallback(),this.resizeObserver.observe(this)}disconnectedCallback(){var e;this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("wheel",this.mouseWheelHandler),this.removeEventListener("keydown",this.keyDownHandler),super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.unobserve(this)}onKeyDown(e){if(e.target!==this)return;const t=Ie.KeyUtils.getEventKeyCode(e);t!==Ie.KeyCode.Left&&t!==Ie.KeyCode.Right&&t!==Ie.KeyCode.Space||(e.preventDefault(),this.dispatchEvent(new HI(e)))}onMouseWheel(e){if(this.allowMouseWheel){e.preventDefault();const t=new Date;if(this.lastWheelExecutionTime&&t.getTime()-this.lastWheelExecutionTime.getTime()<100)return;this.lastWheelExecutionTime=t,this.dispatchEvent(new TI(e))}}onPointerDown(e){if(0!==e.button)return;if(this.swipeMode===QI.None)return;const t="touch"===e.pointerType;if(this.swipeMode===QI.Touch&&!t)return;const n=e.target;if(n&&(this.content.contains(n)||n.classList.contains("dxbl-carousel-substrate-button"))){if(n instanceof HTMLElement&&(n.isContentEditable||n.hasAttribute("contenteditable"))||n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement){if(!t)return;if(document.activeElement===n)return}this.onStartSwiping(e.clientX,e.clientY)}}onStartSwiping(e,t){this.swipingStart=new et(e,t),document.addEventListener("pointermove",this.performSwipingHandler),document.addEventListener("pointerup",this.stopSwipingHandler),document.addEventListener("pointercancel",this.cancelSwipingHandler),document.addEventListener("touchmove",this.touchMoveHandler,{passive:!1})}stopSwiping(e){this.onStopSwiping(e.clientX)}cancelSwiping(e){this.onStopSwiping(this.swipingStart.x)}onStopSwiping(e){var t;if(this.isSwiping){const n=e-this.swipingStart.x,i=this.width/3,s=Math.abs(n)<i?0:Math.sign(n);this.setTransition(this.animation),(0===s||1===s&&!this.loop&&0===this.activeIndex||-1===s&&!this.loop&&this.activeIndex===this.content.childElementCount-1)&&this.applyTransform(this.getTransform(this.activeIndex)),null===(t=this.gestureCover)||void 0===t||t.remove(),this.isSwiping=!1,this.dispatchEvent(new DI(s))}this.swipingStart=new et(0,0),document.removeEventListener("pointermove",this.performSwipingHandler),document.removeEventListener("pointerup",this.stopSwipingHandler),document.removeEventListener("pointercancel",this.cancelSwipingHandler),document.removeEventListener("touchmove",this.touchMoveHandler)}onTouchMove(e){if(!e.cancelable)return;const t=Math.abs(e.touches[0].clientX-this.swipingStart.x);t>Math.abs(e.touches[0].clientY-this.swipingStart.y)&&t>5&&e.preventDefault()}performSwiping(e){this.isSwiping||(this.isSwiping=!0,this.setTransition(UI),this.gestureCover=document.createElement("div"),this.gestureCover.classList.add("dxbl-gesture-cover"),this.appendChild(this.gestureCover),this.dispatchEvent(new xI));this.applyTransform(this.getTransform(this.activeIndex,e.clientX-this.swipingStart.x))}getTransform(e,t=0){return`translateX(${-100*e+(0===t?0:Math.min(100,Math.max(-100,Math.round(t/this.width*100))))}%)`}applyTransform(e){this.content&&(this.content.style.transform=e)}setTransition(e){this.content&&(this.content.style.transition=e)}};C([xs({attribute:"allow-mouse-wheel",type:Boolean})],PI.prototype,"allowMouseWheel",void 0),C([xs({attribute:"animation",type:String})],PI.prototype,"animation",void 0),C([xs({attribute:"active-index",type:Number})],PI.prototype,"activeIndex",void 0),C([xs({attribute:"display-index",type:Number})],PI.prototype,"displayIndex",void 0),C([xs({attribute:"loop",type:Boolean})],PI.prototype,"loop",void 0),C([xs({attribute:"swipe-mode",type:QI,converter:gE(QI)})],PI.prototype,"swipeMode",void 0),PI=C([Es(uy.Carousel)],PI);let NI=class extends Ja{constructor(){super(...arguments),this._focusInHandler=this.focusIn.bind(this),this._focusOutHandler=this.focusOut.bind(this),this.focusLoop=!1}disconnectedCallback(){super.disconnectedCallback(),this.focusLoop&&this.removeFocusTrapEvents()}updated(e){super.updated(e),e.has("focusLoop")&&this.onFocusLoopUpdated()}onFocusLoopUpdated(){this.focusLoop?(this.addFocusTrapEvents(),this.contains(document.activeElement)&&this.activateFocusTrap()):(this.removeFocusTrapEvents(),this.deactivateFocusTrap())}addFocusTrapEvents(){this.addEventListener("focusin",this._focusInHandler),this.addEventListener("focusout",this._focusOutHandler)}removeFocusTrapEvents(){this.removeEventListener("focusin",this._focusInHandler),this.removeEventListener("focusout",this._focusOutHandler)}focusIn(e){this.contains(e.relatedTarget)||this.activateFocusTrap()}focusOut(e){this.contains(e.relatedTarget)||this.contains(document.activeElement)||this.deactivateFocusTrap()}activateFocusTrap(){Mr.activate(this,!0,!0,!1)}deactivateFocusTrap(){Mr.deactivate(this,!1)}};C([xs({type:Boolean,attribute:"focus-loop"})],NI.prototype,"focusLoop",void 0),NI=C([Es(uy.DrawerPanel)],NI);class RI{constructor(e){this.eventTokens=[],this.context=e}attachEventWithContext(e,t,n,i){if(!this.eventTokens||!i||!e)return{item:null,name:null,delegate:null,dispose:()=>{}};const s=n.bind(i);e.addEventListener(t,s);const r={item:e,name:t,delegate:s,dispose:()=>{this.detachEvent(r)}};return this.eventTokens.push(r),r}attachEvent(e,t,n){return this.attachEventWithContext(e,t,n,this.context)}detachEvent(e){if(!this.eventTokens)return null;if(!(e&&e.item&&e.name&&e.delegate))return!1;const t=this.eventTokens.indexOf(e);return t>=0&&(e.item.removeEventListener(e.name,e.delegate),this.eventTokens.splice(t,1),e.item=null,e.delegate=null,e.dispose=()=>{},!0)}dispose(){return!!this.eventTokens&&(this.eventTokens.forEach((function(e){e.item&&e.name&&e.delegate&&(e.item.removeEventListener(e.name,e.delegate),e.item=null,e.delegate=null,e.dispose=()=>{})})),this.eventTokens=[],!0)}}const LI="is-animating",MI="data-items-container";var kI;!function(e){e.None="None",e.Slide="Slide"}(kI||(kI={}));let KI=class extends Ja{constructor(){super(),this.isAnimating=!1,this.mutationObserver=null,this._expandedState="False",this._previousNodeCount=null,this._getNodeCount=e=>{var t;return e?this.childElementCount:(null===(t=this.firstElementChild)||void 0===t?void 0:t.childElementCount)||null},this.animationType=kI.None,this.expanded=!1,this.events=new RI(this),this.isRendered=!1,this._expandedState="False"}connectedCallback(){super.connectedCallback(),this.isRendered=!0,this.expanded||this.setElementVisibility(!1)}disconnectedCallback(){super.disconnectedCallback(),this.isRendered=!1}set expandedState(e){const t=this._expandedState;this._expandedState=e,this.expanded="True"===e,this.requestUpdate("expandedState",t),this.isRendered||"True"!==e?this.onExpandedChanged():this.notifyActualExpandedChanged()}get expandedState(){return this._expandedState}onExpandedChanged(){this.applyExpandedStateToElements()}notifyActualExpandedChanged(){this.dispatchEvent(new Event("change",{bubbles:!0}))}get value(){return this.expandedState}applyExpandedStateToElements(){var e,t,n,i;const s=this.expanded;if(this.animationType===kI.None)return this.notifyActualExpandedChanged(),void this.setContainerElementVisibility(s);const r=null===(e=this.firstElementChild)||void 0===e?void 0:e.hasAttribute(MI),o=this._getNodeCount(!r);if(s){if(0===this.childElementCount)return void this.waitForContent(this);if((null===(t=this.firstElementChild)||void 0===t?void 0:t.hasAttribute(MI))&&!o)return void this.waitForContent(this.firstElementChild)}if(s&&this.firstElementChild&&(this._previousNodeCount===o||!r)&&(null===(n=this.mutationObserver)||void 0===n||n.disconnect(),r&&!o))return;this._previousNodeCount=this._getNodeCount(!r);const a=this.token,l=s&&!a?0:this.getContainerStartHeight(s);this.toggleAttribute(LI,!1),a&&(this.style.maxHeight=l+"px");const A=this.getContainerEndHeight(s);if(null===(i=this.token)||void 0===i||i.dispose(),this.token=null,this.prepareElementsForAnimation(s,0,!!a),l!==A){const e=()=>{this.onAnimationComplete(),this.token.dispose(),this.token=null};this.startAnimation(l,A,(()=>{e()}))}else this.onAnimationComplete()}waitForContent(e){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.mutationObserver=new MutationObserver((e=>{this.applyExpandedStateToElements()})),this.mutationObserver.observe(e,{childList:!0})}setContainerElementVisibility(e){this.setElementVisibility(e)}setElementVisibility(e){e?(this.style.display="",this.style.height=""):(this.style.display="none",this.style.height="0px")}getContainerStartHeight(e){return e?this.getClearClientHeight():this.offsetHeight}getContainerEndHeight(e){if(!e)return 0;const t=this.getClearClientHeight(),n=this.getElementVisibility(!1);this.style.maxHeight="",this.setElementVisibility(!0);const i=this.getClearClientHeight();return this.setElementVisibility(n),this.style.maxHeight=t+"px",i}prepareElementsForAnimation(e,t,n){if(this.style.overflow="hidden",e)this.setContainerElementVisibility(!0),this.style.maxHeight=(n?0:this.getClearClientHeight())+"px";else{const e=this.offsetHeight+t;e>=0&&this.setOffsetHeight(e,null)}}getClearClientHeight(){return this.offsetHeight}getElementVisibility(e){if(e){const e=T.DomUtils.getCurrentStyle(this);if(e)return"none"!==e.display}return"none"!==this.style.display}setOffsetHeight(e,t){t||(t=T.DomUtils.getCurrentStyle(this));let n=e-T.DomUtils.pxToInt(t.marginTop)-T.DomUtils.pxToInt(t.marginBottom);n-=Wt(this,t),n>-1&&(this.style.maxHeight=n+"px")}startAnimation(e,t,n){this.isAnimating=!0,e!==t?(this.token=this.events.attachEvent(this,"transitionend",n),qt((()=>{this.isAnimating&&(this.toggleAttribute(LI,!0),setTimeout((()=>this.style.maxHeight=t+"px")))}))):n()}onAnimationComplete(){this.toggleAttribute(LI,!1),this.setContainerElementVisibility(this.expanded),en((()=>{this.style.overflow="",this.style.maxHeight=""})),this.notifyActualExpandedChanged(),this.checkChildContent()}checkChildContent(){if(!this.expanded&&0!==this.childElementCount&&null!==this.firstElementChild&&this.firstElementChild.hasAttribute(MI)){const e=this.querySelectorAll(" ul[data-items-container]");if(!e)return;for(let t=0;t<e.length;t+=1)e[t].style.overflowY="hidden"}}};C([xs({type:String,attribute:"expanded-state"})],KI.prototype,"expandedState",null),C([xs({type:kI,attribute:"animation-type"})],KI.prototype,"animationType",void 0),C([Ds()],KI.prototype,"expanded",void 0),KI=C([Es(uy.ExpandableContainer)],KI);class OI{}var _I;OI.Root=pe.Prefix+"-fl",OI.Loading=OI.Root+"-loading",OI.RowBreak=OI.Root+"-row-break",OI.Group=OI.Root+"-group",OI.GroupBody=OI.Group+"-body",OI.GroupDecoration=OI.Root+"-gd",OI.GroupTab=OI.Root+"-gt",OI.GroupHeaderTemplate=OI.Root+"-group-header-tmpl",OI.Item=OI.Root+"-item",OI.TabItem=OI.Root+"-tab-item",OI.Caption=OI.Root+"-cpt",OI.EmptyCaption=OI.Root+"-empty-caption",OI.BeginRow=OI.Root+"-begin-row",OI.TabContent=OI.Root+"-tab-content",OI.ItemContentWithCaption=OI.Root+"-ctrl",OI.ItemContentWithoutCaption=OI.Root+"-ctrl-nc",OI.ItemHorizontal=OI.Root+"-item-horizontal",OI.HeaderContentTemplate=OI.Root+"-header-content-tmpl",OI.CaptionTemplate=OI.Root+"-caption-tmpl",OI.ItemCaptionWidthCalculation=OI.Root+"-calc",OI.Row=pe.Prefix+"-row",function(e){e.v4="v4",e.v5="v5"}(_I||(_I={}));const VI={};function zI(e){!function(e,t,n){const i=VI[e]||(VI[e]=T.DomUtils.getCurrentStyle(document.body).getPropertyValue(e)||t);if(i){const e=Pt();e&&e.insertRule("@media (min-width: "+i+") {\n"+n+"\n}\n",e.cssRules.length)}}("--breakpoint-lg","992px",e)}var WI,$I;!function(e){e[e.None=0]="None",e[e.InGroups=1]="InGroups",e[e.All=2]="All"}(WI||(WI={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}($I||($I={}));const GI=` > .${OI.Caption}`,qI=e=>`${uy.FormLayoutItem}[fl-id=${e}].${OI.Item}.${OI.ItemHorizontal}`,YI=/\./g;class XI extends Ja{constructor(){super(...arguments),this.captionAlignment=WI.InGroups}get itemSelector(){return` > .${OI.Row} > ${qI(this.mainElementId)}`}get mainElementId(){return this.id}getMainElement(){return document.getElementById(this.mainElementId)}calculateAdaptivityCssRules(){}startCalculationItems(e){const t=this.querySelectorAll(`:scope${` .${e}`}[fl-id=${this.mainElementId}]`);for(let e=0;e<t.length;e++)t[e].calculateAdaptivityCssRules()}updateGroups(){this.startCalculationItems(OI.Group)}updateTabs(){this.startCalculationItems(OI.TabContent)}createAdaptivityCssRules(){var e;let t=0;T.DomUtils.addClassName(this,OI.ItemCaptionWidthCalculation);const n=` .${OI.Group}[fl-id=${this.mainElementId}] .${OI.GroupBody}[expanded-state=False]`,i=null===(e=this.getMainElement())||void 0===e?void 0:e.querySelectorAll(`:scope${n}`),s=e=>{for(let t=0;t<(null==i?void 0:i.length);t++)i[t].style.display=e?"":"none",i[t].style.visibility=e?"hidden":""};s(!0);const r=this.findCaptions();r&&r.length>0&&(t=this.getMaxCaptionWidth(r),this.createAdaptivityCssRulesForElements(t)),s(!1),T.DomUtils.removeClassName(this,OI.ItemCaptionWidthCalculation)}findCaptions(){return[...this.querySelectorAll(`:scope${this.itemSelector}${GI}`)]}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,!1)}getMaxCaptionWidth(e){let t=0;if(e.length>0){const n=e.find((e=>e.classList.contains(OI.EmptyCaption)));let i="0 px";n&&(i=window.getComputedStyle(n,null).getPropertyValue("height"));for(let n=0;n<e.length;n++){const s=e[n].offsetWidth;this.isEmptyCaption(e[n])&&(e[n].style.height=i);const r=e[n].parentNode;r&&s>t&&s<r.offsetWidth&&(t=s)}}return t>0?t+1:0}isEmptyCaption(e){return e.classList.contains(OI.EmptyCaption)}getFilteredElements(e){return function(e,t){const n=[];for(let i=0;i<e.length;i++){const s=e[i];t&&!t(s)||n.push(s)}return n}(e,(e=>Lt(e,OI.Root)===this))}encodeDotsForMediaQuiery(e){return e.replace(YI,"\\$&")}getAdaptivityCssRulesPrefix(){const e=this.getMainElement();if(!e)return null;let t=`.${OI.Root}`,n=e;for(;n;)t=" #"+this.encodeDotsForMediaQuiery(n.id)+t,n=Lt(n.parentNode,OI.Root);t.slice(1);let i="",s=this;for(;s&&s!==e&&e.contains(s);)s.id&&(i=" #"+this.encodeDotsForMediaQuiery(s.id)+i),s=Lt(s.parentNode,OI.Group);return t+=i,t}createCssRulesForElementsInternal(e,t,n){if(0===e)return;this.itemCaptionWidth=e;const i=this.getAdaptivityCssRulesPrefix(),s=this.captionAlignment===WI.InGroups?this.itemSelector:` ${qI(this.mainElementId)}`;let r=i+s+`${GI} {\n width:`+e+"px;\n}\n";r+=i+s+` > .${OI.ItemContentWithCaption}:not(img):not(.${OI.EmptyCaption} + .${OI.ItemContentWithCaption}):not(.${OI.ItemContentWithoutCaption}) {\n width: calc(100% - `+e+"px);\n}\n",zI(r)}}C([xs({attribute:"caption-alignment",type:WI,converter:gE(WI)})],XI.prototype,"captionAlignment",void 0);class JI extends XI{constructor(){super(),this._enchancedCallback=()=>{},this._calculationProcess=null,this.sizeMode=$I.Medium,this._isRendered=!1,this._mutationObserver=new MutationObserver((e=>{this.itemVisibilityChangeHandler(e)})),this._enchancedCallback=()=>this.calculateAdaptivityCssRules(),this._formSizeObserver=new ResizeObserver(this.calculateAdaptivityCssRules.bind(this))}needReasignAttributes(){return!1}connectedCallback(){var e;super.connectedCallback(),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._enchancedCallback),this._mutationObserver.observe(this,{childList:!0,subtree:!0}),this._formSizeObserver.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._isRendered=!1,this._mutationObserver.disconnect(),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._enchancedCallback),this._formSizeObserver.disconnect()}itemVisibilityChangeHandler(e){if(this._isRendered){const t=e.some((e=>(e.addedNodes.length||e.removedNodes.length)&&e.target.classList.contains("dxbl-row")));t&&this.calculateAdaptivityCssRules()}}willUpdate(e){(e.has("sizeMode")||e.has("captionAlignment"))&&this.calculateAdaptivityCssRules()}findCaptions(){return this.captionAlignment===WI.All?this.getFilteredElements(this.querySelectorAll(`${qI(this.mainElementId)}:not(.${pe.Invisible})`+GI)):super.findCaptions()}calculateAdaptivityCssRules(){this._calculationProcess&&clearTimeout(this._calculationProcess),this._calculationProcess=setTimeout((()=>{this.captionAlignment!==WI.None&&this.createAdaptivityCssRules(),this.captionAlignment===WI.InGroups&&(this.updateGroups(),this.updateTabs()),T.DomUtils.removeClassName(this,OI.Loading),this._isRendered=!0}))}}C([xs({attribute:"size-mode",type:$I,converter:gE($I)})],JI.prototype,"sizeMode",void 0);class jI extends XI{constructor(e){super(),this._isMainTabElement=e,this.flId=""}get mainElementId(){return this.flId}calculateAdaptivityCssRules(){this.captionAlignment!==WI.None&&this.createAdaptivityCssRules()}}C([xs({attribute:"fl-id",type:String})],jI.prototype,"flId",void 0);class ZI extends Ja{constructor(){super(),this._currentCaption=null,this.captionFor=null}get useShadowDom(){return!1}_findFormLayout(){let e=this.parentNode;for(;e&&!(e instanceof JI);)e=null==e?void 0:e.parentNode;return e}contentChanged(){var e;super.contentChanged();const t=this.initAndGetCaptionForInput();if((null===(e=this._currentCaption)||void 0===e?void 0:e.innerHTML)!==(null==t?void 0:t.innerHTML)){const e=this._findFormLayout();null==e||e.calculateAdaptivityCssRules()}this._currentCaption=t}initAndGetCaptionForInput(){var e;const t=this.getCaption();if(t&&""!==this.captionFor){const n=this.captionFor||(null===(e=this.getEditorInput())||void 0===e?void 0:e.id);n&&(t.htmlFor=n)}return t}getCaption(){return this.querySelector(`:scope > .${OI.Caption}`)}getEditorInput(){return this.querySelector(`.${Bl.TextEdit} > input, .${Bl.TextEdit} > textarea, .dxbl-checkbox-check-element > input`)}}C([xs({attribute:"caption-for"})],ZI.prototype,"captionFor",void 0);class eS{}eS.Group=pe.Prefix+"-group",eS.Header=eS.Group+"-header",eS.Body=eS.Group+"-body",eS.BodyContent=eS.Body+"-content";let tS=class extends jI{constructor(){super(!0),this.isActiveTab=!1}get itemSelector(){return` > .${OI.Row} > .${OI.TabItem}.${OI.ItemHorizontal}`}willUpdate(e){e.has("isActiveTab")&&this.isActiveTab&&(this.captionAlignment===WI.InGroups&&(this.calculateAdaptivityCssRules(),this.updateTabs(),this.updateGroups()),this.captionAlignment===WI.All&&this.getMainElement().calculateAdaptivityCssRules())}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!0,!1)}};C([xs({attribute:"is-active-tab",type:Boolean})],tS.prototype,"isActiveTab",void 0),tS=C([Es(uy.FormLayoutTab)],tS);let nS=class extends jI{constructor(){super(!1)}get itemSelector(){const e=` > .${OI.Row} > ${qI(this.flId)}`,t=` > .${eS.Group} > .${eS.Body} > .${eS.BodyContent}${e}`;return this.isMainElementCardGroup()?t:e}isMainElementCardGroup(){return this.classList.contains(OI.GroupDecoration)}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,this.isMainElementCardGroup())}};nS=C([Es(uy.FormLayoutGroup)],nS);let iS=class extends ZI{};iS=C([Es(uy.FormLayoutItem)],iS);let sS=class extends JI{};sS=C([Es(uy.FormLayout)],sS);class rS{}class oS extends CustomEvent{constructor(e){super(oS.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}static create(){return new oS(new rS)}}oS.eventName="dxbl-grid-layout-root-element-base.contentchanged",Ct.register(oS.eventName,(e=>e.detail));class aS extends Ja{constructor(){super(...arguments),this.layoutInfo=""}willUpdate(e){e.has("layoutInfo")&&this.applyLayout()}applyLayout(){if(this.layoutInfo){const e=JSON.parse(this.layoutInfo);for(const t in e)this.style.setProperty(t,`${e[t]}`)}}}C([xs({attribute:"layout-info"})],aS.prototype,"layoutInfo",void 0);class lS extends aS{createRenderRoot(){return this.applyLayout(),super.createRenderRoot()}contentChanged(){this.makeChildrenVisible(),this.dispatchEvent(oS.create())}restoreState(){super.restoreState(),this.makeChildrenVisible()}makeChildrenVisible(){T.DomUtils.removeClassName(this,pe.Invisible)}}let AS=class extends aS{createRenderRoot(){return this}};AS=C([Es(uy.GridLayoutItem)],AS);let dS=class extends lS{};dS=C([Es(uy.GridLayoutRoot)],dS);let cS=class extends Ja{};cS=C([Es(uy.GridLayout)],cS);let hS=class extends he{};var uS;hS=C([Es(uy.GroupControl)],hS),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(uS||(uS={}));let pS=class extends Ja{constructor(){super(...arguments),this._orientation=null}get isVertical(){return this._orientation===uS.Vertical}};C([xs({type:uS,converter:gE(uS),attribute:"orientation"})],pS.prototype,"_orientation",void 0),pS=C([Es(uy.Splitter)],pS);let mS=class extends Ja{constructor(){super(...arguments),this.forceIsFlexible=!1,this.minSize=null,this.maxSize=null}get size(){return this.style.flexBasis}set size(e){this.forceIsFlexible&&(e=""),this.style.flex=e?`0 0 ${e}`:""}updated(e){super.updated(e),e.has("forceIsFlexible")&&this.forceIsFlexible&&(this.size="")}};C([xs({type:Boolean,attribute:"force-flexible"})],mS.prototype,"forceIsFlexible",void 0),C([xs({type:String,attribute:"min-size"})],mS.prototype,"minSize",void 0),C([xs({type:String,attribute:"max-size"})],mS.prototype,"maxSize",void 0),mS=C([Es(uy.SplitterPane)],mS);class gS{}gS.Splitter=pe.Prefix+"-splitter",gS.SplitterButton=gS.Splitter+"-button";class CS{constructor(e,t){this.prevPaneSize=e,this.nextPaneSize=t}}class fS{constructor(e,t){this.prevPaneSize=e,this.nextPaneSize=t}}class vS extends CustomEvent{constructor(e){super(vS.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}vS.eventName=uy.Splitter+".separator-dragged";class bS extends CustomEvent{constructor(e){super(bS.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}bS.eventName=uy.Splitter+".separator-collapse-toggled",Ct.register(vS.eventName,(e=>e.detail)),Ct.register(bS.eventName,(e=>e.detail));class wS{constructor(e){this.prevPaneInitialSizeValue="",this.nextPaneInitialSizeValue="";const t=e.splitter;this._separator=e,this._prevPane=e.prevPane,this._nextPane=e.nextPane,this._splitterInitialSize=t.isVertical?t.clientHeight:t.clientWidth,this._prevPaneInitialSize=this.getPaneVisibleSize(this._prevPane),this._nextPaneInitialSize=this.getPaneVisibleSize(this._nextPane),this.prevPaneInitialSizeValue=this._prevPane.size,this.nextPaneInitialSizeValue=this._nextPane.size}cancel(){this._prevPane.size=this.prevPaneInitialSizeValue,this._nextPane.size=this.nextPaneInitialSizeValue}stop(){if(0===this.accumulatedOffset)this.cancel();else{const e=new CS(this._prevPane.size,this._nextPane.size);this._separator.dispatchEvent(new vS(e))}}get accumulatedOffset(){return this.getPaneVisibleSize(this._prevPane)-this._prevPaneInitialSize}resizePanes(e){const[t,n]=this.calculatePreviousOffsetRange(this._prevPane,this._prevPaneInitialSize),[i,s]=this.calculateNextOffsetRange(this._nextPane,this._nextPaneInitialSize),r=Math.max(t,i),o=Math.min(n,s);r>o||(e=Math.min(o,Math.max(r,e)),this.setPaneSize(this._prevPane,this._prevPaneInitialSize+e),this.setPaneSize(this._nextPane,this._nextPaneInitialSize-e))}calculatePreviousOffsetRange(e,t){const[n,i]=this.calculateMinMaxSizes(e);return[n-t,i-t]}calculateNextOffsetRange(e,t){const[n,i]=this.calculateMinMaxSizes(e);return[t-i,t-n]}calculateMinMaxSizes(e){return[e.minSize?this.parseMinMaxSize(e.minSize):0,e.maxSize?this.parseMinMaxSize(e.maxSize):this._splitterInitialSize]}parseMinMaxSize(e){const t=parseFloat(e);return e.includes("%")?t*this._splitterInitialSize/100:t}setPaneSize(e,t){e.size=e.size.includes("%")?t/this._splitterInitialSize*100+"%":t+"px"}getPaneVisibleSize(e){return this._separator.splitter.isVertical?e.offsetHeight:e.offsetWidth}}var yS;let BS=yS=class extends Ja{constructor(){super(...arguments),this.allowCollapse=!1,this.allowResize=!1,this._pointerEventsHelper=new q(this),this._dragStartHandler=this.onDragStart.bind(this),this._dragCancelHandler=this.onDragCancel.bind(this),this._dragStopHandler=this.onDragStop.bind(this),this._keyDownResizeHandler=this.onKeyDownResize.bind(this),this._keyUpResizeHandler=this.onKeyUpResize.bind(this),this._keyDownCollapseHandler=this.onKeyDownCollapse.bind(this),this._dblClickCollapseHandler=this.onDblClickCollapse.bind(this)}disconnectedCallback(){super.disconnectedCallback(),this.allowResize&&this.disposeResizing(),this.allowCollapse&&this.disposeCollapsing()}updated(e){super.updated(e),e.has("allowResize")&&(this.allowResize?this.initializeResizing():this.disposeResizing()),e.has("allowCollapse")&&(this.allowCollapse?this.initializeCollapsing():this.disposeCollapsing())}get splitter(){return this.closest(uy.Splitter)}get prevPane(){return this.previousElementSibling}get nextPane(){return this.nextElementSibling}initializeResizing(){this._pointerEventsHelper.initialize(),this.addEventListener(a.eventName,this._dragStartHandler),this.addEventListener(A.eventName,this._dragCancelHandler),this.addEventListener(l.eventName,this._dragStopHandler),this.addEventListener("keydown",this._keyDownResizeHandler),this.addEventListener("keyup",this._keyUpResizeHandler)}disposeResizing(){this._pointerEventsHelper.dispose(),this.removeEventListener(a.eventName,this._dragStartHandler),this.removeEventListener(A.eventName,this._dragCancelHandler),this.removeEventListener(l.eventName,this._dragStopHandler),this.removeEventListener("keydown",this._keyDownResizeHandler),this.removeEventListener("keyup",this._keyUpResizeHandler)}initializeCollapsing(){this.addEventListener("keydown",this._keyDownCollapseHandler),this.addEventListener("dblclick",this._dblClickCollapseHandler)}disposeCollapsing(){this.removeEventListener("keydown",this._keyDownCollapseHandler),this.removeEventListener("dblclick",this._dblClickCollapseHandler)}onDragStart(e){yS.dragHelper.start(this,e.detail.source),e.stopPropagation()}onDragCancel(e){yS.dragHelper.cancel(),e.stopPropagation()}onDragStop(e){yS.dragHelper.stop(),e.stopPropagation()}onKeyDownResize(e){var t;const n=this.getResizeDirection(e);0!==n&&(null!==(t=this.resizeHelper)&&void 0!==t||(this.resizeHelper=new wS(this)),this.resizeHelper.resizePanes(this.resizeHelper.accumulatedOffset+n*yS.KeyboardResizeStep),this.clearKeyboardResizeTimeout(),e.preventDefault())}onKeyUpResize(e){this.resizeHelper&&0!==this.getResizeDirection(e)&&(this.keyboardResizeTimeoutId=setTimeout((()=>{this.resizeHelper.stop(),this.resizeHelper=null,this.clearKeyboardResizeTimeout()}),yS.KeyboardResizeTimeout))}getResizeDirection(e){var t;const n=Ie.KeyUtils.getEventKeyCode(e);if(null===(t=this.splitter)||void 0===t?void 0:t.isVertical){if(n===Ie.KeyCode.Up)return-1;if(n===Ie.KeyCode.Down)return 1}else{if(n===Ie.KeyCode.Left)return-1;if(n===Ie.KeyCode.Right)return 1}return 0}clearKeyboardResizeTimeout(){this.keyboardResizeTimeoutId&&(clearTimeout(this.keyboardResizeTimeoutId),delete this.keyboardResizeTimeoutId)}onKeyDownCollapse(e){Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Enter&&(this.toggleCollapsed(),e.preventDefault())}onDblClickCollapse(e){this.toggleCollapsed(),e.preventDefault()}toggleCollapsed(){var e;const t=(null===(e=this.splitter)||void 0===e?void 0:e.isVertical)?new fS(this.prevPane.offsetHeight,this.nextPane.offsetHeight):new fS(this.prevPane.offsetWidth,this.nextPane.offsetWidth);this.dispatchEvent(new bS(t))}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${gS.SplitterButton}`)}handlePointerEventsDelay(e){return s.Default}};BS.KeyboardResizeTimeout=500,BS.KeyboardResizeStep=5,BS.dragHelper=new class extends LA{cancel(){this.splitterDragContext.resizeHelper.cancel(),super.stop()}stop(){this.splitterDragContext.resizeHelper.stop(),super.stop()}getDraggableElement(e){return document.createElement("div")}hideDraggableElement(){}get splitterDragContext(){return this.draggableContext}createDraggableContext(e,t,n){const i=e;return{...super.createDraggableContext(e,t,n),resizeHelper:new wS(i),isVertical:i.splitter.isVertical}}refreshUICore(){if(super.refreshUICore(),!this.splitterDragContext)return;this.splitterDragContext.resizeHelper.resizePanes(this.splitterDragContext.isVertical?this.splitterDragContext.currentCursorPosition.y-this.splitterDragContext.initialCursorPosition.y:this.splitterDragContext.currentCursorPosition.x-this.splitterDragContext.initialCursorPosition.x)}},C([xs({type:Boolean,attribute:"allow-collapse"})],BS.prototype,"allowCollapse",void 0),C([xs({type:Boolean,attribute:"allow-resize"})],BS.prototype,"allowResize",void 0),BS=yS=C([Es(uy.SplitterSeparator)],BS);let ES=class extends aS{};ES=C([Es(uy.StackLayoutItem)],ES);let IS=class extends lS{};IS=C([Es(uy.StackLayoutRoot)],IS);let SS=class extends Ja{};SS=C([Es(uy.StackLayout)],SS);var xS;let DS=xS=class extends Ja{constructor(){super(...arguments),this.boundOnDragStartHandler=this.handleDragStart.bind(this),this.boundOnDragStopHandler=this.handleDrop.bind(this),this.boundOnDragCancelHandler=this.handleDragEnd.bind(this),this.pointerEventsHelper=new q(this),this.allowReorder=!1,this.index=-1}handleDragStart(e){xS.draggingHelper.start(this,e.detail.source),e.stopPropagation()}handleDragEnd(e){xS.draggingHelper.stop(),e.stopPropagation()}handleDrop(e){if(xS.draggingHelper.isValidTarget(this)){const e=xS.draggingHelper.getDragIndex(),t=xS.draggingHelper.getDropIndex();e!==t&&this.dispatchEvent(new my(e,t))}xS.draggingHelper.stop(),e.stopPropagation()}isDraggableTab(){return this.allowReorder}get tabs(){return this.closest(uy.Tabs)}connectedCallback(){super.connectedCallback(),this.isDraggableTab()&&this.addDragEventSubscriptions()}disconnectedCallback(){this.isDraggableTab()&&this.removeDragEventSubscriptions(),super.disconnectedCallback()}updated(e){e.has("allowReorder")&&this.onAllowTabReorderChanged(),super.updated(e)}addDragEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.initialize()}removeDragEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.dispose()}onAllowTabReorderChanged(){this.isDraggableTab()?this.addDragEventSubscriptions():this.removeDragEventSubscriptions()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${hy.CloseButton}`)}handlePointerEventsDelay(e){return s.Default}};DS.draggingHelper=new class extends LA{constructor(){super(...arguments),this.dragIndex=-1,this.dropIndex=-1,this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dropTargetIndicator=null,this.restoreDisabled=!1,this.boundOnScroll=this.onScroll.bind(this)}start(e,t){var n;this.dxTabs=e.tabs,this.tabsUl=e.closest("ul"),this.dxTabItems=Array.from(this.tabsUl.querySelectorAll(`:scope > li > .${hy.Item}`)),this.dragIndex=this.dxTabItems.indexOf(e),this.dropIndex=this.dragIndex,super.start(e,t),this.dropTargetIndicator=this.addDropTargetIndicator(),this.dxTabs.classList.add(pe.Dragging),document.body.classList.add(pe.GrabbingCursor),e.classList.contains(pe.Disabled)||(e.classList.add(pe.Disabled),this.restoreDisabled=!0);const i=this.dxTabs.scrollViewer;i&&(i.startAutoScrolling(this.dxTabs.isVertical?Re.Vertical:Re.Horizontal),null===(n=this.dxTabs.scrollViewerContentContainer)||void 0===n||n.addEventListener("scroll",this.boundOnScroll)),document.addEventListener("wheel",this.boundOnScroll)}stop(){var e,t;const n=this.draggableContext.srcElement;super.stop(),this.removeDropTargetIndicator(),this.dxTabs.classList.remove(pe.Dragging),this.restoreDisabled&&(n.classList.remove(pe.Disabled),this.restoreDisabled=!1),document.body.classList.remove(pe.GrabbingCursor);this.dxTabs.scrollViewer&&(null===(e=this.dxTabs.scrollViewer)||void 0===e||e.stopAutoScrolling(),null===(t=this.dxTabs.scrollViewerContentContainer)||void 0===t||t.removeEventListener("scroll",this.boundOnScroll)),document.removeEventListener("wheel",this.boundOnScroll),this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dragIndex=-1,this.dropIndex=-1}isValidTarget(e){return this.dxTabs===e.tabs}getDragIndex(){return Number(this.dxTabItems[this.dragIndex].index)}getDropIndex(){return Number(this.dxTabItems[this.dropIndex].index)}getDraggableElement(e){const t=e.getBoundingClientRect(),n=e.cloneNode(!0);return n.id="",n.style.position="fixed",n.style.top=`${t.top}px`,n.style.left=`${t.left}px`,n.classList.add(pe.Dragging),e.parentElement.insertBefore(n,e),n}hideDraggableElement(){super.hideDraggableElement(),this.draggableContext.dragableElement.remove()}addDropTargetIndicator(){const e=document.createElement("div");return e.classList.add(pe.DropTargetIndicator,pe.Invisible),this.tabsUl.parentElement.insertBefore(e,null),e}removeDropTargetIndicator(){this.dropTargetIndicator.remove(),this.dropTargetIndicator=null}showDropTargetIndicator(){this.dropTargetIndicator.classList.remove(pe.Invisible)}hideDropTargetIndicator(){this.dropIndex=this.dragIndex,this.dropTargetIndicator.classList.add(pe.Invisible)}onScroll(){this.hideDropTargetIndicator()}onDocumentScroll(e){super.onDocumentScroll(e),this.onScroll()}onDocumentMouseMove(e){if(super.onDocumentMouseMove(e),e.target===this.dropTargetIndicator)return;const t=e.target.closest(`.${hy.Item}`);t&&this.isValidTarget(t)?(this.updateDropIndex(e,t),this.updateDropTargetIndicatorPosition()):this.hideDropTargetIndicator()}updateDropIndex(e,t){var n;const i=this.dxTabItems.indexOf(t);let s,r;const o=t.getBoundingClientRect();(null===(n=this.dxTabs)||void 0===n?void 0:n.isVertical)?(r=o.y+o.height/2,s=e.clientY):(r=o.x+o.width/2,s=e.clientX),this.dropIndex=s>r?i+1:i,this.dragIndex<this.dropIndex&&(this.dropIndex=this.dropIndex-1)}updateDropTargetIndicatorPosition(){if(this.dragIndex===this.dropIndex)return void this.hideDropTargetIndicator();this.showDropTargetIndicator();const e=this.dxTabItems[this.dropIndex].getBoundingClientRect();let t=e.y,n=e.x;this.dragIndex<this.dropIndex&&(this.dxTabs.isVertical?t+=e.height-this.dropTargetIndicator.offsetHeight:n+=e.width-this.dropTargetIndicator.offsetWidth),this.dropTargetIndicator.style.top=`${t}px`,this.dropTargetIndicator.style.left=`${n}px`,this.dxTabs.isVertical?this.dropTargetIndicator.style.width=`${e.width}px`:this.dropTargetIndicator.style.height=`${e.height}px`}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}},C([xs({type:Boolean,attribute:"allow-reorder"})],DS.prototype,"allowReorder",void 0),C([xs({type:Number,attribute:"index"})],DS.prototype,"index",void 0),DS=xS=C([Es(uy.TabItem)],DS);class FS{}var TS,HS,US,QS;FS.Toolbar=pe.Prefix+"-toolbar",FS.ToolbarItem=FS.Toolbar+"-item",FS.ToolbarEdit=FS.Toolbar+"-edit",FS.ToolbarTitle=FS.Toolbar+"-title",FS.ToolbarPlaceholder=FS.Toolbar+"-placeholder",FS.ToolbarGroup=FS.Toolbar+"-group",FS.ToolbarGroupSeparator=FS.ToolbarGroup+"-separator",FS.ToolbarDefaultLayer="default",FS.ToolbarHiddenItem=FS.Toolbar+"-hidden-item",FS.ToolbarItemCollapsed=FS.ToolbarItem+"-collapsed",FS.ToolbarNoItemText=FS.Toolbar+"-no-item-text",FS.ToolbarHasEllipsis=FS.Toolbar+"-has-ellipsis",FS.ButtonToolbar=pe.Prefix+"-btn-toolbar",FS.ButtonPlainToolbar=pe.Prefix+"-btn-plain-toolbar",FS.ButtonEllipsis=FS.Toolbar+"-btn-ellipsis",FS.ToolbarAdaptive=FS.Toolbar+"-adaptive",FS.AdaptiveItem=FS.ToolbarAdaptive+"-item",FS.AdaptiveItemText=FS.AdaptiveItem+"-text",FS.AdaptiveItemAllHidden=FS.AdaptiveItem+"-all-hidden",FS.AdaptiveItemHidden=FS.AdaptiveItem+"-hidden",FS.AdaptiveItemTextHidden=FS.AdaptiveItemText+"-hidden",FS.AdaptivePreviewImage=FS.AdaptiveItem+"-preview-image",FS.DropDownToggle=FS.Toolbar+"-dropdown-toggle",FS.Loading=pe.Prefix+"-loading",FS.Loaded=pe.Prefix+"-loaded",FS.VirtualToolbar=pe.Prefix+"-virtual-toolbar",FS.VirtualToolbarItem=FS.VirtualToolbar+"-item",function(e){e.Default="Default",e.AllTabs="AllTabs",e.OnDemand="OnDemand"}(TS||(TS={})),function(e){e.Auto="Auto",e.NavButtons="NavButtons",e.Swipe="Swipe",e.NoScroll="NoScroll"}(HS||(HS={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(US||(US={})),function(e){e.Top="Top",e.Bottom="Bottom",e.Left="Left",e.Right="Right"}(QS||(QS={}));const PS={};var NS,RS;PS.getIsParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},PS.getChildElementNodes=function(e){return e?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType})):null},PS.getChildElementNodesByPredicate=function(e,t){return e?t?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType&&t(e)})):PS.getChildElementNodes(e):null},PS.getChildByClassName=function(e,t,n){if(null!=e){return Ht(T.DomUtils.getChildNodesByClassName(e,t),n)}return null},PS.elementMatchesSelector=function(e){return t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,function(e,n){return!!e&&!!n&&t.call(e,n)};var t}(Element.prototype),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Forward=2]="Forward"}(NS||(NS={}));class LS{static calculate(e,t,n,i,s,r){const o=t?n.height:n.width,a=t?i.bottom:i.right,l=t?i.top:i.left,A=t?n.bottom:n.right,d=t?n.top:n.left,c=r?t?r.bottom:r.right:0,h=s?t?s.top:s.left:0;let u=l-d;switch(e){case NS.Forward:u=Math.round(a-A),0===Math.round(u)&&r&&(u=Math.round(c-A)),u=Math.min(Math.max(0,u),o),0===u&&(u=o);break;case NS.Back:u=Math.round(l)-Math.round(d),0===Math.round(u)&&s&&(u=Math.round(h-d)),u=-Math.min(Math.max(0,Math.abs(u)),o),0===u&&(u=-o);break;default:{const e=l<d,t=a>A;if(!e&&!t)return 0;if(t){const e=r?c-A:0;u=r&&l-e>=d?u=e:a-A}else if(e){const e=-l+d,t=s?-h+d:0;u=s&&a+t<=A?-t:a+e<=A?-e:0}break}}return Math.ceil(u)}}const MS="data-dxtabs-tab-id",kS="data-dxtabs-content-id",KS="tab-count",OS="scroll-mode",_S="render-mode",VS="active-tab",zS="size-mode",WS="tabs-position";let $S=RS=class extends Ja{constructor(){super(...arguments),this.mainElementContentWidthSubscription=null,this.contentPanelWidthSubscription=null,this.currentSize={width:null,height:null},this.contentSize={width:null,height:null},this.scrollContainerElement=null,this.canTrackScroll=!1,this.tabListElement=null,this.updateOverflowStateTimeout=0,this.isReady=!1,this.neededCheckSize=!1,this.unsubscribeFocusUtils=null,this.unsubscribe=null,this.onScrollHandler=this.onScroll.bind(this),this.onNextButtonClickHandler=this.onScrollToNext.bind(this),this.onPrevButtonClickHandler=this.onScrollToPrev.bind(this),this.onClickHandler=this.onClick.bind(this),this.tabCount=0,this.scrollMode=HS.Auto,this.renderMode=TS.Default,this.activeTab="",this.sizeMode=US.Medium,this.tabsPosition=QS.Top}get isVertical(){return this.tabsPosition===QS.Left||this.tabsPosition===QS.Right}get listElement(){return this.tabListElement.getElementsByTagName("ul")[0]}getActiveTab(){return this.querySelector(RS.getSelector(MS,this.activeTab))}get activeTabIndex(){return Array.from(this.querySelectorAll(`.${hy.Item}`)).findIndex((e=>e.classList.contains(pe.Active)))}get scrollViewer(){return this.querySelector(`.${Fe.ClassName}`)}get scrollViewerContentContainer(){return this.tabListElement?T.DomUtils.getNodesByClassName(this.tabListElement,Fe.ContentContainerClassName)[0]:null}get prevButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${hy.ButtonScrollPrev}`)}get nextButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${hy.ButtonScrollNext}`)}get tabsContentElement(){return this.querySelector(`:scope > .${hy.ContentPanel}`)}connectedOrContentChanged(){const e=this.querySelector(`:scope > .${hy.TabList}`);e&&e!==this.tabListElement&&(this.tabListElement=e,this.dispose(),this.subscribeToEvents(),this.initialize(),this.isReady=!0)}disconnectedCallback(){super.disconnectedCallback(),this.disposeEvents(),this.dispose()}disposeEvents(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.unsubscribe=null,null===(t=this.unsubscribeFocusUtils)||void 0===t||t.call(this),this.unsubscribeFocusUtils=null}subscribeToEvents(){if(!this.tabListElement)return;if(this.disposeEvents(),this.scrollMode!==HS.NavButtons&&this.scrollMode!==HS.Swipe)return;const e=this.scrollViewerContentContainer;null==e||e.addEventListener("scroll",this.onScrollHandler),null==e||e.addEventListener("click",this.onClickHandler);const t=this.prevButton;null==t||t.addEventListener("click",this.onPrevButtonClickHandler);const n=this.nextButton;null==n||n.addEventListener("click",this.onNextButtonClickHandler),this.unsubscribe=()=>{null==e||e.removeEventListener("scroll",this.onScrollHandler),null==e||e.removeEventListener("click",this.onClickHandler),null==t||t.removeEventListener("click",this.onPrevButtonClickHandler),null==n||n.removeEventListener("click",this.onNextButtonClickHandler)},this.unsubscribeFocusUtils=Hn(this.tabListElement)}dispose(){this.isReady=!1,this.updateOverflowStateTimeout&&(clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=0),this.mainElementContentWidthSubscription&&rn(this.mainElementContentWidthSubscription),this.contentPanelWidthSubscription&&rn(this.contentPanelWidthSubscription),this.neededCheckSize=!1}activate(e){if(!e)return;const t=document.querySelector(RS.getSelector(MS,e));if(null!=(null==t?void 0:t.parentNode)){const e=this.listElement;for(let n=0;n<this.tabCount;n++)if(PS.getChildByClassName(e.children[n],hy.Item)===t){this.scrollToIndex(n);break}}}onScroll(e){this.updateOverflowState()}initialize(){qt((()=>{this.prepareScrollMode(),T.DomUtils.addClassName(this.tabListElement,FS.Loaded),this.checkForOverflow()})),this.mainElementContentWidthSubscription=on(this.tabListElement,(e=>{this.currentSize.width===e.width&&this.currentSize.height===e.height||(this.currentSize={width:e.width,height:e.height},this.checkForOverflow())}));const e=this.tabsContentElement;e&&(this.contentPanelWidthSubscription=on(e,(e=>{this.contentSize.width===e.width&&this.contentSize.height===e.height||(this.contentSize={width:e.width,height:e.height},this.onContentElementResize())})))}onContentElementResize(){this.updateSelectedContent()}updated(e){this.isReady&&((e.has("scrollMode")||e.has("tabCount")||e.has("sizeMode")||e.has("tabsPosition"))&&(qt((()=>{this.prepareScrollMode(),this.checkForOverflow()})),this.subscribeToEvents()),e.has("activeTab")&&this.activate(this.activeTab),(e.has("renderMode")||e.has("activeTab"))&&this.updateSelectedContent(this.dispatchActiveTabChangedEvent.bind(this)),super.updated(e))}dispatchActiveTabChangedEvent(){this.dispatchEvent(new py)}queryUpdateOverflowState(e){this.updateOverflowStateTimeout&&clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=setTimeout((()=>{this.updateOverflowStateTimeout=0,this.updateOverflowState()}),e)}prepareScrollMode(){this.neededCheckSize=!!this.tabListElement&&this.scrollMode===HS.NavButtons}checkForOverflow(){if(!this.neededCheckSize||!this.tabListElement)return;const e=this.isVertical?this.tabListElement.getBoundingClientRect().height-Wt(this.tabListElement):this.tabListElement.getBoundingClientRect().width-zt(this.tabListElement);this.togleScrollState(e-this.calcNeededSize()<=-1)}togleScrollState(e){qt((()=>{T.DomUtils.toggleClassName(this.tabListElement,hy.HasOverflow,e),this.canTrackScroll=e,e&&this.queryUpdateOverflowState()}))}calcNeededSize(){var e;const t=null===(e=this.tabListElement)||void 0===e?void 0:e.getElementsByTagName("ul")[0];if(!t)return 0;let n=this.isVertical?Wt(t):zt(t);const i=t.getElementsByTagName("li");for(const e of i)n+=this.isVertical?e.getBoundingClientRect().height+Vt(e):e.getBoundingClientRect().width+_t(e);return n}updateOverflowState(){if(!this.canTrackScroll||this.scrollMode!==HS.NavButtons)return;if(!this.findScrollContainer())return;const e=this.scrollViewerContentContainer;if(!e)return;const[t,n]=this.getScrollAccess(e),i=this.nextButton,s=this.prevButton;en((()=>{i&&Ot(i,"disabled",!n),s&&Ot(s,"disabled",!t)}))}getScrollAccess(e){if(this.isVertical){const t=Math.ceil(e.scrollTop);return[t>0,Math.round(e.scrollHeight-t)-Math.round(e.clientHeight)>RS.minScrollStep]}{const t=Math.ceil(e.scrollLeft);return[t>0,Math.round(e.scrollWidth-t)-Math.round(e.clientWidth)>RS.minScrollStep]}}findScrollContainer(){if(!this.scrollContainerElement){if(!this.tabListElement)return null;this.scrollContainerElement=PS.elementMatchesSelector(this.tabListElement,`.${hy.Scrollable}`)?this.tabListElement:this.tabListElement.querySelector(`.${hy.Scrollable}`)}return this.scrollContainerElement}onScrollToPrev(e){e.preventDefault();const t=this.findExtremeTabItemIndex(NS.Back);this.scrollToIndex(t,NS.Back)}onScrollToNext(e){e.preventDefault();const t=this.findExtremeTabItemIndex(NS.Forward);this.scrollToIndex(t,NS.Forward)}onClick(e){let t=e.target;for(;t;){if(Dt(t,hy.Item)){const e=t.getAttribute(MS);e&&this.activate(e);break}t=t.parentElement}}getTabElement(e){return this.listElement.querySelectorAll(":scope > li > ."+hy.Item)[e]}scrollToIndex(e,t=NS.None){var n,i;if(e>-1&&this.scrollViewerContentContainer){const s=e=>e.closest("li"),r=this.getTabElement(e),o=null===(n=s(r))||void 0===n?void 0:n.nextElementSibling,a=null===(i=s(r))||void 0===i?void 0:i.previousElementSibling;this.scrollToTab(r,a,o,t)}}findExtremeTabItemIndex(e){if(e===NS.None)return-1;const t=this.scrollViewerContentContainer;if(!t)return-1;const n=this.listElement.querySelectorAll(":scope > li > ."+hy.Item),i=this.getContentFrameRect(t),[s,r,o]=e===NS.Forward?[0,this.tabCount,1]:[this.tabCount-1,-1,-1];for(let t=s;t!==r;t+=o){const s=n[t].getBoundingClientRect();if(this.isVertical){if(e===NS.Back&&s.top<i.top||e===NS.Forward&&s.bottom>i.bottom)return t}else if(e===NS.Back&&s.left<i.left||e===NS.Forward&&s.right>i.right)return t}return-1}getContentFrameRect(e){const t=T.DomUtils.getCurrentStyle(e),n=e.getBoundingClientRect();return new st(n.left+T.DomUtils.pxToInt(t.paddingLeft)+T.DomUtils.pxToInt(t.borderLeftWidth),n.top+T.DomUtils.pxToInt(t.paddingTop)+T.DomUtils.pxToInt(t.borderTopWidth),n.width-T.DomUtils.pxToInt(t.paddingRight)-T.DomUtils.pxToInt(t.borderRightWidth),n.height-T.DomUtils.pxToInt(t.paddingBottom)-T.DomUtils.pxToInt(t.borderBottomWidth))}scrollToTab(e,t,n,i){const s=this.scrollViewerContentContainer;if(!s)return;const r=LS.calculate(i,this.isVertical,this.getContentFrameRect(s),rt.fromDomRect(e.getBoundingClientRect()),t?rt.fromDomRect(t.getBoundingClientRect()):void 0,n?rt.fromDomRect(n.getBoundingClientRect()):void 0);0!==r?this.isVertical?s.scrollTop+=r:s.scrollLeft+=r:s.scrollLeft>0&&i===NS.Back&&(this.isVertical?s.scrollTop=0:s.scrollLeft=0)}updateSelectedContent(e=null){const t=this.tabsContentElement;if(t){const n=this.activeTab?t.querySelector(RS.getSelector(kS,this.activeTab)):null,i=Array.from(t.querySelectorAll(`:scope > .${hy.Content}${this.activeTab?`:not(${RS.getSelector(kS,this.activeTab)})`:""}`));qt((()=>{if(n&&(n.style.cssText="",n.setAttribute("data-dx-tab-loaded","")),this.renderMode!==TS.Default){const e=`position:absolute;visibility:hidden;left:-10000px;top:-10000px;width:${t.clientWidth}px;height:${t.clientHeight}px`;i.forEach((t=>{t.style.cssText=e}))}t&&T.DomUtils.addClassName(t,FS.Loaded),e&&setTimeout((()=>e()),0)}))}}static getSelector(e,t){return`[${e}=${t}]`}};$S.minScrollStep=1,C([xs({type:Number,attribute:KS})],$S.prototype,"tabCount",void 0),C([xs({type:HS,attribute:OS})],$S.prototype,"scrollMode",void 0),C([xs({type:TS,attribute:_S})],$S.prototype,"renderMode",void 0),C([xs({attribute:VS})],$S.prototype,"activeTab",void 0),C([xs({attribute:zS})],$S.prototype,"sizeMode",void 0),C([xs({attribute:WS})],$S.prototype,"tabsPosition",void 0),$S=RS=C([Es(uy.Tabs)],$S);class GS extends On{constructor(e,t,n){super(t,n),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope.${hy.Item}`)}}class qS extends On{constructor(e,t,n){super(t,n),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope .${hy.Item}`)}createItemStrategy(e){return new GS(this.tabs,this.navigator,e)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);if(this.tabs.isVertical){if(t===Ie.KeyCode.Down)return this.moveForward(e),!0;if(t===Ie.KeyCode.Up)return this.moveBackward(e),!0}else{if(t===Ie.KeyCode.Right)return this.moveForward(e),!0;if(t===Ie.KeyCode.Left)return this.moveBackward(e),!0}return t===Ie.KeyCode.Tab?(e.shiftKey?this.leaveBackward():this.leaveForward(),!0):(t===Ie.KeyCode.Delete&&this.performShortcutEvent(e),!1)}moveForward(e){this.moveToNextItem(!0),this.performShortcutEvent(e)}moveBackward(e){this.moveToPrevItem(!0),this.performShortcutEvent(e)}getShortcutContext(){return{TabId:this.getSelectedTabId()}}focusSelectedItem(){var e;((null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(hy.Prefix))||this.isTabActive())&&bn.focusElement(this.selectedItemElement)}isTabActive(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(hy.Item)}getSelectedTabId(){const e=this.getItem(this.selectedItemIndex);return null==e?void 0:e.getAttribute(MS)}updateSelectedItemByChildElement(e,t=null){if(e===this.targetElement){const e=this.tabs.getActiveTab(),t=this.items.findIndex((t=>t===e));this.updateSelectedItemByIndex(this.validateItemIndex(t))}else super.updateSelectedItemByChildElement(e,t)}}let YS=class extends Ja{constructor(){super(...arguments),this.tabs=null,this.tabId=""}connectedOrContentChanged(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){this.tabs=document.querySelector(`#${this.tabId}`);const e=new qS(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){const e=new qS(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}};var XS;C([xs({attribute:"data-dxtabs-id"})],YS.prototype,"tabId",void 0),YS=C([Es(uy.TabList)],YS),function(e){e.Left="left",e.Right="right",e.FitPositionTarget="fitpositiontarget"}(XS||(XS={}));let JS=class extends mB{constructor(){super(...arguments),this.windowAlignment=XS.Left}get dropFromRight(){return this.windowAlignment===XS.Right}createKeyboardNavigationStrategy(){return new Fa(this.keyboardNavigator,this)}};var jS,ZS;C([xs({type:String,attribute:"window-alignment"})],JS.prototype,"windowAlignment",void 0),JS=C([Es("dxbl-itemlist-dropdown")],JS);class ex{}jS=ex,ex.prefix="dxbl",ex.invisible=`${jS.prefix}-invisible`,ex.menu=`${jS.prefix}-menu`,ex.menuItem=`${jS.prefix}-menu-item`,ex.menuTitle=`${jS.menu}-title`,ex.menuListItem=`${jS.prefix}-menu-list-item`,ex.menuItemTemplate=`${jS.prefix}-menu-item-tmpl`,ex.menuBar=`${jS.prefix}-menu-bar`,ex.menuLoading=`${jS.prefix}-menu-loading`,ex.menuItemTextContainer=`${jS.prefix}-menu-item-text-container`,ex.navigation=`${jS.prefix}-menu-item-list`,ex.menuItemTextHiddenClass=`${jS.prefix}-menu-text-hidden`,ex.menuListItemHiddenClass=`${jS.prefix}-menu-list-item-hidden`,ex.dropdown=`${jS.prefix}-menu-dropdown`,ex.dropdownItem=`${jS.prefix}-menu-dropdown-item`,ex.menuNav=`${jS.prefix}-menu-nav`,ex.menuNavBar=`${jS.prefix}-menu-nav-bar`,ex.subMenuTemplate=`${jS.prefix}-sub-menu-template`;class tx{}ZS=tx,tx.prefix="dxbl",tx.menuComponentName=ZS.prefix+"-menu",tx.menuItemComponentName=ZS.menuComponentName+"-item",tx.menuNavBarComponentName=ZS.menuComponentName+"-navbar",tx.menuItemsContainerSelector=`.${ex.menuBar} ul.${ex.navigation}`,tx.menuItemDataIdAttribute="data-dxmenu-item-id";let nx=class extends Ja{constructor(){super(),this._prevActiveElement=null,this.adaptivePriority=-1,this.canCrop=!1,this.isVisible=!1,this._onButtonFocusInHandler=this.onButtonFocusIn.bind(this),this.subscribeToEvents()}desktopMenuSelector(e){return`${tx.menuComponentName}:has(.${ex.menuBar} > ul > li[${tx.menuItemDataIdAttribute}=${e}])`}mobileMenuSelector(e){return`${tx.menuComponentName}:has(ul > li[${tx.menuItemDataIdAttribute}=${e}])`}get menu(){return this.getClosestMenu()}getClosestMenu(){return document.querySelector(`${this.desktopMenuSelector(this.id)}, ${this.mobileMenuSelector(this.id)}`)}connectedCallback(){var e;super.connectedCallback();const t=this.menu;t&&t.isDOMAttached&&(null===(e=this.menu)||void 0===e||e.onItemConnected())}disconnectedCallback(){var e;null===(e=this.menu)||void 0===e||e.onItemDisconnected(),super.disconnectedCallback()}isDropDownItem(e){return e.classList.contains(ex.dropdownItem)}subscribeToEvents(){this.addEventListener("pointerdown",(e=>{e.target instanceof HTMLElement&&this.isDropDownItem(e.target)&&(document.activeElement instanceof HTMLElement&&(this._prevActiveElement=document.activeElement),e.target.addEventListener("focusin",this._onButtonFocusInHandler))}))}onButtonFocusIn(e){e.currentTarget&&(e.currentTarget.removeEventListener("focusin",this._onButtonFocusInHandler),this._prevActiveElement?this._prevActiveElement.focus():e.currentTarget.blur())}};C([xs({type:Number,attribute:"adaptive-priority"})],nx.prototype,"adaptivePriority",void 0),C([xs({type:Boolean,attribute:"can-crop"})],nx.prototype,"canCrop",void 0),nx=C([Es(tx.menuItemComponentName)],nx);class ix extends Hr{constructor(){super(),this.boundOnDropDownElementChangedHandler=this.onDropDownElementChanged.bind(this),this.boundOnDropDownShownHandler=this.onDropDownShown.bind(this),this.boundOnDropDownClosedHandler=this.onDropDownClosed.bind(this),this.boundOnDropDownPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.dropDownPortal=null,this._dropDownElement=null,this._adaptiveDropDownElement=null}get dropDownElement(){return this._dropDownElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}connectedCallback(){super.connectedCallback(),this.ensureDropDownInfrastructure(),this.addEventListener(dr.eventName,this.boundOnDropDownElementChangedHandler)}disconnectedCallback(){this.removeEventListener(dr.eventName,this.boundOnDropDownElementChangedHandler),this.disposeDropDownInfrastructure(),super.disconnectedCallback()}render(){return ns`
            <slot @slotchange="${this.boundSlotChangedHandler}">
            </slot>
        `}processCapturedKeyDownAsync(e,t){return this.invokeKeyDownServerCommand(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)?(t.handled=!0,Promise.resolve()):super.processCapturedPointerAsync(e,t)}canHandlePointerDown(e){return!1}invokeKeyDownServerCommand(e){return!1}onSlotChanged(e){this.disposeDropDownInfrastructure(),this.ensureDropDownInfrastructure()}getDropDownPortal(){if(!this.shadowRoot)return null;const e=this.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>lt(e)))}onDropDownElementChanged(e){this.dropDownPortal||this.ensureDropDownInfrastructure(),H.getOriginalSource(e)===this.dropDownPortal&&(this.disposeDropDownElement(),this.ensureDropDownElement())}onDropDownShown(e){this.dropDownElement&&dt(this.dropDownElement)&&this.addLogicalChild(this.dropDownElement)}onDropDownClosed(e){this.dropDownElement&&dt(this.dropDownElement)&&this.removeLogicalChild(this.dropDownElement)}onDropDownPortalElementsChanged(e){this.ensureDropDownElement()}ensureDropDownInfrastructure(){var e;this.dropDownPortal=this.getDropDownPortal(),null===(e=this.dropDownPortal)||void 0===e||e.addEventListener(dr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.ensureDropDownElement()}ensureDropDownElement(){var e,t,n;this.dropDownPortal&&(this._dropDownElement=null===(e=this.dropDownPortal)||void 0===e?void 0:e.popup,null===(t=this._dropDownElement)||void 0===t||t.addEventListener(ro.eventName,this.boundOnDropDownShownHandler),null===(n=this._dropDownElement)||void 0===n||n.addEventListener(oo.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement&&ht(this._dropDownElement)&&(this._adaptiveDropDownElement=this._dropDownElement))}disposeDropDownInfrastructure(){var e;null===(e=this.dropDownPortal)||void 0===e||e.removeEventListener(dr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.dropDownPortal=null,this._adaptiveDropDownElement=null,this.disposeDropDownElement()}disposeDropDownElement(){var e,t;null===(e=this._dropDownElement)||void 0===e||e.removeEventListener(ro.eventName,this.boundOnDropDownShownHandler),null===(t=this._dropDownElement)||void 0===t||t.removeEventListener(oo.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement=null}}let sx=class extends ix{constructor(){super(),this.desiredWidth=null,this.dropDownWidthSourceResizeObserver=new ResizeObserver(this.onDropDownWidthSourceSizeChanged.bind(this))}connectedCallback(){super.connectedCallback(),this.observeForDropDownWidthSourceElementSize()}disconnectedCallback(){this.dropDownWidthSourceResizeObserver.disconnect(),super.disconnectedCallback()}ensureDropDownElement(){super.ensureDropDownElement(),this.updateDropDownDesiredWidth()}onDropDownWidthSourceSizeChanged(e,t){if(e.length<1)return;this.desiredWidth=e[0].contentRect.width+"px",this.updateDropDownDesiredWidth()}updateDropDownDesiredWidth(){this.dropDownElement&&(this.dropDownElement.desiredWidth=this.desiredWidth)}observeForDropDownWidthSourceElementSize(){this.dropDownWidthSourceResizeObserver.disconnect();const e=this.getDropDownWidthSourceElement();e&&this.dropDownWidthSourceResizeObserver.observe(e)}getDropDownWidthSourceElement(){return this}};sx=C([Es(tx.menuNavBarComponentName)],sx);class rx extends CustomEvent{constructor(e){super(rx.eventName,{bubbles:!0,composed:!0,detail:new ox(e)})}}rx.eventName=`${tx.menuComponentName}.collapse-changed`;class ox{constructor(e){this.collapsed=e}}Ct.register(rx.eventName,(e=>e.detail));class ax{constructor(e){var t;this.menuItem=e,this.id=null!==(t=e.id)&&void 0!==t?t:"",this.width=-1,this.adaptivePriority=e.adaptivePriority,this.canCrop=e.canCrop,this.textElement=null,this.textWidth=-1,this.container=e.closest(`[data-dxmenu-item-id="${this.id}"]`),this.initialize()}canCollapse(){return this.canCrop&&null!==this.textElement}canReduce(){return this.canCollapse()&&!T.DomUtils.hasClassName(this.textElement,ex.menuItemTextHiddenClass)}canIncrease(){return this.canCollapse()&&T.DomUtils.hasClassName(this.textElement,ex.menuItemTextHiddenClass)}showTextElement(){this.toggleCssClass(this.textElement,ex.menuItemTextHiddenClass,!1),this.toggleCssClass(this.container,ex.menuListItemHiddenClass,!1)}hideTextElement(){this.toggleCssClass(this.textElement,ex.menuItemTextHiddenClass,!0),this.toggleCssClass(this.container,ex.menuListItemHiddenClass,!0)}initialize(){let e=0;this.container&&(e=this.calculateChildrenOffsetWidth(this.container));const t=this.menuItem.querySelector(`*:not(${X})`);if(t){e+=this.calculateChildrenOffsetWidth(t);for(let n=0;n<t.children.length;n++){const i=t.children[n],s=this.calculateElementWidth(i);i.matches(`div.${ex.menuItemTextContainer}`)&&(this.textElement=i,this.textWidth=s),e+=s}}this.width=e}isHTMLElement(e){return!!e.offsetWidth}calculateElementWidth(e){const t=getComputedStyle(e);return(this.isHTMLElement(e)?e.offsetWidth:e.getBoundingClientRect().width)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)}calculateChildrenOffsetWidth(e){const t=T.DomUtils.getCurrentStyle(e);return parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)}toggleCssClass(e,t,n){e&&e.classList.toggle(t,n)}}class lx{constructor(e,t){this.width=e,this.minWidth=t}}class Ax{constructor(e){this._currentWidth=0,this._itemsWidth=new lx(0,0),this._itemsOffset=0,this._collapseToHamburgerWidth=-1,this._menuItemInfos=[],this._resizeObserver=null,this._menuView=e}get isCollapsed(){return this._menuView.isCollapsed}get isVertical(){return this._menuView.isVertical}get canCollapse(){return this._menuView.canCollapse}get collapseToIcons(){return this._menuView.collapseToIcons}get collapseToIconsAll(){return this._menuView.collapseToIconsAll}get collapseToHamburgerMenu(){return this._menuView.collapseToHamburgerMenu}async initialize(e,t){this.unsubsribeFromSizeChanges(),void 0!==t&&this.canCollapse&&(this.collapseToIcons||this.collapseToIconsAll||this.collapseToHamburgerMenu)?(this._menuItemInfos=this.createMenuItemInfos(e),this._currentWidth=t,this.isCollapsed||(this.isVertical?(this._itemsOffset=0,this._itemsWidth=new lx(Math.max(...this._menuItemInfos.map((e=>e.width))),0),this._collapseToHamburgerWidth=-1):(this._itemsOffset=this._menuView.itemsOffset,this._itemsWidth=new lx(this.calculateItemsWidth(),this.calculateItemsMinWidth()),this._collapseToHamburgerWidth=this.collapseToIcons||this.collapseToIconsAll?this._itemsWidth.minWidth+this._itemsOffset:this._itemsWidth.width+this._itemsOffset)),this.resize(this._currentWidth),this.subscribeToSizeChanges()):(this.isCollapsed?this._menuView.onCollapseChanged(!1):this.increaseAllItems(),this._menuItemInfos=[])}resize(e){if(this.isCollapsed)(e>this._collapseToHamburgerWidth||!this.collapseToHamburgerMenu)&&this._menuView.onCollapseChanged(!1);else{const t=e-this._currentWidth;if(this.isVertical)this.collapseToIconsAll&&(t<=0&&this._itemsWidth.width>e?this.reduceAllItems():this._itemsWidth.width<e&&this.increaseAllItems());else{if(this.collapseToIcons){let n=this._itemsOffset;this._menuItemInfos.forEach((e=>{n+=e.width,e.canIncrease()&&(n-=e.textWidth)})),t<=0&&n>e?this.reduceItems(e,n):t>=0&&this.increaseItems(e,n)}else if(this.collapseToIconsAll){const n=this._itemsWidth.width+this._itemsOffset;t<=0&&n>e?this.reduceAllItems():t>=0&&n<e&&this.increaseAllItems()}else this.increaseAllItems();this.collapseToHamburgerMenu&&t<=0&&e<this._collapseToHamburgerWidth&&this._menuView.onCollapseChanged(!0)}}this._currentWidth=e}dispose(){this.unsubsribeFromSizeChanges(),this._menuItemInfos=[]}subscribeToSizeChanges(){this.subscribeToRootElementSizeChange()}unsubsribeFromSizeChanges(){this.unsubscribeFromRootElementSizeChange()}subscribeToRootElementSizeChange(){this._resizeObserver=new ResizeObserver((e=>{const t=e[0];t&&this.resize(t.contentRect.width)})),this._resizeObserver.observe(this._menuView.root)}unsubscribeFromRootElementSizeChange(){var e;null===(e=this._resizeObserver)||void 0===e||e.disconnect(),this._resizeObserver=null}createMenuItemInfos(e){const t=[];return e&&(e.forEach((e=>{t.push(new ax(e))})),t.sort(((e,t)=>e.adaptivePriority-t.adaptivePriority))),t}calculateItemsWidth(){let e=0;return this._menuItemInfos.forEach((t=>e+=t.width)),e}calculateItemsMinWidth(){let e=0;return this._menuItemInfos.forEach((t=>{e+=t.width,t.canCollapse()&&(e-=t.textWidth)})),e}reduceItems(e,t){for(let n=this._menuItemInfos.length-1;n>=0&&t>e;n--){const e=this._menuItemInfos[n];e.canReduce()&&(e.hideTextElement(),t-=e.textWidth)}}increaseItems(e,t){for(let n=0;n<this._menuItemInfos.length;n++){const i=this._menuItemInfos[n];if(i.canIncrease()){if(t+i.textWidth>e)break;i.showTextElement(),t+=i.textWidth}}}reduceAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canReduce()&&t.hideTextElement()}}increaseAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canIncrease()&&t.showTextElement()}}}class dx{constructor(){this._objCaptured=new Br,this._objReleased=new Br,this._obj=null}get subject(){return this._obj}capture(e){if(null==e)throw new Error(`Value cannot be ${e}`);null!==this._obj&&this._objReleased.tryReject(`The object ${this._obj} was not released.`),this._objReleased=new Br,this._obj=e,this._objCaptured.tryResolve(e)}release(){const e=this._obj;this._obj=null,e&&this._objReleased.tryResolve(e),this._objCaptured=new Br}waitCapture(){return this._objCaptured.promise}waitRelease(){return this._objReleased.promise}}class cx{constructor(){this._selectedItemIndices=[],this._initialSelectedItem=null,this._initNewState=!1,this._selectedItemIndex=0}get currentLevel(){return this._selectedItemIndices.length}get selectedItemIndex(){return this._selectedItemIndex}updateState(e,t){var n;this._initNewState?(this._selectedItemIndices.push(e),this._selectedItemIndex=this._initialSelectedItem===fx.Last?t-1:0):this._selectedItemIndex=null!==(n=this._selectedItemIndices.pop())&&void 0!==n?n:e}moveToNextLevel(e){this._initNewState=!0,this._initialSelectedItem=e}moveToPrevLevel(){this._initNewState=!1}clearState(){this._selectedItemIndices=[],this._selectedItemIndex=0,this._initNewState=!1,this._initialSelectedItem=fx.First}}class hx{constructor(){this.allowCount=0}get Allowed(){return this.allowCount>0}allow(){this.allowCount++}disallow(){this.Allowed&&this.allowCount--}reset(){this.allowCount=0}doAllowedAction(e){this.allow();try{e()}finally{this.disallow()}}doAllowedFunc(e){this.allow();try{return e()}finally{this.disallow()}}doIfAllowed(e){this.Allowed&&e()}}function ux(e){return e&&"hasPopup"in e.dataset}function px(e){return!!e&&"expanded"in e.dataset}function mx(e,t){return e.classList.contains(t)}function gx(e){return e.isConnected&&e.matches(":scope:focus-within")}var Cx,fx;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Execute=2]="Execute"}(Cx||(Cx={}));class vx extends CustomEvent{constructor(e){super(vx.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}vx.eventName="dxbl-dropdown.action-request",Ct.register(vx.eventName,(e=>e.detail)),function(e){e[e.First=0]="First",e[e.Last=1]="Last"}(fx||(fx={}));class bx extends Ea{canSwitchToNestedContentMode(){return!0}isImmediatelyClickEnabled(){return!1}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}handleKeyDown(e){return!(Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&!this.nestedContentSelected)&&(!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e))}focusFirstItem(){this.focusItem(0)}focusLastItem(){this.focusItem(this.itemCount-1)}focusItem(e){Fn(this.targetElement),this.updateSelectedItemByIndex(e),this.selectedItemElement.hasAttribute("data-is-templated-item")?this.switchToNestedContent():this.focusSelectedItem()}doClick(e,t){this.raiseClickEvent(e,t.ctrlKey,t.metaKey,t.shiftKey)}onPopupShown(){Dn(this.targetElement),super.onPopupShown()}}class wx extends bx{constructor(e,t,n=!1){super(e,t,n),this._subMenuHolder=new dx,this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._shouldRestoreFocus=!1,this.subscribeToEvents()}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToNextItem(!0),!0);case Ie.KeyCode.Up:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToPrevItem(!0),!0);case Ie.KeyCode.Home:return this.selectItem(0),!0;case Ie.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.selectedItemElement===this.targetElement&&this.switchToNestedContent()||this.doAction(e),!0;case Ie.KeyCode.Right:return this.handleRightKey(e);case Ie.KeyCode.Left:return this.handleLeftKey(e);default:return!1}}handleRightKey(e){return!(!ux(this.selectedItemElement)||px(this.selectedItemElement))&&(this.openSubMenu(fx.First),!0)}handleLeftKey(e){return this.closeSelf(Ie.KeyCode.Left)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Mn.None&&this._shouldRestoreFocus&&this.restoreFocus(),this._shouldRestoreFocus=!1}restoreFocus(){this.focusSelectedItem()}onSubMenuShown(e){this._subMenuHolder.capture(e),this._shouldRestoreFocus=this._shouldRestoreFocus||gx(this.targetElement)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Collapse))}subscribeToEvents(){this.targetElement.addEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createSubMenuStrategy(e,t)}}}const yx=`.${ex.menuItem} > .dxbl-btn, .${ex.menuItem} > .dxbl-menu-item-tmpl`,Bx=`.${ex.menuTitle}`,Ex="data-keyboard-navigator-is-ready",Ix="data-is-templated-item",Sx="dxbl-btn-split-dropdown",xx=`.${$l.SplitButton}`;class Dx extends On{initialize(){super.initialize(),this.targetElement.setAttribute(Ex,"")}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}isImmediatelyClickEnabled(){return!1}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}isTitle(e){return e.classList.contains(ex.menuTitle)}needToAddTitle(){const e=this.targetElement.querySelector(Bx);return null!=e&&e.querySelectorAll(k).length>0}handleTabKeyDown(e){return e.shiftKey?this.selectedItemIndex>0&&this.isTitle(this.items[0])?this.selectItem(0):this.leaveBackward():this.isTitle(this.selectedItemElement)?this.selectItem(this.selectedItemIndex+1):this.leaveForward(),!0}}class Fx extends Dx{constructor(e,t){super(e,t),this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._subMenuHolder=new dx,this._shouldRestoreFocus=!1,this.subscribeToEvents()}get shouldRestoreFocus(){return this._shouldRestoreFocus}set shouldRestoreFocus(e){this._shouldRestoreFocus=e}hasMenu(){return ux(this.selectedItemElement)||mx(this.selectedItemElement,Sx)}isMenuExpanded(){return px(this.selectedItemElement)||mx(this.selectedItemElement,Sx)&&px(this.selectedItemElement.closest(xx))}subscribeToEvents(){this.targetElement.addEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}onSubMenuShown(e){this.tryAddLogicalChild(e.targetElement),this._subMenuHolder.capture(e),this.shouldRestoreFocus=this.shouldRestoreFocus||gx(this.targetElement)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Mn.None&&this.shouldRestoreFocus&&this.focusSelectedItem(),this.shouldRestoreFocus=!1,this.tryRemoveLogicalChild(e.targetElement)}closeSubMenu(){}tryAddLogicalChild(e){ct(this.targetElement)&&dt(e)&&(e.logicalParent||this.targetElement.addLogicalChild(e))}tryRemoveLogicalChild(e){ct(this.targetElement)&&dt(e)&&e.logicalParent===this.targetElement&&this.targetElement.removeLogicalChild(e)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();e===fx.First?t.focusFirstItem():t.focusLastItem()}}class Tx extends wx{constructor(e,t,n,i,s=!1){super(e,t,s),this._focusSemaphore=new hx,this._menuItemSelector=n,this._parentStrategy=i}get parentStrategy(){return this._parentStrategy}get menuItemSelector(){return this._menuItemSelector}queryItems(){return this.queryItemsBySelector(this._menuItemSelector)}doAction(e){this.doClick(this.selectedItemElement,e),ux(this.selectedItemElement)&&this.focusSubMenuItemAsync(fx.First)}handleKeyDown(e){return this._focusSemaphore.doAllowedFunc((()=>Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Right&&this.subMenuStrategy&&gx(this.targetElement)?(this.subMenuStrategy.focusFirstItem(),!0):super.handleKeyDown(e)))}openSubMenu(e){this.openSubMenuAsync(e)}async openSubMenuAsync(e){this.requestSubMenuOpen(),await this.focusSubMenuItemAsync(e)}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();Fn(t.targetElement),e===fx.Last?t.focusLastItem():t.focusFirstItem()}closeSubMenu(){this.selectedItemElement.dispatchEvent(new vx(Cx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}focusFirstItem(){this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():super.focusFirstItem()}focusLastItem(){this.subMenuStrategy?this.subMenuStrategy.focusLastItem():super.focusLastItem()}focusItem(e){this._focusSemaphore.doAllowedAction((()=>{super.focusItem(e)}))}restoreFocus(){this._focusSemaphore.doAllowedAction((()=>{super.restoreFocus()}))}focusSelectedItem(){this._focusSemaphore.doIfAllowed((()=>{super.focusSelectedItem()}))}hasTransitContainer(e){return e.hasAttribute(Ix)}findFocusableElements(){return bn.findFocusableElements(this.selectedItemElement).filter((e=>!e.classList.contains("dxbl-dropdown-dialog")))}leaveTransitContainer(e){this.parentStrategy.closeSubMenu()}}class Hx extends Tx{createSubMenuStrategy(e,t){return new Ux(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return!1}}class Ux extends Tx{createSubMenuStrategy(e,t){return new Ux(e,t,this.menuItemSelector,this)}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}var Qx;!function(e){e[e.Unknown=0]="Unknown",e[e.MoveToNextItem=2]="MoveToNextItem",e[e.MoveToPrevItem=4]="MoveToPrevItem",e[e.MoveToFirstItem=8]="MoveToFirstItem",e[e.MoveToLastItem=16]="MoveToLastItem",e[e.OpenSubMenu=32]="OpenSubMenu",e[e.Execute=64]="Execute",e[e.Leave=128]="Leave"}(Qx||(Qx={}));class Px extends Fx{constructor(e,t){super(e,t),this._keyCodeToCommandMap=this.createKeyCodeToCommandMap()}get menuItemSelector(){return yx}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${yx}, ${Bx}`):this.queryItemsBySelector(yx)}getCommands(e){var t;return null!==(t=this._keyCodeToCommandMap.get(e))&&void 0!==t?t:Qx.Unknown}createPopupStrategy(e,t){return new Hx(e,t,yx,this,this.hasTransitContainer(t))}hasTransitContainer(e){return e.hasAttribute(Ix)}createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(this.getCommands(Ie.KeyUtils.getEventKeyCode(e))){case Qx.MoveToNextItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToNextItem():this.moveToNextItem(!0),!0;case Qx.MoveToPrevItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToPrevItem():this.moveToPrevItem(!0),!0;case Qx.OpenSubMenu|Qx.MoveToLastItem:return!(!ux(this.selectedItemElement)||!gx(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusLastItem():this.openSubMenuAndFocusItem(fx.Last),!0);case Qx.OpenSubMenu|Qx.MoveToFirstItem:return!(!ux(this.selectedItemElement)||!gx(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():this.openSubMenuAndFocusItem(fx.First),!0);case Qx.MoveToFirstItem:return this.isTitle(this.items[0])?this.itemCount>1&&this.selectItem(1):this.selectItem(0),!0;case Qx.MoveToLastItem:return this.isTitle(this.items[this.itemCount-1])?this.itemCount>1&&this.selectItem(this.itemCount-2):this.selectItem(this.itemCount-1),this.selectItem(this.itemCount-1),!0;case Qx.Execute:return this.isTitle(this.selectedItemElement)||this.doAction(e),!0;case Qx.Leave:return this.subMenuStrategy&&this.requestSubMenuClose(),this.handleTabKeyDown(e);default:return!1}}doAction(e){this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),ux(this.selectedItemElement)&&this.focusSubMenuItemAsync(fx.First)}closeSubMenu(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose(),this.moveToPrevItem(!0),this.requestSubMenuOpen()}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose(),this.moveToNextItem(!0),this.requestSubMenuOpen()}openSubMenuAndFocusItem(e){return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Collapse))}}class Nx extends Px{createKeyCodeToCommandMap(){return new Map([[Ie.KeyCode.Down,Qx.MoveToNextItem],[Ie.KeyCode.Up,Qx.MoveToPrevItem],[Ie.KeyCode.Right,Qx.OpenSubMenu|Qx.MoveToFirstItem],[Ie.KeyCode.Left,Qx.OpenSubMenu|Qx.MoveToLastItem],[Ie.KeyCode.Home,Qx.MoveToFirstItem],[Ie.KeyCode.End,Qx.MoveToLastItem],[Ie.KeyCode.Enter,Qx.Execute],[Ie.KeyCode.Space,Qx.Execute],[Ie.KeyCode.Tab,Qx.Leave]])}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose()}createPopupStrategy(e,t){return new Rx(e,t,yx,this,this.hasTransitContainer(t))}}class Rx extends Tx{createSubMenuStrategy(e,t){return new Ux(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}class Lx extends Px{createKeyCodeToCommandMap(){return new Map([[Ie.KeyCode.Right,Qx.MoveToNextItem],[Ie.KeyCode.Left,Qx.MoveToPrevItem],[Ie.KeyCode.Down,Qx.OpenSubMenu|Qx.MoveToFirstItem],[Ie.KeyCode.Up,Qx.OpenSubMenu|Qx.MoveToLastItem],[Ie.KeyCode.Home,Qx.MoveToFirstItem],[Ie.KeyCode.End,Qx.MoveToLastItem],[Ie.KeyCode.Enter,Qx.Execute],[Ie.KeyCode.Space,Qx.Execute],[Ie.KeyCode.Tab,Qx.Leave]])}}class Mx extends Dx{constructor(){super(...arguments),this._levelController=new cx}get menuLevel(){return this._levelController.currentLevel}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${yx}, .${ex.subMenuTemplate}, ${Bx}`):this.queryItemsBySelector(`${yx}, .${ex.subMenuTemplate}`)}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:return this.moveToNextItem(!0),!0;case Ie.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.isTitle(this.selectedItemElement)||(this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),this.selectedItemElement.hasAttribute("data-header")?this.onMoveToPrevLevel():ux(this.selectedItemElement)&&this.onMoveToNextLevel(fx.First)),!0;case Ie.KeyCode.Right:return!!ux(this.selectedItemElement)&&(this.performShortcutEvent(e),this.onMoveToNextLevel(fx.First),!0);case Ie.KeyCode.Left:return this.menuLevel>0?(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0):ux(this.selectedItemElement)?(this.performShortcutEvent(e),this.onMoveToNextLevel(fx.Last),!0):this.menuLevel>0&&(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0);case Ie.KeyCode.Tab:return this.handleTabKeyDown(e);default:return!1}}getShortcutContext(){const e=this.menuLevel>0||this.needToAddTitle()?this.selectedItemIndex-1:this.selectedItemIndex;return{level:this.menuLevel,selectedItemIndex:e}}onMoveToNextLevel(e){this._levelController.moveToNextLevel(e)}onMoveToPrevLevel(){this._levelController.moveToPrevLevel()}}const kx=`.${ex.menuNav} > .${ex.menuNavBar} > .dxbl-btn`;class Kx extends Fx{createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}createPopupStrategy(e,t){return new Ox(e,t,this)}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${kx}, ${Bx}`):this.queryItemsBySelector(kx)}handleKeyDownCore(e){if(!this.isTitle(this.selectedItemElement))switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Up:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(fx.Last),!0;case Ie.KeyCode.Down:case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(fx.First),!0}return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&(this.performShortcutEvent(e),this.handleTabKeyDown(e))}isImmediatelyClickEnabled(){return!1}}class Ox extends bx{constructor(e,t,n){super(e,t),this._itemIdToParentIdMap=new Map,this._parentStrategy=n}initialize(){super.initialize(),this._itemIdToParentIdMap.clear();const e=this.targetElement.querySelector(`.${ex.navigation}`);e&&this.mapItemsToParent(e,null)}mapItemsToParent(e,t){for(const n of e.children){const e=n.dataset.dxmenuItemId;if(!e)continue;this._itemIdToParentIdMap.set(e,t);const i=Array.from(n.children).find((e=>e instanceof HTMLUListElement));i&&this.mapItemsToParent(i,e)}}queryItems(){return this.queryItemsBySelector(`${yx}, .${ex.subMenuTemplate}`)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);return!(!this.nestedContentSelected&&t===Ie.KeyCode.Tab)&&super.handleKeyDown(e)}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:return this.moveToNextItem(!0),!0;case Ie.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Ie.KeyCode.Home:return this.focusFirstItem(),!0;case Ie.KeyCode.End:return this.focusLastItem(),!0;case Ie.KeyCode.Right:return ux(this.selectedItemElement)&&(px(this.selectedItemElement)?this.moveToNextItem(!0):this.requestSubMenuOpen()),!0;case Ie.KeyCode.Left:if(px(this.selectedItemElement))this.requestSubMenuClose();else{const e=this.getParentNode(this.selectedItemElement);e&&(this.updateSelectedItemByChildElement(e),this.focusSelectedItem())}return!0;case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.doClick(this.selectedItemElement,e),!0;default:return!1}}getParentNode(e){var t;const n=null===(t=e.closest(`.${ex.menuItem}`))||void 0===t?void 0:t.getAttribute("id");if(n){const e=this._itemIdToParentIdMap.get(n);if(e)return this.targetElement.querySelector(`#${e}${yx}`)}return null}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}}var _x;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(_x||(_x={}));let Vx=class extends Ja{constructor(){super(),this._menuItems=[],this._sizeController=null,this._handlePromise=Promise.resolve(),this._keyboardNavigator=null,this._hasVisibleItems=!1,this.isVertical=!1,this.isCollapsed=!1,this.canCollapse=!1,this.collapseToIcons=!1,this.collapseToIconsAll=!1,this.collapseToHamburgerMenu=!1,this.loadMode=!1,this._hasVisibleItems=!1,this.sizeMode=_x.Medium,this.isMobileMode=!1,this._menuItemsChanged=!1,this._firstUpdate=!0,this._intersectionObserver=new IntersectionObserver(this.onItemsIntersectionChanged.bind(this),{root:this,threshold:[0,1]})}onItemConnected(){this.updateItems()}onItemDisconnected(){this.updateItems()}get hasVisibleItems(){return this._hasVisibleItems}set hasVisibleItems(e){this._hasVisibleItems=e,e&&this._menuItemsChanged&&this.showMenuItems()}async showMenuItems(){var e;this._menuItemsChanged=!1;const t=this.offsetWidth;await(null===(e=this._sizeController)||void 0===e?void 0:e.initialize(this._menuItems,t)),this.toggleItemsContainerCssClasses(ex.invisible,!1),this.toggleItemsContainerCssClasses(ex.menuLoading,!1)}updateItems(e=!0){this._menuItems=e?this.collectMenuItems():[],this._intersectionObserver.disconnect(),this._menuItems.forEach((e=>this._intersectionObserver.observe(e))),this._menuItemsChanged=!0}get root(){return this}get items(){return this._menuItems}get itemsOffset(){return this.calculateItemsOffset()}restoreState(){i.setLoaded(this),this.getAttribute("tabindex")||this.initializeKeyboardNavigatior()}connectedCallback(){super.connectedCallback(),this._sizeController=new Ax(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._sizeController)||void 0===e||e.dispose(),this._sizeController=null,this._intersectionObserver.disconnect()}initializeKeyboardNavigatior(){this._keyboardNavigator=this.querySelector(Ln),this._keyboardNavigator&&this._keyboardNavigator.initialize(this,this.createKeyboardStrategy(this._keyboardNavigator))}createKeyboardStrategy(e){return this.isMobileMode?this.isVertical?new Mx(e,this):new Kx(e,this):this.isVertical?new Nx(e,this):new Lx(e,this)}async getUpdateComplete(){return await this._handlePromise,super.getUpdateComplete()}firstUpdated(){this._firstUpdate=!1}willUpdate(e){this._handlePromise=this.handleChangedProperties(e,this._firstUpdate)}async handleChangedProperties(e,t){var n;if(this.anyOf(e,"isMobileMode","isVertical")&&this.initializeKeyboardNavigatior(),this.anyOf(e,"canCollapse","isCollapsed","isVertical")){this.updateItems(!this.isCollapsed)}!t&&this.canCollapse&&e.has("sizeMode")&&(this.isCollapsed||(this._menuItemsChanged=!0,this.toggleItemsContainerCssClasses(ex.invisible,!0)),await(null===(n=this._sizeController)||void 0===n?void 0:n.initialize(this._menuItems))),this.hasVisibleItems&&await this.showMenuItems()}onCollapseChanged(e){this.dispatchEvent(new rx(e))}anyOf(e,...t){for(const n of t)if(e.has(n))return!0;return!1}collectMenuItems(){const e=this.querySelectorAll(`:scope ${tx.menuItemComponentName}`),t=[];return e&&e.forEach((e=>t.push(e))),t}onItemsIntersectionChanged(e){e.forEach((e=>e.target.isVisible=e.isIntersecting)),this.hasVisibleItems=this._menuItems.filter((e=>e.isVisible)).length>0}toggleItemsContainerCssClasses(e,t){const n=this.querySelector(tx.menuItemsContainerSelector);n&&requestAnimationFrame((()=>n.classList.toggle(e,t)))}calculateItemsOffset(){const e=this.querySelector(tx.menuItemsContainerSelector);return e?e.offsetLeft-this.offsetLeft:0}};C([xs({type:Boolean,attribute:"is-vertical"})],Vx.prototype,"isVertical",void 0),C([xs({type:Boolean,attribute:"is-collapsed"})],Vx.prototype,"isCollapsed",void 0),C([xs({type:Boolean,attribute:"can-collapse"})],Vx.prototype,"canCollapse",void 0),C([xs({type:Boolean,attribute:"collapse-to-icons"})],Vx.prototype,"collapseToIcons",void 0),C([xs({type:Boolean,attribute:"collapse-to-icons-all"})],Vx.prototype,"collapseToIconsAll",void 0),C([xs({type:Boolean,attribute:"collapse-to-hamburger-menu"})],Vx.prototype,"collapseToHamburgerMenu",void 0),C([xs({type:Boolean,attribute:"load-mode"})],Vx.prototype,"loadMode",void 0),C([xs({type:_x,attribute:"size-mode"})],Vx.prototype,"sizeMode",void 0),C([xs({type:Boolean,attribute:"data-dx-menu-mobile"})],Vx.prototype,"isMobileMode",void 0),Vx=C([Es(tx.menuComponentName)],Vx);const zx=document;function Wx(e,t,n){const i=zx.querySelectorAll(t),s=i.length;for(let t=0;t<s;t++)e.upgrade(i[t]);e.define(t,n)}class $x extends HTMLElement{constructor(){super()}static get observedAttributes(){return["menu-id"]}attributeChangedCallback(e,t,n){"menu-id"===e&&this.updateAttributes(n)}updateAttributes(e){const t=document.querySelector(`[data-dxmenu-id=${e}]`);if(t){$().isMobileDevice&&t.toggleAttribute("data-dx-menu-mobile",!0),t.toggleAttribute("data-dx-menu-loaded",!0)}}}Wx(customElements,"dxbl-menu-preloader",$x);class Gx{constructor(e,t){this.toolbarModel=e,this.id=t,this.state="",this._isWidthCalculationLocked=!1,this.index=-1,this.adaptivePriority=0,this._width=0}getWidth(){return this.isVisible()?GD(this.getElement(),!1,kD):0}getNoTextWidth(){return this.getWidth()}isVisible(){return!0}get isWidthCalculationLocked(){return this._isWidthCalculationLocked}updateState(e){this.state=e,this.updateStateCore(e)}updateStateCore(e){}lockWidthCalculation(){this._isWidthCalculationLocked=!0}unlockWidthCalculation(){this._isWidthCalculationLocked=!1}getGroupElement(){return null}reset(){}}class qx extends Gx{constructor(e,t){var n,i,s,r,o;super(e,null!==(s=null!==(i=null===(n=t.element)||void 0===n?void 0:n.id)&&void 0!==i?i:t.id)&&void 0!==s?s:"-1"),this.item=t,this.adaptivePriority=null!==(o=null===(r=null==t?void 0:t.adaptivePriority)||void 0===r?void 0:r.value)&&void 0!==o?o:0}getElement(){return this.item.getElement()}updateStateCore(e){this.item.isDisplayed.update(e.indexOf("has-"+this.getName())>-1)}updateVisible(e){e||this.lockWidthCalculation(),this.item.updateVisible(e),e&&this.unlockWidthCalculation()}reset(){const e=this.getElement();e&&e.classList.remove(FS.ToolbarHiddenItem)}}class Yx extends qx{constructor(e,t){super(e,t)}getNoTextWidth(){return this.item.isDisplayed.value?function(e){let t=GD(e,!1,kD);if(0===t)return t;if(e){if(e.querySelector(zD))return t;const n=e.querySelector(_D);if(n){const i=e.querySelector(VD);t-=YD(n);let s=n;for(;s=s.nextElementSibling;)!XD(s)&&JD(s)&&s!==i&&(t-=GD(s))}}return t}(this.getElement()):0}getName(){return"item"}isVisible(){return this.item.isDisplayed.value}updateStateCore(e){const t=this.item.toolbar,n=-1===e.indexOf(FS.ToolbarHasEllipsis);this.updateVisible(t.minRootItems>0?n||this.index<t.minRootItems:n)}getGroupElement(){return this.item.getGroupElement()}}class Xx extends qx{constructor(e,t){super(e,t)}getName(){return"ellipsis"}updateStateCore(e){super.updateStateCore(e),this.updateVisible(this.item.isDisplayed.value)}reset(){this.updateVisible(!0)}}class Jx extends Yx{constructor(e,t){super(e,t),this.itemBlocks=[],this.addItem(t)}addItem(e){this.itemBlocks.push(new Yx(this.toolbarModel,e))}isVisible(){const e=this.itemBlocks.reduce((function(e,t){return e&&t.isVisible()}),!0);return e}getWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getWidth()}),0)}getNoTextWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getNoTextWidth()}),0)}updateVisible(e){this.itemBlocks.forEach((function(t){t.updateVisible(e)}))}tryAddItem(e){const t=this.itemBlocks[this.itemBlocks.length-1].item,n=t.groupName===e.groupName&&t.group===e.group&&t.adaptivePriority.value===e.adaptivePriority.value;return n&&this.addItem(e),n}}class jx extends Gx{constructor(e,t,n){super(e,n),this.item=t}getName(){return"title"}getWidth(){return GD(this.getElement(),!1,kD)}getElement(){return this.item.getElement()}}class Zx{constructor(e){this.items=[],this.isLocked=!1,this.subscriptions=[],e&&this.addRange(e)}subscribe(e){this.isLocked||e(this.getChanges(this.items,[])),this.subscriptions.push(e)}getChanges(e,t){return{addedItems:e||[],removedItems:t||[]}}forEach(e,t){this.items.forEach(e,t)}selectMany(e,t){return this.map(e,t).reduce((function(e,t){return e.concat(t)}),[])}reduce(e,t){return this.items.reduce(e,t)}map(e,t){return this.items.map(e,t)}filter(e,t){return this.items.filter(e,t)}any(){return this.count()>0}count(){return this.items.length}get(e){return this.items[e]}add(e){this.addItemCore(e)&&this.raiseChanges([e],[])}remove(e){this.removeItemCore(e)&&this.raiseChanges([],[e])}addRange(e){this.raiseChanges(e.map(this.addItemCore.bind(this)).filter((function(e){return!!e})),[])}removeRange(e){this.raiseChanges([],e.map(this.removeItemCore.bind(this)).filter((function(e){return!!e})))}addItemCore(e){return this.items.indexOf(e)>-1?null:this.items[this.items.length]=e}removeItemCore(e){const t=this.items.indexOf(e);return-1===t?null:this.items.splice(t,1)[0]}raiseChanges(e,t){const n=this.getChanges(e,t);(n.addedItems.length>0||n.removedItems.length>0)&&this.subscriptions.forEach((function(e){e(n)}))}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}}class eD{constructor(e){this.id=e,this._margins=void 0,this.blocks=[]}push(e){this.blocks.includes(e)||this.blocks.push(e),this.update()}toArray(){return Array.from(this.blocks)}get margins(){return this._margins||0}update(){if(!this._margins&&this.blocks.length){const e=this.blocks[0].getGroupElement();if(e){const t=T.DomUtils.getCurrentStyle(e);this._margins=T.DomUtils.pxToInt(t.marginRight)+T.DomUtils.pxToInt(t.marginLeft)}}}}class tD{constructor(e,t,n){var i;this.layer=e,this.block=t,this.width=0,this._blockCollection=void 0;const s=t.getGroupElement();s&&(this._blockCollection=this.layer.getBlockCollection(s),null===(i=this._blockCollection)||void 0===i||i.push(t)),n.subscribe(t,((e,n=!1)=>{var i;null===e&&(e=null===(i=this.layer.getPrevLayer())||void 0===i?void 0:i.getActualBlocks().filter((function(e){return e.block===t}))[0].width),e!==this.width&&(this.width=null!=e?e:0,n||this.layer.requestUpdateLayoutModel())}))}get blockCollection(){return this._blockCollection||new eD(null)}getMinWidth(){return this.width}getMaxWidth(e){return this.getMinWidth()}}class nD extends tD{getPrevLayerMinWidth(){const e=this.layer.getPrevLayer();return e?e.getActualBlocks().filter((e=>e.block===this.block))[0].getMinWidth():0}getMaxWidth(e){return e===this.layer?this.getPrevLayerMinWidth():this.getMinWidth()}}class iD extends tD{}class sD extends tD{}class rD{constructor(e,t){this.widthCalculator=e,this.triggersResolver=t,this.widthSubscriber=null,this.widthCalculator=e,this.triggersResolver=t}subscribe(e,t){this.widthSubscriber=t;const n=this.widthCalculator.bind(this);this.triggersResolver(e).forEach((function(i){i.subscribe((function(){e.isWidthCalculationLocked||tn((function(){t(n(e),!1)}))}),!0)})),tn((function(){t(n(e),!0)}))}updateWidth(e){const t=this.widthSubscriber,n=this.widthCalculator.bind(this);tn((function(){t(n(e),!0)}))}}let oD;oD={fullWidthItem:new rD((function(e){return e.getWidth()}),qD),fullWidthSystemItem:new rD((function(e){return e.getWidth()}),(function(e){return[]})),titleItem:new rD((function(e){return e.getWidth()}),(function(e){var t,n;return[null===(t=e.toolbarModel.title)||void 0===t?void 0:t.hasTitle,null===(n=e.toolbarModel.title)||void 0===n?void 0:n.text]})),noTextItem:new rD((function(e){return e.getNoTextWidth()}),qD),contextItem:function(e){return new rD((function(t){const n=e.items.filter((function(e){return"item"===e.getName()&&e.index<t.index&&e.isVisible()}));return n.length>=t.toolbarModel.minRootItems||!t.isVisible()?0:null}),qD)},hiddenItem:new rD((function(){return 0}),(function(){return[]}))};class aD{getMin(e){return e.map((e=>e.minSize)).reduce(((e,t)=>e+t))}getMax(e){return e.map((e=>e.fullSize)).reduce(((e,t)=>e+t))}}class lD extends aD{getRange(e,t,n){return{min:this.getMin(e)+t,max:this.getMax(e)+t}}}class AD extends aD{getRange(e,t,n){return{min:this.getMin(e),max:this.getMax(e)+t}}}class dD extends aD{constructor(){super(...arguments),this.prevLayerRangeCalculator=new AD}getRange(e,t,n=[]){return{min:this.getMin(e)+t,max:this.getMax(n)+t-1}}}class cD{constructor(e,t,n,i){this.name=e,this.canApply=t,this.blocks=n,this.margin=i}orderBlock(e,t){const n=this.blocks.find((t=>t.id===e));if(!n)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);n.index=t,this.blocks.sort(((e,t)=>CD(e,t)))}getBlock(e){const t=this.blocks.find((t=>t.id===e));if(!t)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);return t}}class hD extends cD{constructor(){super(...arguments),this.type=vD.Default}updateBlock(e,t){const n=this.getBlock(e.id);if(0===e.width)return!1;const i=n.minWidth!==e.width||n.maxWidth!==e.width;return n.minWidth=e.width,n.maxWidth=e.width,i}}class uD extends cD{constructor(){super(...arguments),this.type=vD.FullSequential}updateBlock(e,t){const n=this.getBlock(e.id);let i=n.maxWidth!==e.width;return n.maxWidth=e.width,n.minWidth&&(i=i||n.minWidth!==e.width,n.minWidth=e.width),t||(i=i||0!==n.minWidth,n.minWidth=0),i}}class pD extends cD{constructor(){super(...arguments),this.type=vD.NoText}updateBlock(e,t){const n=this.getBlock(e.id);if(0===e.width)return!1;const i=n.minWidth!==e.width||n.maxWidth!==e.width;return n.minWidth=e.width,n.maxWidth=e.width,i}}class mD extends cD{constructor(){super(...arguments),this.type=vD.NoTextSequential}updateBlock(e,t){const n=this.getBlock(e.id);let i=n.maxWidth!==e.width;return n.maxWidth=e.width,n.minWidth&&(i=i||n.minWidth!==e.width,n.minWidth=e.width),t||(i=i||0!==n.minWidth,n.minWidth=0),i}}class gD{constructor(){this.layers=[],this.fullLayerTypes=[vD.Default,vD.FullSequential],this.noTextLayerTypes=[vD.NoText,vD.NoTextSequential]}get isEmpty(){if(0===this.layers.length)return!0;const e=this.layers.find((e=>e.type===vD.Default));return 0===e.blocks.filter((e=>!e.isEllipse&&!e.isTitle&&0!==e.maxWidth)).length}get blockIds(){const e=this.layers.find((e=>e.type===vD.Default));return e&&0!==e.blocks.length?e.blocks.filter((e=>!e.isEllipse)).map((e=>e.id)):[]}resetLayers(e){this.layers=this.convertLayers(e).map(this.toLayer)}initLayers(e){return!!this.isEmpty&&(this.resetLayers(e),!0)}convertLayers(e){return e.map((e=>{const t=e.getActualBlocks();return{name:e.stateName,canApply:e.canApply,type:e.type,blocks:ZD(t,e).sort(((e,t)=>CD(e,t))),margin:(n=t,[...new Set(n.map((e=>e.blockCollection)))].map((e=>e.margins)).reduce(((e,t)=>e+t),0))};var n}))}updateFullSizeBlock(e,t){return this.updateBlock(e,t,this.fullLayerTypes)}updateNoTextBlock(e,t){return this.updateBlock(e,t,this.noTextLayerTypes)}updateBlock(e,t,n){let i=!1;for(const s of this.layers.filter((e=>n.includes(e.type))))i=s.updateBlock(e,t)||i;return i}orderBlock(e,t){for(const n of this.layers)n.orderBlock(e,t)}updateBlockByLayer(e,t,n){const i=this.layers.find((e=>e.type===n));return i.updateBlock(e,t)}getItemsByName(e){const t=this.layers.find((t=>t.name===e));return this.getBlocks(t)}getItemsByType(e){const t=this.layers.find((t=>t.type===e));return this.getBlocks(t)}getBlocks(e){return e.blocks.filter((e=>-1!==e.index))}getBlock(e,t){const n=this.layers.find((t=>t.name===e));if(n)return n.blocks.find((e=>e.index===t))}getBlockInEveryLayer(e){return this.layers.map((e=>e.blocks)).flat().filter((t=>t.id===e))}toLayer(e){const{name:t,canApply:n,type:i,blocks:s,margin:r}={...e};switch(i){case vD.Default:return new hD(t,n,s,r);case vD.FullSequential:return new uD(t,n,s,r);case vD.NoText:return new pD(t,n,s,r);case vD.NoTextSequential:return new mD(t,n,s,r)}}}function CD(e,t){return e.isTitle||t.isTitle?e.index-t.index:e.isEllipse||t.isEllipse?t.index-e.index:e.adaptivePriority===t.adaptivePriority||t.isEllipse?e.index>t.index?1:-1:e.adaptivePriority-t.adaptivePriority}class fD{constructor(){this._layers=[],this.checkpointsByLayers=new Map}get layers(){return this._layers.filter((e=>e.canApply))}initialize(e){var t;this._layers=e,this.checkpointsByLayers.clear();let n=0;for(const e of this.layers){const i=this.getPoints(e,n).filter((e=>0!==e)),s=i.filter((e=>this.getCheckpoints().indexOf(e)<0));this.checkpointsByLayers.set(e.type,s),n=null!==(t=i[i.length-1])&&void 0!==t?t:0}}getLayerTypeByWidth(e){for(const t of this.layers.map((e=>e.type))){if(this.checkpointsByLayers.get(t).indexOf(e)>-1)return t}return vD.Default}getCheckpointPair(e){const t=this.getCheckpoints();let n=0,i=0;for(const s of t){if(s<e){i=s;break}n=s}return[n,i]}getCheckpoints(){const e=[...this.checkpointsByLayers.values()].flat();return[...new Set(e.sort(((e,t)=>e<t?1:-1)))]}getPoints(e,t=0){switch(e.type){case vD.Default:return this.getConstantLayerPoints(e);case vD.FullSequential:return this.getSeqPoints(e,!0,t);case vD.NoText:return this.getConstantLayerPoints(e);case vD.NoTextSequential:return this.getSeqPoints(e,!0,t)}return[]}getConstantLayerPoints(e){return[e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0)]}getSeqPoints(e,t,n){const i=e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0),s=[];let r=i;for(const t of e.blocks.slice().reverse()){const e=r-(t.fullSize-t.minWidth);e!==r&&t.index>-1&&(!n||e<n)&&s.push(e),r=e}return s}}var vD,bD,wD;!function(e){e[e.Default=0]="Default",e[e.FullSequential=1]="FullSequential",e[e.NoText=2]="NoText",e[e.NoTextSequential=3]="NoTextSequential"}(vD||(vD={}));class yD{constructor(e){this.onLayerApplied=e,this.layers=[],this.blockCollection=null,this.currentLayer=null,this.currentWidth=null,this.currentHeight=null,this._defaultLayer=null,this._sequentialLayer=null,this.minWidth=null,this.virtualLayout=new gD,this.layerCheckpointService=new fD,this.layersCheckpoints=[],this.prevPoint=0,this.nextPoint=0,this.toolbarWidthUpdate=()=>{},this.toolbarHeightUpdate=()=>{},this.toolbarIsVisible=()=>!0}initialize(e,t,n){this.blockCollection=e,this.elementContentWidthSubscription=on(t,(e=>{var t;this.currentWidth===e.width&&this.currentHeight===e.height||(null===this.currentWidth&&(null===(t=this.blockCollection)||void 0===t||t.subscribe((e=>{e.addedItems.forEach(this.addItemBlock.bind(this)),e.removedItems.forEach(this.removeItemBlock.bind(this))}))),this.getCheckpoints(),this.currentWidth=e.width,this.currentHeight&&this.currentHeight===e.height||(this.currentHeight=e.height,this.toolbarHeightUpdate(this.currentHeight)),this.minWidth||this.setMinWidth(),this.currentLayer&&!this.checkForLayoutUpdate()||(this.virtualLayout.isEmpty&&(this.virtualLayout.resetLayers(this.layers),this.getCheckpoints()),this.setCheckpoints(),this.setLayout()),n&&n(e))}))}addBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.add(e)}removeBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.remove(e)}dispose(){this.elementContentWidthSubscription&&rn(this.elementContentWidthSubscription)}getLastLayer(){return this.layers[this.layers.length-1]||null}setDefaultLayer(e,t){const n=this._defaultLayer=new ED("default",e,this,t);this.layers.push(n)}setSimultaneousTransitionLayer(e,t,n){this.layers.push(new SD(e,vD.NoText,t,this.getLastLayer(),n))}setSequentialTransitionLayer(e,t,n,i){const s=this._sequentialLayer=new ID(e,t,n,this.getLastLayer(),i);this.layers.push(s)}addItemBlock(e){this.layers.forEach((function(t){t.addBlock(e)}))}removeItemBlock(e){this.layers.forEach((function(t){t.removeBlock(e)}))}removeItemBlocks(e){for(const t of e)this.removeItemBlock(t)}checkForLayoutUpdate(){const e=this.currentWidth;return this.nextPoint>0&&e<this.nextPoint||this.prevPoint>0&&e>this.prevPoint}updateFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type));t.canApply=e.canApply;for(const n of t.layoutBlocks){const t=e.blocks.find((e=>e.id===n.block.id));t&&(n.width=t.minWidth)}}orderFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type)),n=t.layoutBlocks,i=e.blocks;for(const n of t.layoutBlocks){const t=e.blocks.find((e=>e.id===n.block.id));t&&(n.block.index=t.index)}t.layoutBlocks=[...n].sort(((e,t)=>i.indexOf(i.find((t=>t.id===e.block.id)))-i.indexOf(i.find((e=>e.id===t.block.id)))))}recalculateLayout(){this.setLayout()}setCheckpoints(){[this.prevPoint,this.nextPoint]=this.layerCheckpointService.getCheckpointPair(this.currentWidth)}updateCheckpoints(e){const[t,n]=[this.prevPoint,this.nextPoint];this.resetCheckpoints();const i=this.currentWidth;e&&(t!==this.prevPoint&&i<this.prevPoint||n!==this.nextPoint&&i>this.nextPoint)&&this.setLayout()}resetCheckpoints(){this.virtualLayout.resetLayers(this.layers),this.layerCheckpointService.initialize(this.virtualLayout.layers),this.layersCheckpoints=this.layerCheckpointService.getCheckpoints(),this.setCheckpoints(),this.setMinWidth()}setLayout(){const e=this.layerCheckpointService.getLayerTypeByWidth(this.nextPoint>0&&this.currentWidth>this.nextPoint?this.nextPoint:this.prevPoint),t=this.layers.find((t=>t.type===e));this.virtualLayout.resetLayers(this.layers),this.applyLayer(t)}setMinWidth(){const e=this.getCheckpoints();this.minWidth=e[e.length-1],this.toolbarWidthUpdate()}updateLayout(){const e=this.findLayersForWidth(this.currentWidth)[0];e&&(this.applyLayer(e),this.minWidth=Math.min(...this.layers.filter((e=>e.latestRange)).map((e=>e.latestRange.min))))}getCheckpoints(){return this.layersCheckpoints.length||this.virtualLayout.isEmpty||!this.toolbarIsVisible()||this.resetCheckpoints(),this.layersCheckpoints}resetToDefault(){this.applyLayer(this.layers[0],!0)}applyLayer(e,t=!1){if(this.currentLayer=e,t)e.activateAndReset(this.currentWidth);else{this.virtualLayout.initLayers(this.layers);const t=this.virtualLayout.layers.find((e=>e.type===this.currentLayer.type));e.activate(this.currentWidth,t.blocks)}this.onLayerApplied&&this.onLayerApplied(e)}findLayersForWidth(e){return this.layers.filter((function(t){return t.isValidWidth(e)}))}forceUpdate(){null!==this.currentWidth&&this.updateLayout()}getMinWidth(){return this.minWidth?this.minWidth:this._sequentialLayer?this._sequentialLayer.getActualBlocks().map((e=>e.getMinWidth())).reduce(((e,t)=>e+t),0):null}}class BD{constructor(e,t,n,i,s){this.stateName=e,this.type=t,this.blockUpdaterGetter=n,this.prevLayer=i,this.canApply=s,this.nextLayer=null,this.layoutBlocks=[],this.nextLayer=null,i&&(i.nextLayer=this)}getNextLayer(){return null!=this.nextLayer?this.nextLayer.canApply?this.nextLayer:this.nextLayer.getNextLayer():null}getPrevLayer(){return null!=this.prevLayer?this.prevLayer.canApply?this.prevLayer:this.prevLayer.getPrevLayer():null}requestUpdateLayoutModel(){var e;null===(e=this.getPrevLayer())||void 0===e||e.requestUpdateLayoutModel()}getBlockCollection(e){var t;return null===(t=this.getPrevLayer())||void 0===t?void 0:t.getBlockCollection(e)}isValidWidth(e){if(!this.canApply||!e)return!1;const t=this.getRangeNew();return!this.getNextLayer()&&t.min>e||!this.getPrevLayer()&&t.max<e||t.min<=e&&t.max>=e}getRange(){const e=new Set,t=this.latestRange=this.getActualBlocks().reduce(((t,n)=>(e.add(n.blockCollection),{min:t.min+n.getMinWidth(),max:t.max+n.getMaxWidth(this)})),{min:0,max:0});return e.forEach((e=>{t.min+=e.margins,t.max+=e.margins})),t}getRangeNew(){const e=ZD(this.getActualBlocks(),this),t=this.type===vD.NoText&&this.prevLayer?ZD(this.prevLayer.getActualBlocks(),this.prevLayer):[];return this.latestRange=this.rangeCalculator.getRange(e,0,t)}getActualBlocks(){const e=this.getPrevLayer();return e?e.getActualBlocks().map((e=>this.layoutBlocks.filter((function(t){return t.block===e.block}))[0]||e)):this.layoutBlocks}activate(e,t){e&&this.layoutBlocks.forEach((e=>{e.block.updateState(this.stateName)}))}addBlock(e){const t=this.blockUpdaterGetter(e);if(t){const n=this.createBlock(e,t);this.layoutBlocks.push(n)}}removeBlock(e){const t=this.layoutBlocks.find((t=>t.block.id===e));if(t){const e=this.layoutBlocks.indexOf(t);this.layoutBlocks.splice(e,1)}}activateAndReset(e){}}class ED extends BD{constructor(e,t,n,i){super(e,vD.Default,t,null,i),this.layoutModel=n,this.rangeCalculator=new lD,this.blockCollection=new Map}requestUpdateLayoutModel(){this.layoutModel.updateLayout()}createBlock(e,t){return new sD(this,e,t)}activateAndReset(e){this.activate(e,[]),this.layoutBlocks.forEach((e=>{e.block.reset()}))}getBlockCollection(e){return this.getBlockCollectionCore(e)}getBlockCollectionCore(e){let t=this.blockCollection.get(e);return t||this.blockCollection.set(e,t=new eD(e)),t}}class ID extends BD{constructor(){super(...arguments),this.rangeCalculator=new AD}activate(e,t){const n=this.getActualBlocks();this.getRangeNew();let i=this.latestRange.max,s=this.stateName;const r=new Map;for(let o=t.length-1;o>=0;o--){const a=t[o],l=n.find((e=>e.block.id===a.id));if(i>e){i-=a.fullSize-a.minSize;const t=l.blockCollection.id,n=(r.has(t)?r:r.set(t,l.blockCollection.toArray())).get(t);if(n&&n.splice(n.indexOf(l.block),1),i<=e){l.block.updateState(s);const e=this.getPrevLayer();s=e?e.stateName:"";continue}}l.block.updateState(s)}}getRange(){const e=new Set;return this.latestRange=this.getActualBlocks().reduce(((t,n)=>(e.add(n.blockCollection),{min:t.min+n.getMinWidth(),max:t.max+n.getMaxWidth(this)})),{min:0,max:0}),e.forEach((e=>{this.latestRange.max+=e.margins})),this.latestRange}createBlock(e,t){return new nD(this,e,t)}}class SD extends BD{constructor(){super(...arguments),this.rangeCalculator=new dD}createBlock(e,t){return new iD(this,e,t)}getRange(){const e=new Set;let t=this.getActualBlocks().reduce((function(t,n){return e.add(n.blockCollection),t+n.getMinWidth()}),0);e.forEach((e=>{t+=e.margins}));const n=this.getPrevLayerRangeMax();return this.latestRange={min:t,max:n}}getPrevLayerRangeMax(){const e=this.getPrevLayer();return e?e.getRangeNew().max-1:0}}!function(e){e[e.Contained=0]="Contained",e[e.Plain=1]="Plain"}(bD||(bD={})),function(e){e[e.Default=0]="Default",e[e.Large=1]="Large"}(wD||(wD={}));class xD{constructor(e,t){this.element=e,this.toolbar=t,this.index=new by(-1),this.isVisible=new by(this.defaultIsVisible()),this.isVisible.subscribe((e=>{this.onIsVisibleChanged(e)}),!0)}defaultIsVisible(){return!0}getElement(){return this.element}updateVisible(e){this.isVisible.update(e)}onIsVisibleChanged(e){const t=this.getElement();t&&(e?this.show(t):this.hide(t))}show(e){e.classList.remove(FS.ToolbarHiddenItem)}hide(e){e.classList.add(FS.ToolbarHiddenItem)}}class DD extends xD{constructor(){super(...arguments),this.isDisplayed=new by(!0),this.text=new by(""),this.iconCssClass=new by("")}show(e){e.style.display=""}hide(e){e.style.display="none"}getGroupElement(){return null}}class FD extends DD{constructor(e,t,n){super(e,t),this.group=n,this.groupName=new by(""),this.adaptivePriority=new by(-1)}onIsVisibleChanged(e){super.onIsVisibleChanged(e),this.group.onItemVisibleChanged()}getElement(){return document.querySelector(`#${this.id}`)}getParent(){const e=this.getElement();return e&&e.parentElement?e.parentElement:null}getGroupElement(){return this.group.getElement()}}class TD extends DD{constructor(e,t){super(e,t)}defaultIsVisible(){return null}}class HD extends xD{constructor(e,t){super(e,t),this.items=[]}addItem(e){this.items.push(e)}onItemVisibleChanged(){if(0===this.items.length)return;const e=this.items.some((e=>e.isVisible.value));this.updateVisible(e)}getElement(){if(0===this.items.length)return null;const e=hn(this.items[0].getElement(),jD(KD,this.toolbar.id));return e||this.items[0].getParent()}}class UD extends xD{constructor(e,t){super(null,e),this.elementSelector=t,this.hasTitle=new by(!1),this.text=new by(""),this.text.subscribe((e=>{this.hasTitle.update(null!=e&&""!==e)}))}getElement(){return document.querySelector(this.elementSelector)}}class QD{constructor(e,t){this.element=e,this.id=t,this.items=[],this.itemMap=new Map,this.groupMap=new Map,this.canHideRootItems=!1,this.canCollapseToIcons=!1,this.minRootItems=0}}const PD=[ll,ll].map((e=>e.toUpperCase())),ND=["DXBL-POPUP-PORTAL"];class RD{constructor(e){this.dataToolbarId=e,this.virtualElementCreator={[FS.ToolbarGroup]:this.createVirtualGroup,[FS.ToolbarItem]:this.createVirtualRootItem,[FS.ToolbarPlaceholder]:this.createVirtualPlaceholder,[FS.ButtonEllipsis]:this.createVirtualRootItem},this.toolbar=document.querySelector(`[${WD}='${this.dataToolbarId}']`),this.buttonToolbar=this.toolbar.querySelector(`.${FS.ButtonToolbar}`),this.virtualButtonToolbar=document.createElement("div"),this.copyToolbar(),this.toolbar.appendChild(this.virtualButtonToolbar)}copyToolbar(){this.virtualButtonToolbar.classList.remove(...this.virtualButtonToolbar.classList),this.virtualButtonToolbar.classList.add(FS.VirtualToolbar),this.virtualButtonToolbar.classList.add(...this.buttonToolbar.classList);const e=[...this.buttonToolbar.children],t=[];for(const n of e){const e=[...n.classList].find((e=>null!=this.virtualElementCreator[e]));t.push(this.virtualElementCreator[e].bind(this,n)())}this.numberToolbarGroups(t.filter((e=>e.classList.contains(FS.ToolbarGroup)))),this.virtualButtonToolbar.innerHTML="",t.forEach((e=>this.virtualButtonToolbar.appendChild(e)))}numberToolbarGroups(e){for(let t=0;t<e.length;t++)0===t&&e[t].classList.add($l.ButtonGroupFirst)}getElementWidth(e){this.buttonToolbar.style.width=this.buttonToolbar.offsetWidth+"px";const t=this.virtualButtonToolbar.querySelector(`[virtual-id=${e}]`),n=t.parentElement;let i=0,s=0;const r=[...n.children].find((e=>e.classList.contains(FS.ToolbarGroupSeparator)));let o=0;if(null!=t.parentElement&&t.parentElement.classList.contains(FS.ToolbarGroup)){const e=T.DomUtils.getCurrentStyle(t.parentElement);if(t.parentElement.lastElementChild===t&&(s=T.DomUtils.pxToInt(e.marginRight)),t.parentElement.firstElementChild===t&&(i=T.DomUtils.pxToInt(e.marginLeft)),n.classList.contains($l.ButtonGroupFirst)&&n.children[1]===t)i=T.DomUtils.pxToInt(e.marginLeft);else if(n.firstElementChild===r&&r.nextElementSibling===t){const e=r;if(e){const t=T.DomUtils.getCurrentStyle(n),i=T.DomUtils.getCurrentStyle(e);o+=T.DomUtils.pxToInt(t.marginLeft)+e.offsetWidth+T.DomUtils.pxToInt(i.marginRight)}}}return this.buttonToolbar.style.width="",0===t.offsetWidth?0:t.offsetWidth+i+s+o}setRenderMode(e){e==bD.Plain?this.virtualButtonToolbar.classList.add(FS.ButtonPlainToolbar):this.virtualButtonToolbar.classList.remove(FS.ButtonPlainToolbar)}applyFullLayer(){this.applyAdaptivityState(FS.ToolbarDefaultLayer)}applyNoTextLayer(){this.applyAdaptivityState(FS.ToolbarNoItemText)}applyAdaptivityState(e){e.indexOf(FS.ToolbarNoItemText)>-1?this.virtualButtonToolbar.classList.add(FS.ToolbarNoItemText):this.virtualButtonToolbar.classList.remove(FS.ToolbarNoItemText)}createVirtualGroup(e){const t=document.createElement("div"),n=t.querySelectorAll(`.${FS.ToolbarItem} > .${$l.Button}`),i=n.length>0?n[0].id:"",s=n.length>0?n[n.length-1].id:"";for(const n of e.attributes)t.setAttribute(n.name,n.value);for(let n=0;n<e.children.length;n++)t.appendChild(this.createVirtualItem(e.children[n],i,s));return t.classList.remove(FS.ToolbarHiddenItem),t}createVirtualRootItem(e){return this.createVirtualItem(e,"","")}createVirtualItem(e,t,n){const i=document.createElement("div");for(const t of[...e.attributes].filter((e=>"id"!==e.name)))i.setAttribute(t.name,t.value);if(i.setAttribute("virtual-id",e.id),i.style.display="block",e.children.length>0)for(const s of e.children){const e=s.tagName===FS.ToolbarItem?this.createVirtualItem(s,t,n):this.createVirtualChild(s,t,n);i.appendChild(e)}else i.innerHTML=e.innerHTML;return i}createVirtualPlaceholder(e){const t=document.createElement("DIV");for(const n of[...e.attributes].filter((e=>"id"!==e.name)))t.setAttribute(n.name,n.value);return t.style.width=e.clientWidth+"px",t}createVirtualChild(e,t,n){const i=e.cloneNode(!0),s=(t,n=null)=>{if(!ND.some((e=>t.tagName===e))){if(n&&PD.indexOf(t.tagName)>-1){const i=document.createElement("DIV");return i.style.width=e.getBoundingClientRect().width+"px",void n.replaceChild(i,t)}for(const e of t.attributes)e.name.toLowerCase().endsWith("id")&&t.setAttribute(e.name,e.value+"__virtual");t.setAttribute(lr.virtualElementAttributeName,"true");for(const e of t.children)s(e,t)}};return s(i),i.setAttribute("virtual-id",e.id),i.classList.remove(FS.ToolbarHiddenItem),e.classList.contains($l.Button)&&(t===i.id&&i.classList.add($l.ButtonFirst),n===i.id&&i.classList.add($l.ButtonLast)),i}}class LD{constructor(e,t,n){this.layoutModel=e,this.layoutOptions=t,this.minRootItemIds=[],this.virtualLayout=new gD,this.virtualToolbar=new RD(n),this.setRenderMode(this.layoutOptions.renderMode),this.setMinRootItems()}updateMinRootItems(e){this.virtualLayout.resetLayers(this.layoutModel.layers);const t=this.virtualLayout.layers.find((e=>e.type===vD.FullSequential)),n=this.virtualLayout.layers.find((e=>e.type===vD.NoTextSequential));t.canApply=e>0;const i=this.virtualLayout.getItemsByName(this.layoutModel.currentLayer.stateName),s=this.getAffectedItemIds(i.map((e=>e.id)),this.layoutOptions.minRootItems,e);e-this.layoutOptions.minRootItems>0?(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth)),n.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth))):(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0)),n.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0))),this.layoutOptions.minRootItems=e,this.setMinRootItems(),this.layoutModel.updateFromVirtualLayer(t),this.layoutModel.updateFromVirtualLayer(n),this.layoutModel.updateCheckpoints(!0)}setMinRootItems(){if(0===this.virtualLayout.layers.length)return;const e=this.virtualLayout.layers.find((e=>e.type===vD.FullSequential)),t=e.blocks.filter((e=>!e.isTitle&&!e.isEllipse));this.minRootItemIds=this.getAffectedItemIds(t.map((e=>e.id)),0,this.layoutOptions.minRootItems)}setRenderMode(e){this.layoutOptions.renderMode=e,this.virtualToolbar.setRenderMode(this.layoutOptions.renderMode)}updateRenderMode(e){this.virtualLayout.resetLayers(this.layoutModel.layers),this.virtualToolbar.copyToolbar(),this.setRenderMode(e);for(const e of this.virtualLayout.blockIds){const t={id:e,width:0};for(const e of this.virtualLayout.layers){e.type===vD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const n=this.renderVirtualResizeModel(t);e.updateBlock(n,this.checkIfIsInMinRootItems(t.id))}}this.updateAllRealLayers(!0)}updateCanHideRootItems(e){if(this.refreshVirtualLayout(),this.layoutOptions.canHideRootItems===e)return;this.layoutOptions.canHideRootItems=e;const t=this.virtualLayout.layers.find((e=>e.type===vD.FullSequential)),n=this.virtualLayout.layers.find((e=>e.type===vD.NoTextSequential));t.canApply=this.layoutOptions.canHideRootItems&&(this.layoutOptions.minRootItems>0||!this.layoutOptions.canCollapseToIcons),n.canApply=this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}updateCanCollapseToIcons(e){if(this.refreshVirtualLayout(),this.layoutOptions.canCollapseToIcons===e)return;this.layoutOptions.canCollapseToIcons=e;const t=this.virtualLayout.layers.find((e=>e.type===vD.NoText)),n=this.virtualLayout.layers.find((e=>e.type===vD.NoTextSequential));t.canApply=this.layoutOptions.canCollapseToIcons,n.canApply=this.layoutOptions.canCollapseToIcons&&this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}addBlock(e){this.virtualLayout.initLayers(this.layoutModel.layers)}refreshVirtualLayout(){this.virtualLayout.resetLayers(this.layoutModel.layers),this.setMinRootItems()}removeBlocks(e){this.virtualLayout.initLayers(this.layoutModel.layers),this.refreshVirtualToolbar(),this.layoutModel.updateCheckpoints(!0)}orderBlock(e){this.virtualLayout.orderBlock(e.id,e.index),this.setMinRootItems(),this.updateAllRealLayers(!0),this.orderAllRealLayers()}updateBlockSize(e,t){this.refreshVirtualLayout(),t&&this.virtualToolbar.copyToolbar();let n=!1;var i;n=e.isTitle?this.virtualLayout.updateBlock(e,this.checkIfIsInMinRootItems(e.id),(i=vD,Object.keys(i).filter((e=>Number.isNaN(Number(e)))).map((e=>i[e]))))||n:this.renderVirtualInLayers(e)||n,this.updateAllRealLayers(n)}renderVirtualInLayers(e){let t=!1;for(const n of this.virtualLayout.layers){n.type===vD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const i=this.renderVirtualResizeModel(e);t=n.updateBlock(i,this.checkIfIsInMinRootItems(e.id))||t}return t}renderVirtualResizeModel(e){const t=this.virtualToolbar.getElementWidth(e.id);return{id:e.id,width:t}}getAffectedItemIds(e,t,n){const i=e.slice(0,t),s=e.slice(0,n);return n>t?s.filter((e=>!i.includes(e))):i.filter((e=>!s.includes(e)))}updateAllRealLayers(e){for(const e of this.virtualLayout.layers)this.layoutModel.updateFromVirtualLayer(e);this.layoutModel.updateCheckpoints(e)}orderAllRealLayers(){for(const e of this.virtualLayout.layers)this.layoutModel.orderFromVirtualLayer(e);this.layoutModel.updateCheckpoints(!0)}refreshVirtualToolbar(){this.virtualToolbar.copyToolbar()}checkIfIsInMinRootItems(e){return this.minRootItemIds.includes(e)}}class MD{constructor(e,t,n,i,s,r,o,a){this.id=e,this.index=t,this.adaptivePriority=n,this.minWidth=i,this.maxWidth=s,this.margin=r,this.isTitle=o,this.isEllipse=a}get fullSize(){return this.maxWidth}get minSize(){return this.minWidth}}const kD=!1,KD="data-dxtoolbar-group-id",OD=".dxbl-btn-toolbar",_D=".dxbl-image:not(.dxbl-toolbar-dropdown-toggle)",VD=".dxbl-image.dxbl-toolbar-dropdown-toggle",zD=".dxbl-toolbar-item-tmpl",WD="data-dxtoolbar-id",$D=1;function GD(e,t=!1,n=!1){if(!e)return 0;let i=Math.ceil(fn(e)+(t?0:YD(e)));if(e.parentElement&&!n){const t=[...e.parentElement.children].find((e=>e.classList.contains(FS.ToolbarGroupSeparator)));if(e.parentElement.lastElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);i+=T.DomUtils.pxToInt(t.marginRight)}if(e.parentElement.firstElementChild===t&&t.nextElementSibling===e){const n=t;if(n){const t=T.DomUtils.getCurrentStyle(e.parentElement),s=T.DomUtils.getCurrentStyle(n);i+=0!==n.offsetWidth?n.offsetWidth:$D+T.DomUtils.pxToInt(t.marginLeft)+T.DomUtils.pxToInt(s.marginRight)}}if(e.parentElement.firstElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);i+=T.DomUtils.pxToInt(t.marginLeft)}}return i}function qD(e){return[e.item.text,e.item.isDisplayed,e.item.iconCssClass]}function YD(e){return _t(e)}function XD(e){return T.DomUtils.hasClassName(e,"popout")}function JD(e){return"absolute"!==T.DomUtils.getCurrentStyle(e).position}function jD(e,t){return`[${e}=${t}]`}function ZD(e,t){return[...new Set(e)].map((e=>new MD(e.block.id,e.block.index,e.block.adaptivePriority,e.getMinWidth(),e.getMaxWidth(t),e.blockCollection.margins,e.block instanceof jx,e.block instanceof Xx)))}class eF{constructor(e){this.items=e}}class tF extends CustomEvent{constructor(e){super(tF.eventName,{detail:new eF(e),bubbles:!0})}}tF.eventName="dxbl-toolbar.update",Ct.register(tF.eventName,(e=>e.detail));class nF{constructor(e){this.state=e}}class iF extends CustomEvent{constructor(e){super(iF.eventName,{detail:new nF(e),bubbles:!0,composed:!0})}}iF.eventName="dxbl:toolbar-group.state-change",Ct.register(iF.eventName,(e=>e.detail));class sF{constructor(e){this.item=e}}class rF extends CustomEvent{constructor(e){super(rF.eventName,{detail:new sF(e),bubbles:!0})}}rF.eventName="dxbl-toolbar-item.update";class oF{constructor(e,t=!1){this.size=e,this.force=t}}class aF extends CustomEvent{constructor(e,t=!1){super(aF.eventName,{detail:new oF(e,t),bubbles:!0})}}aF.eventName="dxbl-toolbar-item.resized";class lF extends CustomEvent{constructor(e){super(lF.eventName,{detail:{visible:e},bubbles:!0})}}lF.eventName="dxbl-toolbar-item.visibility-changed";class AF{constructor(e){this.item=e}}class dF extends CustomEvent{constructor(e){super(dF.eventName,{detail:new AF(e),bubbles:!0,composed:!0})}}dF.eventName="dxbl-toolbar-item.ordered";const cF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item):has(.dxbl-btn:not([disabled]))"].map((e=>`.dxbl-toolbar-dropdown-item > .dxbl-toolbar-menu-item > ${e}`)),".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)",".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl.dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))"].join(",");class hF extends Hx{constructor(e,t,n,i=cF){super(e,t,i,n)}switchToNestedContent(){return!this.isSplitButtonMenuItem(this.selectedItemElement)&&super.switchToNestedContent()}doAction(e){if(this.isSplitButtonMenuItem(this.selectedItemElement)){const t=this.selectedItemElement.querySelector(".dxbl-dropdown-item.dxbl-btn");if(t)return void this.doClick(t,e)}super.doAction(e)}isSplitButtonMenuItem(e){return mx(e,$l.SplitButton)}}var uF,pF;!function(e){e[e.Header=0]="Header",e[e.Body=1]="Body"}(uF||(uF={})),function(e){e[e.Shown=0]="Shown",e[e.Closed=1]="Closed"}(pF||(pF={}));class mF extends Ta{constructor(e,t,n,i){super(e,t),this._dispatcherAction=new je,this._activeSection=null,this._initialized=null,this._focusSemaphore=new hx,this._parentStrategy=n,this._sectionElementMap={[uF.Header]:null,[uF.Body]:null},this._modalStatusSignal=new Sr,this._menuItemSelector=i}get headerElement(){return this._sectionElementMap[uF.Header]}set headerElement(e){this._sectionElementMap[uF.Header]=e}get bodyElement(){return this._sectionElementMap[uF.Body]}set bodyElement(e){this._sectionElementMap[uF.Body]=e}initialize(){this._initialized=this.initializeCore()}initializeCore(){return super.initialize(),this.headerElement&&this.bodyElement?Promise.resolve():this.shcheduleInitialization()}shcheduleInitialization(){return this._dispatcherAction.cancel(),new Promise((e=>{this._dispatcherAction.execute((()=>{super.initialize(),e()}))}))}queryItems(){return this.headerElement=this.targetElement.querySelector(".dxbl-modal-header"),this.bodyElement=this.targetElement.querySelector(".dxbl-modal-body"),[this.headerElement,this.bodyElement]}async activate(){var e;await this._initialized,gt.cancelRestoreFocus();const t=null!==(e=this._activeSection)&&void 0!==e?e:uF.Body;this.setActiveSection(t)}createItemStrategy(e){return e===this.headerElement?new gF(this.navigator,this.headerElement):e===this.bodyElement?new CF(this.navigator,this.bodyElement,this._parentStrategy,this._focusSemaphore,this._modalStatusSignal,this._menuItemSelector):null}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab?(this.setActiveSection(this.toggleActiveSection()),!0):super.handleKeyDown(e)}toggleActiveSection(){return this._activeSection===uF.Body?uF.Header:uF.Body}setActiveSection(e){const t=null!=e?e:uF.Body,n=this.navigator.getStrategy(this._sectionElementMap[t]);this._focusSemaphore.doAllowedAction((()=>{null==n||n.activate()})),this._activeSection=t}onPopupShown(){super.onPopupShown(),this._modalStatusSignal.raise(this.targetElement,pF.Shown)}onPopupClosed(){super.onPopupClosed(),this._modalStatusSignal.raise(this.targetElement,pF.Closed)}}class gF extends On{initialize(){super.initialize(),this.selectedItemIndex=0}queryItems(){return this.queryItemsBySelector(".dxbl-btn").filter((e=>e&&!mx(e,"dxbl-invisible")))}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Ie.KeyCode.Left:return this.moveToPrevItem(!0),!0;case Ie.KeyCode.Right:return this.moveToNextItem(!0),!0;case Ie.KeyCode.Up:case Ie.KeyCode.Down:return!0;default:return super.handleKeyDown(e)}}}class CF extends hF{constructor(e,t,n,i,s,r){super(e,t,n,r),this._boundModalStatusChanged=this.modalStatusChanged.bind(this),this._levelController=new cx,this._focusSemaphore=i,this._modalStatusSignal=s,this._modalStatusSignal.subscribe(this._boundModalStatusChanged)}get menuLevel(){return this._levelController.currentLevel}modalStatusChanged(e,t){t===pF.Shown?this.onPopupShown():this.onPopupClosed()}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}activate(){this._focusSemaphore.doIfAllowed((()=>{super.activate()})),this._focusSemaphore.disallow()}handleLeftKey(e){return this.menuLevel>0?(this.moveToPrevLevel(e),!0):!!ux(this.selectedItemElement)&&(this.moveToNextLevel(e,fx.Last),!0)}handleRightKey(e){return!!ux(this.selectedItemElement)&&(this.moveToNextLevel(e,fx.First),!0)}doAction(e){ux(this.selectedItemElement)&&this.moveToNextLevel(e,fx.First),super.doAction(e)}moveToNextLevel(e,t){this.performShortcutEvent(e),this._levelController.moveToNextLevel(t),this._focusSemaphore.allow()}moveToPrevLevel(e){this.performShortcutEvent(e),this._levelController.moveToPrevLevel(),this._focusSemaphore.allow()}getShortcutContext(){return{level:this.menuLevel,selectedItemIndex:this.selectedItemIndex}}handlePopupClosed(){super.handlePopupClosed(),this._levelController.clearState()}addEventSubscriptions(){}removeEventSubscriptions(){this._modalStatusSignal.unsubscribe(this._boundModalStatusChanged)}}const fF=":scope > .dxbl-btn-toolbar:not(.dxbl-virtual-toolbar)",vF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item) > .dxbl-btn:not([disabled])"].map((e=>`${fF} .dxbl-toolbar-item[visible]:not(.dxbl-toolbar-edit) > ${e}`)),`${fF} .dxbl-toolbar-btn-ellipsis[visible]:not([disabled]):not(.dxbl-toolbar-hidden-item) > .dxbl-btn`,`${fF} .dxbl-toolbar-item[visible].dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))`,`${fF} .dxbl-toolbar-item[visible].dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)`,`${fF} .dxbl-toolbar-title`].join(",");class bF extends Fx{queryItems(){return this.queryItemsBySelector(vF)}getShortcutContext(){return{itemIndex:this.selectedItemIndex}}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Right:return this.subMenuStrategy||this.moveToNextItem(!0),!0;case Ie.KeyCode.Left:return this.subMenuStrategy||this.moveToPrevItem(!0),!0;case Ie.KeyCode.Home:return this.selectItem(0),!0;case Ie.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Ie.KeyCode.Up:if(e.altKey&&!e.shiftKey){if(this.isMenuExpanded())return this.requestSubMenuClose(),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusLastItem(),!0;return!1;case Ie.KeyCode.Down:if(e.altKey&&!e.shiftKey){if(this.hasMenu())return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(fx.First),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusFirstItem(),!0;return!1;case Ie.KeyCode.Tab:return!this.nestedContentSelected&&(this.requestSubMenuClose(),super.handleTabKeyDown(e));case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.hasMenu()&&this.focusSubMenuItemAsync(fx.First),!1;default:return!1}}focusSubMenuItemAsync(e){return this.shouldRestoreFocus=gx(this.targetElement),super.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new vx(Cx.Collapse))}createPopupStrategy(e,t){return new hF(e,t,this)}createModalStrategy(e,t){return new mF(e,t,this)}}class wF{}wF.Ribbon=pe.Prefix+"-ribbon";const yF=new class{constructor(){this.toolbars=new Map}addToolbar(e){this.toolbars.set(e.id,e)}removeToolbar(e){this.toolbars.delete(e.id)}addToolbarItem(e){const t=this.getToolbar(e.id);t&&t.addItem(e)}removeToolbarItem(e){for(const t of this.toolbars.values())t.removeItem(e)}getToolbar(e){const t=document.querySelector(`#${e}`);if(!t)return;const n=t.closest(`.${FS.Toolbar}`);return n?this.toolbars.get(n.id):void 0}};let BF=class extends Ja{constructor(){super(...arguments),this.isLoading=!0,this.isLayoutCalculated=!1,this.model=null,this._keyboardNavigator=null,this.layoutModel=null,this.minWidth=null,this.reinitRequested=!1,this.items=[],this.toolbarItemResizedHandler=this.resizeToolbarItem.bind(this),this.toolbarItemUpdatedHandler=this.updateToolbarItem.bind(this),this.toolbarItemVisibilityChangedHandler=this.toolbarItemVisibilityChanged.bind(this),this.toolbarItemOrderHandler=this.orderToolbarItem.bind(this),this.toolbarTitle="",this.minRootItemCount=0,this.collapseItemsToIcons=!1,this.hideRootItems=!1,this.itemSize=0,this.renderMode=bD.Contained,this.itemSpacingMode=wD.Default,this.ellipsisId=null,this.layoutUpdateService=null}connectedCallback(){super.connectedCallback(),yF.addToolbar(this),this.addEventListener(aF.eventName,this.toolbarItemResizedHandler),this.addEventListener(rF.eventName,this.toolbarItemUpdatedHandler),this.addEventListener(lF.eventName,this.toolbarItemVisibilityChangedHandler),this.addEventListener(dF.eventName,this.toolbarItemOrderHandler)}disconnectedCallback(){this.removeEventListener(aF.eventName,this.toolbarItemResizedHandler),this.removeEventListener(rF.eventName,this.toolbarItemUpdatedHandler),this.removeEventListener(lF.eventName,this.toolbarItemVisibilityChangedHandler),this.removeEventListener(dF.eventName,this.toolbarItemOrderHandler),yF.removeToolbar(this),super.disconnectedCallback()}updated(e){var t,n,i,s;super.updated(e),e.has("ellipsisId")&&this.initializeToolbar(null!=this.ellipsisId),e.has("collapseItemsToIcons")&&(null===(t=this.layoutUpdateService)||void 0===t||t.updateCanCollapseToIcons(this.collapseItemsToIcons)),e.has("hideRootItems")&&(null===(n=this.layoutUpdateService)||void 0===n||n.updateCanHideRootItems(this.hideRootItems)),e.has("minRootItemCount")&&(this.model&&(this.model.minRootItems=this.minRootItemCount),null===(i=this.layoutUpdateService)||void 0===i||i.updateMinRootItems(this.minRootItemCount)),e.has("renderMode")&&(null===(s=this.layoutUpdateService)||void 0===s||s.updateRenderMode(this.renderMode))}updateLayout(){var e;null===(e=this.layoutModel)||void 0===e||e.updateLayout()}addItem(e){var t,n,i,s;if(e.isEllipse)return;const r=null===(n=null===(t=this.model)||void 0===t?void 0:t.items)||void 0===n?void 0:n.find((t=>t.id===e.id));if(!r&&this.model){const t=this.initItem(e,!0),n=this.getItemsBlocks(this.model,[t]);null===(i=this.layoutModel)||void 0===i||i.addItemBlock(n[0])}e&&!this.items.some((t=>t.id===e.id))&&(this.items.push(e),null===(s=this.layoutUpdateService)||void 0===s||s.addBlock(e))}removeItem(e){var t,n,i,s;const r=null===(t=this.model)||void 0===t?void 0:t.items.find((t=>t.id===e.id));if(r&&this.model){const e=this.model.items.indexOf(r);null===(n=this.model)||void 0===n||n.items.splice(e,1),null===(i=this.layoutModel)||void 0===i||i.removeItemBlock(r.id),null===(s=this.layoutUpdateService)||void 0===s||s.removeBlocks([r.id])}}resizeToolbarItem(e){this.processToolbarItem(e.detail.size,e.detail.force)}updateToolbarItem(e){this.processToolbarItem(e.detail.item)}toolbarItemVisibilityChanged(e){this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator&&(this._keyboardNavigator.initialized?this._keyboardNavigator.reinitialize():this._keyboardNavigator.initialize(this,new bF(this._keyboardNavigator,this)))}orderToolbarItem(e){var t;const n=e.detail.item,i=this.items.find((e=>e.id===n.id));i&&(i.index=n.index,null===(t=this.layoutUpdateService)||void 0===t||t.orderBlock(n))}processToolbarItem(e,t=!1){var n;if(0===this.offsetHeight)return;const i=this.items.find((t=>t.id===e.id));i&&(i.width!==e.width||t)&&(i.width=e.width,"none"!==window.getComputedStyle(this).display&&(e.isEllipse||null===(n=this.layoutUpdateService)||void 0===n||n.updateBlockSize(e,!0)))}initializeToolbar(e){const t={mainElement:this,canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,title:this.toolbarTitle,items:this.items,itemSize:this.itemSize,renderMode:this.renderMode,itemSpacingMode:this.itemSpacingMode,adaptiveMenuModel:{id:this.ellipsisId}};e?this.reinit(t):this.init(t)}initItem(e,t=!1){const n=document.querySelector(`#${e.id}[dxbl-toolbar-adaptive-item]`);const i=this.model.groupMap;n&&n.classList.remove(FS.ToolbarHiddenItem);const s=hn(n,jD(KD,this.dataset.dxtoolbarId));let r=null;i.has(s)&&(r=i.get(s)),r||(r=new HD(s,this.model),i.set(s,r));const o=new FD(n,this.model,r);return o.text.update(e.text),o.groupName.update(e.groupName),o.adaptivePriority.update(e.adaptivePriority),o.iconCssClass.update(e.iconCssClass),o.isDisplayed.update(e.visible),o.index.update(e.index),o.id=e.id,this.model.itemMap.set(o.id,o),this.model.items.every((e=>e.id!==o.id))&&(r.addItem(o),this.model.items.push(o)),o}init(e){var t;const n=e.mainElement;if(!n)return;this.isLayoutCalculated=!1;const i=n.dataset.dxtoolbarId,s=jD("data-dxtoolbar-title-id",i),r=jD("data-dxtoolbar-ellipsis-id",i),o=document.querySelector(r),a=this.model=new QD(n,i),l=a.groupMap;Array.from(e.items).forEach((e=>this.initItem(e))),a.canHideRootItems=e.canHideRootItems,a.canCollapseToIcons=e.canCollapseToIcons,a.minRootItems=e.minRootItems,a.itemSize=e.itemSize,a.renderMode=e.renderMode,a.itemSpacing=e.itemSpacingMode;const A=new Zx([]),d=new UD(a,s);d.text.update(e.title),a.title=d;const c=document.querySelector(s);A.add(new jx(a,d,null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"-1"));const h=Array.from(l.values()),u=h.some((e=>e))?h.map((e=>e.items)).reduce(((e,t)=>e.concat(t))):[];A.addRange(this.getItemsBlocks(a,u.filter((e=>e.element))));const p=new TD(o,a);p.id=e.adaptiveMenuModel.id,A.add(new Xx(a,p)),a.ellipsisViewModel=p,this._keyboardNavigator=[...this.children].filter((e=>e.tagName.toLowerCase()===Ln))[0],this.initializeKeyboardNavigator();const m=oD.contextItem(A),g=this.layoutModel=new yD((e=>{this.isLayoutCalculated||(this.isLayoutCalculated=!0,tn((()=>{this.updateToolbarHeight(),this.isLoading=!1})));const t=a.element.querySelector(OD)||a.element;if(e.stateName.indexOf(FS.ToolbarNoItemText)>-1?T.DomUtils.addClassName(t,FS.ToolbarNoItemText):T.DomUtils.removeClassName(t,FS.ToolbarNoItemText),T.DomUtils.removeClassName(n,FS.Loading),gn(n))return;const i=t.classList.contains(FS.ToolbarNoItemText),s=a.items.concat(a.ellipsisViewModel).map((e=>({Id:e.id,IsVisible:e.isVisible.value,TextHidden:i})));this.dispatchEvent(new tF(Array.from(s)))}));g.setDefaultLayer((function(e){switch(e.getName()){case"item":return oD.fullWidthItem;case"title":return oD.titleItem}return oD.hiddenItem}),!0),g.setSequentialTransitionLayer(FS.ToolbarHasEllipsis,vD.FullSequential,(function(e){switch(e.getName()){case"ellipsis":return oD.fullWidthSystemItem;case"item":return m}}),a.canHideRootItems&&(a.minRootItems>0||!a.canCollapseToIcons)),g.setSimultaneousTransitionLayer(FS.ToolbarNoItemText,(function(e){switch(e.getName()){case"item":return oD.noTextItem;case"ellipsis":return oD.hiddenItem}}),a.canCollapseToIcons),g.setSequentialTransitionLayer(a.canCollapseToIcons?`${FS.ToolbarNoItemText} ${FS.ToolbarHasEllipsis}`:FS.ToolbarHasEllipsis,vD.NoTextSequential,(function(e){switch(e.getName()){case"item":return m;case"ellipsis":return oD.fullWidthSystemItem}}),a.canHideRootItems&&a.canCollapseToIcons),A.forEach((e=>e._width=e.getWidth())),g.initialize(A,a.element.querySelector(OD)||a.element,(e=>{this.height!==e.height&&(this.isLayoutCalculated=!1,this.height=e.height),this.checkUpdateMinWidth(a)})),g.toolbarWidthUpdate=()=>this.checkUpdateMinWidth(a),g.toolbarHeightUpdate=e=>this.updateToolbarHeight(),g.toolbarIsVisible=()=>"none"!==window.getComputedStyle(this).display&&0!==this.offsetWidth,setTimeout((()=>{document.querySelector(`#${this.id}`)&&(this.layoutUpdateService=new LD(g,{canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,renderMode:this.renderMode},this.getAttribute(WD)))}))}reinit(e){this.reinitRequested||(this.reinitRequested=!0,qt((()=>{this.resetToDefault(),this.disposeModel(),qt((()=>{this.reinitRequested=!1,this.init(e)}))})))}resetToDefault(){var e;null===(e=this.layoutModel)||void 0===e||e.resetToDefault()}updateSettings(){}oldUpdateSettings(e){var t,n;if(!this.model)return;let i=!1,s=!1;if(this.model.canHideRootItems!==e.canHideRootItems&&(this.model.canHideRootItems=e.canHideRootItems,i=!0),this.model.canCollapseToIcons!==e.canCollapseToIcons&&(this.model.canCollapseToIcons=e.canCollapseToIcons,i=!0),this.model.minRootItems!==e.minRootItems&&(this.model.minRootItems=e.minRootItems,s=!0),this.model.itemSize!==e.itemSize&&(this.model.itemSize=e.itemSize,s=!0),this.model.renderMode!==e.renderMode&&(this.model.renderMode=e.renderMode,s=!0),this.model.itemSpacing!==e.itemSpacingMode&&(this.model.itemSpacing=e.itemSpacingMode,s=!0),null===(t=this.model.title)||void 0===t||t.text.update(e.title),!s){const t=Array.from(e.items).map((e=>e.id)),n=Array.from(this.model.itemMap.values()).map((e=>e.id));s=!((r=t).length===(o=n).length&&r.every(((e,t)=>e===o[t])))}var r,o;s?this.reinit(e):(Array.from(e.items).forEach((e=>{if(!this.model)return;const t=this.model.itemMap.get(e.id);t&&(t.text.update(e.text),t.groupName.update(e.groupName),t.adaptivePriority.update(e.adaptivePriority),t.index.update(e.index),t.iconCssClass.update(e.iconCssClass),t.isDisplayed.update(e.visible))})),i&&(null===(n=this.layoutModel)||void 0===n||n.forceUpdate()))}disposeModel(){var e;null===(e=this.layoutModel)||void 0===e||e.dispose()}dispose(){this.disposeModel()}getItemsBlocks(e,t){return t.reduce(((t,n)=>t.group&&t.group.tryAddItem(n)?t:n.groupName.value?{group:t.blocks[t.blocks.length]=new Jx(e,n),blocks:t.blocks}:{group:null,blocks:t.blocks.concat([new Yx(e,n)])}),{blocks:[],group:null}).blocks.sort((function(e,t){return e.item.adaptivePriority.value-t.item.adaptivePriority.value})).map((function(e,t){return e.index=t,e}))}updateToolbarHeight(){const e=this.querySelector(OD);this.style.height=(!this.isLoading&&e?e.offsetHeight:this.offsetHeight)+"px"}checkUpdateMinWidth(e){var t;const n=null===(t=this.layoutModel)||void 0===t?void 0:t.getMinWidth();n&&this.minWidth!==n&&(this.minWidth=n,e.element.style.minWidth=n+"px")}};C([Ds()],BF.prototype,"layoutModel",void 0),C([Ds()],BF.prototype,"items",void 0),C([xs({type:String,attribute:"toolbar-title"})],BF.prototype,"toolbarTitle",void 0),C([xs({type:Number,attribute:"min-root-item-count"})],BF.prototype,"minRootItemCount",void 0),C([xs({type:Boolean,attribute:"auto-collapse-items-to-icons"})],BF.prototype,"collapseItemsToIcons",void 0),C([xs({type:Boolean,attribute:"auto-hide-root-items"})],BF.prototype,"hideRootItems",void 0),C([xs({type:Number,attribute:"item-size"})],BF.prototype,"itemSize",void 0),C([xs({type:bD,attribute:"render-mode"})],BF.prototype,"renderMode",void 0),C([xs({type:wD,attribute:"item-spacing-mode"})],BF.prototype,"itemSpacingMode",void 0),C([xs({type:String,attribute:"ellipsis-id"})],BF.prototype,"ellipsisId",void 0),BF=C([Es(FS.Toolbar)],BF);const EF=new ResizeObserver((e=>{for(const t of e){const e=t.target;e&&e.updateSize()}}));let IF=class extends Ja{constructor(){super(...arguments),this.text="",this.groupName="",this.adaptivePriority=0,this.iconCssClass="",this.visible=!1,this.index=0,this.justHidden=!1}get isEllipse(){return this.classList.contains(FS.ButtonEllipsis)}get isTitle(){return this.classList.contains(FS.ToolbarTitle)}get isPlaceholder(){return this.classList.contains(FS.ToolbarPlaceholder)}get isHidden(){return"none"===this.style.display}update(e){this.isInRibbon||(e.has("text")&&this.updateSize(!0),e.has("visible")&&this.dispatchEvent(new lF(this.visible)),e.has("index")&&this.itemOrdered(),super.update(e))}updateSize(e=!1){(!this.isHidden||this.justHidden||(this.justHidden=!0,e))&&(this.isHidden||!this.justHidden?this.dispatchEvent(new aF({id:this.id,width:this.offsetWidth,isTitle:this.isTitle,isEllipse:this.isEllipse,isHidden:this.isHidden},e)):this.justHidden=!1)}connectedCallback(){super.connectedCallback(),this.isInRibbon||(yF.addToolbarItem(this.toolbarItem),this.isEllipse||this.isPlaceholder||EF.observe(this))}disconnectedCallback(){super.disconnectedCallback(),this.isInRibbon||(yF.removeToolbarItem(this.toolbarItem),this.isEllipse||this.isPlaceholder||EF.unobserve(this))}itemOrdered(){this.index>-1&&this.dispatchEvent(new dF(this.toolbarItem))}get toolbarItem(){return{id:this.id,groupName:this.groupName,text:this.text,adaptivePriority:this.adaptivePriority,iconCssClass:this.iconCssClass,visible:this.visible,index:this.index,width:this.offsetWidth,isEllipse:this.isEllipse,isTitle:this.isTitle}}get isInRibbon(){return null!==this.closest(wF.Ribbon)}};C([xs({type:String,attribute:"text"})],IF.prototype,"text",void 0),C([xs({type:String,attribute:"group-name"})],IF.prototype,"groupName",void 0),C([xs({type:Number,attribute:"adaptive-priority"})],IF.prototype,"adaptivePriority",void 0),C([xs({type:String,attribute:"icon-css-class"})],IF.prototype,"iconCssClass",void 0),C([xs({type:Boolean,attribute:"visible"})],IF.prototype,"visible",void 0),C([xs({type:Number,attribute:"index"})],IF.prototype,"index",void 0),IF=C([Es(FS.ToolbarItem)],IF),customElements.define("dxbl-toolbar-menu-item",class extends ix{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute("data-dxtoolbar-container-id");if(t){const e=document.querySelector(`[${WD}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});let SF=class extends Ja{};SF=C([Es("dxbl-ribbon-item")],SF);let xF=class extends Ja{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Ln}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new bF(this._keyboardNavigator,this))}};C([xs({type:Boolean,attribute:"loading"})],xF.prototype,"loading",void 0),xF=C([Es(wF.Ribbon)],xF);class DF{constructor(e){this.container=null,this.owner=e}querySelectorAll(e){var t;return this.querySelectorAllInternal(e||"#"+(null===(t=this.getContainer())||void 0===t?void 0:t.id))}toggleClassName(e,t,n){return this.owner?this.owner.toggleClassName(e,t,n):this.toggleClassNameInternal(e,t,n)}toggleClassNameInternal(e,t,n){}querySelectorAllInternal(e){return this.owner?this.owner.querySelectorAll(e):this.getNodes(e)}getNodes(e){const t=this.container;let n=t.querySelectorAll(e);return n.length||(e="#"+t.id+e,t.parentNode&&(n=t.parentNode.querySelectorAll(e))),n}getContainer(){return this.owner?this.owner.getContainer():this.container}getBoxSize(e){return Math.ceil(fn(e))+this.getBoxOuterOffset(e)}getBoxInnerOffset(e){return zt(e)}getBoxOuterOffset(e){return _t(e)}getBoxOffset(e){return this.getBoxOuterOffset(e)+this.getBoxInnerOffset(e)}getNodeWidth(e,t=!1){const n=e;return n?Math.ceil(n.offsetWidth+(t?0:this.getBoxOuterOffset(n)))+$t(n):0}dispose(){}setActive(e){}createLayoutEntity(e,...t){return null!==this.owner?this.owner.createLayoutEntity(e,...t):this.createLayoutEntityCore(e,...t)}createLayoutEntityCore(e,...t){return new(this.resolveLayoutEntityType(e))(...t)}resolveLayoutEntityType(e){return e}}const FF=`.${FS.ButtonToolbar}`,TF=`.${FS.ButtonEllipsis}`;class HF extends DF{constructor(e,t,n){super(e),this.nextBlock=null,this.prevBlock=null,this.ribbonOwner=e,this.group=t,this.element=n,this.width=0,this.isActiveValue=null,this.index=t.blocks.length,this.nextBlock=null,this.prevBlock=n.layoutBlockObj||null,this._element=n,this._element.layoutBlockObj=this._element.layoutBlockObj?this._element.layoutBlockObj.nextBlock=this:this,this._element.onHide=()=>{this.toggleClassName(this.element,FS.ToolbarHiddenItem,!0)},this._element.onShow=()=>{this.toggleClassName(this.element,FS.ToolbarHiddenItem,!1)}}dispose(){delete this._element.onHide,delete this._element.onShow,this.ribbonOwner=null,super.dispose()}afterCreate(e){delete this._element.layoutBlockObj,e.maxWidth+=this.width,e.minWidth+=this.getMinWidth(),0===this.width&&this.raiseVisibilityChange(!1)}setActive(e){this.isActiveValue!==e&&(this.isActiveValue=e,this.group.activeBlock=e?this:null,this.group.groupsCollection.lastGroup=this.group,this.group.state.prevState&&this.toggleClassName(this.group.element.parentNode,this.group.state.prevState.name,this.isActiveValue),this.toggleClassName(this.element,this.group.state.name,this.isActiveValue),this.toggleClassName(this.group.element,this.group.state.name,this.isActiveValue))}raiseVisibilityChange(e){var t,n;const i=e?this._element.onShow:this._element.onHide;i&&(null===(t=this.owner)||void 0===t||t.domChanges.push(i)),null===(n=this.ribbonOwner)||void 0===n||n.toggleVisibility(this.element,e)}getMinWidth(){return this.nextBlock?this.nextBlock.getMinWidth():this.width}getNextBlock(e){let t=this.group,n=t.blocks[this.index-e];return!n&&(t=t.groupsCollection.blockGroups[t.totalIndex+e])&&(n=t.blocks[Math.pow(t.blocks.length,e>0?1:0)-1]),n}}class UF extends DF{constructor(e,t,n,i){super(e),this.builders=t||[],this.name=n,this.index=i?i.index+1:0,this.prevState=i,this.nextState=null,i&&(i.nextState=this)}for(e){return this.builders[this.builders.length]=this.createLayoutEntity(NF,this.owner,this.name,e)}}class QF extends DF{constructor(e,t,n,i,s){super(e),this.groupsCollection=t,this.state=i,this.element=n,this.elementOffset=this.getBoxOffset(n)+this.getMarginLeftOffset(n),this.blocks=[],this.activeBlock=null,this.fullWidth=this.elementOffset,this.isSmallest=!i.nextState,this.isLargest=!i.prevState,this.domIndex=s,this.totalIndex=this.groupsCollection.blockGroups.length,this.createBlocks(i.builders);const r=n;i.prevState&&(this.isSmallest||(r.layoutBlockGroupObj.isSmallest=0===this.blocks.length))?delete r.layoutBlockGroupObj:r.layoutBlockGroupObj=this}dispose(){for(let e=0;e<this.blocks.length;e++)this.blocks[e].dispose();super.dispose()}afterCreate(e){this.blocks.forEach((function(t){t.afterCreate(e)})),e.groupsOffset+=this.elementOffset,e.groupBlocksLengthLookup[this.domIndex]=this.blocks.length,e.lastGroup=this}setActive(e){let t=0;!this.isSmallest&&this.isLargest&&(t=this.blocks.length-1),this.blocks[t].setActive(e)}createBlocks(e){for(let t=0;t<e.length;t++){const n=e[t],i=n.findBlockElements(this.element);for(let e=0;e<i.length;e++){const t=this.createLayoutEntity(HF,this.owner,this,i[e]);this.fullWidth+=t.width=n.getBlockWidth(t),this.blocks.push(t)}}this.isLargest&&this.setActive(!0)}calculateWidth(e){return this!==e.group?this.fullWidth:this.getActualBlocks(e).reduce((function(e,t){return e+t.width}),this.elementOffset)}getActualBlocks(e){return this.blocks.map(function(t){return t.prevBlock&&t.index<e.index?t.prevBlock:t}.bind(this))}getBeforeOffset(e){const t=window.getComputedStyle(e,":before");return T.DomUtils.pxToInt(t.width)+T.DomUtils.pxToInt(t.marginRight)}getMarginLeftOffset(e){const t=window.getComputedStyle(e);return T.DomUtils.pxToInt(t.marginLeft)}}class PF extends DF{constructor(e,t,n){super(e),this.ribbonOwner=e,this.groupsContainer=t,this.testElement="function"==typeof n?n:function(e){return PS.elementMatchesSelector(e,n)},this.blockGroups=[],this.states=[],this.width=0,this.groupsOffset=0,this.maxWidth=0,this.minWidth=0,this.groupElementsCount=0,this.currentLayoutElements=[],this.lastGroup=null,this.selector=n,this.groupLookupMap={},this.groupBlocksLengthLookup={}}createBlockGroup(e,t,n){let i=this.createLayoutEntity(QF,this.owner,this,e,t,n);return i&&(i=i.blocks.length>0?this.blockGroups[this.blockGroups.length]=i:null),i&&(this.groupLookupMap[n]||(this.groupLookupMap[n]=[])).splice(0,0,i.totalIndex),i}createBlockGroups(){var e;const t=null===(e=this.ribbonOwner)||void 0===e?void 0:e.getGroupElements(this.groupsContainer,this.selector);if(t){this.groupElementsCount=t.length;for(let e=0;e<this.states.length;e++)for(let n=this.groupElementsCount-1;n>=0;n--){const i=t[n];!i||this.testElement(i)&&this.createBlockGroup(i,this.states[e],n)||(t[n]=null)}this.states=[];for(let e=0;e<this.blockGroups.length&&this.blockGroups[e].isLargest;e++)this.blockGroups[e].afterCreate(this);this.minWidth+=this.groupsOffset,this.maxWidth+=this.groupsOffset,this.width=this.maxWidth,this.currentLayoutElements=this.findActiveBlocks()}}defineState(e,t){const n=this.createLayoutEntity(UF,this.owner,[],e,this.states[this.states.length-1]||null);this.states.push(n),t(n)}initialize(){}applyLayout(e){this.currentLayoutElements&&this.currentLayoutElements.forEach((function(e){e.setActive(!1)})),this.currentLayoutElements=e,this.currentLayoutElements.forEach((function(e){e.setActive(!0)})),this.detectBlockItemVisibilityChanges()}adjust(e){if(e===this.width||e<=this.minWidth&&this.width===this.minWidth||e>=this.maxWidth&&this.width===this.maxWidth)return;const t=this.width;if(this.width=Math.max(this.minWidth,Math.min(this.maxWidth,e)),this.width===this.maxWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isLargest})));if(this.width===this.minWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isSmallest})));const n=t-this.width,i=n/Math.abs(n),s=this.findActiveBlocks();let r=s?s[0]:null,o=r;const a=r;for(;r;){if(e=this.calculateWidth(r),i>0&&e<=this.width||i<0&&e>=this.width){const e=i<0?o:r;e!==a&&null!==e&&this.applyLayout([e]);break}o=r,r=r.getNextBlock(i)}}detectBlockItemVisibilityChanges(){const e=this.findActualBlockGroups();for(let t=0;t<e.length;t++){const n=e[t];let i=!1;for(let e=0;e<n.blocks.length;e++){let t=n.blocks[e];n!==this.lastGroup||(i=i||t.isActiveValue)||(t=t.prevBlock||t),t.raiseVisibilityChange(t.width>0)}}}calculateWidth(e){if(!e){const t=this.findActiveBlocks();t&&(e=t[0])}return this.findActualBlockGroups(e.group).reduce((function(t,n){return t+n.calculateWidth(e)}),0)}findActualBlockGroups(e=null){const t=[];if(!(e=e||this.lastGroup))return t;for(let n=0;n<this.groupElementsCount;n++){const i=this.groupLookupMap[n];for(let s=0;s<i.length;s++){const r=this.blockGroups[i[s]];if(n<e.domIndex?r.state.index<e.state.index:r.state.index<=e.state.index){t.push(r);break}}}return t}findActiveBlocks(){return this.lastGroup?this.lastGroup.blocks.filter((function(e){return e.isActiveValue})):null}dispose(){for(let e=0;e<this.blockGroups.length;e++)this.blockGroups[e].dispose();this.blockGroups=[],super.dispose()}}class NF extends DF{constructor(e,t,n){super(e),this.name=t,this.selectorOrFunc=n,this.prepareBlockFunc=null}getBlockWidth(e){return this.prepareBlockFunc?this.prepareBlockFunc(e):0}findBlockElements(e){const t=PS.getChildElementNodesByPredicate(e,(e=>PS.elementMatchesSelector(e,this.selectorOrFunc)));return null!=t?t:[]}setPrepareFunc(e){return this.prepareBlockFunc=e,this}setWidth(){return this.setPrepareFunc((e=>this.getBoxSize(e.element)))}setHidden(){return this.setPrepareFunc((function(e){return 0}))}setOnlyImageWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element),n=PS.getChildByClassName(e.element,`${pe.Image}:not(.${FS.AdaptivePreviewImage})`);n||(n=PS.getChildByClassName(PS.getChildByClassName(e.element,FS.DropDownToggle),`${pe.Image}:not(.${FS.AdaptivePreviewImage})`));let i=PS.getChildByClassName(e.element,FS.AdaptivePreviewImage);if(i||(i=PS.getChildByClassName(PS.getChildByClassName(e.element,FS.DropDownToggle),FS.AdaptivePreviewImage)),n){if(t=this.getBoxSize(n)-this.getBoxOuterOffset(n),i){const e=this.getBoxSize(i)-this.getBoxOuterOffset(i);t=Math.max(t,e)}let s=this.getBoxOffset(e.element),r=n.parentNode;for(;r!==e.element;)s+=this.getBoxOffset(r),r=r.parentNode;return t+s}return t}))}setNoTextWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element);if(PS.getChildByClassName(e.element,FS.ToolbarEdit))return t;const n=PS.getChildByClassName(e.element,FS.ToolbarItem);if(PS.getChildByClassName(n,FS.ToolbarEdit))return t;const i=this.findImageElement(e.element);if(i){const e=i.nextElementSibling;e&&(t-=this.getBoxSize(e),t-=this.getBoxOuterOffset(i))}return t}))}findImageElement(e){var t;let n=PS.getChildByClassName(e,pe.Image);if(n||(n=PS.getChildByClassName(PS.getChildByClassName(e,pe.Button),pe.Image)),!n&&(null===(t=null==e?void 0:e.classList)||void 0===t?void 0:t.contains(FS.ToolbarItem))){const t=PS.getChildByClassName(e,FS.ToolbarItem);return this.findImageElement(t)}return n}}class RF extends DF{constructor(e){super(null),this.clientStateMap=new Map,this.dotNetReference=e.dotNetReference,this.container=e.getMainElement(),this.containerOffsets=this.calculateContainerOffsets(),this.blockGroupsArray=[],this.isReady=!1,this.classesToApply=[],this.domChanges=[],this.nextAdjustGroupWidth=null}getClientState(e){if(null===e.getAttribute("dxbl-toolbar-adaptive-item"))return null;const t=e.id;if(!t)return null;let n=this.clientStateMap.get(t);return n||(n={id:t},this.clientStateMap.set(t,n)),n}toggleClassNameInternal(e,t,n){this.getBatchCssUpdateCache(e)[t]=n;const i=this.getClientState(e);i&&(i[t]=n)}getBatchCssUpdateCache(e){let t=e._layoutBuilderCache;return t||(t=e._layoutBuilderCache={},this.classesToApply.push(this.createBatchCssUpdateDelegate(e))),t}createBatchCssUpdateDelegate(e){return function(){const t=e._layoutBuilderCache;if(t){delete e._layoutBuilderCache;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&T.DomUtils.toggleClassName(e,n,t[n])}}}createBlockGroupsCore(e,t,n){const i=[],s=this.querySelectorAll(e);for(let e=0;e<s.length;e++){const r=this.createLayoutEntity(PF,this,s[e],t);this.blockGroupsArray.push(r),n&&n(r),r.createBlockGroups(),i.push(r)}return this.nextAdjustGroupWidth=this.getGroupsWidth(),i}initialize(){for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].initialize();this.isReady=!0,this.adjust()}adjust(e=null){if(this.isReady){const t=this.classesToApply,n=this.domChanges;let i=this.classesToApply=[],s=this.domChanges=[];const r=this.clientStateMap;let o;null!==this.nextAdjustGroupWidth?(o=this.nextAdjustGroupWidth,this.nextAdjustGroupWidth=null):o=this.getGroupsWidth();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].adjust(o);e&&e(),i=t.concat(i),s=n.concat(s);const a=Array.from(r.values()).concat(Array.from(this.clientStateMap.values()));this.queueUpdates((()=>{for(;i.length;){const e=i.shift();e&&e()}this.queueUpdates((()=>{for(;s.length;){const e=s.shift();e&&e()}a.length&&this.dotNetReference.invokeMethodAsync("OnModelUpdated",a).catch((e=>{gn(this.container)||console.error(e)}))}))}))}}toggleVisibility(e,t){const n=this.getClientState(e);n&&(n.isVisible=t)}queueUpdates(e){qt(e)}getGroupsWidth(){const e=this.getContainer();return e?e.offsetWidth-this.containerOffsets:0}dispose(){this.containerOffsets=this.calculateContainerOffsets();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].dispose();this.blockGroupsArray=[],this.classesToApply=[],this.isReady=!1,super.dispose()}getGroupElements(e,t){return PS.getChildElementNodesByPredicate(e,(function(e){return PS.elementMatchesSelector(e,t)}))}createBlockGroups(){this.createBlockGroupsCore(`.${FS.Toolbar} > ${FF}`,`.${FS.ToolbarGroup}`,(function(e){e.defineState(FS.AdaptiveItem,(function(e){e.for(`:not(${TF})`).setWidth(),e.for(TF).setHidden()})),e.defineState(FS.AdaptiveItemTextHidden,(function(e){e.for(`:not(${TF})`).setNoTextWidth(),e.for(TF).setHidden()})),e.defineState(FS.AdaptiveItemHidden,(function(e){e.for(`:only-child:not(${TF})`).setWidth(),e.for(`:not(:only-child):not(${TF})`).setHidden(),e.for(TF).setWidth()})),e.defineState(FS.AdaptiveItemAllHidden,(function(e){e.for(`:only-child:not(${TF})`).setNoTextWidth(),e.for(`:not(:only-child):not(${TF})`).setHidden(),e.for(TF).setNoTextWidth()}))}))}calculateContainerOffsets(){var e;if(!this.container)return 0;let t=this.getBoxInnerOffset(this.container),n=null!==(e=this.container.querySelector(".dxbl-toolbar"))&&void 0!==e?e:this.container;for(;n!==this.container&&n;)t+=this.getBoxOffset(n),n=n.parentNode;return t}}class LF{constructor(e,t){this.currentWidth=null,this.currentHeight=null,this.elementContentWidthSubscription=null,this.mainElement=e,this.layoutBreakPoints=null,this.dotNetReference=t}getMainElement(){return this.mainElement}initialize(){qt((()=>{this.buildLayout()})),qt((()=>{this.adjustLayout()})),this.elementContentWidthSubscription=on(this.getMainElement(),(e=>{this.currentWidth===e.width&&this.currentHeight===e.height||(this.currentWidth=e.width,this.currentHeight=e.height,this.onBrowserWindowResize())}))}applyLayoutStateAppearance(){var e;T.DomUtils.addClassName(this.getMainElement(),FS.Loaded),null===(e=this.layoutBreakPoints)||void 0===e||e.initialize(),setTimeout((()=>{T.DomUtils.removeClassName(this.getMainElement(),FS.Loading)}),500)}onBrowserWindowResize(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}update(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}dispose(){this.elementContentWidthSubscription&&rn(this.elementContentWidthSubscription),this.layoutBreakPoints&&this.layoutBreakPoints.dispose()}buildLayout(){this.layoutBreakPoints=this.layoutBreakPoints||new RF(this),this.layoutBreakPoints.createBlockGroups()}adjustLayout(){var e;this.applyLayoutStateAppearance(),null===(e=this.layoutBreakPoints)||void 0===e||e.adjust()}}let MF=class extends Ja{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Ln}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new bF(this._keyboardNavigator,this))}};C([xs({type:Boolean,attribute:"loading"})],MF.prototype,"loading",void 0),MF=C([Es("dxbl-ribbon-internal")],MF);const kF=new Map;function KF(e,t,n){if(!e)return Promise.reject("failed");let i=kF.get(e);i?i.update():(i=new LF(e,n),i.initialize(),kF.set(e,i));return Un(e.querySelector(FF)||e),qt((()=>{e.setAttribute("data-dx-ribbon-toolbar-loaded","")})),Promise.resolve("ok")}function OF(e){return t(e,kF),Array.from(kF.keys()).forEach((e=>{gn(e)&&t(e,kF)})),Promise.resolve("ok");function t(e,t){if(!e)return;const n=e.querySelector(FF);n&&Bn(n);const i=t.get(e);null==i||i.dispose(),t.delete(e)}}const _F=Object.freeze({__proto__:null,init:KF,dispose:OF,default:{init:KF,dispose:OF}});var VF,zF;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Check=2]="Check"}(VF||(VF={}));class WF extends CustomEvent{constructor(e){super(WF.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}WF.eventName="dxbl-navigation.action-request",Ct.register(WF.eventName,(e=>e.detail));class $F{}zF=$F,$F.prefix="dxbl",$F.root=`${zF.prefix}-treeview`,$F.templatedItem=`${zF.root}-tmpl`,$F.item=`${zF.root}-item`,$F.itemsContainer=`${zF.root}-items-container`,$F.itemContent=`${zF.item}-content`,$F.itemContainer=`${zF.item}-container`,$F.checkAllBox=`${zF.root}-checkbox-check-all`,$F.filterPanel=`${zF.prefix}-navigation-filter`;class GF{}GF.parentId="parent-id",GF.notTemplatedItemSelector=`li > .${$F.itemContent}`,GF.templatedItemSelector=`li > .${$F.templatedItem}`;const qF=`:scope > .${$F.itemContainer}, :scope.${$F.templatedItem}`;class YF extends On{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}canSwitchToNestedContentMode(){return!0}queryItems(){return this.queryItemsBySelector(qF)}}const XF=`:scope ${GF.templatedItemSelector}, :scope ${GF.notTemplatedItemSelector}`;class JF extends On{activate(){!this._activatedByClick&&this._focusedFromOutside&&null==this._treeView.getAttribute(xn)&&(this.selectedItemIndex=this.navigator.focusedFromForwardElement?this.itemCount-1:0),this._focusedFromOutside=!1,this._activatedByClick=!1,super.activate()}onActiveStateChanged(e){this._focusedFromOutside=e,super.onActiveStateChanged(e)}onPointerDown(e){this._activatedByClick=!0}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._focusedFromOutside=!0,this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByClick=!0,this._treeView=e,this.targetElement.addEventListener("pointerdown",this.boundOnPointerDownHandler)}queryItems(){return this.queryItemsBySelector(XF)}createItemStrategy(e){return new YF(this._treeView,e)}getFocusableContainer(){return this.isTemplatedItem()?this.selectedItemElement:this.selectedItemElement.querySelector(`:scope > .${$F.itemContainer}`)}selectedItemExpandedState(){const e=this.getFocusableContainer().getAttribute(N.ariaExpanded);return null===e?null:"true"===e}selectedItemIsCheckable(){return this.getFocusableContainer().hasAttribute(N.ariaChecked)}selectedItemIsParentNode(){return"1"===this.getFocusableContainer().getAttribute(N.ariaLevel)}selectedItemIsEndNode(){return null===this.getFocusableContainer().getAttribute(N.ariaExpanded)}getSelectedItemParent(){const e=this.getFocusableContainer(),t=this.isTemplatedItem()?e.parentElement:e,n=null==t?void 0:t.getAttribute(GF.parentId),i=document.querySelector(`#${n}`);return this.isTemplatedItem()?i.firstElementChild:i.parentElement}isTemplatedItem(){return this.selectedItemElement.classList.contains($F.templatedItem)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Enter:return this.raiseClickEvent(this.getFocusableContainer(),e.ctrlKey,e.metaKey,e.shiftKey),!0;case Ie.KeyCode.Space:return this.handleSpace(),!0;case Ie.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Ie.KeyCode.Down:return this.moveToNextItem(!0),!0;case Ie.KeyCode.Left:return!0===this.selectedItemExpandedState()?this.performAction(VF.Collapse):this.selectedItemIsParentNode()||this.moveToParent(),!0;case Ie.KeyCode.Right:return!1===this.selectedItemExpandedState()?this.performAction(VF.Expand):this.selectedItemIsEndNode()||this.moveToFirstChild(),!0;case Ie.KeyCode.Home:return this.selectItem(0),!0;case Ie.KeyCode.End:return this.selectItem(this.itemCount-1),!0;default:return!1}}onDispose(){this.targetElement.removeEventListener("pointerdown",this.boundOnPointerDownHandler)}moveToParent(){const e=this.getSelectedItemParent(),t=this.items.indexOf(e);this.selectItem(t)}moveToFirstChild(){this.moveToNextItem(!1)}handleSpace(){this.handleChecking()}selectedItemIsSelectable(){return null!==this.getFocusableContainer().getAttribute(N.ariaSelected)}handleChecking(){(this.selectedItemIsCheckable()||this.selectedItemIsSelectable())&&this.performAction(VF.Check)}performAction(e){this.getFocusableContainer().dispatchEvent(new WF(e))}}class jF extends On{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}queryItems(){return this.queryItemsBySelector("input")}}class ZF extends On{get activatedByCheckAllClick(){return this._activatedByCheckAllClick}set activatedByCheckAllClick(e){this._activatedByCheckAllClick=e}constructor(e){super(e.getKeyBoardNavigator(),e),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByCheckAllClick=!1,this._checkAllBox=null,this._treeView=e}onDispose(){if(this._checkAllBox){this._checkAllBox.querySelector("label").removeEventListener("pointerdown",this.boundOnPointerDownHandler)}}activate(){super.activate(),this.activatedByCheckAllClick||this._checkAllBox&&Fn(this._checkAllBox)}onActiveStateChanged(e){super.onActiveStateChanged(e),e||(this.activatedByCheckAllClick=!1)}onPointerDown(e){this._checkAllBox&&(Dn(this._checkAllBox),this.activatedByCheckAllClick=!0)}queryItems(){return this.queryItemsBySelector(`:scope .${$F.checkAllBox}, :scope .${$F.filterPanel} input, :scope .${$F.itemsContainer}[role=tree]`)}isItemsContainer(e){return e.classList.contains($F.itemsContainer)}isCheckAllBox(e){return e.classList.contains($F.checkAllBox)}createItemStrategy(e){if(this.isItemsContainer(e))return new JF(this._treeView,e);if(this.isCheckAllBox(e)){this._checkAllBox=e;return this._checkAllBox.querySelector("label").addEventListener("pointerdown",this.boundOnPointerDownHandler),new jF(this._treeView,e)}return null}handleKeyDown(e){return super.handleKeyDown(e),this.handleKeyDownCore(e)}handleKeyDownCore(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&(e.shiftKey?this.firstItemSelected?this.leaveBackward():this.moveToPrevItem(!1):this.lastItemSelected?this.leaveForward():this.moveToNextItem(!1),!0)}}var eT;!function(e){e.Disabled="Disabled",e.Multiple="Multiple",e.Recursive="Recursive"}(eT||(eT={}));class tT extends Ja{constructor(){super(...arguments),this._keyboardNavigator=null,this.checkMode=eT.Disabled}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this._keyboardNavigator&&this.initializeKeyboardNavigation(),super.connectedOrContentChanged()}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new ZF(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}C([xs({type:eT,attribute:"check-mode"})],tT.prototype,"checkMode",void 0);let nT=class extends tT{};var iT;nT=C([Es("dxbl-treeview")],nT);class sT{}iT=sT,sT.prefix="dxbl",sT.root=`${iT.prefix}-accordion`,sT.group=`${iT.root}-group`,sT.header=`${iT.group}-header`,sT.body=`${iT.group}-body`,sT.item=`${iT.root}-item`,sT.itemContent=`${iT.item}-content`,sT.itemsContainer=`${iT.root}-items-container`,sT.itemTemplate=`${iT.root}-tmpl`;class rT extends On{get selector(){return this.isTemplatedItem(this.targetElement)?`:scope.${sT.itemTemplate}`:`:scope.${sT.itemContent}`}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._accordion=e}canSwitchToNestedContentMode(){return!0}isTemplatedItem(e){return e.classList.contains(sT.itemTemplate)}queryItems(){return this.queryItemsBySelector(this.selector)}isExpanded(){return"true"===this.selectedItemElement.getAttribute(N.ariaExpanded)}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Enter:return this.raiseClickEvent(this.targetElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Ie.KeyCode.Left:return!!this.isExpanded()&&(this.performAction(VF.Collapse),!0);case Ie.KeyCode.Right:return!this.isExpanded()&&(this.performAction(VF.Expand),!0);default:return!1}}performAction(e){this.targetElement.dispatchEvent(new WF(e))}}class oT extends rT{get selector(){return`:scope.${sT.header}`}}class aT extends On{get activateFirstItem(){return this._activateFirstItem}set activateFirstItem(e){this._activateFirstItem=e}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._activateFirstItem=!0,this._accordion=e}activate(){this.focusedFromOutsideBody()&&(this.selectedItemIndex=this.activateFirstItem?0:this.itemCount-1),super.activate()}canSwitchToNestedContentMode(){return!0}focusedFromOutsideBody(){return!this.targetElement.contains(document.activeElement)}isTemplatedBody(){return null==this.targetElement.querySelector(`:scope .${sT.item}`)}isItem(e){return e.classList.contains(sT.itemContent)}queryItems(){return this.queryItemsBySelector(this.getBodyElementsSelector())}getBodyElementsSelector(){return this.isTemplatedBody()?`:scope.${sT.body}`:`:scope .${sT.itemContent}`}createItemStrategy(e){return this.isItem(e)?new rT(this._accordion,e):null}handleKeyDown(e){const t=super.handleKeyDown(e);return t||this.nestedContentSelected?t:this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Down:return!!this.canProcessUpDownKey()&&(this.moveToNextItem(!0),!0);case Ie.KeyCode.Up:return!!this.canProcessUpDownKey()&&(this.moveToPrevItem(!0),!0);default:return!1}}canProcessUpDownKey(){return this.isItem(document.activeElement)}}const lT=`:scope .${sT.header},\n:scope .${sT.body}[expanded-state=True], :scope .${sT.itemTemplate}`;class AT extends On{constructor(e){super(e.getKeyBoardNavigator(),e),this._accordion=e}isHeader(e){return e.classList.contains(sT.header)}isBody(e){return e.classList.contains(sT.body)}queryItems(){return this.queryItemsBySelector(lT)}createItemStrategy(e){return this.isHeader(e)?new oT(this._accordion,e):this.isBody(e)?new aT(this._accordion,e):new rT(this._accordion,e)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}activate(){var e,t;(null===(e=this.getSelectedItemStrategy())||void 0===e?void 0:e.targetElement.contains(document.activeElement))?null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate():super.activate()}handleKeyDownCore(e){var t;switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Enter:return this.isBody(this.selectedItemElement)&&(null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate()),!0;case Ie.KeyCode.Esc:return document.activeElement!==this.selectedItemElement&&this.selectItem(this.selectedItemIndex),!0;case Ie.KeyCode.Down:return this.moveToNextItem(!1),!0;case Ie.KeyCode.Up:return this.moveToPrevItem(!1),!0;case Ie.KeyCode.Tab:return e.shiftKey?this.leaveBackward():this.leaveForward(),!0}return!1}canFocusSelectedItem(){return super.canFocusSelectedItem()||this.isBody(this.selectedItemElement)}updateSelectedItemByIndex(e){const t=this.selectedItemIndex;super.updateSelectedItemByIndex(e),this.isBody(this.selectedItemElement)&&(this.getSelectedItemStrategy().activateFirstItem=t<this.selectedItemIndex)}}class dT extends Ja{constructor(){super(...arguments),this._keyboardNavigator=null}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this._keyboardNavigator&&this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}initializeKeyboardNavigator(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new AT(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}let cT=class extends dT{};cT=C([Es("dxbl-accordion")],cT);class hT extends wx{constructor(e,t,n){super(e,t),this._menuClosing=!1,this._parentStrategy=n,this.selectedItemIndex=-1}get parentStrategy(){return this._parentStrategy}initialize(){super.initialize(),this.targetElement.setAttribute(Ex,"")}activate(){this.selectedItemIndex>=0&&super.activate()}updateSelectedItemByIndex(e){e>=0&&super.updateSelectedItemByIndex(e)}queryItems(){return this.queryItemsBySelector(".dxbl-context-menu-item, .dxbl-context-menu-template")}onActiveStateChanged(e){e||(this.selectedItemElement&&bn.removeTabIndex(this.selectedItemElement),bn.removeTabIndex(this.targetElement))}doAction(e){this.selectedItemElement&&(this.doClick(this.selectedItemElement,e),ux(this.selectedItemElement)&&this.openSubMenu(fx.First))}async openSubMenu(e){this.requestSubMenuOpen();const t=await this.waitSubMenuShown();e===fx.Last?t.focusLastItem():t.focusFirstItem()}handlePopupShown(){this.parentStrategy.onSubMenuShown(this),this.focusContainer()}handlePopupClosed(){this.parentStrategy.onSubMenuClosed(this)}onSubMenuClosed(e){super.onSubMenuClosed(e),this._menuClosing||this.focusContainer(),this._menuClosing=!1}focusContainer(){const e=bn.findFocusableElements(this.targetElement);e.length>0&&bn.focusElement(e[0])}createSubMenuStrategy(e,t){return new pT(e,t,this)}handleKeyDown(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Esc:return this.closeSelf(Ie.KeyCode.Esc)&&H.markHandled(e),!0;case Ie.KeyCode.Tab:return this._menuClosing=!0,!1;default:return super.handleKeyDown(e)}}}class uT extends hT{closeSelf(e){return!(!ux(this.selectedItemElement)||e===Ie.KeyCode.Esc)&&(this.openSubMenu(fx.Last),!0)}}class pT extends hT{closeSelf(e){const t=this.targetElement.placementTargetElement;return!!t&&(t.dispatchEvent(new vx(Cx.Collapse)),this.parentStrategy.focusSelectedItem(),!0)}}class mT extends On{constructor(e,t){super(e,t),this._prevActiveElement=null,this.boundHandlePopupKeyboardStrategyCreating=this.handlePopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(mo.eventName,this.boundHandlePopupKeyboardStrategyCreating)}queryItems(){return this.queryItemsBySelector(".dxbl-dropdown-dialog")}onSubMenuShown(e){this._prevActiveElement||(this._prevActiveElement=document.activeElement)}onSubMenuClosed(e){e.targetElement.isConnected&&!gx(e.targetElement)||this.tryRestoreFocusedElement()}handlePopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>new uT(e,t,this)},e.stopPropagation()}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)!==Ie.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(e.shiftKey?this.leaveBackward():this.leaveForward(),this.performShortcutEvent(e),!0)}tryRestoreFocusedElement(){this._prevActiveElement&&this._prevActiveElement instanceof HTMLElement&&(this._prevActiveElement.focus(),this._prevActiveElement=null)}}let gT=class extends Ja{constructor(){super(),this._keyboardNavigator=null,this.bindedOnChanged=this.onChanged.bind(this),this._observer=new MutationObserver(this.bindedOnChanged)}onChanged(e,t){null==e||e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Kn&&(this._keyboardNavigator=e,this.initializeKeyboardNavigation())}))}))}connectedCallback(){this._keyboardNavigator=this.querySelector(Ln),this._keyboardNavigator?this.initializeKeyboardNavigation():this._observer.observe(this,{childList:!0})}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new mT(this._keyboardNavigator,this))}disconnectedCallback(){var e;this._observer.disconnect(),null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}};gT=C([Es("dxbl-context-menu")],gT);class CT{}CT.ClassName=pe.Prefix+"-pivot-table",CT.TableDataClassName=CT.ClassName+"-data",CT.HeaderFieldClassName=CT.ClassName+"-header-field",CT.HeaderFieldEmptyClassName=CT.HeaderFieldClassName+"-empty",CT.HeaderFreeSpaceClassName=CT.ClassName+"-header-free-space",CT.RowFieldItemClassName=CT.ClassName+"-row-field-item",CT.AreaClassName=CT.ClassName+"-area",CT.AreaDataClassName=CT.AreaClassName+"-data",CT.AreaRowClassName=CT.AreaClassName+"-row",CT.AreaRowFieldClassName=CT.AreaClassName+"-row-field",CT.AreaColumnClassName=CT.AreaClassName+"-column",CT.AreaColumnInnerContainerClassName=CT.AreaColumnClassName+"-inner-container",CT.AreaMultipleHeadersInnerContainer=CT.AreaClassName+"-multiple-headers-inner-container",CT.AreaFilterClassName=CT.AreaClassName+"-filter",CT.FixedCellClassName=CT.ClassName+"-fixed-cell",CT.NoScrollClassName=CT.ClassName+"-no-scroll",CT.LastFixedLeftCellClassName=CT.ClassName+"-last-fixed-left-cell",CT.DraggableHeaderClassName=CT.ClassName+"-draggable-header",CT.HeaderContentClassName=CT.ClassName+"-header-content",CT.DraggingUpTargetClassName=CT.ClassName+"-dragging-up-target",CT.DraggingDownTargetClassName=CT.ClassName+"-dragging-down-target",CT.MoveCursorCssClassName=CT.ClassName+"-move-cursor",CT.NotAllowedCursorCssClassName=CT.ClassName+"-not-allowed-cursor",CT.FieldListClassName=CT.ClassName+"-field-list",CT.FieldListContainerClassName=CT.FieldListClassName+"-container",CT.FieldListContainerDataClassName=CT.FieldListContainerClassName+"-data",CT.FieldListContainerRowClassName=CT.FieldListContainerClassName+"-row",CT.FieldListContainerColumnClassName=CT.FieldListContainerClassName+"-column",CT.FieldListContainerFilterClassName=CT.FieldListContainerClassName+"-filter";class fT{constructor(){}}fT.Table=`.${CT.TableDataClassName}`,fT.BodyRows="tbody tr",fT.RowFieldItem=`.${CT.RowFieldItemClassName}`,fT.AreaData=`.${CT.AreaDataClassName}`,fT.AreaRow=`.${CT.AreaRowClassName}`,fT.AreaFilter=`.${CT.AreaFilterClassName}`,fT.AreaRowField=`.${CT.AreaRowFieldClassName}`,fT.AreaColumnInnerContainer=`.${CT.AreaColumnInnerContainerClassName}`,fT.ColElementSelector=`:scope > .${Fe.ClassName} > .${Fe.ContentContainerClassName} > .${CT.TableDataClassName} > colgroup > col`,fT.AreaMultipleHeadersInnerContainerSelector=`.${CT.AreaMultipleHeadersInnerContainer}`,fT.HeaderFieldSelector=`.${CT.HeaderFieldClassName}`;const vT="dxbl-pivot-table";class bT{constructor(){}}var wT;bT.DataColumnIndex="data-column-index",bT.TableState="table-state",bT.Uid="data-dx-pivot-uid",function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(wT||(wT={}));class yT{constructor(e){this._pivotUid="",this._lastGeneratedStyle="",this._scrollStatus=wT.Disabled,this._pivot=e}get highlightLeftBorder(){switch(this._scrollStatus){case wT.BetweenBorders:case wT.RightBorder:return!0;default:return!1}}updateStyle(e){this._scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle()))}hasAnyFixedColumn(){return this._pivot.columnsInfo.some((e=>!!e.fixedPosition))}updateFixedCellsStyle(){this._pivotUid=this._pivot.getAttribute(bT.Uid);const e=this._pivot.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this._lastGeneratedStyle!==t&&(e.innerText=t,this._lastGeneratedStyle=t)}createPositionStyles(){const e=this._pivot.getColElements(),t=this.getOffsetWidths(e),n=new Array(t.length);n[0]=0;for(let e=1;e<t.length;++e)n[e]=n[e-1]+t[e-1];let i="";for(let e=0;e<this._pivot.columnsInfo.length;++e){const t=this._pivot.columnsInfo[e].fixedPosition;t&&"left"===t&&(i+=this.createPositionStyleForColumn(e,t,n[e]))}return i}createPositionStyleForColumn(e,t,n){return this.getTableRowsSelector()+` > .${CT.FixedCellClassName}[data-column-index="${e}"]`+` { ${t}: ${n}px; }`}createBorderStyles(){const e=[];return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${CT.LastFixedLeftCellClassName} { border-right-color: var(--dxbl-pivot-table-fixed-column-border-color); border-right-width: var(--dxbl-pivot-table-border-width); }`}getTableRowsSelector(){return[`${vT}[${bT.Uid}="${this._pivotUid}"]`,`.${Fe.ClassName}`,`.${Fe.ContentContainerClassName}`,`.${CT.TableDataClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let n=0;n<e.length;++n)t.push(this._pivot.getColElementOffsetWidth(n));return t}calcScrollStatus(e){if(!(this._pivot&&this._pivot.getTable()))return wT.Disabled;const t=this._pivot.getTable().clientWidth;return t===e.clientWidth?wT.Disabled:0===e.scrollLeft?wT.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?wT.RightBorder:wT.BetweenBorders}}class BT{get uID(){return this._uID}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get fixedPosition(){return this._fixedPosition}constructor(e,t,n,i){this._uID=e,this._width=t,this._colElementWidth=t,this._minWidth=n,this._fixedPosition=i}updateWidth(e){this._width=e,this._colElementWidth=e}}var ET,IT;!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Filter=2]="Filter",e[e.Data=3]="Data"}(ET||(ET={})),function(e){e[e.Row=1]="Row",e[e.Column=2]="Column",e[e.Filter=4]="Filter",e[e.Data=8]="Data",e[e.All=15]="All"}(IT||(IT={}));class ST extends LA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this._pivotTable=e}start(e,t){this.isHeaderDraggingAllowed(e)&&super.start(e,t)}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(CT.MoveCursorCssClassName),document.body.classList.remove(CT.NotAllowedCursorCssClassName)}getDraggableElement(e){return ST.addDraggableHeaderToDOM(e)}hideDraggableElement(){ST.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const n=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;n&&!n.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}isHeaderDraggingAllowed(e){var t;const n=this._pivotTable.getFieldInfo(e);return null!==(t=null==n?void 0:n.allowDrag)&&void 0!==t&&t}isPossibleDropToCurrentArea(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.draggedField.allowedAreas)&&ST.isAreaAllowed(this.draggableContext.dropArea,this.draggableContext.draggedField.allowedAreas)}static isAreaAllowed(e,t){return 0!=(t&this.flagOf(e))}static flagOf(e){return 1<<e}createFieldDraggedHandlerArgs(){return this.draggableContext&&this.draggableContext.isPossibleDropItem&&this.draggableContext.draggedField.uID?{fieldUid:this.draggableContext.draggedField.uID,newArea:this.draggableContext.dropArea,nextFieldUid:this.draggableContext.nextFieldUid}:null}updateDraggableContextByElement(e,t){if(!e)return;if(null==this.draggableContext)return;const n=this._pivotTable.findFieldHeaderElement(e);if(n)this.updateDraggableContext(n,t);else{const t=e,n=t.classList.contains(CT.HeaderFieldEmptyClassName)||t.classList.contains(CT.HeaderFreeSpaceClassName);if(!n)return;const i=this._pivotTable.getLastFieldHeaderInArea(t);if(this.draggableContext.srcElement===t||this.draggableContext.srcElement===i)return;this.draggableContext.dropArea=this.getClosestArea(t),this.draggableContext.nextFieldUid=null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea();const s=null!=i?i:n?t:null;s&&(this.setMouseOverElementInfo(s),this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,i?KA.Right:KA.Left))}}updateDraggableContext(e,t){var n;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;if(this.draggableContext.srcElement===e)return;if(this.setMouseOverElementInfo(e),!this.isPossibleDropToCurrentArea())return;const i=this.isThereCursorInLeftPart(t),s=this._pivotTable.getFieldHeaderSiblings(e);if(!s)return void this.clearMoveStateFromDraggableContext();const r=Array.from(s),o=r.findIndex((t=>t.isSameNode(e)))+(i?-1:1);if(r[o]!==this.draggableContext.srcElement){const t=this._pivotTable.getFieldInfo(i?e:r[o]);this.draggableContext.nextFieldUid=null!==(n=null==t?void 0:t.uID)&&void 0!==n?n:null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea()}else this.clearMoveStateFromDraggableContext();this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,i?KA.Left:KA.Right)}refreshUICore(){super.refreshUICore();const e=this.draggableContext;if(!e)return;e.isPossibleDropItem?e.targets.show():e.targets.hide();const t=this.isPossibleDropToCurrentArea();document.body.classList.toggle(CT.MoveCursorCssClassName,t),document.body.classList.toggle(CT.NotAllowedCursorCssClassName,!t)}setMouseOverElementInfo(e){super.setMouseOverElementInfo(e),this.draggableContext&&(this.draggableContext.dropArea=this.getClosestArea(e))}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions()}addHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),n.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),n.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=CT.DraggableHeaderClassName;const n=e.getBoundingClientRect();t.style.width=`${n.width}px`,t.style.height=`${n.height}px`;const i=getComputedStyle(e);t.style.padding=i.padding,t.style.font=i.font,t.style.whiteSpace=i.whiteSpace;const s=e.cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${CT.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,n){const i=super.createDraggableContext(e,t,n),s=this._pivotTable.getScrollViewer(),r=this._pivotTable.getFieldInfo(e);return{...i,scrollViewerRect:s&&s.getRectangle(),draggedField:r,nextFieldUid:null,srcArea:this.getClosestArea(e),dropArea:this.getClosestArea(e),targets:new zA(CT.DraggingUpTargetClassName,CT.DraggingDownTargetClassName)}}getClosestArea(e){const t=e.closest(`.${CT.AreaClassName}`);if(t.classList.contains(CT.AreaDataClassName))return ET.Data;if(t.classList.contains(CT.AreaRowClassName))return ET.Row;if(t.classList.contains(CT.AreaColumnClassName))return ET.Column;if(t.classList.contains(CT.AreaFilterClassName))return ET.Filter;throw Error("draggable area not found")}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.nextFieldUid=null)}}class xT extends CustomEvent{constructor(e){super(xT.eventName,{detail:new DT(e),bubbles:!0,composed:!0,cancelable:!0})}}xT.eventName="dxbl-pivot-table.field-moved";class DT{constructor(e){this.FieldUid=e.fieldUid,this.NewArea=e.newArea,this.NextFieldUid=e.nextFieldUid}}Ct.register(xT.eventName,(e=>e.detail));customElements.define(vT,class extends he{constructor(){super(),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this._columnsInfo=[],this._dataAreaContentChangedObserver=null,this._filterAreaContentChangedObserver=null,this._styleGenerator=null,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this._pointerEventsHelper=new q(this),this._fieldDraggingHelper=new ST(this)}getHeaderAreas(){return this.querySelectorAll(`.${CT.AreaClassName}`)}findFieldHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${CT.HeaderFieldClassName}`):null}isHeaderElement(e){return e&&e.classList.contains(CT.HeaderFieldClassName)}getHeaderCell(e,t){throw new Error("Method not implemented.")}getFieldHeaderSiblings(e){const t=e.closest(`.${CT.AreaClassName}`);return t&&t.querySelectorAll(`.${CT.HeaderFieldClassName}`)}getLastFieldHeaderInArea(e){const t=e.closest(`.${CT.AreaClassName}`).querySelectorAll(fT.HeaderFieldSelector);return t.length?t[t.length-1]:null}getFieldInfo(e){return{uID:null==e?void 0:e.dataset.uid,allowedAreas:null==e?void 0:e.dataset.allowedAreas,allowDrag:void 0!==(null==e?void 0:e.dataset.allowDrag)}}getHeaderDataArea(){return this.querySelector(fT.AreaData)}getHeaderFilterArea(){return this.querySelector(fT.AreaFilter)}getAreaMultipleHeadersInnerContainer(e){return e.querySelector(fT.AreaMultipleHeadersInnerContainerSelector)}initAreaContentChangedObservers(){this._dataAreaContentChangedObserver=new MutationObserver(this.dataAreaContentChanged.bind(this)),this._filterAreaContentChangedObserver=new MutationObserver(this.filterAreaContentChanged.bind(this));const e={childList:!0,subtree:!0,characterData:!0};this._dataAreaContentChangedObserver.observe(this.getHeaderDataArea(),e);const t=this.getHeaderFilterArea();t&&this._filterAreaContentChangedObserver.observe(t,e)}disconnectAreaContentChangedObservers(){var e,t;null===(e=this._dataAreaContentChangedObserver)||void 0===e||e.disconnect(),null===(t=this._filterAreaContentChangedObserver)||void 0===t||t.disconnect()}get styleGenerator(){return this._styleGenerator}get fieldsInfo(){return Array.from(this.querySelectorAll(`.${CT.HeaderFieldClassName}`)).map((e=>({uID:e.dataset.id})))}get columnsInfo(){return this._columnsInfo}get uId(){return this.getAttribute(bT.Uid)}getScrollViewer(){return this.querySelector(`.${Fe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${Fe.ContentContainerClassName}`)}getTable(){return this.querySelector(fT.Table)}getColElements(){return this.querySelectorAll(fT.ColElementSelector)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColElementOffsetWidth(e){return this.getColElements()[e].getBoundingClientRect().width}initializeComponent(){super.initializeComponent(),this._styleGenerator=new yT(this),this._componentResizeObserver.observe(this),this._pointerEventsHelper.initialize(),this.initAreaContentChangedObservers(),this.addEventSubscriptions(),this.setupBottomBorderForLastDataRow(),this.adjustDataAreaWidth(),this.adjustWidthDueToFilterArea()}disposeComponent(){this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this._componentResizeObserver.disconnect(),this.disconnectAreaContentChangedObservers(),super.disposeComponent()}notifyColumnsChanged(e){this._columnsInfo=e}dataAreaContentChanged(e){this.resetRowAreaColWidths(),this.adjustDataAreaWidth()}filterAreaContentChanged(e){this.adjustWidthDueToFilterArea()}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.subscribeToScroll&&e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler)}))}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.unsubscribeFromScroll&&e.unsubscribeFromScroll()}))}onScrollViewerScroll(){this.styleGenerator.updateStyle(this.getScrollViewerContent())}setupBottomBorderForLastDataRow(){const e=this.getScrollViewerContent(),t=this.getTable();e&&t&&(t.offsetHeight<e.clientHeight?T.DomUtils.addClassName(t,CT.NoScrollClassName):T.DomUtils.removeClassName(t,CT.NoScrollClassName))}resetRowAreaColWidths(){const e=this.getColElements();for(let t=0;t<this.columnsInfo.length;t++){const n=this.columnsInfo[t].width;e[t].style.width!==n&&(e[t].style.width=n)}}adjustDataAreaWidth(){const e=this.getHeaderDataArea(),t=this.getAreaMultipleHeadersInnerContainer(e);if(t.offsetWidth>=t.scrollWidth)return;const n=this.getColElements();for(let e=0;e<this.columnsInfo.length;e++){const i=t.scrollWidth-t.offsetWidth,s=n[e].getBoundingClientRect().width,r=Math.ceil(s+i);n[e].style.width=mn(r)}}adjustWidthDueToFilterArea(){const e=this.getHeaderFilterArea();if(!e)return;if(e.scrollWidth<=this.offsetWidth)return;const t=Math.ceil(e.scrollWidth+function(e,t){const n=t||T.DomUtils.getCurrentStyle(e);return parseInt(n.paddingRight)}(e));this.style.width=mn(t)}onScrollViewerUpdate(e){this.setupBottomBorderForLastDataRow(),e.stopPropagation()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}invokeHeaderFieldMoved(e){e&&this.dispatchEvent(new xT(e))}findHeaderFieldElement(e){return e?e.closest(`.${CT.HeaderFieldClassName}`):null}onDragStart(e){const t=e.detail.source,n=this.findHeaderFieldElement(t.target);n&&(this._fieldDraggingHelper.start(n,t),n.addEventListener("click",(e=>e.stopImmediatePropagation()),{once:!0})),e.stopPropagation()}onDragStop(e){if(this._fieldDraggingHelper.isStarted()){const e=this._fieldDraggingHelper.createFieldDraggedHandlerArgs();this._fieldDraggingHelper.stop(),this.invokeHeaderFieldMoved(e)}e.stopPropagation()}onDragCancel(e){this._fieldDraggingHelper.isStarted()&&this._fieldDraggingHelper.stop(),e.stopPropagation()}updateStyle(){const e=this.getScrollViewerContent();e&&this.styleGenerator.updateStyle(e);const t=this.getScrollViewer();t&&t.reconnectResizeObservers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}static get observedAttributes(){return["update-style"]}attributeChangedCallback(e,t,n){if("update-style"===e)setTimeout((()=>{this.updateStyle()}))}}),customElements.define("dxbl-pivot-table-columns-info",class extends he{get data(){return this.getAttribute("data")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}connectedCallback(){var e;super.connectedCallback(),this.pivot=this.closest(`.${CT.ClassName}`),null===(e=this.pivot)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),n=[];for(let e=0;e<t.length;e++){const i=t[e],s=new BT(i.UID,i.Width,i.MinWidth,i.FixedPosition);n.push(s)}return n}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,n){var i;if("data"===e)null===(i=this.pivot)||void 0===i||i.notifyColumnsChanged(this.parseColumns(n))}}),customElements.define("dxbl-pivot-table-drag-mediator",class extends he{isDropAllowed(e,t){var n;if(!t)return!0;const i=null===(n=e.querySelector(`.${CT.HeaderFieldClassName}`))||void 0===n?void 0:n.dataset.allowedAreas;if(!i)return!0;const s=this.getClosestArea(t);return!s||ST.isAreaAllowed(s,i)}getClosestArea(e){const t=e.closest(`.${CT.FieldListContainerClassName}`);return t.classList.contains(CT.FieldListContainerDataClassName)?ET.Data:t.classList.contains(CT.FieldListContainerRowClassName)?ET.Row:t.classList.contains(CT.FieldListContainerColumnClassName)?ET.Column:t.classList.contains(CT.FieldListContainerFilterClassName)?ET.Filter:null}});class FT{}FT.TimeCellsContainerClassName="dxbl-sc-timecells-container",FT.VerticalAppointmentsClassName="dxbl-sc-vertical-apts",FT.HorizontalAppointmentsClassName="dxbl-sc-horizontal-apts",FT.VerticalEditableAppointmentsClassName="dxbl-sc-editable-vertical-apts",FT.HorizontalEditableAppointmentsClassName="dxbl-sc-editable-horizontal-apts",FT.VerticalAppointmentClassName="dxbl-sc-vertical-apt",FT.HorizontalAppointmentClassName="dxbl-sc-horizontal-apt",FT.CompactAppointmentClassName="dxbl-sc-apt-compact",FT.EditableAppointmentClassName="dxbl-sc-apt-edited",FT.DateCellHeadClassName="dxbl-date-cell-head",FT.MonthViewClassName="dxbl-sc-month",FT.DateHeaderClassName="dxbl-sc-date-hr",FT.TimeCellClassName="dxbl-sc-time-cell",FT.TodayClassName="dxbl-sc-today",FT.HorizontalViewClassName="dxbl-sc-horizontal-view",FT.TimeMarkerWrapperClassName="dxbl-sc-time-marker-wrapper",FT.TimeMarkerWrapperInvisibleClassName="dxbl-sc-time-marker-wrapper-invisible",FT.TimeMarkerClassName="dxbl-sc-time-marker",FT.TimeMarkerImageClassName="dxbl-sc-time-marker-image",FT.TimeMarkerLineClassName="dxbl-sc-time-marker-line",FT.TimeIndicatorClassName="dxbl-sc-time-indicator",FT.AppointmentClassName="dxbl-sc-apt",FT.SelectedAppointmentClassName="dxbl-sc-apt-selected",FT.DisableAppointmentClassName="dxbl-sc-apt-disable",FT.VerticalResourceHeaderClassName="dxbl-v-resource-header",FT.ResourcesContainerClassName="dxbl-sc-resources-container",FT.HeadersContainerClassName="dxbl-sc-headers-container",FT.AllDayAreaClassName="dxbl-sc-all-day-area",FT.TimelineViewClassName="dxbl-sc-timeline",FT.TopHandleClassName="dxbl-top-handle",FT.BottomHandleClassName="dxbl-bottom-handle",FT.LeftHandleClassName="dxbl-left-handle",FT.RightHandleClassName="dxbl-right-handle",FT.VerticalViewClassName="dxbl-sc-vertical-view",FT.View="dxbl-view",FT.ToolbarWrapper="dxbl-sc-tb-wrapper",FT.ResourceNavigatorFooter="dxbl-rn-footer",FT.ResourceNavigatorListBoxContainer="dxbl-resource-navigator-list-box-container",FT.AppointmentTooltip="dxbl-sc-tooltip";class TT{constructor(){this.TIMEOUT=6e4,this.subscriptions=[],this.timerId=-1}subscribe(e,t){if(-1===this.getSubscriptionIndex(e)){this.subscriptions.push({scheduler:e,updateAction:t}),-1===this.timerId&&this.startTimer()}}unsubscribe(e){const t=this.getSubscriptionIndex(e);-1!==t&&this.unsubscribeByIndex(t),0===this.subscriptions.length&&this.stopTimer()}unsubscribeByIndex(e){this.subscriptions.splice(e,1)}getSubscriptionIndex(e){for(let t,n=0;t=this.subscriptions[n];n++)if(t.scheduler===e)return n;return-1}startTimer(){this.timerId=setTimeout(this.onTimeout.bind(this),this.TIMEOUT)}stopTimer(){-1!==this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)}onTimeout(){for(let e,t=0;e=this.subscriptions[t];t++)if(TT.isElementValid(e.scheduler))try{e.updateAction()}catch(e){}else this.unsubscribeByIndex(t),t--;this.startTimer()}static isElementValid(e){for(;null!=e;){if("BODY"===e.tagName)return!0;e=e.parentNode}return!1}}class HT{}HT.ContainerIndex="data-container-index",HT.FirstContainerIndex="data-first-container-index",HT.LastContainerIndex="data-last-container-index",HT.FirstCellIndex="data-first-cell-index",HT.LastCellIndex="data-last-cell-index",HT.ColumnsCount="data-columns-count",HT.Column="data-column",HT.Row="data-row",HT.RowSpan="data-row-span",HT.Key="data-key",HT.Start="data-start",HT.End="data-end",HT.Duration="data-duration",HT.AllDay="data-allday",HT.Resource="data-resource",HT.SnapToCellsMode="snap-to-cells-mode",HT.AppointmentTopPosition="data-appointment-top-position",HT.UtcOffset="data-uct-offset";class UT{constructor(e,t){this.start=e,this.duration=t,this.isLongerOrEqualDay=t>=QT.DaySpan}getStart(){return this.start}getDuration(){return this.duration}getEnd(){return QT.dateIncreaseWithUtcOffset(this.start,this.duration)}intersectsWith(e){return e.getEnd().valueOf()-this.getStart().valueOf()>=0&&e.getStart().valueOf()-this.getEnd().valueOf()<=0}}class QT{static dateSubsWithTimezone(e,t){return e.valueOf()-t.valueOf()+(t.getTimezoneOffset()-e.getTimezoneOffset())*QT.HourSpan}static truncToDate(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static calculateDaysDifference(e,t){const n=QT.truncToDate(e),i=QT.truncToDate(t);return QT.dateSubsWithTimezone(i,n)/QT.DaySpan}static dateIncreaseWithUtcOffset(e,t){const n=QT.dateIncrease(e,t),i=(n.getTimezoneOffset()-e.getTimezoneOffset())*QT.HourSpan;return QT.dateIncrease(n,i)}static dateIncrease(e,t){return new Date(e.valueOf()+t)}static addTimeSpan(e,t){return new Date(e.valueOf()+t)}static toDayTime(e){return e.valueOf()-QT.truncToDate(e).valueOf()}static getCellInterval(e){const t=LT.Attr.getStart(e),n=LT.Attr.getEnd(e);return new UT(t,this.dateSubsWithTimezone(n,t))}static dateTimeComparer(e,t){const n=t.getTime()-e.getTime();return 0===n?0:n<0?1:-1}static dateTimeIndexComparer(e,t,n){return QT.dateTimeComparer(e[t],n)}static getUtcTimezoneOffset(e){return e.getTimezoneOffset()*QT.HourSpan*-1}static getCurrentLocalTime(){const e=(new Date).getTime();return new Date(e)}}var PT;QT.HourSpan=6e4,QT.HalfHourSpan=18e5,QT.DaySpan=864e5,function(e){e[e.None=0]="None",e[e.Auto=1]="Auto",e[e.Always=2]="Always"}(PT||(PT={}));const NT=PT;class RT{getContainerIndex(e){return RT.getAttributeIntValue(e,HT.ContainerIndex,-1)}getFirstContainerIndex(e){return RT.getAttributeIntValue(e,HT.FirstContainerIndex,-1)}getLastContainerIndex(e){return RT.getAttributeIntValue(e,HT.LastContainerIndex,-1)}getAppointmentFirstCellIndex(e){return RT.getAttributeIntValue(e,HT.FirstCellIndex,-1)}getAppointmentLastCellIndex(e){return RT.getAttributeIntValue(e,HT.LastCellIndex,-1)}getAppointmentColumnsCount(e){return RT.getAttributeIntValue(e,HT.ColumnsCount,0)}setAppointmentColumnsCount(e,t){e.setAttribute(HT.ColumnsCount,t)}getAppointmentColumn(e){return RT.getAttributeIntValue(e,HT.Column,0)}setAppointmentColumn(e,t){e.setAttribute(HT.Column,t)}getAppointmentRow(e){return RT.getAttributeFloatValue(e,HT.Row,-1)}getAppointmentRowSpan(e){return RT.getAttributeFloatValue(e,HT.RowSpan,0)}getAppointmentKey(e){return e.getAttribute(HT.Key)||""}getAppointmentTopPosition(e){return RT.getAttributeIntValue(e,HT.AppointmentTopPosition,0)}setAppointmentTopPosition(e,t){e.setAttribute(HT.AppointmentTopPosition,t)}removeAppointmentTopPosition(e){e.removeAttribute(HT.AppointmentTopPosition)}getStart(e){const t=new Date(parseInt(e.getAttribute(HT.Start)||""));return QT.dateIncreaseWithUtcOffset(t,t.getTimezoneOffset()*QT.HourSpan)}getEnd(e){const t=parseInt(e.getAttribute(HT.Start)||""),n=parseInt(e.getAttribute(HT.End)||"");return QT.dateIncreaseWithUtcOffset(this.getStart(e),n-t)}getDuration(e){return parseInt(e.getAttribute(HT.Duration)||"")}getAppointmentEnd(e){const t=this.getStart(e),n=this.getDuration(e);return new Date(t.getTime()+n)}getAllDay(e){return""===e.getAttribute(HT.AllDay)}getResourceKey(e){return e.getAttribute(HT.Resource)||""}getSnapToCellsMode(e){const t=e.getAttribute(HT.SnapToCellsMode);return null===t?null:NT[t]}getUtcOffset(e){return RT.getAttributeIntValue(e,HT.UtcOffset,0)}static getAttributeIntValue(e,t,n){return RT.getAttributeParsedNumberValue(e,t,parseInt,n)}static getAttributeFloatValue(e,t,n){return RT.getAttributeParsedNumberValue(e,t,parseFloat,n)}static getAttributeParsedNumberValue(e,t,n,i){const s=e.getAttribute(t);return s?n(s):i}}class LT{static getVerticalAppointmentsContainer(e){return e.querySelector(`.${FT.VerticalAppointmentsClassName}`)}static getHorizontalAppointmentsContainer(e){return e.querySelector(`.${FT.HorizontalAppointmentsClassName}`)}static getHorizontalAppointments(e){const t=e.querySelectorAll(`.${FT.HorizontalAppointmentClassName}`);return Array.from(t)}static getHorizontalEditableAppointments(e){const t=e.querySelectorAll(`.${FT.HorizontalEditableAppointmentsClassName} .${FT.HorizontalAppointmentClassName}`);return Array.from(t)}static getVerticalAppointments(e){const t=e.querySelectorAll(`.${FT.VerticalAppointmentClassName}`);return Array.from(t)}static getVerticalEditableAppointments(e){const t=e.querySelectorAll(`.${FT.VerticalEditableAppointmentsClassName} .${FT.VerticalAppointmentClassName}`);return Array.from(t)}static getHorizontalView(e){return e.querySelectorAll(`.${FT.HorizontalViewClassName}`)[0]}static getTimeMarkerWrappers(e){return e.querySelectorAll(`.${FT.TimeMarkerWrapperClassName}`)}static getTimeMarkerContainer(e){return e.querySelectorAll(`.${FT.TimeMarkerClassName}`)[0]}static getTimeMarkerImages(e){const t=e.querySelectorAll(`.${FT.TimeMarkerImageClassName}`);return Array.from(t)}static getTimeMarkerLine(e){return e.querySelectorAll(`.${FT.TimeMarkerLineClassName}`)[0]}static getTimeIndicatorContainer(e){return e.querySelectorAll(`.${FT.TimeIndicatorClassName}`)[0]}static getAppointmentContainer(e){return Lt(e,FT.AppointmentClassName)}static getTimeCellContainer(e){return Rt(e,"",(function(e,t){return LT.isTimeCellElement(e)}))}static getSelectedAppointment(e){return e.querySelectorAll(`.${FT.SelectedAppointmentClassName}:not(.${FT.DisableAppointmentClassName})`)[0]}static getEditableAppointments(e){const t=e.querySelectorAll(`.${FT.EditableAppointmentClassName}`);return Array.from(t)}static isEditableAppointment(e){return T.DomUtils.hasClassName(e,FT.EditableAppointmentClassName)}static getVerticalResourceHeaders(e){return e.querySelectorAll(`.${FT.VerticalResourceHeaderClassName}`)}static getDateHeaders(e){const t=LT.isMonthView(e)?FT.TimeCellClassName:FT.DateHeaderClassName;return e.querySelectorAll(`.${t}`)}static getTodayDateHeaders(e){return e.querySelectorAll(`.${FT.DateHeaderClassName}.${FT.TodayClassName}`)}static getResourcesViewport(e){return e.querySelectorAll(`.${FT.ResourcesContainerClassName}`)[0]}static getTimescaleViewport(e){return e.querySelectorAll(`.${FT.HeadersContainerClassName}`)[0]}static getTimeCellsViewport(e){return e.querySelectorAll(`.${FT.TimeCellsContainerClassName}`)[0]}static getParentTimeCellsViewport(e){return Lt(e,FT.TimeCellsContainerClassName)}static isVerticalAppointment(e){return T.DomUtils.hasClassName(e,FT.VerticalAppointmentClassName)}static isHorizontalAppointment(e){return T.DomUtils.hasClassName(e,FT.HorizontalAppointmentClassName)}static isTimeCellElement(e){return T.DomUtils.hasClassName(e,FT.AllDayAreaClassName)||T.DomUtils.hasClassName(e,FT.TimeCellClassName)}static isTimelineView(e){return T.DomUtils.hasClassName(e,FT.TimelineViewClassName)}static isMonthView(e){return T.DomUtils.hasClassName(e,FT.MonthViewClassName)}static isTopHandleElement(e){return T.DomUtils.hasClassName(e,FT.TopHandleClassName)}static isBottomHandleElement(e){return T.DomUtils.hasClassName(e,FT.BottomHandleClassName)}static isLeftHandleElement(e){return T.DomUtils.hasClassName(e,FT.LeftHandleClassName)}static isRightHandleElement(e){return T.DomUtils.hasClassName(e,FT.RightHandleClassName)}static isAppointmentSelected(e){return T.DomUtils.hasClassName(e,FT.SelectedAppointmentClassName)}static isHorizontalAppointmentsContainer(e){return T.DomUtils.hasClassName(e,FT.HorizontalAppointmentsClassName)}static isDateCellHeader(e){return T.DomUtils.hasClassName(e,FT.DateCellHeadClassName)}static getToolbarWrapper(e){return e.querySelectorAll(`.${FT.ToolbarWrapper}`)[0]}static getAppointmentTooltip(e){return document.querySelector(`.${FT.AppointmentTooltip}.dxbl-scheduler-instance-${e.id}`)}}LT.Attr=new RT;class MT{constructor(e,t){this._element=e,this._cellSelector=t,this.containers=null,this.timeCells=null}get element(){return this._element}get cellSelector(){return this._cellSelector}getContainers(){if(!this.containers){const e=this.getTimeCells();this.containers={};for(let t,n=0;t=e[n];n++){const e=LT.Attr.getContainerIndex(t);this.containers[e]||(this.containers[e]={cells:[]}),this.containers[e].cells.push(t)}}return this.containers}clearObjects(){this.timeCells=null,this.containers=null}getTimeCells(){return this.timeCells||(this.timeCells=this.element.querySelectorAll(this.cellSelector)),this.timeCells}getFirstContainer(){const e=this.getContainers();for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}findCell(e){const t=this.getContainers();for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(let i,s=0;i=t[n].cells[s];s++){const t=LT.Attr.getStart(i),n=LT.Attr.getEnd(i);if(t.valueOf()-e.valueOf()<=0&&e.valueOf()-n.valueOf()<0)return i}return null}findStartCell(e){const t=this.getContainers();for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(let i,s=0;i=t[n].cells[s];s++){const t=LT.Attr.getStart(i);if(e.valueOf()-t.valueOf()<=0)return i}return null}findEndCell(e){const t=this.getContainers();for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(let i,s=0;i=t[n].cells[s];s++){const t=LT.Attr.getEnd(i);if(e.valueOf()-t.valueOf()<=0)return i}return null}findCellByPos(e,t){const n=this.getTimeCells();for(let i,s=0;i=n[s];s++){const n=i.getBoundingClientRect();if(n.top<=t&&t<n.bottom&&n.left<=e&&e<n.right)return i}return null}}var kT;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(kT||(kT={}));const KT=kT;class OT{}OT.state="state",OT.snapToCellsMode="snap-to-cells-mode",OT.editableAppointmentKey="editable-appointment-key",OT.selectedAppointmentKey="selected-appointment-key",OT.allowCreateAppointment="allow-create-appointment",OT.allowEditAppointment="allow-edit-appointment",OT.allowDragAppointment="allow-drag-appointment",OT.allowResizeAppointment="allow-resize-appointment",OT.enableAppointmentTooltip="enable-appointment-tooltip",OT.activeFormType="active-form-type",OT.clientUtcOffset="client-utc-offset",OT.startInterval="start-interval",OT.endInterval="end-interval",OT.resources="resources",OT.appointmentStart="appointment-start",OT.appointmentEnd="appointment-end",OT.appointmentAllDay="appointment-allday",OT.appointmentResources="appointment-resources";class _T{constructor(e,t,n){this.date=e,this.recurrenceIndex=t,this.resource=n}static from(e){const[t,n,i]=e.split(_T.ClientKeyPartSeparator);return new _T(t,n,i)}static to(e){let t=e.date+_T.ClientKeyPartSeparator+e.recurrenceIndex;return e.resource&&(t=t+_T.ClientKeyPartSeparator+e.resource),t}static IsSame(e,t,n=!1){const i=e.date===t.date&&e.recurrenceIndex===t.recurrenceIndex;return n?i:i&&e.resource===t.resource}}_T.ClientKeyPartSeparator="_";class VT{static selectSameAppointments(e,t){t.filter((t=>{const n=LT.Attr.getAppointmentKey(t),i=_T.from(n);return _T.IsSame(e,i,!0)})).forEach((e=>{T.DomUtils.hasClassName(e,FT.SelectedAppointmentClassName)||T.DomUtils.addClassName(e,FT.SelectedAppointmentClassName)}))}}class zT{static throttle(e,t){let n=!1,i=null,s=this;return function r(o){if(n)return i=o,void(s=this);e.apply(this,[o]),n=!0,setTimeout((()=>{n=!1,i&&(r.apply(s,[i]),i=null)}),t)}}}class WT{constructor(e,t,n){this.id=e,this.views=t,this.interval=n,this.allDay=LT.Attr.getAllDay(t[0]),this.resourceKey=LT.Attr.getResourceKey(t[0]),this.sourceView=this.views[0].cloneNode(!0),this.aptCont=this.views[0].parentElement}getStart(){return this.interval.start}getDuration(){return this.interval.duration}getEnd(){return this.interval.getEnd()}clearViews(){this.views.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)})),this.views=[]}static createItem(e,t){return new WT(e,t,WT.getAppointmentInterval(t))}static getAppointmentInterval(e){const t=LT.Attr.getStart(e[0]),n=LT.Attr.getDuration(e[0]);return new UT(t,n)}static createItems(e){const t={};for(let n,i=0;n=e[i];i++){const e=LT.Attr.getAppointmentKey(n);t[e]||(t[e]=[]),t[e].push(n)}const n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(WT.createItem(e,t[e]));return n}}var $T,GT,qT,YT;!function(e){e[e.None=0]="None",e[e.DragAppointment=1]="DragAppointment",e[e.DragAppointmentStart=2]="DragAppointmentStart",e[e.DragAppointmentEnd=3]="DragAppointmentEnd",e[e.DragNewAppointment=4]="DragNewAppointment"}($T||($T={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(GT||(GT={}));class XT{constructor(e){this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseMoveInternalHandler=this.onMouseMoveInternal.bind(this),this.schedulerView=e,this.appointmentInfo=null,this.sourceAppointmentInfo=null,this.startCellInfo=null,this.currentCellInfo=null,this.dateDiff=0,this.horizontalAppointmentDragged=!1,this.lastCellChanged=!1,this.initialPageY=0,this.initialTop=0,this.initialScrollTop=0,this.lastTop=0,this.lastCell=null,this.direction=GT.Top,this.mode=$T.None,this.throttledDrag=zT.throttle(this.onMouseMoveInternalHandler,20)}dragAppointmentStart(e,t,n){this.mode=$T.DragAppointmentStart,this.startDrag(e,t,n)}dragAppointmentEnd(e,t,n){this.mode=$T.DragAppointmentEnd,this.startDrag(e,t,n)}dragAppointment(e,t,n){this.mode=$T.DragAppointment,this.startDrag(e,t,n)}dragNewAppointment(e){this.mode=$T.DragNewAppointment,this.startDragNewAppointment(e)}dropAppointment(){this.mode!==$T.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode===$T.DragNewAppointment?this.schedulerView.dispatchDropNewAppointmentEvent():(this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchDropAppointmentEvent()),this.mode=$T.None)}cancelDragAppointment(){this.mode!==$T.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode!==$T.DragNewAppointment&&this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchCancelDragAppointmentEvent(),this.mode=$T.None)}startDrag(e,t,n){this.beforeStart(t),this.appointmentInfo=new WT(e.id,e.views,e.interval),this.sourceAppointmentInfo=e,this.currentCellInfo=t,this.dateDiff=QT.dateSubsWithTimezone(e.getStart(),t.interval.start),this.horizontalAppointmentDragged=t.layoutType===KT.Horizontal,this.initialTop=this.findAppointmentViewByInterval(this.appointmentInfo.views,t.interval).offsetTop,this.initialPageY=n.pageY,this.lastTop=this.initialTop,this.lastCell=t.cell,this.initialScrollTop=this.getViewportScrollTop(),this.saveAppointmentTopPositionInfo(),this.schedulerView.dispatchStartDragAppointmentEvent(e.id,this.mode===$T.DragAppointmentStart||this.mode===$T.DragAppointmentEnd,LT.isHorizontalAppointmentsContainer(e.aptCont)),this.startAutoScrolling()}startDragNewAppointment(e){this.beforeStart(e);const t=e.interval.start,n=QT.dateIncreaseWithUtcOffset(t,e.interval.duration),i=this.schedulerView.getUtcOffset(t,e.utcOffset),s=this.schedulerView.getUtcOffset(n,e.utcOffset);this.schedulerView.dispatchStartDragNewAppointmentEvent(QT.addTimeSpan(t,i),QT.addTimeSpan(n,s),e.allDay,LT.Attr.getResourceKey(e.cell)),this.startAutoScrolling()}beforeStart(e){this.startCellInfo=e,this.schedulerView.addEventListener("pointermove",this.onMouseMoveHandler)}onMouseMove(e){this.mode!==$T.None&&this.throttledDrag(e)}onMouseMoveInternal(e){const t=this.schedulerView.findCellByCoordinates(e.clientX,e.clientY);if(!t)return;this.schedulerView.getEditableAppointmentView()&&(this.mode===$T.DragNewAppointment?this.resizeNewAppointment(t):this.mode===$T.DragAppointment?this.drag(t,e):this.resize(t,this.mode===$T.DragAppointmentStart))}drag(e,t){var n;if(!(this.startCellInfo&&this.currentCellInfo&&this.appointmentInfo&&this.sourceAppointmentInfo))return;const i=this.currentCellInfo.interval;this.lastCellChanged=!1,this.updateEditedAppointmentPosition(t);const s=e.cell;if(this.lastCellChanged=this.lastCell!==s,this.lastCell=s,e.layoutType===KT.Horizontal&&!this.horizontalAppointmentDragged){const e=(null===(n=s.offsetParent)||void 0===n?void 0:n.getBoundingClientRect().top)||0;this.initialTop=t.clientY-e,this.initialPageY=t.pageY,this.initialScrollTop=this.getViewportScrollTop(s),this.lastTop=this.initialTop}const r=e.interval;if(0===QT.dateSubsWithTimezone(i.start,r.start)&&i.duration===r.duration){const e=LT.Attr.getResourceKey(s);if(!this.appointmentInfo.resourceKey||this.appointmentInfo.resourceKey===e)return}if(this.currentCellInfo.allDay!==e.allDay)this.dateDiff=0,this.appointmentInfo.interval=e.allDay?this.sourceAppointmentInfo.allDay?new UT(r.start,this.sourceAppointmentInfo.interval.duration):r:this.startCellInfo.allDay?r:new UT(r.start,this.sourceAppointmentInfo.interval.duration),this.appointmentInfo.allDay=e.allDay;else{let e=QT.addTimeSpan(r.start,this.dateDiff||0);this.appointmentInfo.allDay&&(e=QT.truncToDate(e)),this.appointmentInfo.interval=new UT(e,this.appointmentInfo.interval.duration)}this.updateResource(s),this.saveAppointmentTopPositionInfo();const o=this.schedulerView.getUtcOffset(r.getStart(),e.utcOffset),a=this.schedulerView.getUtcOffset(r.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(QT.addTimeSpan(this.appointmentInfo.getStart(),o),QT.addTimeSpan(this.appointmentInfo.getEnd(),a),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resize(e,t){if(!this.appointmentInfo||!this.currentCellInfo||!this.sourceAppointmentInfo)return;const n=e.interval,i=this.currentCellInfo.interval;if(0===QT.dateSubsWithTimezone(i.start,n.start)&&i.duration===n.duration||i.isLongerOrEqualDay!==n.isLongerOrEqualDay)return;if(t){const e=this.sourceAppointmentInfo.interval.duration+QT.dateSubsWithTimezone(this.sourceAppointmentInfo.interval.start,n.start);e>=0&&(this.appointmentInfo.interval=new UT(n.start,e))}else this.appointmentInfo.interval.duration=QT.dateSubsWithTimezone(n.getEnd(),this.sourceAppointmentInfo.interval.start);this.updateResource(this.currentCellInfo.cell);const s=this.schedulerView.getUtcOffset(this.appointmentInfo.getStart(),e.utcOffset),r=this.schedulerView.getUtcOffset(this.appointmentInfo.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(QT.addTimeSpan(this.appointmentInfo.getStart(),s),QT.addTimeSpan(this.appointmentInfo.getEnd(),r),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resizeNewAppointment(e){if(!this.startCellInfo)return;const t=e.interval,n=QT.dateSubsWithTimezone(t.start,this.startCellInfo.interval.start);if(0===n&&this.startCellInfo.interval.duration===t.duration)return;n<0&&this.startCellInfo.interval.duration===t.duration?this.direction=GT.Top:n>0&&this.startCellInfo.interval.duration===t.duration&&(this.direction=GT.Bottom),this.direction===GT.Bottom?this.startCellInfo.interval.duration=n+t.duration:this.direction===GT.Top&&(this.startCellInfo.interval.start=t.start,this.startCellInfo.interval.duration+=-1*n);const i=this.startCellInfo.interval.start,s=QT.dateIncreaseWithUtcOffset(i,this.startCellInfo.interval.duration),r=LT.Attr.getResourceKey(e.cell),o=this.schedulerView.getUtcOffset(i,e.utcOffset),a=this.schedulerView.getUtcOffset(s,e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(QT.addTimeSpan(i,o),QT.addTimeSpan(s,a),e.allDay,r)}findAppointmentViewByInterval(e,t){return e.find((e=>{if(t&&e.firstCell&&e.lastCell){const n=QT.getCellInterval(e.firstCell).getStart(),i=QT.getCellInterval(e.lastCell).getEnd();if(t.intersectsWith(new UT(n,QT.dateSubsWithTimezone(i,n))))return e}}))}updateEditedAppointmentPosition(e){const t=this.schedulerView.getEditableAppointments();if(!this.lastCell||!t||0===t.length||!this.currentCellInfo)return;const n=this.findAppointmentViewByInterval(t,this.currentCellInfo.interval);if(!n)return;if(!LT.isHorizontalAppointment(n))return void(this.horizontalAppointmentDragged=!1);let i=!1;if(this.horizontalAppointmentDragged||(this.initialTop-=n.offsetHeight/2,this.lastTop=this.initialTop,this.horizontalAppointmentDragged=!0,i=!0),e){const t=this.getViewportScrollTop(),n=e.pageY-this.initialPageY+(t-this.initialScrollTop);this.lastTop=this.initialTop+n,i=i||0!==n}if(i||this.lastCellChanged){const e=this.lastCell.offsetTop+1;this.lastTop=Math.min(this.lastTop,e+this.lastCell.offsetHeight-n.offsetHeight-2),this.lastTop=Math.max(e,this.lastTop)}const s=this.lastTop-this.lastCell.offsetTop;t.forEach((e=>{const t=e,n=t.firstCell,i=n.offsetTop+n.offsetHeight-t.offsetHeight-2;let r=n.offsetTop+s;r>=i&&(r=i),t.style.top=r+"px",t.style.zIndex="1000"}))}saveAppointmentTopPositionInfo(){if(!this.lastCell)return;LT.Attr.setAppointmentTopPosition(this.schedulerView,(this.lastTop-this.lastCell.offsetTop).toString())}removeAppointmentTopPositionInfo(){LT.Attr.removeAppointmentTopPosition(this.schedulerView)}updateResource(e){this.appointmentInfo&&this.appointmentInfo.resourceKey&&(this.appointmentInfo.resourceKey=LT.Attr.getResourceKey(e))}getViewportScrollTop(e){const t=e||this.lastCell;if(!t)return 0;const n=LT.getParentTimeCellsViewport(t);return(null==n?void 0:n.scrollTop)||0}startAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.startAutoScrolling(Re.Horizontal)}stopAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.stopAutoScrolling()}}class JT{}qT=JT,JT.prefix="dxbl",JT.SchedulerComponentName=qT.prefix+"-scheduler";class jT extends CustomEvent{constructor(e,t,n,i){super(jT.eventName,{bubbles:!0,composed:!0,detail:new ZT(e,t,n,i)})}}jT.eventName=`${JT.SchedulerComponentName}.create-appointment`;class ZT{constructor(e,t,n,i){this.start=e,this.end=t,this.allDay=n,this.resourceKey=i}}class eH extends CustomEvent{constructor(e,t){super(eH.eventName,{bubbles:!0,composed:!0,detail:new tH(e,t)})}}eH.eventName=`${JT.SchedulerComponentName}.select-appointment`;class tH{constructor(e,t){this.key=e,this.showToolTip=t}}class nH extends CustomEvent{constructor(e,t,n,i){super(nH.eventName,{bubbles:!0,composed:!0,detail:new iH(e,t,n,i)})}}nH.eventName=`${JT.SchedulerComponentName}.start-drag-new-appointment`;class iH{constructor(e,t,n,i){this.start=e,this.end=t,this.allDay=n,this.resourceKey=i}}class sH extends Od{constructor(){super(sH.eventName)}}sH.eventName=`${JT.SchedulerComponentName}.drop-new-appointment`;class rH extends CustomEvent{constructor(e,t){super(rH.eventName,{bubbles:!0,composed:!0,detail:new oH(e,t)})}}rH.eventName=`${JT.SchedulerComponentName}.start-drag-appointment`;class oH{constructor(e,t){this.key=e,this.resize=t}}class aH extends CustomEvent{constructor(e,t,n,i){super(aH.eventName,{bubbles:!0,composed:!0,detail:new lH(e,t,n,i)})}}aH.eventName=`${JT.SchedulerComponentName}.drag-appointment`;class lH{constructor(e,t,n,i){this.start=e,this.end=t,this.allDay=n,this.resourceKey=i}}class AH extends Od{constructor(){super(AH.eventName)}}AH.eventName=`${JT.SchedulerComponentName}.drop-appointment`;class dH extends Od{constructor(){super(dH.eventName)}}dH.eventName=`${JT.SchedulerComponentName}.cancel-drag-appointment`;class cH extends Od{constructor(){super(cH.eventName)}}cH.eventName=`${JT.SchedulerComponentName}.show-appointment-tooltip`;class hH extends Od{constructor(){super(hH.eventName)}}hH.eventName=`${JT.SchedulerComponentName}.hide-appointment-tooltip`,Ct.register(jT.eventName,(e=>e.detail)),Ct.register(eH.eventName,(e=>e.detail)),Ct.register(nH.eventName,(e=>e.detail)),Ct.register(sH.eventName,(e=>e.detail)),Ct.register(rH.eventName,(e=>e.detail)),Ct.register(aH.eventName,(e=>e.detail)),Ct.register(AH.eventName,(e=>e.detail)),Ct.register(dH.eventName,(e=>e.detail)),Ct.register(cH.eventName,(e=>e.detail)),Ct.register(hH.eventName,(e=>e.detail)),function(e){e[e.None=0]="None",e[e.AppointmentEditForm=1]="AppointmentEditForm",e[e.AppointmentCompactEditForm=2]="AppointmentCompactEditForm",e[e.AppointmentToolTip=3]="AppointmentToolTip",e[e.RecurrentAppointmentEditForm=4]="RecurrentAppointmentEditForm",e[e.RecurrentAppointmentDeleteForm=5]="RecurrentAppointmentDeleteForm",e[e.GotoDateForm=6]="GotoDateForm"}(YT||(YT={}));const uH=YT;class pH extends Ja{constructor(){super(),this.onClickEventHandler=this.onDelayedClickEvent.bind(this),this.onDoubleClickEventHandler=this.onDoubleClickEvent.bind(this),this.onDragStartEventHandler=this.onDragStartEvent.bind(this),this.onDragStopEventHandler=this.onDragStopEvent.bind(this),this.onDragCancelEventHandler=this.onDragCancelEvent.bind(this),this._handlePointerEventsMode=r.Click|r.DblClick|r.Dragging,this.startInterval=0,this.endInterval=0,this.resources="",this.snapToCellsMode=NT.Auto,this.allowCreateAppointment=!1,this.allowEditAppointment=!1,this.allowDragAppointment=!1,this.allowResizeAppointment=!1,this.enableAppointmentTooltip=!1,this.unforcedFunctions={},this.appointmentDragController=new XT(this),this._pointerEventsHelper=new q(this),this.activeFormType=uH.None,this.sourceDraggedAppointment=null}connectedCallback(){super.connectedCallback(),this.timeMarkerUpdater=new TT,this._pointerEventsHelper.initialize(),this.addEventSubscriptions()}contentChanged(){super.contentChanged(),this.scrollViewer||(this.scrollViewer=this.querySelector(`.${Fe.ClassName}`),this.addScrollViewerEventSubscriptions())}disconnectedCallback(){this.removeEventSubscriptions(),this.removeScrollViewerEventSubscriptions(),this._pointerEventsHelper.dispose(),super.disconnectedCallback()}initializeLayout(){this.initializeDateHeaders(),this.initializeTimeCells()}adjust(){this.calculateAppointments(),this.updateTimeMarkersEventHandler()}calculateAppointments(){this.getHorizontalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){this.getHorizontalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}getHorizontalAppointmentsContainer(){return this.querySelector(`.${FT.HorizontalAppointmentsClassName}`)}getHorizontalEditableAppointmentsContainer(){return this.querySelector(`.${FT.HorizontalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return this.getHorizontalAppointmentsContainer()}getEditableAppointmentKey(){return this.getHorizontalEditableAppointmentsContainer().editableAppointmentKey}getSelectedAppointmentKey(){return this.getHorizontalAppointmentsContainer().selectedAppointmentKey}getAppointments(){return this.getHorizontalAppointmentsContainer().getAppointments()}getEditableAppointments(){return this.getHorizontalEditableAppointmentsContainer().getAppointments()}findCellByCoordinates(e,t){var n;const i=null===(n=this.horizontalView)||void 0===n?void 0:n.findCellByPos(e,t);return i?this.createCellInfo(i,KT.Horizontal):null}getScrollViewer(){return this.scrollViewer}restoreFocusedAppointment(e){if(!e)return;const t=this.closest(LH.TagName);if(!(null==t?void 0:t.contains(document.activeElement)))return;const n=this.querySelector(`[${HT.Key}='${e}']`);if(n)document.activeElement!==n&&(bn.makeElementFocusable(n),bn.focusElement(n));else{const t=_T.from(e);if(null===t.resource)return;const n=new _T(t.date,t.recurrenceIndex,null),i=_T.to(n),s=this.querySelector(`[${HT.Key}^='${i}']`);s&&(bn.makeElementFocusable(s),bn.focusElement(s))}}dispatchDragAppointmentEvent(e,t,n,i){this.getHorizontalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,n,i)}dispatchStartDragNewAppointmentEvent(e,t,n,i){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,n,i)}dispatchStartDragAppointmentEvent(e,t,n){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,n,i){this.getHorizontalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,n,i)}dispatchSelectAppointmentEvent(e,t){this.getHorizontalAppointmentsContainer().dispatchSelectAppointmentEvent(LT.Attr.getAppointmentKey(e),t)}onClickEvent(e){const t=e.detail.source.target,n=LT.getAppointmentContainer(t),i=this.getEditableAppointmentKey(),s=this.getSelectedAppointmentKey(),r=n?LT.Attr.getAppointmentKey(n):null,o=LT.getTimeCellContainer(t);if(n||o)if(!i||n&&i===r){if(n)s!==r?this.selectAppointment(n,i!==r):this.isTooltipShown()||this.dispatchEvent(new cH),e.stopPropagation();else if(this.activeFormType===uH.None){const n=LT.getTimeCellContainer(t);this.allowCreateAppointment&&n&&(this.createAppointmentByTimeCell(n),e.stopPropagation())}}else this.dispatchEvent(new hH);else{Lt(t,FT.View)&&this.dispatchEvent(new hH)}}onDelayedClickEvent(e){this.unforcedFunctionCall(this.onClickEvent.bind(this,e),"ClickEvent",200,!0)}onDoubleClickEvent(e){const t=LT.getAppointmentContainer(e.detail.source.target);if(t&&this.getEditableAppointmentKey()!==LT.Attr.getAppointmentKey(t)){this.getSelectedAppointmentKey()!==LT.Attr.getAppointmentKey(t)&&this.selectAppointment(t,!1),this.clearUnforcedFunctionByKey("ClickEvent")}}selectAppointment(e,t){if(!e)return;T.DomUtils.addClassName(e,FT.SelectedAppointmentClassName);const n=LT.Attr.getAppointmentKey(e);this.getAppointmentsContainer(e).selectAppointment(n),this.selectSameAppointments(n),this.dispatchSelectAppointmentEvent(e,t)}createAppointmentByTimeCell(e){const t=LT.Attr.getStart(e),n=LT.Attr.getEnd(e),i=this.getUtcOffset(t,LT.Attr.getUtcOffset(e)),s=this.getUtcOffset(n,LT.Attr.getUtcOffset(e));this.dispatchCreateAppointmentEvent(QT.addTimeSpan(t,i),QT.addTimeSpan(n,s),LT.Attr.getAllDay(e),LT.Attr.getResourceKey(e))}getEditableAppointmentView(){const e=this.getHorizontalEditableAppointmentsContainer();return e.getAppointmentView(e.editableAppointmentKey)}onDragStartEvent(e){const t=e.detail.source.target;if(!t||this.getEditableAppointmentKey())return;const n=this.findCellByCoordinates(e.detail.source.clientX,e.detail.source.clientY);if(!n)return;const i=LT.getAppointmentContainer(t);if(i){this.sourceDraggedAppointment=i;const s=LT.Attr.getAppointmentKey(i),r=this.getAppointmentsContainer(i).getAppointmentView(s);this.allowEditAppointment&&r&&(i.classList.add(FT.DisableAppointmentClassName),i.classList.add(FT.SelectedAppointmentClassName),this.allowResizeAppointment&&(LT.isTopHandleElement(t)||LT.isLeftHandleElement(t))?this.appointmentDragController.dragAppointmentStart(r,n,e.detail.source):this.allowResizeAppointment&&(LT.isBottomHandleElement(t)||LT.isRightHandleElement(t))?this.appointmentDragController.dragAppointmentEnd(r,n,e.detail.source):this.allowDragAppointment&&this.appointmentDragController.dragAppointment(r,n,e.detail.source))}else this.allowCreateAppointment&&this.allowResizeAppointment&&this.appointmentDragController.dragNewAppointment(n);e.stopPropagation()}onDragStopEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.dropAppointment(),e.stopPropagation()}onDragCancelEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.cancelDragAppointment(),e.stopPropagation()}removeDraggedAppointmentStyles(e){e&&(e.classList.remove(FT.DisableAppointmentClassName),e.classList.remove(FT.SelectedAppointmentClassName))}createCellInfo(e,t){return{cell:e,layoutType:t,allDay:LT.Attr.getAllDay(e),interval:QT.getCellInterval(e),utcOffset:LT.Attr.getUtcOffset(e)}}initializeTimeCells(){var e;null===(e=this.getHorizontalViewPart())||void 0===e||e.clearObjects()}findTimelineResourceHeader(e,t){if(""===t)return null;const n=LT.getVerticalResourceHeaders(e);for(let e,i=0;e=n[i];i++)if(this.getElementResourceKey(e)===t)return e;return null}getElementResourceKey(e){return LT.Attr.getResourceKey(e)}getResourceHeadersByContainers(e){const t={};for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;const i=this.getElementResourceKey(e[n].cells[0]),s=this.findTimelineResourceHeader(this,i);s&&(s.style.height="",null==t[i]?t[i]={element:s,height:0,minHeight:0,lastContainerIndex:n}:t[i].lastContainerIndex=n)}for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].minHeight=t[e].element.offsetHeight);return t}initializeDateHeaders(){const e=LT.getDateHeaders(this),t=QT.getCurrentLocalTime();e.forEach((e=>{const n=LT.Attr.getStart(e),i=LT.Attr.getEnd(e);i.valueOf()-n.valueOf()>QT.DaySpan||(t.valueOf()-n.valueOf()>=0&&i.valueOf()-t.valueOf()>0?e.classList.add(FT.TodayClassName):e.classList.remove(FT.TodayClassName))}))}addEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.subscribe(this,this.updateTimeMarkersEventHandler.bind(this)),this.addEventListener(d.eventName,this.onClickEventHandler),this.addEventListener(c.eventName,this.onDoubleClickEventHandler),this.addEventListener(a.eventName,this.onDragStartEventHandler),this.addEventListener(l.eventName,this.onDragStopEventHandler),this.addEventListener(A.eventName,this.onDragCancelEventHandler)}removeEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.unsubscribe(this),this.removeEventListener(d.eventName,this.onClickEventHandler),this.removeEventListener(c.eventName,this.onDoubleClickEventHandler),this.removeEventListener(a.eventName,this.onDragStartEventHandler),this.removeEventListener(l.eventName,this.onDragStopEventHandler),this.removeEventListener(A.eventName,this.onDragCancelEventHandler)}addScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.subscribeToScroll(this.viewportScrollViewerEventHandler.bind(this))}removeScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.unsubscribeFromScroll()}updateTimeMarkersEventHandler(){var e;this.calculateHorizontalTimeMarker(this,null===(e=this.horizontalView)||void 0===e?void 0:e.getFirstContainer())}calculateHorizontalTimeMarker(e,t){const n=LT.getTimeMarkerImages(e),i=LT.getTimeMarkerLine(e);if(!n.length||!i||!t)return;const s=QT.getCurrentLocalTime(),r=t.cells[t.cells.length-1],o=LT.Attr.getStart(t.cells[0]),a=LT.Attr.getEnd(r).valueOf()-o.valueOf(),l=QT.dateSubsWithTimezone(s,o)/a;if(l>0&&l<1){n.forEach((e=>{e.style.display="unset"})),i.style.display="unset";const e=Math.round(1e4*l)/100,t=i.offsetWidth/2,s=`calc(${e}% - ${n[0].offsetWidth/2}px)`;n.forEach((e=>{e.style.left=s})),i.style.left=`calc(${e}% - ${t}px)`}else n.forEach((e=>{e.style.display="none"})),i.style.display="none"}viewportScrollViewerEventHandler(e,t){const n=LT.getResourcesViewport(this);n&&(n.scrollTop=e);const i=LT.getTimescaleViewport(this);i&&(i.scrollLeft=t)}getHorizontalViewPart(){return this.horizontalView||(this.horizontalView=this.createHorizontalDateTimeTableLayout()),this.horizontalView}createHorizontalDateTimeTableLayout(){return new MT(this,`.${FT.AllDayAreaClassName}, .${FT.HorizontalViewClassName} .${FT.TimeCellClassName}`)}selectSameAppointments(e){const t=_T.from(e);null!==t.resource&&VT.selectSameAppointments(t,this.getAppointments())}getUtcOffset(e,t){return QT.getUtcTimezoneOffset(e)+-1*t}syncronizeScrollViewWithHeader(){}unforcedFunctionCall(e,t,n,i){i&&this.hasUnforcedFunction(t)&&this.clearUnforcedFunctionByKey(t),void 0===this.unforcedFunctions[t]&&(this.unforcedFunctions[t]=setTimeout((()=>{e(),delete this.unforcedFunctions[t]}),n))}hasUnforcedFunction(e){return!!this.unforcedFunctions[e]}clearUnforcedFunctionByKey(e){clearTimeout(this.unforcedFunctions[e]),delete this.unforcedFunctions[e]}isTooltipShown(){const e=T.DomUtils.getParentByTagName(this,LH.TagName);return!!e&&!!LT.getAppointmentTooltip(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}updated(e){(e.has("startInterval")||e.has("endInterval")||e.has("resources"))&&(this.initializeLayout(),this.updateTimeMarkersEventHandler(),setTimeout((()=>{this.recalculateAppointmentsByInterval()}),0)),super.updated(e)}}C([xs({type:Number,attribute:OT.startInterval})],pH.prototype,"startInterval",void 0),C([xs({type:Number,attribute:OT.endInterval})],pH.prototype,"endInterval",void 0),C([xs({type:String,attribute:OT.resources})],pH.prototype,"resources",void 0),C([xs({attribute:OT.snapToCellsMode})],pH.prototype,"snapToCellsMode",void 0),C([xs({attribute:OT.activeFormType,type:uH,converter:{fromAttribute:e=>parseInt(e),toAttribute:e=>parseInt(e)}})],pH.prototype,"activeFormType",void 0),C([xs({attribute:OT.allowCreateAppointment,type:Boolean})],pH.prototype,"allowCreateAppointment",void 0),C([xs({attribute:OT.allowEditAppointment,type:Boolean})],pH.prototype,"allowEditAppointment",void 0),C([xs({attribute:OT.allowDragAppointment,type:Boolean})],pH.prototype,"allowDragAppointment",void 0),C([xs({attribute:OT.allowResizeAppointment,type:Boolean})],pH.prototype,"allowResizeAppointment",void 0),C([xs({attribute:OT.enableAppointmentTooltip,type:Boolean})],pH.prototype,"enableAppointmentTooltip",void 0);class mH extends pH{constructor(){super()}}mH.TagName="dxbl-timeline-view";class gH extends pH{constructor(){super(),this.verticalAppointments=[]}updateTimeMarkersEventHandler(){var e;this.calculateVerticalTimeMarkers(this,null===(e=this.verticalView)||void 0===e?void 0:e.getTimeCells())}getVerticalAppointmentsContainer(){return this.querySelector(`.${FT.VerticalAppointmentsClassName}`)}getVerticalEditableAppointmentsContainer(){return this.querySelector(`.${FT.VerticalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return e&&(T.DomUtils.hasClassName(e,FT.VerticalAppointmentClassName)||T.DomUtils.hasClassName(e,FT.TimeCellClassName))?this.getVerticalAppointmentsContainer():super.getAppointmentsContainer(e)}getEditableAppointmentKey(){const e=this.getVerticalEditableAppointmentsContainer().editableAppointmentKey;return e||super.getEditableAppointmentKey()}getSelectedAppointmentKey(){const e=this.getVerticalAppointmentsContainer().selectedAppointmentKey;return e||super.getSelectedAppointmentKey()}getAppointments(){return super.getAppointments().concat(this.getVerticalAppointmentsContainer().getAppointments())}getEditableAppointments(){return super.getEditableAppointments().concat(this.getVerticalEditableAppointmentsContainer().getAppointments())}findCellByCoordinates(e,t){var n;const i=null===(n=this.verticalView)||void 0===n?void 0:n.findCellByPos(e,t);return i?this.createCellInfo(i,KT.Vertical):super.findCellByCoordinates(e,t)}dispatchDragAppointmentEvent(e,t,n,i){n?super.dispatchDragAppointmentEvent(e,t,n,i):this.getVerticalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,n,i)}dispatchStartDragNewAppointmentEvent(e,t,n,i){n?super.dispatchStartDragNewAppointmentEvent(e,t,n,i):this.getVerticalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,n,i)}dispatchStartDragAppointmentEvent(e,t,n){n?super.dispatchStartDragAppointmentEvent(e,t,n):this.getVerticalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent():super.dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropAppointmentEvent():super.dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent():super.dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,n,i){n?super.dispatchCreateAppointmentEvent(e,t,n,i):this.getVerticalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,n,i)}dispatchSelectAppointmentEvent(e,t){const n=LT.Attr.getAppointmentKey(e);T.DomUtils.hasClassName(e,FT.VerticalAppointmentClassName)?this.getVerticalAppointmentsContainer().dispatchSelectAppointmentEvent(n,t):super.dispatchSelectAppointmentEvent(e,t)}initializeTimeCells(){var e;super.initializeTimeCells(),null===(e=this.getVerticalViewPart())||void 0===e||e.clearObjects()}calculateAppointments(){super.calculateAppointments(),this.getVerticalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){super.recalculateAppointmentsByInterval(),this.getVerticalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}calculateVerticalTimeMarkers(e,t){if(!t)return;const n=QT.getCurrentLocalTime(),i=QT.truncToDate(n),s=this.getTimeMarkerInfos(e);if(0!==s.length)for(let r,o=0;r=s[o];o++)this.calculateVerticalTimeMarker(r,e,t,i,n)}getTimeMarkerInfos(e){const t=[],n=LT.getTimeMarkerWrappers(e);for(let e,i=0;e=n[i];i++){const n={wrapper:e,timeMarker:LT.getTimeMarkerContainer(e),timeIndicator:LT.getTimeIndicatorContainer(e),firstContainerIndex:LT.Attr.getFirstContainerIndex(e),lastContainerIndex:LT.Attr.getLastContainerIndex(e),startFromContainer:i>0};t.push(n)}return t}calculateVerticalTimeMarker(e,t,n,i,s){const r=e.wrapper,o=this.findCellsByTime(n,s,e.firstContainerIndex,e.lastContainerIndex);if(!o.length)return void r.classList.add(FT.TimeMarkerWrapperInvisibleClassName);r.classList.remove(FT.TimeMarkerWrapperInvisibleClassName);const a=e.timeMarker,l=e.timeIndicator,A=a.offsetHeight/2,d=o[0].offsetLeft;let c=0;if(e.startFromContainer){const t=this.findFirstCellInContainer(n,e.firstContainerIndex);t&&(c=t.offsetLeft===d?d-A:t.offsetLeft)}const h=Math.floor(this.calculateTop(s,o[0],i));if(a.style.top=h-A+"px",a.style.left=c+"px",a.style.width=d-c+A+1+"px",this.isElementDisplayed(r)){const e=LT.getTodayDateHeaders(this)[0].clientWidth;l.style.top=h-1+"px",l.style.width=e+"px",l.style.left=d+"px"}}findCellsByTime(e,t,n,i){const s=[];for(let r,o=0;r=e[o];o++)LT.Attr.getContainerIndex(r)<n||LT.Attr.getContainerIndex(r)>i||t.valueOf()-LT.Attr.getStart(r).valueOf()>=0&&LT.Attr.getEnd(r).valueOf()-t.valueOf()>0&&s.push(r);return s}getVerticalViewPart(){return this.verticalView||(this.verticalView=this.createVerticalDateTimeTableLayout()),this.verticalView}createVerticalDateTimeTableLayout(){return new MT(this,`.${FT.VerticalViewClassName} .${FT.TimeCellClassName}`)}getEditableAppointmentView(){const e=this.getVerticalEditableAppointmentsContainer(),t=e.getAppointmentView(e.editableAppointmentKey);return t||super.getEditableAppointmentView()}findFirstCellInContainer(e,t){for(let n,i=0;n=e[i];i++)if(LT.Attr.getContainerIndex(n)===t)return n;return null}isElementDisplayed(e){return e&&"none"!==e.style.display}calculateTop(e,t,n){const i=this.getAdaptedContainerTime(n,e),s=LT.Attr.getStart(t),r=LT.Attr.getEnd(t),o=QT.dateSubsWithTimezone(i,s);return t.offsetTop+t.offsetHeight*o/(r.valueOf()-s.valueOf())}getAdaptedContainerTime(e,t){const n=e,i=QT.dateSubsWithTimezone(t,n);let s=Math.abs(i)%QT.DaySpan;return i<0&&(s=QT.DaySpan-s),QT.dateIncreaseWithUtcOffset(n,s)}selectSameAppointments(e){const t=_T.from(e);null!==t.resource&&(super.selectSameAppointments(e),VT.selectSameAppointments(t,this.verticalAppointments))}syncronizeScrollViewWithHeader(){const e=this.getScrollViewer();if(e){const t=e.querySelector(`.${Fe.ContentContainerClassName}`);if(t){const e=LT.getTimescaleViewport(this),n=e?e.scrollLeft:-1;n>-1&&t.scrollTo&&t.scrollTo(n,0)}}}}class CH extends gH{constructor(){super()}}CH.TagName="dxbl-day-view";class fH extends pH{constructor(){super()}}fH.TagName="dxbl-month-view";class vH extends On{constructor(e,t,n=!1){super(e.getKeyboardNavigator(),t,n),this.scheduler=e}canSwitchToNestedContentMode(){return!0}getToolbarWrapper(){return LT.getToolbarWrapper(this.scheduler)}getVerticalAppointmentsContainer(){const e=LT.getVerticalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}getHorizontalAppointmentsContainer(){const e=LT.getHorizontalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class bH extends vH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${FT.HorizontalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);if(t===Ie.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Ie.KeyCode.Enter:case Ie.KeyCode.Delete:case Ie.KeyCode.Key_n:case Ie.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.scheduler.getView())||void 0===e||e.syncronizeScrollViewWithHeader()}}class wH extends vH{constructor(e,t){super(e,t,!0)}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Key_n&&(this.performShortcutEvent(e),!0)}}class yH extends vH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${FT.VerticalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Ie.KeyUtils.getEventKeyCode(e);if(t===Ie.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Ie.KeyCode.Enter:case Ie.KeyCode.Delete:case Ie.KeyCode.Key_n:case Ie.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}}class BH extends vH{constructor(e){super(e,e)}queryItems(){return new Array(this.getToolbarWrapper(),this.getHorizontalAppointmentsContainer(),this.getVerticalAppointmentsContainer())}createItemStrategy(e){if(e===this.getToolbarWrapper())return new wH(this.scheduler,e);if(e===this.getVerticalAppointmentsContainer())return new yH(this.scheduler,e);if(e===this.getHorizontalAppointmentsContainer())return new bH(this.scheduler,e);throw new Error("Not implemented")}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class EH extends On{constructor(e,t){super(e.getKeyboardNavigator(),t,!0),this._dateNavigator=e}canSwitchToNestedContentMode(){return!0}leaveTransitContainer(e){const t=this._dateNavigator.getCalendar();if(t){const n=Pr.getTabbables(t,!1);if(!n.length||e===Mn.None)return;(e===Mn.Forward?n[0]:n[n.length-1]).focus()}}}class IH extends Ja{getKeyboardNavigator(){return this._keyboardNavigator}getCalendar(){return this.querySelector(tl)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Ln),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new EH(this,this))}}IH.TagName="dxbl-date-navigator";class SH extends On{constructor(e,t){super(e.getKeyboardNavigator(),t),this._resourceNavigator=e}queryItems(){return new Array(this._resourceNavigator.getResourceListBoxContainer(),this._resourceNavigator.getOkButton(),this._resourceNavigator.getCancelButton())}createItemStrategy(e){return e.matches(this._resourceNavigator.getResourceListBoxContainerSelector())?new xH(this._resourceNavigator.getKeyboardNavigator(),e,this):null}handleKeyDown(e){return Ie.KeyUtils.getEventKeyCode(e)===Ie.KeyCode.Tab?(e.shiftKey?this.moveToPrevItem(!0):this.moveToNextItem(!0),!0):super.handleKeyDown(e)}canSwitchToNestedContentMode(){return!0}moveForward(){this.moveToNextItem(!0)}moveBackward(){super.moveToPrevItem(!0)}}class xH extends On{constructor(e,t,n){super(e,t,!0),this._rootStrategy=n}leaveTransitContainer(e){e===Mn.Forward?this._rootStrategy.moveForward():e===Mn.Backward&&this._rootStrategy.moveBackward()}canSwitchToNestedContentMode(){return!0}}class DH extends Ja{getKeyboardNavigator(){return this._keyboardNavigator}getResourceListBoxContainerSelector(){return`.${FT.ResourceNavigatorListBoxContainer}`}getResourceListBoxContainer(){return this.querySelector(this.getResourceListBoxContainerSelector())}getOkButton(){return this.querySelector(`.${FT.ResourceNavigatorFooter} button:first-child`)}getCancelButton(){return this.querySelector(`.${FT.ResourceNavigatorFooter} button:last-child`)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Ln),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new SH(this,this))}}DH.TagName="dxbl-resource-navigator";class FH{constructor(e,t){this.start=e,this.end=t}containsExcludeEndBound(e){return this.start<=e&&this.end>e}}function TH(e,t,n){const i=e[t];return i===n?0:i<n?-1:1}function HH(e,t,n,i,s){n||(n=TH);let r=null==i?0:i;null==s&&(s=e.length-r);let o=r+s-1;for(;r<=o;){const i=r+(o-r>>1),s=n(e,i,t);if(0===s)return i;s<0?r=i+1:o=i-1}return-(r+1)}class UH extends Ja{constructor(){super(),this.editableAppointmentKey="",this.selectedAppointmentKey="",this.elements=[],this.appointments=[],this.dateTimeTableLayout=null,this.observer=new MutationObserver((()=>{this.handleMutations()})),this.startInterval=0,this.endInterval=0,this.resources=""}connectedCallback(){super.connectedCallback(),this.initObserver()}contentChanged(){super.contentChanged(),this.contentChangedCore()}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}initObserver(){this.observer.observe(this,{subtree:!0,characterData:!0,attributes:!0,attributeFilter:["data-key","data-container-index","data-first-cell-index","data-last-cell-index","data-columns-count","data-column","data-row","data-row-span","data-start","data-duration","data-allday","data-resource"]})}contentChangedCore(){this.recalculateAppointments()}handleMutations(){this.recalculateAppointments()}recalculateAppointmentsByInterval(e,t,n){e===this.startInterval&&t===this.endInterval&&n===this.resources||this.recalculateAppointments()}getDateTimeTableLayout(){return this.dateTimeTableLayout||(this.dateTimeTableLayout=this.createDateTimeTableLayout()),this.dateTimeTableLayout}recalculateAppointments(){this.dateTimeTableLayout=null,this.initializeAppointments(),this.calculateAppointments()}initializeAppointments(){var e;this.elements=this.getAppointments(),this.prepareAppointments(null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getTimeCells(),this.elements),this.appointments=WT.createItems(this.elements)}selectAppointment(e){this.selectedAppointmentKey=e}getEditableAppointments(){return LT.getEditableAppointments(this)}getAppointmentView(e){return this.appointments.filter((t=>t.id===e))[0]}isEditableAppointment(e){return LT.Attr.getAppointmentKey(e)===this.editableAppointmentKey}dispatchDragAppointmentEvent(e,t,n,i){this.dispatchEvent(new aH(e,t,n,i))}dispatchStartDragNewAppointmentEvent(e,t,n,i){this.dispatchEvent(new nH(e,t,n,i))}dispatchStartDragAppointmentEvent(e,t){this.dispatchEvent(new rH(e,t))}dispatchDropNewAppointmentEvent(){this.dispatchEvent(new sH)}dispatchDropAppointmentEvent(){this.dispatchEvent(new AH)}dispatchCancelDragAppointmentEvent(){this.dispatchEvent(new dH)}dispatchCreateAppointmentEvent(e,t,n,i){this.dispatchEvent(new jT(e,t,n,i))}dispatchSelectAppointmentEvent(e,t){this.dispatchEvent(new eH(e,t))}showContainer(){this.style.setProperty("display","")}hideContainer(){this.style.setProperty("display","none")}cacheAppointmentsHeight(e){for(let t,n=0;t=e[n];n++)t.cachedOffsetHeight=t.offsetHeight}updateAppointmentCompactStyle(e,t){T.DomUtils.toggleClassName(e.children[0],FT.CompactAppointmentClassName,t<50)}initIntersects(e){e.intersects=[]}prepareAppointments(e,t){if(!e)return;const n={};for(let t,i=0;t=e[i];i++){this.initIntersects(t);const e=LT.Attr.getContainerIndex(t);n[e]||(n[e]=[]),n[e].push(t)}for(let e,i=0;e=t[i];i++){const t=LT.Attr.getContainerIndex(e),i=LT.Attr.getAppointmentFirstCellIndex(e),s=LT.Attr.getAppointmentLastCellIndex(e);if(n[t]){e.firstCell=n[t][i],e.lastCell=n[t][s],e.info={cellCount:s-i+1};for(let r=i;r<=s;r++){this.addIntersect(n[t][r],e)}}}}addIntersect(e,t){const n=e.intersects;n.findIndex((e=>LT.Attr.getAppointmentKey(e)===LT.Attr.getAppointmentKey(t)))<0&&n.push(t)}}C([xs({attribute:OT.editableAppointmentKey})],UH.prototype,"editableAppointmentKey",void 0),C([xs({attribute:OT.selectedAppointmentKey})],UH.prototype,"selectedAppointmentKey",void 0);class QH extends UH{constructor(){super()}calculateAppointments(){var e;const t=null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getContainers(),n=LT.getHorizontalAppointments(this);t&&n.length>0&&(this.hideContainer(),this.calculateHorizontalAppointmentsWidthAndLeftPosition(n),this.showContainer(),this.cacheAppointmentsHeight(n)),this.calculateHorizontalAppointmentsAndCells(t),this.saveCalculatedParameters()}getAppointments(){return LT.getHorizontalAppointments(this)}createDateTimeTableLayout(){return this.getView().createHorizontalDateTimeTableLayout()}getView(){return this.view||(this.view=this.closest(`.${FT.View}`)),this.view}calculateHorizontalAppointmentsWidthAndLeftPosition(e){for(let t,n=0;t=e[n];n++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,-1)}calculateHorizontalAppointmentsInCell(e){const t=this.getCalculatedHorizontalAppointmentsInCell(e),n=this.getNotCalculatedHorizontalAppointmentsInCell(e);t.forEach((e=>e.calculated=!0)),n.forEach((e=>e.calculated=!1)),this.calculateHorizontalAptsInCellCore(e,t.concat(n),t.length)}calculateHorizontalAptsInCellCore(e,t,n){this.calculateAppointmentRelativeTopOffset(t,n),this.calculateAppointmentsTopPosition(e,t)}calculateAppointmentsTopPosition(e,t){let n=e.offsetTop;if(e.firstElementChild&&LT.isDateCellHeader(e.firstElementChild)){const t=window.getComputedStyle(e).paddingTop;n+=e.firstElementChild.offsetHeight+parseInt(t)}for(let e=0;e<t.length;e++){const i=t[e];let s=i.relativePosition+n;if(this.isEditableAppointment(i)){const e=t.find((e=>e.classList.contains(FT.DisableAppointmentClassName)));if(!e)continue;s=e.relativePosition+n}i.info.calculatedTop=s}}calculateAppointmentRelativeTopOffset(e,t){this.adjustAppointmentCellIndexes(e),this.calculateAppointmentRelativePositionsCore(e,t)}calculateAppointmentRelativePositionsCore(e,t){const n=e.length,i=this.createBusyIntervals(2*n);let s=0;for(;s<t;)this.isEditableAppointment(e[s])||this.makeIntervalBusy(e[s],i),s++;for(;s<n;){const t=e[s];if(!t.calculated){const e=this.findAvailableRelativePosition(t,i);t.relativePosition=e}this.isEditableAppointment(t)||this.makeIntervalBusy(t,i),s++}}findAvailableRelativePosition(e,t){e.relativePosition=0;let n=0;const i=e.info.busyIntervalFirstCellIndex,s=e.info.busyIntervalLastCellIndex;let r=i;for(;r<=s;){const s=this.findPossibleIntersectionInterval(t[r],n);null===s||s.start>=n+e.offsetHeight?r++:(n=s.end,r=i)}return n}findPossibleIntersectionInterval(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.containsExcludeEndBound(t)||i.start>t)return new FH(i.start,i.end)}return null}calculateHorizontalAppointmentsAndCells(e){var t;const n=null===(t=this.view)||void 0===t?void 0:t.getResourceHeadersByContainers(e);if(!n)return;this.view&&(this.view.style.height=ot.toPx(this.view.offsetHeight)),this.resetCellHeight(e);for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let i=0;const s=e[t].cells;for(let e,t=0;e=s[t];t++){this.calculateHorizontalAppointmentsInCell(e);const t=this.getHorizontalCellHeight(e);t>i&&(i=t)}const r=s[0];let o=i?i+15:0;o=Math.max(r.offsetHeight,o);const a=n[LT.Attr.getResourceKey(r)];a&&(a.lastContainerIndex===t&&(o=Math.max(a.minHeight-a.height,o)),a.height+=o),r.style.height=ot.toPx(o)}this.view&&(this.view.style.height="");for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e].element.style.height=n[e].height+"px");const i=LT.getHorizontalAppointments(this);for(let e,t=0;e=i[t];t++)e.style.top=e.info.calculatedTop+"px"}calculateHorizontalAppointmentWidthAndLeft(e,t){const n=e.firstCell,i=n.offsetWidth,s=LT.Attr.getAppointmentRow(e)-LT.Attr.getAppointmentFirstCellIndex(e),r=n.offsetLeft+Math.floor(i*s);let o=i-Math.floor(i*s),a=n.nextElementSibling,l=0;const A=LT.Attr.getAppointmentRowSpan(e);for(let e=1;e<Math.trunc(A)&&null!=a;e++)l=a.offsetWidth,o+=l,a=a.nextElementSibling;const d=A-Math.trunc(A);d>0&&(A<1?o-=i-i*d:null!=a&&(o+=l*d)),this.updateAppointmentCompactStyle(e,o);const c=t>=0?n.offsetTop+t:-1e4;e.style.height="",e.style.width=`${o}px`,e.style.left=`${r}px`,e.style.top=`${c}px`}getCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0!==e.info.calculatedTop)).sort(((e,t)=>e.info.calculatedTop-t.info.calculatedTop))}getNotCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0===e.info.calculatedTop)).sort(((e,t)=>{const n=t.info.cellCount-e.info.cellCount;return n||LT.Attr.getStart(e).valueOf()-LT.Attr.getStart(t).valueOf()}))}getHorizontalCellHeight(e){let t=-1,n=null;return e.intersects.forEach((e=>{e.info.calculatedTop>t&&(t=e.info.calculatedTop,n=e)})),n?t-e.offsetTop+n.cachedOffsetHeight:0}createBusyIntervals(e){const t=[];for(let n=0;n<e;n++)t.push([]);return t}makeIntervalBusy(e,t){const n=e.info.busyIntervalLastCellIndex;for(let i=e.info.busyIntervalFirstCellIndex;i<=n;i++)this.addBusyInterval(t[i],new FH(e.relativePosition,e.relativePosition+e.cachedOffsetHeight))}addBusyInterval(e,t){if(!this.checkBusyIntervalExists(e,t)){let n=e.findIndex((e=>e.start>t.start));-1===n&&(n=e.length),e.splice(n,0,t)}}checkBusyIntervalExists(e,t){return e.some((e=>e.start===t.start&&e.end===t.end))}adjustAppointmentCellIndexes(e){const t=this.createAptsDateTimeCollection(e);this.calculateAdjustedCellIndexes(e,t)}createAptsDateTimeCollection(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n],{startTime:s,endTime:r}=this.getAptAdjustedStartEndTime(i);this.addDateTime(t,s),this.addDateTime(t,r)}return t.sort(QT.dateTimeComparer),t}addDateTime(e,t){this.isAlreadyAdded(e,t)||e.push(t)}isAlreadyAdded(e,t){const n=e.length;for(let i=0;i<n;i++)if(e[i].valueOf()===t.valueOf())return!0;return!1}calculateAdjustedCellIndexes(e,t){for(let n=0;n<e.length;n++)this.calculateAdjustedCellIndexesCore(e[n],t)}resetCellHeight(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].cells[0].style.height="")}calculateAdjustedCellIndexesCore(e,t){const{startTime:n,endTime:i}=this.getAptAdjustedStartEndTime(e),s=HH(t,n,QT.dateTimeIndexComparer),r=HH(t,i,QT.dateTimeIndexComparer)-1;e.info.busyIntervalFirstCellIndex=s,e.info.busyIntervalLastCellIndex=r}getAptAdjustedStartEndTime(e){const t=LT.Attr.getSnapToCellsMode(this.view),n=LT.Attr.getAppointmentFirstCellIndex(e),i=LT.Attr.getAppointmentLastCellIndex(e),s=t===NT.Always||t===NT.Auto&&n-i<=1;return{startTime:LT.Attr.getStart(s?e.firstCell:e),endTime:s?LT.Attr.getEnd(e.lastCell):LT.Attr.getAppointmentEnd(e)}}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class PH extends QH{constructor(){super(),this.appointmentStart=0,this.appointmentEnd=0,this.appointmentAllDay=!1,this.appointmentResources=""}showContainer(){}hideContainer(){}initObserver(){}contentChangedCore(){}initIntersects(e){}addIntersect(e,t){}saveCalculatedParameters(){}calculateAppointments(){var e;if(null===(e=this.getView().horizontalView)||void 0===e?void 0:e.getContainers()){const e=LT.Attr.getAppointmentTopPosition(this.getView());for(let t,n=0;t=this.elements[n];n++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,e)}}updated(e){this.recalculateAppointments(),super.updated(e)}}C([xs({type:Number,attribute:OT.appointmentStart})],PH.prototype,"appointmentStart",void 0),C([xs({type:Number,attribute:OT.appointmentEnd})],PH.prototype,"appointmentEnd",void 0),C([xs({type:Boolean,attribute:OT.appointmentAllDay})],PH.prototype,"appointmentAllDay",void 0),C([xs({type:String,attribute:OT.appointmentResources})],PH.prototype,"appointmentResources",void 0);class NH extends UH{constructor(){super()}calculateAppointments(){for(let e,t=0;e=this.elements[t];t++)this.calculateAppointment(e);this.showContainer(),this.saveCalculatedParameters()}getView(){return this.view||(this.view=this.closest(`.${FT.View}`)),this.view}createDateTimeTableLayout(){return this.getView().createVerticalDateTimeTableLayout()}getAppointments(){return LT.getVerticalAppointments(this)}calculateAppointment(e){const t=e.firstCell;if(!t)return;const n=(t.offsetWidth-10)/LT.Attr.getAppointmentColumnsCount(e),i=t.getBoundingClientRect().height,s=LT.Attr.getAppointmentRow(e)-LT.Attr.getAppointmentFirstCellIndex(e),r=Math.floor(i*s),o=t.offsetTop+r,a=LT.Attr.getAppointmentColumn(e),l=t.offsetLeft+n*a,A=Math.floor(i*LT.Attr.getAppointmentRowSpan(e))-r;this.updateAppointmentCompactStyle(e,n),e.style.top=`${o}px`,e.style.left=`${l}px`,e.style.width=`${n}px`,e.style.height=`${A}px`}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class RH extends NH{constructor(){super(),this.appointmentStart="",this.appointmentEnd="",this.appointmentAllDay=!1,this.appointmentResources=""}initObserver(){}contentChangedCore(){}saveCalculatedParameters(){}getAppointments(){return LT.getVerticalEditableAppointments(this)}updated(e){this.recalculateAppointments(),super.updated(e)}}C([xs({type:String,attribute:OT.appointmentStart})],RH.prototype,"appointmentStart",void 0),C([xs({type:String,attribute:OT.appointmentEnd})],RH.prototype,"appointmentEnd",void 0),C([xs({type:Boolean,attribute:OT.appointmentAllDay})],RH.prototype,"appointmentAllDay",void 0),C([xs({type:String,attribute:OT.appointmentResources})],RH.prototype,"appointmentResources",void 0);class LH extends he{constructor(){super()}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.initializeKeyboardNavigator()}disposeComponent(){this.removeEventSubscriptions(),super.disposeComponent()}getView(){return this.querySelector(`.${FT.View}`)}getKeyboardNavigator(){return this.keyboardNavigator}adjustControl(e,t){var n;e.width!==t.width&&(null===(n=this.getView())||void 0===n||n.adjust())}addEventSubscriptions(){this.elementContentSizeSubscription=on(this,this.adjustControl.bind(this))}removeEventSubscriptions(){this.elementContentSizeSubscription&&rn(this.elementContentSizeSubscription)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new BH(this))}}LH.TagName="dxbl-scheduler",customElements.define(LH.TagName,LH),customElements.define(CH.TagName,CH),customElements.define(fH.TagName,fH),customElements.define(mH.TagName,mH),customElements.define(IH.TagName,IH),customElements.define(DH.TagName,DH),customElements.define("dxbl-scheduler-horizontal-appointments-container",QH),customElements.define("dxbl-scheduler-horizontal-editable-appointments-container",PH),customElements.define("dxbl-scheduler-vertical-appointments-container",NH),customElements.define("dxbl-scheduler-vertical-editable-appointments-container",RH);class MH{}class kH extends CustomEvent{constructor(){super(kH.eventName,{detail:new MH,bubbles:!0})}}kH.eventName="dxbl:loading-panel.click",Ct.register(kH.eventName,(e=>e.detail));class KH extends Ja{constructor(){super(...arguments),this.attachPanelHandler=this.attachPanel.bind(this),this.resizePanelHandler=this.resizePanel.bind(this),this.clickPanelHandler=this.clickPanel.bind(this),this.panel=null,this.targetElement=null,this.targetResizeObserver=null,this.panelItems=[],this.positionTarget=null,this.panelVisible=!1,this.blockedContent=!1,this.hasContent=!1,this.zIndex=null,this.width="unset",this.height="unset",this.translateState="translate(0px; 0px)",this.trackingInterval=null,this.targetCurrentRect=null}render(){return ns`
            <style>
                :host {
                    display: ${this.getDisplayProp()};
                    position: ${this.hasContent?"relative":"fixed"};
                    pointer-events: ${this.blockedContent||this.hasContent?"unset":"none"};
                    width: ${this.hasContent?"var(--dxbl-loading-panel-width)":this.width};
                    height: ${this.hasContent?"var(--dxbl-loading-panel-height)":this.height};
                    transform: ${this.hasContent?"none":this.translateState};
                    z-index: ${this.panelVisible&&this.zIndex&&!this.hasContent?this.zIndex:"auto"};
                }
            </style>
            <slot></slot>
        `}connectedOrContentChanged(){super.connectedOrContentChanged(),this.setAttribute(pe.Loaded,"")}connectedCallback(){super.connectedCallback(),this.hasContent||window.addEventListener("resize",this.resizePanelHandler),this.panel=document.querySelector(`#${this.id}`),this.addEventListener("click",this.clickPanelHandler)}disconnectedCallback(){var e;super.disconnectedCallback(),this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.unsubscribeTargetScroll()),window.removeEventListener("resize",this.resizePanelHandler),this.removeEventListener("click",this.clickPanelHandler),this.disablePersistentAttaching()}updated(e){super.updated(e),e.has("positionTarget")&&(this.setTargetElement(),this.processPanelElements(),this.attachPanel(),this.resizePanel()),e.has("panelVisible")&&(!this.targetElement&&this.panelVisible&&this.setTargetElement(),this.attachPanel(),this.resizePanel(),this.checkBlockPanelTabIndexes()),e.has("blockedContent")&&this.checkBlockPanelTabIndexes()}setTargetElement(){var e;if(this.positionTarget){if(this.targetElement=document.querySelector(this.positionTarget),!this.targetElement)return;this.targetCurrentRect=this.targetElement.getBoundingClientRect(),this.subscribeTargetResize(),this.subscribeTargetScroll(),this.enablePersistentAttaching()}else this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.targetElement=null)}attachPanel(){!this.hasContent&&this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.translateState=`translate(${e.left+this.scrollLeft}px, ${e.top+this.scrollTop}px)`}))}resizePanel(){this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.width=e.width+"px",this.height=e.height+"px"}))}clickPanel(){this.panelVisible&&this.dispatchEvent(new kH)}processPanelElements(){this.targetElement&&(this.checkAndAddElementTabIndex(this.targetElement),this.processPanelChildElements(this.targetElement))}checkAndAddElementTabIndex(e){this.panelItems.map((e=>e.element)).indexOf(e)<0&&this.panelItems.push({element:e,tabIndex:e.hasAttribute("tabIndex")?e.tabIndex:null})}processPanelChildElements(e){const t=e.childNodes;for(let e=0;e<t.length;e++){const n=t[e];n instanceof HTMLElement&&(this.checkAndAddElementTabIndex(n),this.processPanelChildElements(n))}}checkBlockPanelTabIndexes(){this.panelItems.length&&this.panelItems.forEach((e=>{this.blockedContent&&this.panelVisible?e.element.tabIndex=-1:null!==e.tabIndex?e.element.tabIndex=e.tabIndex:e.element.removeAttribute("tabIndex")}))}subscribeTargetResize(){this.targetResizeObserver=new ResizeObserver((()=>this.resizePanel())),this.targetResizeObserver.observe(this.targetElement)}enablePersistentAttaching(){this.trackingInterval=setInterval((()=>{const e=this.targetElement.getBoundingClientRect();e.top===this.targetCurrentRect.top&&e.left===this.targetCurrentRect.left||(this.targetCurrentRect=e,this.attachPanel())}),0)}disablePersistentAttaching(){this.trackingInterval&&clearInterval(this.trackingInterval)}subscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.addEventListener("scroll",this.attachPanelHandler)))}unsubscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.removeEventListener("scroll",this.attachPanelHandler)))}getTargetRootElements(){return[...at.getRootPath(this.targetElement)].filter((e=>e instanceof HTMLElement)).map((e=>e))}getDisplayProp(){return this.hasContent||this.positionTarget?this.hasContent||this.panelVisible?"inline-block":"none":"block"}}C([xs({type:String,attribute:"position-target",reflect:!0})],KH.prototype,"positionTarget",void 0),C([xs({type:Boolean,attribute:"panel-visible"})],KH.prototype,"panelVisible",void 0),C([xs({type:Boolean,attribute:"blocked-content"})],KH.prototype,"blockedContent",void 0),C([xs({type:Boolean,attribute:"has-content"})],KH.prototype,"hasContent",void 0),C([xs({type:Number,attribute:"z-index"})],KH.prototype,"zIndex",void 0),C([Ds()],KH.prototype,"width",void 0),C([Ds()],KH.prototype,"height",void 0),C([Ds()],KH.prototype,"translateState",void 0),Wx(customElements,"dxbl-loading-panel",KH);let OH=class extends Ja{constructor(){super(...arguments),this.width="",this.zIndex=0}updated(e){e.has("width")&&(this.style.width=this.width),e.has("zIndex")&&(this.style.zIndex=this.zIndex.toString())}};OH.shadowRootOptions={...ys.shadowRootOptions,mode:"open"},C([xs()],OH.prototype,"width",void 0),C([xs({type:Number,attribute:"z-index"})],OH.prototype,"zIndex",void 0),OH=C([Es("dxbl-toast-portal")],OH);class _H{}_H.Toast=pe.Prefix+"-toast",_H.ToastText=_H.Toast+"-text";let VH=class extends Ja{constructor(){super(...arguments),this.maxHeight=""}updated(e){e.has("maxHeight")&&this.calculateHeight()}calculateHeight(){this.style.maxHeight=this.maxHeight;const e=this.querySelector(`.${_H.ToastText}`);if(e){const t=parseInt(window.getComputedStyle(e).lineHeight),n=Math.floor(e.offsetHeight/t);this.style.setProperty("--dxbl-toast-line-clamp",n.toString())}}};C([xs({attribute:"max-height"})],VH.prototype,"maxHeight",void 0),VH=C([Es("dxbl-toast")],VH);class zH{}zH.ProgressBar=pe.Prefix+"-progress-bar",zH.ProgressCircularBar=pe.Prefix+"-progress-circular-bar",zH.ProgressCircularBarTrack=zH.ProgressCircularBar+"-track",zH.ProgressCircularBarIndicator=zH.ProgressCircularBar+"-indicator",zH.ProgressBarLabel=zH.ProgressBar+"-label",zH.ProgressBarLabelContainer=zH.ProgressBarLabel+"-container";class WH{static convertRemToPixels(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}static convertToPixels(e){const t=document.createElement("div");t.style.fontSize="1rem",t.style.position="absolute",t.style.visibility="hidden",t.style.width=e,document.body.appendChild(t);const n=t.offsetWidth;return document.body.removeChild(t),n}}var $H,GH;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}($H||($H={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Circular=2]="Circular"}(GH||(GH={}));let qH=class extends Ja{constructor(){super(...arguments),this.value=null,this.visible=!1,this.type=null,this.size="",this.sizeMode=null,this.thickness="",this.indeterminate=!1,this.emptyOffset=!1,this.thicknessPixel=0,this.circularSizeObserver=null}get radius(){return this.thicknessPixel?50-this.thicknessPixel/2:50}get isVertical(){return this.type===GH.Vertical}get isHorizontal(){return this.type===GH.Horizontal}get isCircular(){return this.type===GH.Circular}get offset(){return this.emptyOffset?0:this.indeterminate?.7*this.circumference:this.circumference*(100-this.value)/100}get circumference(){return Math.round(2*Math.PI*this.radius)}connectedCallback(){super.connectedCallback(),this.updateSize(),this.style.visibility="visible"}render(){return ns`
            <style>
                :host {
                    --dxbl-progress-bar-indicator-width: ${this.isHorizontal?this.value+"%":"100%"};
                    --dxbl-progress-bar-indicator-height: ${this.isVertical?this.value+"%":"100%"};
                }
            </style>
            <slot></slot>
        `}updated(e){super.updated(e),e.has("visible")&&(this.style.display=this.visible?"":"none"),e.has("type")&&this.updateType(),(e.has("thickness")||e.has("sizeMode"))&&this.updateThickness(),(e.has("value")||e.has("indeterminate")||e.has("emptyOffset"))&&this.isCircular&&this.updateCircularValue(),(e.has("size")||e.has("type"))&&this.updateSize()}updateSize(){this.calculateSize(),this.updateCircular()}calculateSize(){this.style.width=this.isHorizontal||this.isCircular?this.size:"",this.style.height=this.isVertical||this.isCircular?this.size:"",this.style.setProperty("--dxbl-progress-bar-width",this.style.width),this.style.setProperty("--dxbl-progress-bar-height",this.style.height)}updateType(){this.updateCircular()}updateCircular(){this.isCircular&&(this.updateThickness(),this.updatePercentCircularSize())}updateThickness(){this.thickness?this.style.setProperty("--dxbl-progress-bar-thickness",this.thickness):this.style.removeProperty("--dxbl-progress-bar-thickness"),this.isCircular&&(this.thicknessPixel=WH.convertToPixels(getComputedStyle(this).getPropertyValue("--dxbl-progress-bar-thickness")),this.updateCircularValue(),this.updateCircularLabelSize())}updateCircularValue(){if(!this.isCircular||!this.thicknessPixel)return;const e=this.querySelector(`.${zH.ProgressCircularBarTrack}`),t=this.querySelector(`.${zH.ProgressCircularBarIndicator}`);e&&t&&(e.setAttribute("r",this.radius.toString()),t.setAttribute("r",this.radius.toString()),t.setAttribute("stroke-dasharray",this.circumference.toFixed(2)),t.setAttribute("stroke-dashoffset",this.offset.toFixed(2)),t.style.display=0===this.value?"none":"")}updatePercentCircularSize(){this.size.indexOf("%")<0?this.unsubscribeCircularSizeObserver():(this.subscribeCircularSizeObserver(),this.updateCircularPercentHeight())}subscribeCircularSizeObserver(){this.circularSizeObserver||(this.circularSizeObserver=new ResizeObserver((()=>this.updateCircularPercentHeight())),this.circularSizeObserver.observe(this))}unsubscribeCircularSizeObserver(){this.circularSizeObserver&&(this.circularSizeObserver.unobserve(this),this.circularSizeObserver=null,this.calculateSize())}updateCircularPercentHeight(){this.style.height=this.offsetWidth+"px",this.updateCircularLabelSize()}updateCircularLabelSize(){const e=(()=>{const e=this.querySelector(`.${zH.ProgressBarLabelContainer}`);if(!e)return 0;const t=e.querySelector(".dxbl-image");return t?t.clientWidth+WH.convertToPixels(getComputedStyle(e).gap):0})(),t=this.offsetWidth-2*Math.PI*this.thicknessPixel-e;this.style.setProperty("--dxbl-progress-bar-label-width",t.toFixed(2)+"px")}};C([xs({type:Number})],qH.prototype,"value",void 0),C([xs({type:Boolean})],qH.prototype,"visible",void 0),C([xs({type:GH,converter:gE(GH)})],qH.prototype,"type",void 0),C([xs()],qH.prototype,"size",void 0),C([xs({type:$H,converter:gE($H)})],qH.prototype,"sizeMode",void 0),C([xs()],qH.prototype,"thickness",void 0),C([xs({type:Boolean})],qH.prototype,"indeterminate",void 0),C([xs({attribute:"empty-offset",type:Boolean})],qH.prototype,"emptyOffset",void 0),qH=C([Es("dxbl-progress-bar")],qH);class YH extends hF{constructor(e,t,n,i){super(e,t,n,i),this._parentTargetElement=n.targetElement}get parentTargetElement(){return this._parentTargetElement}handlePopupShown(){super.handlePopupShown(),this.focusFirstItem(),this.synchronizeFocusState()}synchronizeFocusState(){Tn(this.parentTargetElement)&&Dn(this.targetElement)}focusSelectedItem(){this._focusSemaphore.doAllowedAction((()=>{super.focusSelectedItem()}))}}const XH=".dxbl-btn:not([disabled])",JH=".dxbl-btn-dropdown-content-template";class jH extends Fx{constructor(e,t){super(e,t),this._timeoutId=null,this.boundWaitForCustomSubMenuInitialization=this.waitForCustomSubMenuInitialization.bind(this),this.verticalOrientation=t.verticalOrientation}queryItems(){return[...this.targetElement.querySelectorAll(XH)]}handleKeyDownCore(e){switch(Ie.KeyUtils.getEventKeyCode(e)){case Ie.KeyCode.Home:return this.moveToFirstItem(),!0;case Ie.KeyCode.End:return this.moveToLastItem(),!0;case Ie.KeyCode.Up:return!(!e.altKey||e.shiftKey)&&this.performCloseShortcutEvent(e);case Ie.KeyCode.Down:return!(!e.altKey||e.shiftKey)&&this.performOpenShortcutEvent(e);case Ie.KeyCode.Tab:return this.handleTabKeyDown(e);case Ie.KeyCode.Enter:case Ie.KeyCode.Space:return this.performOpenShortcutEvent(e);default:return!1}}performOpenShortcutEvent(e){return!!this.hasMenu()&&(this.performShortcutEvent(e),this.focusSubMenuItemAsync(fx.First),!0)}performCloseShortcutEvent(e){return this.isMenuExpanded()&&this.performShortcutEvent(e),!0}handleTabKeyDown(e){return this.performCloseShortcutEvent(e),e.shiftKey?this.selectedItemIndex>0?this.moveToPrevItem(!1):this.leaveBackward():this.selectedItemIndex<this.itemCount-1?this.moveToNextItem(!1):this.leaveForward(),!0}onSubMenuShown(e){const t=e.targetElement.querySelector(Ln);t&&!t.initialized?this.waitForCustomSubMenuInitialization(t,(()=>super.onSubMenuShown(e))):super.onSubMenuShown(e)}waitForCustomSubMenuInitialization(e,t){this._timeoutId&&clearTimeout(this._timeoutId),e.initialized?t():this._timeoutId=setTimeout((()=>this.boundWaitForCustomSubMenuInitialization(e,t)),50)}createPopupStrategy(e,t){return new YH(e,t,this,[XH,JH].join(","))}createModalStrategy(e,t){return new mF(e,t,this,[XH,JH].join(","))}}const ZH="data-dxbutton-id";let eU=class extends Ja{constructor(){super(...arguments),this.verticalOrientation=!1}connectedOrContentChanged(){this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}disconnectedCallback(){delete this._keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(`:scope > ${Ln}`),this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new jH(this._keyboardNavigator,this))}};C([xs({attribute:"vertical-orientation",type:Boolean})],eU.prototype,"verticalOrientation",void 0),eU=C([Es("dxbl-button")],eU),customElements.define("dxbl-button-dropdown-item",class extends ix{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute(ZH);if(t){const e=document.querySelector(`[${ZH}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});var tU=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchUtils=void 0;var n=function(){function e(){}return e.onEventAttachingToDocument=function(t,n){return!h.Browser.MacOSMobilePlatform||!e.isTouchEventName(t)||(e.documentTouchHandlers[t]||(e.documentTouchHandlers[t]=[]),e.documentTouchHandlers[t].push(n),e.documentEventAttachingAllowed)},e.isTouchEventName=function(e){return h.Browser.WebKitTouchUI&&(e.indexOf("touch")>-1||e.indexOf("gesture")>-1)},e.isTouchEvent=function(e){return h.Browser.WebKitTouchUI&&p.isDefined(e.changedTouches)},e.getEventX=function(e){return h.Browser.IE?e.pageX:e.changedTouches[0].pageX},e.getEventY=function(e){return h.Browser.IE?e.pageY:e.changedTouches[0].pageY},e.touchMouseDownEventName=h.Browser.WebKitTouchUI?"touchstart":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerdown":"mousedown",e.touchMouseUpEventName=h.Browser.WebKitTouchUI?"touchend":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerup":"mouseup",e.touchMouseMoveEventName=h.Browser.WebKitTouchUI?"touchmove":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",e.msTouchDraggableClassName="dxMSTouchDraggable",e.documentTouchHandlers={},e.documentEventAttachingAllowed=!0,e}();t.TouchUtils=n}));t(tU);var nU=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EvtUtils=void 0;var n=function(){function e(){}return e.preventEvent=function(e){e.cancelable&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},e.getEventSource=function(t){return p.isDefined(t)?e.getEventSourceCore(t):null},e.getEventSourceByPosition=function(t){if(!p.isDefined(t))return null;if(!document.elementFromPoint)return e.getEventSourceCore(t);var n=e.getEventX(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0),i=e.getEventY(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0);return void 0===n||void 0===i?e.getEventSourceCore(t):document.elementFromPoint(n,i)},e.getEventSourceCore=function(e){return e.srcElement?e.srcElement:e.target},e.getMouseWheelEventName=function(){return h.Browser.Safari?"mousewheel":h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},e.isLeftButtonPressed=function(t){return!!tU.TouchUtils.isTouchEvent(t)||!!(t=h.Browser.IE&&p.isDefined(event)?event:t)&&(h.Browser.IE&&h.Browser.Version<11?!!h.Browser.MSTouchUI||t.button%2==1:h.Browser.WebKitFamily?"pointermove"===t.type||"pointerenter"===t.type||"pointerleave"===t.type?1===t.buttons:1===t.which:h.Browser.NetscapeFamily||h.Browser.Edge||h.Browser.IE&&h.Browser.Version>=11?e.isMoveEventName(t.type)?1===t.buttons:1===t.which:!h.Browser.Opera||0===t.button)},e.isMoveEventName=function(t){return t===tU.TouchUtils.touchMouseMoveEventName||t===e.getMoveEventName()},e.getMoveEventName=function(){return window.PointerEvent?"pointermove":h.Browser.TouchUI?"touchmove":"mousemove"},e.preventEventAndBubble=function(t){e.preventEvent(t),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},e.clientEventRequiresDocScrollCorrection=function(){return h.Browser.AndroidDefaultBrowser||h.Browser.AndroidChromeBrowser||!(h.Browser.Safari&&h.Browser.Version<3||h.Browser.MacOSMobilePlatform&&h.Browser.Version<5.1)},e.getEventX=function(t){return tU.TouchUtils.isTouchEvent(t)?tU.TouchUtils.getEventX(t):t.clientX+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0)},e.getEventY=function(t){return tU.TouchUtils.isTouchEvent(t)?tU.TouchUtils.getEventY(t):t.clientY+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0)},e.cancelBubble=function(e){e.cancelBubble=!0},e.getWheelDelta=function(e){var t;return t=h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?-e.detail:h.Browser.Safari?e.wheelDelta:-e.deltaY,h.Browser.Opera&&h.Browser.Version<9&&(t=-t),t},e}();t.EvtUtils=n}));t(nU);class iU extends CustomEvent{constructor(e,t,n){super(iU.eventName,{detail:new sU(e,t,n),bubbles:!0,composed:!0,cancelable:!0})}}iU.eventName=sl+".oncolorchanged";class sU{constructor(e,t,n){this.Red=e,this.Green=t,this.Blue=n}}Ct.register(iU.eventName,(e=>e.detail));class rU{static rgbToHtml(e){return"rgb("+e.red+", "+e.green+", "+e.blue+")"}static hsbToHtml(e){return this.rgbToHtml(this.hsbToRgb(e))}static htmlToHsb(e){return this.rgbToHsb(this.htmlToRgb(e))}static htmlToRgb(e){const t=(e=e.replace("rgb","").replace("(","").replace(")","")).split(",").map((e=>parseInt(e.trim())));return{red:t[0],green:t[1],blue:t[2]}}static rgbToHsb(e){const t=e.red/255,n=e.green/255,i=e.blue/255,s=Math.max(t,n,i),r=s-Math.min(t,n,i);let o;o=0===r?0:s===t?(n-i)/r%6:s===n?(i-t)/r+2:(t-n)/r+4,o*=60,o<0&&(o+=360);let a,l=s;return a=0===l?0:r/l,a*=100,l*=100,{hue:o,saturation:a,brightness:l}}static hsbToRgb(e){const t=Math.floor(e.hue/60),n=(rU.maxHsb.saturation-e.saturation)*e.brightness/rU.maxHsb.brightness,i=e.hue%60*(e.brightness-n)/60,s=n+i,r=e.brightness-i;let o={red:0,green:0,blue:0};switch(t){case 0:o={red:e.brightness,green:s,blue:n};break;case 1:o={red:r,green:e.brightness,blue:n};break;case 2:o={red:n,green:e.brightness,blue:s};break;case 3:o={red:n,green:r,blue:e.brightness};break;case 4:o={red:s,green:n,blue:e.brightness};break;case 5:o={red:e.brightness,green:n,blue:r}}return o.red=Math.round(2.55*o.red),o.green=Math.round(2.55*o.green),o.blue=Math.round(2.55*o.blue),o}}rU.maxHsb={hue:359,saturation:100,brightness:100};class oU{}oU.Prefix="dxbl-blazor-colorpicker",oU.HueAreaIndicator=oU.Prefix+"-hue-selection-rect",oU.SaturationBrightnessAreaIndicator=oU.Prefix+"-color-selection";class aU{}aU.ColorAttribute="data-color";class lU extends he{constructor(){super(),this._onColorChanged=null}get indicator(){return this.querySelector(this.getIndicatorCssCelector())}get _indicatorSize(){return{width:this.indicator.offsetWidth,height:this.indicator.offsetHeight}}get _containerSize(){return{width:this.offsetWidth,height:this.offsetHeight}}getIndicatorHeight(){return this._indicatorSize.height}getIndicatorWidth(){return this._indicatorSize.width}getContainerHeight(){return this._containerSize.height}getContainerWidth(){return this._containerSize.width}connectedCallback(){super.connectedCallback(),this.initializeEvents()}disposeComponent(){Bn(this),super.disposeComponent()}setColorChangedCallback(e){this._onColorChanged=e}raiseColorChanged(e){null!=this._onColorChanged&&this._onColorChanged(e)}initializeEvents(){const e=e=>{tU.TouchUtils.isTouchEvent(e)&&e.preventDefault(),this.addEventListener(tU.TouchUtils.touchMouseUpEventName,t),this.addEventListener(tU.TouchUtils.touchMouseMoveEventName,n),this.moveIndicator(e)},t=e=>{this.removeEventListener(tU.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(tU.TouchUtils.touchMouseMoveEventName,n)},n=e=>{tU.TouchUtils.isTouchEvent(e)&&e.preventDefault(),nU.EvtUtils.isLeftButtonPressed(e)&&this.moveIndicator(e)};this.addEventListener(tU.TouchUtils.touchMouseDownEventName,e),En(this,(()=>{this.removeEventListener(tU.TouchUtils.touchMouseDownEventName,e),this.removeEventListener(tU.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(tU.TouchUtils.touchMouseMoveEventName,n)}))}updateBackground(e){}}customElements.define(ol,class extends lU{getIndicatorCssCelector(){return`.${oU.SaturationBrightnessAreaIndicator}`}moveIndicator(e){let t=xt(nU.EvtUtils.getEventX(e),this.indicator,!0),n=xt(nU.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerWidth(),Math.max(0,t))-this.getIndicatorWidth()/2,n=Math.min(this.getContainerHeight(),Math.max(0,n))-this.getIndicatorHeight()/2,this.indicator.style.top=n+"px",this.indicator.style.left=t+"px";const i={hue:rU.maxHsb.hue,saturation:this.getSaturationValue(t),brightness:this.getBrightnessValue(n)};this.raiseColorChanged(i)}updateColor(e){this.setIndicatorPosition(e),this.updateBackground(e)}updateBackground(e){this.style.backgroundColor=rU.hsbToHtml({hue:e.hue,saturation:rU.maxHsb.saturation,brightness:rU.maxHsb.brightness}),this.indicator.style.backgroundColor=rU.hsbToHtml(e)}setIndicatorPosition(e){this.indicator.style.left=this.convertSaturationToXCoordinate(e.saturation)+"px",this.indicator.style.top=this.convertBrightnessToYCoordinate(e.brightness)+"px"}convertSaturationToXCoordinate(e){const t=this.getContainerWidth()*e/rU.maxHsb.saturation-this.getIndicatorWidth()/2;return Math.floor(t)}convertBrightnessToYCoordinate(e){const t=this.getContainerHeight(),n=t-t*e/rU.maxHsb.brightness-this.getIndicatorHeight()/2;return Math.floor(n)}getSaturationValue(e){const t=(e+this.getIndicatorWidth()/2)*rU.maxHsb.saturation/this.getContainerWidth();return Math.floor(t)}getBrightnessValue(e){const t=rU.maxHsb.brightness-(e+this.getIndicatorHeight()/2)*rU.maxHsb.brightness/this.getContainerHeight();return Math.floor(t)}}),customElements.define(rl,class extends lU{getIndicatorCssCelector(){return`.${oU.HueAreaIndicator}`}moveIndicator(e){let t=xt(nU.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerHeight()-Math.round(this.getIndicatorHeight()/2),Math.max(0-this.getIndicatorHeight()/2,t)),this.indicator.style.top=t+"px";const n={hue:this.getHueValue(t),saturation:rU.maxHsb.saturation,brightness:rU.maxHsb.brightness};this.indicator.style.backgroundColor=rU.hsbToHtml(n),this.raiseColorChanged(n)}updateColor(e){this.indicator.style.top=this.calculateHueIndicatorPosition(e.hue)+"px",this.indicator.style.backgroundColor=rU.hsbToHtml({hue:e.hue,saturation:rU.maxHsb.saturation,brightness:rU.maxHsb.brightness})}calculateHueIndicatorPosition(e){const t=this.getContainerHeight(),n=this.getIndicatorHeight();let i=t-t*e/rU.maxHsb.hue;const s=Math.round(n/2);return i=Math.min(t-s,Math.max(0-n/2,i-s)),Math.round(i)}getHueValue(e){let t=(e+=e<0?this.getIndicatorHeight()/2:Math.round(this.getIndicatorHeight()/2))*rU.maxHsb.hue/this.getContainerHeight();return t=rU.maxHsb.hue-t,Math.round(t)}}),customElements.define(sl,class extends he{constructor(){super(...arguments),this._hueArea=null,this._colorArea=null,this._color=rU.maxHsb}initializeComponent(){if(this._hueArea=this.querySelector(rl),this._colorArea=this.querySelector(ol),!this._hueArea||!this._colorArea)throw new Error("ColorAreas elements not found");this.setupHueArea(),this.setupSaturationBrightnessArea(),this.setupColorValue()}setupHueArea(){var e;null===(e=this._hueArea)||void 0===e||e.setColorChangedCallback((e=>{if(this._color.hue=e.hue,null==this._colorArea)return;this._colorArea.updateBackground(this._color);const t=rU.hsbToRgb(this._color);this.raiseOnColorChanged(t.red,t.green,t.blue)}))}setupSaturationBrightnessArea(){var e;null===(e=this._colorArea)||void 0===e||e.setColorChangedCallback((e=>{this._color.saturation=e.saturation,this._color.brightness=e.brightness;const t=rU.hsbToRgb(this._color);null!=this._colorArea&&(this._colorArea.indicator.style.backgroundColor=rU.rgbToHtml(t),this.raiseOnColorChanged(t.red,t.green,t.blue))}))}setupColorValue(){const e=this.getAttribute(aU.ColorAttribute);if(null==e)return;const t=rU.htmlToHsb(e);this.updateColor(t)}updateColor(e){var t,n;this._color=e,null===(t=this._hueArea)||void 0===t||t.updateColor(e),null===(n=this._colorArea)||void 0===n||n.updateColor(e)}raiseOnColorChanged(e,t,n){this.dispatchEvent(new iU(e,t,n))}});const AU=document.createElement("style");AU.type="text/css";class dU extends HTMLElement{constructor(){super(),this.resourceStyleElement=AU.cloneNode()}static get observedAttributes(){return["css"]}attributeChangedCallback(e,t,n){"css"===e&&async function(e,t){e&&await en((()=>t.innerHTML=e))}(n,this.resourceStyleElement)}connectedCallback(){this.resourceStyleElement.isConnected||document.head.appendChild(this.resourceStyleElement)}disconnectedCallback(){this.resourceStyleElement.isConnected&&this.resourceStyleElement.remove()}}Wx(customElements,"dxbl-dynamic-stylesheet",dU);let cU=!1;const hU=["src"],uU=document.createElement("DIV");uU.style.display="none",requestAnimationFrame((()=>{document.body.appendChild(uU)}));class pU extends HTMLElement{connectedCallback(){this.style.display="none"}static get observedAttributes(){return hU}attributeChangedCallback(e,t,n){cU||(cU=!0,"src"===e&&pU.loadAndEmbedSpriteAsync(n).then((e=>{})).catch((e=>{})))}static async loadAndEmbedSpriteAsync(e){const t=await fetch(e).then((e=>e.text())),n=document.createElement("DIV");n.innerHTML=t,uU.appendChild(n)}}var mU,gU,CU;Wx(customElements,"dxbl-webview-sprite-preloader",pU),function(e){e.Default="dxbl-adaptive-group-state-default",e.Text="dxbl-adaptive-group-state-text",e.NoText="dxbl-adaptive-group-state-no-text",e.Collapsed="dxbl-adaptive-group-state-collapsed"}(mU||(mU={})),function(e){e.Default="dxbl-adaptive-item-state-default",e.NoText="dxbl-adaptive-item-state-no-text",e.Collapsed="dxbl-adaptive-item-state-collapsed"}(gU||(gU={})),function(e){e.Default="dxbl-adaptive-ellipsis-state-default",e.Hidden="dxbl-toolbar-hidden-item"}(CU||(CU={}));const fU=Object.values(mU).map((e=>e));var vU;Object.values(gU).map((e=>e)),Object.values(CU).map((e=>e)),function(e){e.Default="dxbl-adaptive-state-default",e.FullSequential="dxbl-adaptive-state-full-seq",e.NoText="dxbl-adaptive-state-no-text",e.NoTextSequential="dxbl-adaptive-state-no-text-seq",e.Group="dxbl-adaptive-state-group-text",e.GroupNoText="dxbl-adaptive-state-grouping-no-text"}(vU||(vU={}));const bU=Object.values(vU).map((e=>e));class wU{}wU.Adaptive=pe.Prefix+"-adaptive",wU.AdaptiveContainer=wU.Adaptive+"-container",wU.AdaptiveContainerContent=wU.AdaptiveContainer+"-content",wU.AdaptiveGroup=wU.Adaptive+"-group",wU.AdaptiveItem=wU.Adaptive+"-item",wU.EllipsisGroup=wU.Adaptive+"-ellipsis-group",wU.EllipsisGroupText=wU.EllipsisGroup+"-text",wU.EllipsisGroupNoText=wU.EllipsisGroup+"-no-text",wU.ItemCollapsed=wU.AdaptiveItem+"-collapsed",wU.ItemNoText=wU.AdaptiveItem+"-no-text",wU.VirtualContainer=wU.Adaptive+"-virtual-container",wU.VirtualTestContainer=wU.VirtualContainer+"-test";const yU=[wU.EllipsisGroupNoText,wU.EllipsisGroupText,CU.Default,CU.Hidden];class BU{renderContainerDefaultState(e){var t,n,i;for(const t of e.groups)this.resetGroupToDefault(t),this.resetItems(t.items),this.expandGroup(t);e.root.classList.remove(...bU),null===(t=e.ellipsis)||void 0===t||t.classList.remove(...yU),null===(n=e.ellipsis)||void 0===n||n.classList.add(CU.Hidden),null===(i=e.separator)||void 0===i||i.classList.add(FS.ToolbarHiddenItem)}renderContainerNoTextState(e,t){t.forEach((t=>{const n=e.root.querySelector(`#${t}`);n&&n.classList.add(gU.NoText)}))}renderGroupState(e,t){const n=e.element;n&&(n.classList.add(t),e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e))}renderContainerCollapsedState(e,t){if(t.forEach((t=>{const n=e.root.querySelector(`#${t}`);n&&n.classList.add(gU.Collapsed)})),t.size>0){const n=e.groups.filter((e=>e.items.some((e=>t.has(e.id)))));n.forEach((e=>this.showEllipsis(e)))}}showGlobalEllipsis(e){var t,n,i;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...yU),null===(n=e.ellipsis)||void 0===n||n.classList.remove(CU.Hidden),null===(i=e.separator)||void 0===i||i.classList.remove(FS.ToolbarHiddenItem)}hideGlobalEllipsis(e){var t,n,i;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...yU),null===(n=e.ellipsis)||void 0===n||n.classList.add(CU.Hidden),null===(i=e.separator)||void 0===i||i.classList.add(FS.ToolbarHiddenItem)}collapseGroup(e){e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e)}expandGroup(e){e.items.forEach((e=>this.showElement(e))),this.hideEllipsis(e)}resetGroupToDefault(e){e.element.classList.remove(...fU),e.element.classList.remove(...bU),e.ellipsis.classList.remove(...yU)}resetItems(e){e.forEach((e=>{e.classList.remove(wU.ItemNoText,wU.ItemCollapsed,gU.NoText.toString(),gU.Collapsed.toString(),"dxbl-toolbar-item-collapsed","dxbl-toolbar-hidden-item"),e.classList.add(gU.Default)}))}showEllipsis(e){e.ellipsis.classList.remove(FS.ToolbarHiddenItem),e.ellipsis.classList.add(CU.Default)}hideEllipsis(e){e.ellipsis.classList.remove(CU.Default),e.ellipsis.classList.add(FS.ToolbarHiddenItem)}showElement(e){e.classList.remove(wU.ItemCollapsed)}hideElement(e){e.classList.add(wU.ItemCollapsed)}}class EU{createDefaultState(e){return{layout:vU.Default,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,state:mU.Default,order:e.order,items:e.items.map((t=>({id:t.id,state:gU.Default,groupId:e.element.id}))),ellipsis:{id:e.ellipsis.id,state:CU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:CU.Hidden}}}createNoTextState(e,t,n=new Set,i=mU.Default){return{layout:vU.NoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:n.has(e.element.id)?mU.Text:mU.Default,items:e.items.map((i=>{return{id:i.id,groupId:e.element.id,state:(s=i.id,r=e.element.id,n.has(r)?gU.Collapsed:t.has(s)?gU.NoText:gU.Default)};var s,r})),ellipsis:{id:e.ellipsis.id,state:n.has(e.element.id)?CU.Default:CU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:function(t){const n=e.groups.filter((e=>t.has(e.element.id)));return n.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))}(n)?CU.Default:CU.Hidden}}}createCollapseState(e,t,n,i){function s(e){const i=e.blocks.filter((e=>!e.collapseInGlobalGroup)).map((e=>e.id)).some((e=>t.has(e))),s=n.has(e.element.id);return i||s}return{layout:vU.NoTextSequential,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:n.has(e.element.id)?mU.Text:mU.Default,items:e.items.map((s=>{return{id:s.id,groupId:e.element.id,state:(r=s.id,o=e.element.id,n.has(o)||t.has(r)?gU.Collapsed:i)};var r,o})),ellipsis:{id:e.ellipsis.id,state:s(e)?CU.Default:CU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).filter((e=>t.has(e.id)||n.has(e.groupId))).some((e=>e.collapseInGlobalGroup))?CU.Default:CU.Hidden}}}createGroupNoTextState(e,t){return{layout:vU.GroupNoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:t.has(e.element.id)?mU.NoText:mU.Text,items:e.items.map((t=>({id:t.id,groupId:e.element.id,state:gU.Collapsed}))),ellipsis:{id:e.ellipsis.id,state:CU.Default}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))?CU.Default:CU.Hidden}}}}class IU{constructor(){this.renderer=new BU,this.factory=new EU}getStates(e,t,n){const i=[],s=this.getBlocks(e),r=[];if(n.toGroups&&r.push(...this.getGroupLimits(e)),i.push(...this.getDefaultState(e,r)),n.toIcons&&i.push(...this.getNoTextStates(e,s,r)),n.hideItems){const t=i.filter((e=>e.layout===vU.NoText)).sort(((e,t)=>e.width-t.width)).map((e=>e.width))[0];i.push(...this.getCollapsedStates(e,s,r,n.toIcons?gU.NoText:gU.Default,t))}return n.toGroups&&i.push(...this.getGroupNoTextStates(e,i)),i}getBlocks(e){const t=e.groups.flatMap((e=>e.blocks.reverse()));return t.sort(((e,t)=>t.adaptivePriority-e.adaptivePriority))}getNoTextStates(e,t,n){const i=[],s=new Set,r=new Set;this.renderer.hideGlobalEllipsis(e);for(const o of t){s.add(o.id),this.renderer.renderContainerNoTextState(e,s);const t=e.groups.find((e=>e.element.id===o.groupId)),a=n.find((e=>e.groupId===t.element.id));if(a&&!this.compareGroupWidth(t,a)){if(r.has(a.groupId))continue;this.renderer.renderGroupState(t,mU.Text),r.add(a.groupId)}i.push(this.factory.createNoTextState(e,s,r))}return i}getGroupLimits(e){const t=[];this.renderer.renderContainerDefaultState(e);for(const n of e.groups)this.renderer.renderGroupState(n,mU.Text),t.push({groupId:n.element.id,width:n.element.offsetWidth});return t}getCollapsedStates(e,t,n,i,s){const r=[],o=new Set,a=new Set;let l=!1;for(const A of t){if(o.add(A.id),A.collapseInGlobalGroup&&!l&&(this.renderer.showGlobalEllipsis(e),l=!0),this.renderer.renderContainerCollapsedState(e,o),e.content.offsetWidth>s)continue;const t=e.groups.find((e=>e.element.id===A.groupId)),d=n.find((e=>e.groupId===t.element.id));if(d&&!this.compareGroupWidth(t,d)){if(a.has(d.groupId))continue;this.renderer.renderGroupState(t,mU.Text),a.add(d.groupId)}r.push(this.factory.createCollapseState(e,o,a,i))}return r}getGroupNoTextStates(e,t){const n=[],i=t.filter((e=>e.groups.every((e=>e.state===mU.Text)))),s=new Set,r=new Set(i.flatMap((e=>e.groups)).sort(((e,t)=>e.order-t.order)).map((e=>e.id)));for(const t of r){const i=e.groups.find((e=>e.element.id===t));i.hasIcon&&(s.add(t),this.renderer.renderGroupState(i,mU.NoText),n.push(this.factory.createGroupNoTextState(e,s)))}return n}compareGroupWidth(e,t){return e.element.offsetWidth>t.width}getDefaultState(e,t){this.renderer.renderContainerDefaultState(e);for(const n of e.groups){const e=t.find((e=>e.groupId===n.element.id));e&&!this.compareGroupWidth(n,e)&&this.renderer.renderGroupState(n,mU.Text)}return[this.factory.createDefaultState(e)]}}const SU=Object.values(mU).map((e=>e)),xU=Object.values(gU).map((e=>e)),DU=Object.values(CU).map((e=>e));class FU{constructor(){this.appliedState=null,this.states=[],this.currentCheckpoint=0,this.calculator=new IU,this.containerItemsUpdate=null}async configure(e,t,n){const i=this.copyContainer(e),s=this.createAdaptiveContainer(i,t);0!==s.content.offsetWidth&&(this.states=this.calculator.getStates(s,t,n),s.root.remove(),await this.adjust(e,t))}async adjust(e,t){const n=this.createAdaptiveContainer(e,t),i=n.root.offsetWidth,s=this.states.map((e=>e.width)).sort(((e,t)=>t-e)),r=s.find((e=>e<i));if(this.appliedState&&this.currentCheckpoint&&this.currentCheckpoint===r)return;e.querySelector(`.${wU.AdaptiveContainerContent}`);const o=this.states.filter((e=>e.width===r))[0];o&&(this.currentCheckpoint=r,await this.waitForAnimationFrame((()=>{if(this.applyNewState(n,o),this.containerItemsUpdate&&o.groups.length>0){const e=o.groups.map((e=>e.items)).reduce(((e,t)=>e.concat(t))).map((e=>({Id:e.id,TextHidden:e.state===gU.NoText,IsVisible:e.state!==gU.Collapsed})));this.containerItemsUpdate(e)}})))}applyNewState(e,t){for(const n of t.groups)this.applyGroupState(e,n);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis),this.appliedState=t}waitForAnimationFrame(e){return new Promise((t=>{requestAnimationFrame((n=>{e(),t(n)}))}))}applyGroupState(e,t){const n=e.root.querySelector(`#${t.id}`);if(n){n.classList.remove(...SU),n.classList.add(t.state),n.dispatchEvent(new iF(t.state.toString()));for(const n of t.items)this.applyItemState(e,n);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis)}}applyItemState(e,t){const n=e.root.querySelector(`#${t.id}`);n&&(n.classList.remove(...xU),n.classList.add(t.state))}applyEllipsisState(e,t){const n=e.root.querySelector(`#${t.id}`);n&&(n.classList.remove(...DU),n.classList.add(t.state))}copyContainer(e){const t=e.cloneNode(!0);t.classList.add(wU.VirtualContainer),t.style.visibility="hidden",t.style.position="absolute";return e.parentElement.appendChild(t),t}createAdaptiveContainer(e,t){const n=e.querySelector(`.${wU.AdaptiveContainerContent}`),i=n.querySelectorAll(`.${wU.AdaptiveGroup}`);let s=0;const r=[...i].reverse().map((e=>{s++;const n=e.querySelectorAll(t),i=e;return{element:e,order:s,hasText:i.hasAttribute("has-adaptive-text"),hasIcon:i.hasAttribute("has-adaptive-icon"),items:[...n],blocks:[...n].map((t=>({id:t.id,groupOrder:s,groupId:e.id,collapsed:!1,noText:!1,adaptivePriority:parseInt(t.getAttribute("adaptive-priority")),collapseInGlobalGroup:t.hasAttribute("collapse-in-global-group")}))),ellipsis:e.querySelector(`.${FS.ButtonEllipsis}`)}}));return{root:e,content:n,groups:r,separator:e.querySelector(".dxbl-ribbon-general-separator"),ellipsis:e.querySelector(".dxbl-toolbar-btn-ellipsis-general")}}}class TU{constructor(e){this.id=e}}class HU extends CustomEvent{constructor(e){super(HU.eventName,{detail:new TU(e),bubbles:!0})}}HU.eventName="dxbl-ribbon-item.resized";class UU{constructor(e,t){this.id=e,this.adaptivePriority=t}}class QU extends CustomEvent{constructor(e,t){super(QU.eventName,{detail:new UU(e,t),bubbles:!0,composed:!0})}}QU.eventName="dxbl-ribbon-item.updated";let PU=class extends Ja{constructor(){super(...arguments),this.containerResizeObserver=null,this.contentResizeObserver=null,this.isAdaptivityEnabled=!1,this.virtualContainer=new FU,this.itemResizedHandler=this.itemResized.bind(this),this.adaptiveItemUpdatedHandler=this.adaptiveItemUpdated.bind(this),this.initialized=!1,this.collapseToIcons=!1,this.canHideItems=!1,this.collapseToGroups=!1,this.minRootItemCount=0,this.itemSelector=".dxbl-adaptive-item:not(.dxbl-toolbar-btn-ellipsis)"}get settings(){return{toIcons:this.collapseToIcons,toGroups:this.collapseToGroups,hideItems:this.canHideItems}}firstUpdated(){this.tryAdapt()}updated(e){super.updated(e),(e.has("collapseToIcons")||e.has("canHideItems")||e.has("collapseToGroups"))&&this.configure()}connectedCallback(){super.connectedCallback(),this.addEventListener(HU.eventName,this.itemResizedHandler),this.addEventListener(QU.eventName,this.adaptiveItemUpdatedHandler),this.virtualContainer.containerItemsUpdate=e=>{this.dispatchEvent(new tF(Array.from(e)))}}disconnectedCallback(){var e;super.disconnectedCallback(),this.removeEventListener(HU.eventName,this.itemResizedHandler),this.removeEventListener(QU.eventName,this.adaptiveItemUpdatedHandler),null===(e=this.containerResizeObserver)||void 0===e||e.unobserve(this)}tryAdapt(){this.classList.contains(wU.VirtualContainer)||(this.containerResizeObserver=new ResizeObserver((()=>new Promise((()=>this.adjust())))),this.containerResizeObserver.observe(this),this.contentResizeObserver=new ResizeObserver((()=>{0!==this.offsetWidth&&this.configure()})),this.contentResizeObserver.observe(this.querySelector(`.${wU.AdaptiveContainerContent}`)),this.initialized=!0,this.configure())}async configure(){this.initialized&&await this.virtualContainer.configure(this,this.itemSelector,this.settings)}async adjust(){await this.virtualContainer.adjust(this,this.itemSelector)}itemResized(e){super.getUpdateComplete().then((()=>this.virtualContainer.configure(this,this.itemSelector,this.settings)))}adaptiveItemUpdated(e){}};PU.shadowRootOptions={...ys.shadowRootOptions,mode:"open"},C([xs({attribute:"collapse-to-icons",type:Boolean})],PU.prototype,"collapseToIcons",void 0),C([xs({attribute:"can-hide-items",type:Boolean})],PU.prototype,"canHideItems",void 0),C([xs({attribute:"collapse-to-groups",type:Boolean})],PU.prototype,"collapseToGroups",void 0),C([xs({attribute:"min-root-item-count",type:Number})],PU.prototype,"minRootItemCount",void 0),PU=C([Es("dxbl-adaptive-container")],PU);const NU="dxbl-filter-builder",RU=`${NU}-node`,LU=`${RU}-value`,MU=`${LU}-btn`,kU="index",KU="dxbl-filter-builder";class OU extends Od{constructor(){super(OU.eventName)}}OU.eventName=`${KU}.close-editor`;class _U{constructor(e,t){this.nodeIndex=e,this.nodeValueIndex=t}}class VU extends CustomEvent{constructor(e,t){super(VU.eventName,{detail:new _U(e,t),bubbles:!0,composed:!0,cancelable:!0})}}VU.eventName=`${KU}.show-editor`,Ct.register(OU.eventName,(e=>e.detail)),Ct.register(VU.eventName,(e=>e.detail));class zU extends Ga{onDocumentFocusOut(e){const t=e.target;if(!this.filterBuilder.isEditing||t.classList.contains(MU))return;const n=this.getClosestElement(t,LU,!0);if(null==n)return;const i=this.getClosestElement(e.relatedTarget,LU,!0)||this.getClosestElement(this.activePopup,LU,!0);if(null==i)return void this.closeEditor();const s=this.getNodeValueElementIndexes(n),r=this.getNodeValueElementIndexes(i);r.nodeIndex===s.nodeIndex&&r.nodeValueIndex==r.nodeValueIndex||this.closeEditor()}isPopupFromEditor(e){return this.filterBuilder.isEditing&&null!==this.getClosestElement(e,LU,!0)}closeEditor(){this.filterBuilder.dispatchEvent(new OU)}onDocumentClick(e){const t=this.getClosestElement(e.target,LU,!0);if(null==t)return;const n=this.getNodeValueElementIndexes(t);this.openEditor(n)}openEditor(e){null!==e&&this.filterBuilder.dispatchEvent(new VU(e.nodeIndex,e.nodeValueIndex))}constructor(e){super(),this.boundOnDocumentClickHandler=this.onDocumentClick.bind(this),this.filterBuilder=e}initialize(){document.addEventListener("click",this.boundOnDocumentClickHandler),super.initialize()}dispose(){document.removeEventListener("click",this.boundOnDocumentClickHandler),super.dispose()}getClosestElement(e,t,n=!1){var i;if(!e)return null;let s=null;if(this.filterBuilder.contains(e)&&(s=e.closest(`.${t}`)),!s&&n){const n=Ka.getPortalFrom(e);n&&this.filterBuilder.contains(n)&&(s=null!==(i=n.closest(`.${t}`))&&void 0!==i?i:null)}return s}getNodeValueElementIndexes(e){const t=parseInt(e.getAttribute(kU)||""),n=this.getClosestElement(e,RU);if(null===n)return{nodeIndex:null,nodeValueIndex:null};const i=parseInt(n.getAttribute(kU)||"");return{nodeIndex:isNaN(i)?null:i,nodeValueIndex:isNaN(t)?null:t}}}let WU=class extends Ja{constructor(){super(),this.isEditing=!1,this.editorManager=new zU(this)}connectedCallback(){this.editorManager.initialize(),super.connectedCallback()}disconnectedCallback(){this.editorManager.dispose(),super.disconnectedCallback()}};C([xs({type:Boolean,attribute:"is-editing"})],WU.prototype,"isEditing",void 0),WU=C([Es(NU)],WU);const $U="dxbl-stylesheet-warning";let GU=class extends Tr{render(){return ns`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM10 18C10 16.8954 10.8954 16 12 16C13.1046 16 14 16.8954 14 18C14 19.1046 13.1046 20 12 20C10.8954 20 10 19.1046 10 18ZM12 4C10.8954 4 10 4.89543 10 6V12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12V6C14 4.89543 13.1046 4 12 4Z" fill="currentColor" fill-opacity="0.75"/>
            </svg>
            <div>
                <p>This application references outdated DevExpress Blazor CSS resources. Refer to the following article for upgrade instructions: <a href="https://supportcenter.devexpress.com/ticket/details/t1081253" target="_blank">The location of CSS resources for DevExpress Blazor controls has changed</a>.</p>
            </div>
        `}static isStyleSheetDeprecated(e){return null!==e&&/\/dx-blazor(\.bs5)*\.css$/gi.test(e)}static create(){return document.createElement($U)}};GU.styles=Ei`
        :host {
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            left: 0px;
            bottom: 0px;
            width: 100%;
            padding: 1.5rem;
            color: var(--bs-dark, var(--dark, rgb(33, 37, 41)));
            background-color: var(--bs-warning, var(--warning, rgb(255, 193, 7)));
            z-index: 10000;
            font-size: 0.875rem;
        }
        :host > svg {
            flex: 0 0 auto;
            margin-right: 1rem;
        }
        p {
            margin: 0;
        }
        a, span {
            font-weight: 600;
        }
        a {
            color: inherit;
        }`,GU=C([Es($U)],GU);const qU=-1e4;class YU{constructor(e,t){this._name=e,this._value=t}get name(){return this._name}get value(){return this._value}}class XU{constructor(e,t){this._selectors=e,this._rules=t}get selectors(){return this._selectors}get rules(){return this._rules}toString(e){let t=this.rules.join("\n");for(let n=0;n<e.length;n++){const i=e[n];t=t.replace(new RegExp(`${i.name}`,"g"),i.value)}return`${this.selectors.join(",\n")} { ${t} }`}}class JU{constructor(){this._rules=[],this._dummyContainer=null,this._ieCssStyles=[],this._styleElement=null,this.initialize()}get styleElement(){return null==this._styleElement&&(this._styleElement=this.createStyleElement()),this._styleElement}createStyleElement(){const e=document.createElement("STYLE");return document.head.appendChild(e),e}initialize(){this.initializeIeCssStyles(),this.initializeDummyElements(),this.initializeRules(),this.updateStyleElement(),this.removeDummyElements()}getAccentColor(){if(!this._dummyContainer)return"";const e=this._dummyContainer.querySelector("a");return window.getComputedStyle(e).color}getAccentShadowColor(e){const t=e.replace("rgb","").replace("(","").replace(")","").split(",").map((e=>e.trim()));t.push(".25");return`rgba(${t.join(",")})`}updateStyleElement(){h.Browser.IE?this.updateIEStyleElement():this.updateStyleElementCore()}updateIEStyleElement(){this._ieCssStyles&&(this.styleElement.innerHTML=this._ieCssStyles.map((e=>e.toString(this._rules))).join("\n"))}updateStyleElementCore(){if(this._rules){const e=this._rules.map((e=>`${e.name}: ${e.value}`)).join(";\n");this.styleElement.innerHTML=`:root{ ${e} }`}}update(){this._rules=[],this.initialize()}initializeIeCssStyles(){}initializeDummyElements(){}initializeRules(){}removeDummyElements(){}}class jU extends JU{initializeIeCssStyles(){this._ieCssStyles=[new XU(["th:focus .dxColumnResizeAnchor"],["box-shadow: 0 0 0 1px --dx-accent-shadow-color;"]),new XU(["th:focus .dxColumnResizeAnchor::after"],["border-left: 1px solid --dx-accent-color;","border-right: 1px solid --dx-accent-color;"]),new XU([".table th:focus:before"],["box-shadow: 0 0 0 2px --dx-accent-color;"])]}initializeDummyElements(){const e=this.createDummyContainer(),t=this.createDummyLink();e.appendChild(t),document.documentElement.appendChild(e),this._dummyContainer=e}createDummyContainer(){const e=document.createElement("DIV");return e.style.top=mn(qU),e.style.left=mn(qU),e.className="dxAIFE",e.setAttribute("aria-hidden","true"),e}createDummyLink(){const e=document.createElement("A");return e.innerHTML="test",e.href="javascript:;",e}removeDummyElements(){this._dummyContainer&&document.documentElement.removeChild(this._dummyContainer),this._dummyContainer=null}initializeRules(){const e=this.getAccentColor();this._rules&&(this._rules.push(new YU("--dx-accent-color",e)),this._rules.push(new YU("--dx-accent-shadow-color",this.getAccentShadowColor(e))))}}const ZU={ensureAccentColorStyle:function(){window.dxAccentColorStyle||(window.dxAccentColorStyle=new jU)},showDeprecatedStyleSheetWarningIfNeeded:function(){const e=Array.from(document.styleSheets).map((e=>e.href)).filter(GU.isStyleSheetDeprecated);e.length>0&&e.forEach((e=>{const t=GU.create();document.body.appendChild(t)}))}};class eQ{constructor(e,t,n){this.defaultValueSource=e,this.computedValueSource=t,this.valueDestination=n}}const tQ=[new eQ("--bs-body-bg","background-color","--dxbl-body-bg"),new eQ("--bs-body-color","color","--dxbl-body-color")],nQ=["--primary","--bs-primary"],iQ=50,sQ=200;function rQ(){const e=document.body,t=window.getComputedStyle(e);tQ.forEach((t=>{e.style.removeProperty(t.valueDestination)})),tQ.filter((e=>!t.getPropertyValue(e.defaultValueSource))).forEach((n=>{e.style.setProperty(n.valueDestination,t.getPropertyValue(n.computedValueSource))}))}function oQ(e,t){if(0===t)return e();const n=window.getComputedStyle(document.body),i=nQ.map((e=>!!n.getPropertyValue(e))).reduce(((e,t)=>e||t),!1);if(i)return e();setTimeout((()=>oQ(e,t-1)),sQ)}function aQ(){return new Promise(((e,t)=>{const n=document.createElement("IFRAME");n.style.cssText="position: absolute; display: none; top: -10000px; left: -10000px;",n.onload=()=>{e(n)},document.body.appendChild(n)}))}let lQ=aQ();function AQ(e){return new Promise(((t,n)=>{(async function(){const e=await lQ;return e.parentNode?e:(lQ=aQ(),await lQ)})().then((n=>{const i=n.contentDocument,s=i.createElement("link");s.href=e,s.rel="stylesheet",s.onload=()=>{t(),s.remove()},s.onerror=()=>{t(),s.remove()},i.head.appendChild(s)}))}))}function dQ(e){return new Promise(((t,n)=>{AQ(e).then((()=>{oQ(t,iQ)}))}))}async function cQ(e){if(e.nodeType===Node.ELEMENT_NODE){if("LINK"===e.tagName){const t=e;if("stylesheet"===t.rel)return await dQ(t.href),!0}}return!1}function hQ(e){cQ(e).then((e=>{e&&rQ()}))}const uQ={initializeThemeCssRuntimeVariables:function(){const e=document.head;new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&t.addedNodes?t.addedNodes.forEach(hQ):"attributes"===t.type&&"href"===t.attributeName&&hQ(t.target)})).observe(e,{attributes:!0,childList:!0,subtree:!0}),Promise.all(Array.from(document.head.childNodes).map((e=>cQ(e)))).then((()=>rQ()))}};let pQ;const mQ={init:async function(e,t,n){return pQ||(pQ=Promise.resolve().then((()=>_F))),(await pQ).init(e,t,n)},dispose:async function(e){return pQ||(pQ=Promise.resolve().then((()=>_F))),(await pQ).dispose(e)}},gQ=document.body,CQ=new WeakMap,fQ=new Map,vQ={subtree:!0,childList:!0},bQ=new MutationObserver((function(e){e.forEach(wQ)}));function wQ(e){e.removedNodes.forEach(yQ)}function yQ(e){const t=fQ.get(e);fQ.delete(e)&&(0===fQ.size&&bQ.disconnect(),t())}const BQ="show",EQ="\\s*matrix\\(\\s*"+[0,0,0,0,0,0].map((function(){return"(\\-?\\d+\\.?\\d*)"})).join(",\\s*")+"\\)\\s*",IQ="above",SQ="below",xQ="above-inner",DQ="below-inner",FQ="top-sides",TQ="bottom-sides",HQ="outside-left",UQ="outside-right",QQ="left-sides",PQ="right-sides",NQ="resizing";function RQ(e){let t=0;if(null!=e&&""!==e)try{const n=e.indexOf("px");n>-1&&(t=parseFloat(e.substr(0,n)))}catch(e){}return Math.ceil(t)}function LQ(e,t,n){const i=e.getBoundingClientRect(),s={left:t(i.left),top:t(i.top),right:n(i.right),bottom:n(i.bottom)};return s.width=s.right-s.left,s.height=s.bottom-s.top,s}function MQ(e){return LQ(e,Math.floor,Math.ceil)}function kQ(e){return LQ(e,Math.ceil,Math.floor)}class KQ{constructor(e,t){this.key=e,this.info=t}checkMargin(){return!0}allowScroll(){return"height"===this.info.size}canApplyToElement(e){return e.className.indexOf("dxbs-align-"+this.key)>-1}getRange(e){const t=this.getTargetBox(e)[this.info.to],n=t+this.info.sizeM*(e.elementBox[this.info.size]+(this.checkMargin()?e.margin:0));return{from:Math.min(t,n),to:Math.max(t,n),windowOverflow:0}}getTargetBox(e){return null}validate(e,t){const n=t[this.info.size];return e.windowOverflow=Math.abs(Math.min(0,e.from-n.from)+Math.min(0,n.to-e.to)),e.validTo=Math.min(e.to,n.to),e.validFrom=Math.max(e.from,n.from),0===e.windowOverflow}applyRange(e,t){t.appliedModifierKeys[this.info.size]=this.key;const n="width"===this.info.size?"left":"top",i=t.styles;let s=e.from;this.allowScroll()&&e.windowOverflow>0&&(t.limitBox.scroll.width||(t.limitBox.scroll.width=!0,t.limitBox.width.to-=wt()),t.isScrollable&&(i["max-height"]=t.height-e.windowOverflow+"px",t.width+=wt(),t.elementBox.width+=wt(),s=e.validFrom)),i.width=t.width+"px",this.checkMargin()&&(s+=Math.max(0,this.info.sizeM)*t.margin),t.elementBox[n]+=s,function(e,t,n){e.transform="matrix(1, 0, 0, 1, "+t+", "+n+")"}(i,t.elementBox.left,t.elementBox.top)}dockElementToTarget(e){const t=this.getRange(e);this.dockElementToTargetInternal(t,e)||this.applyRange(t,e)}dockElementToTargetInternal(e,t){}}class OQ extends KQ{constructor(e,t,n){super(e,t,n),this.oppositePointName=n||null}getTargetBox(e){return this.info.useInnerTargetBox?e.targetBox.inner:e.targetBox.outer}getOppositePoint(){return this._oppositePoint||(this._oppositePoint=VQ.filter(function(e){return e.key===this.oppositePointName}.bind(this))[0])}dockElementToTargetInternal(e,t){if(this.validate(e,t.limitBox))this.applyRange(e,t);else{const n=this.getOppositePoint(),i=n.getRange(t);if(!(n.validate(i,t.limitBox)||i.windowOverflow<e.windowOverflow))return!1;n.applyRange(i,t)}return!0}}class _Q extends KQ{checkMargin(){return!1}getTargetBox(e){return e.targetBox.inner}dockElementToTargetInternal(e,t){return(this.info.isHorizontal&&t.fitHorizontally||!this.info.isHorizontal&&t.fitVertically)&&this.validate(e,t.limitBox),!1}validate(e,t){const n=Math.min(e.from,Math.max(0,e.to-t[this.info.size].to));return n>0&&(e.from-=n,e.to-=n),super.validate(e,t)}}const VQ=[new OQ(IQ,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1},SQ),new OQ(SQ,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1},IQ),new OQ(xQ,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1,useInnerTargetBox:!1},DQ),new OQ(DQ,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1,useInnerTargetBox:!0},xQ),new _Q(FQ,{to:"top",from:"top",size:"height",sizeM:1,isHorizontal:!1}),new _Q(TQ,{to:"bottom",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1}),new OQ(HQ,{to:"left",from:"right",size:"width",sizeM:-1,isHorizontal:!0},UQ),new OQ(UQ,{to:"right",from:"left",size:"width",sizeM:1,isHorizontal:!0},HQ),new _Q(QQ,{to:"left",from:"left",size:"width",sizeM:1,isHorizontal:!0}),new _Q(PQ,{to:"right",from:"right",size:"width",sizeM:-1,isHorizontal:!0})];function zQ(e,t,n){const i=Pt(),s=MQ(e),r=kQ(t),o=e.ownerDocument.documentElement,a={isScrollable:T.DomUtils.hasClassName(e,"dxbs-scrollable"),specifiedOffsetModifiers:VQ.filter((function(t){return t.canApplyToElement(e)})),margin:RQ(i.marginTop),width:n?Math.max(n.width,Math.ceil(e.offsetWidth)):Math.ceil(e.offsetWidth),height:Math.ceil(e.offsetHeight),appliedModifierKeys:{height:null,width:null},fitHorizontally:n.fitHorizontally,fitVertically:n.fitVertically},l=function(e){const t=new RegExp(EQ).exec(e.transform);return t?{left:parseInt(t[5]),top:parseInt(t[6])}:{left:0,top:0}}(i),A=e.classList.contains(pe.InvisibleOffScreen)||e[NQ]?r.left:s.left;a.elementBox=function(e,t,n,i){return{left:e,top:t,right:e+n,bottom:t+i,width:n,height:i}}(l.left-A,l.top-s.top,s.width,s.height),a.targetBox={outer:MQ(t),inner:kQ(t)},a.limitBox={scroll:{width:o.clientWidth<window.innerWidth,height:o.clientHeight<window.innerHeight},width:{from:0,to:o.clientWidth},height:{from:0,to:o.clientHeight}},a.styles={};const d=(e.getAttribute("data-popup-align")||n&&n.align).split(/\s+/);return a.offsetModifiers=VQ.filter((function(e){return d.some((function(t){return e.key===t}))})),a}function WQ(e,t,n,i){return en((function(){const s=zQ(e,t,n);for(let e=0;e<s.offsetModifiers.length;e++)s.offsetModifiers[e].dockElementToTarget(s);var r;i(s),r=s.styles,An(e,(function(e){if(null===e.inlineStyles)e.inlineStyles=r;else for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e.inlineStyles[t]=r[t])}))}))}function $Q(e,t,n,i=!0,s=!0,r=(e=>{})){null!==t&&(WQ(e,t,{align:n,fitHorizontally:i,fitVertically:s},r),cn(e,BQ,!0),dn(e))}function GQ(e){return parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))}function qQ(){return window.innerWidth-document.body.getBoundingClientRect().width}class YQ{constructor(e,t){this.x=e,this.y=t}clone(){return new YQ(this.x,this.y)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),n=Math.min(Math.max(this.x,e.left),e.right);return new YQ(n,t)}isInRect(e){return e.left<=this.x&&this.x<=e.right&&e.top<=this.y&&this.y<=e.bottom}}class XQ{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i}clone(){return new XQ(this.x,this.y,this.width,this.height)}get left(){return this.x}get top(){return this.y}get bottom(){return this.y+this.height}get right(){return this.x+this.width}get size(){return new XQ(0,0,this.width,this.height)}get location(){return new XQ(this.x,this.y,0,0)}get center(){return new XQ(this.x+this.width/2,this.y+this.height/2,0,0)}get scalarLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),n=Math.min(Math.max(this.x,e.left),e.right);return new XQ(n,t,0,0)}}function JQ(e,t){const n=ZQ(e),i=ZQ(t);return new XQ(n.x+i.x,n.y+i.y,n.width+i.width,n.height+i.height)}function jQ(e,t){const n=ZQ(e),i=ZQ(t);return new XQ(n.x-i.x,n.y-i.y,n.width-i.width,n.height-i.height)}function ZQ(e){if(e.getBoundingClientRect)return eP(e);if(e===window)return{x:0,y:0,width:window.innerWidth,height:window.innerHeight};let t=0,n=0,i=0,s=0;return e.x&&(t=e.x),e.y&&(n=e.y),e.width&&(i=e.width),e.height&&(s=e.height),{x:t,y:n,width:i,height:s}}function eP(e){const t=e.getBoundingClientRect();return!t||t.x&&t.y||(t.x=Math.min(t.left,t.right),t.y=Math.min(t.top,t.bottom)),new XQ(t.x,t.y,t.width,t.height)}function tP(e){const t=eP(e),n=window.getComputedStyle(e),i=nP(n.marginLeft),s=nP(n.marginRight),r=nP(n.marginTop),o=nP(n.marginBottom);return new XQ(t.x-i,t.y-r,t.width+i+s,t.height+r+o)}function nP(e){return Math.max(parseFloat(e),0)}class iP{constructor(e,t){this.element=e,this.getClientRect=t}get leftTopCorner(){const e=this;return new sP(this.element,(function(t){return e.getClientRect(t)}),(function(e){return{x:0,y:0}}))}get leftBottomCorner(){const e=this;return new sP(this.element,(function(t){const n=e.getClientRect(t);return new YQ(n.x,n.bottom)}),(function(t){const n=e.getClientRect(t);return new YQ(0,-n.height)}))}get rightTopCorner(){const e=this;return new sP(this.element,(function(t){const n=e.getClientRect(t);return new YQ(n.right,n.y)}),(function(t){const n=e.getClientRect(t);return new YQ(-n.width,0)}))}get rightBottomCorner(){const e=this;return new sP(this.element,(function(t){const n=e.getClientRect(t);return new YQ(n.right,n.bottom)}),(function(t){const n=e.getClientRect(t);return new YQ(-n.width,-n.height)}))}get center(){const e=this;return new sP(this.element,(function(t){return e.getClientRect(t).center}))}}class sP{constructor(e,t,n){this.element=e,this.getLocation=t,this.getDelta=n}get location(){return this.getLocation(this.element)}get delta(){return this.getDelta(this.element)}anchorTo(e){return new rP(this,e)}}class rP{constructor(e,t){this.point=e,this.anchor=t,this.events=new RI(this);const n=[];if(n.push([window,"resize"]),n.push([window,"scroll"]),this.containers=function(e,t){const n=[];for(;null!==e&&"BODY"!==e.tagName&&"#document"!==e.nodeName;)t(e)&&n.push(e),e=e.parentNode;return 0===n.length?null:n}(this.anchor.element.parentNode,this.isElementScrollable),this.containers&&this.containers.forEach((function(e){n.push([e,"scroll"])})),this.checkInCasesInt(n),"undefined"!=typeof ResizeObserver){const e=this;this.resizeObserver=new window.ResizeObserver((function(){e.update()})),this.resizeObserver.observe(this.anchor.element),this.resizeObserver.observe(this.point.element)}else this.resizeObserver=null;let i=this.point.element.offsetParent;this.notStaticParent=null===i?{x:0,y:0,scrollTop:0,scrollLeft:0}:Cn(i)?i:window,this.update()}isElementScrollable(e){const t=window.getComputedStyle(e);return"static"===t.position&&("scroll"===t["overflow-x"]||"scroll"===t["overflow-y"]||"auto"===t["overflow-x"]||"auto"===t["overflow-y"])}update(){const e=this.notStaticParent===window?{x:window.scrollX,y:window.scrollY}:{x:this.notStaticParent.scrollLeft,y:this.notStaticParent.scrollTop},t=function(){const e=Array.from(arguments),t=[],n=[];e.forEach((function(e){"-"===e||"+"===e?t.push(e):n.push(e)}));const i=[];for(;n.length>0;)i.push(n.pop());for(;t.length>0;)i.push(t.shift());for(;i.length>0;){const e=i.shift();t.push("+"===e?JQ(t.pop(),t.pop()):"-"===e?jQ(t.pop(),t.pop()):e)}return t.pop()}(this.anchor.location,"+",this.point.delta,"-",this.notStaticParent,"+",e),n=this.point.element;en((function(){n.style.left=t.x+"px",n.style.top=t.y+"px"}))}checkInCasesInt(e){const t=this.events;e.forEach((function(e){t.attachEvent(e[0],e[1],(function(e){this.update()}))}))}checkInCases(){return this.containers?(this.checkInCasesInt(Array.from(arguments)),this.update(),this):this}dispose(){this.events&&(this.events.dispose(),this.events=null,this.dropDownStartPos=null,this.containers=null,this.resizeObserver&&this.resizeObserver.disconnect())}}function oP(e){return new iP(e,tP)}function aP(e){return new iP(e,eP)}var lP,AP;!function(e){e[e.Popup=0]="Popup",e[e.Modal=1]="Modal"}(lP||(lP={})),function(e){e[e.Down=1]="Down",e[e.Up=2]="Up"}(AP||(AP={}));const dP=8,cP=new WeakMap;let hP;const uP=[];const pP=[{value:0,text:""},{value:1,text:IQ},{value:2,text:SQ},{value:4,text:FQ},{value:8,text:TQ},{value:16,text:HQ},{value:32,text:UQ},{value:64,text:QQ},{value:128,text:PQ},{value:256,text:xQ},{value:512,text:DQ}];const mP={init:function(e,t,n,i){if(e=kt(e),t=kt(t),n=kt(n),!e)return Promise.reject("failed");if(Bn(e),n){const s=s=>{!function(e,t,n){let i=e.target;for(;i;){if(i===t)return;i=i.parentElement}n&&n()}(s,e,(function(){document.body.contains(e)||Bn(e);const s=document.activeElement===t,r=n&&("hidden"!==(o=n).style.visibility||o.classList.contains("dxbs-visually-hidden"));var o;(s||r)&&i.invokeMethodAsync("OnDropDownLostFocus",t.value).catch((e=>console.error(e)))}))};document.addEventListener(tU.TouchUtils.touchMouseDownEventName,s),En(e,(function(){document.removeEventListener(tU.TouchUtils.touchMouseDownEventName,s)}))}return Promise.resolve("ok")},dispose:function(e){return(e=kt(e))&&Bn(e),hP&&hP.dispose(),Promise.resolve("ok")},showAdaptiveDropdown:function(e,t,n,i,s,r){if(!(e=kt(e)))return Promise.reject();const o=Lt(e,n);if(!o)return Promise.reject();const a=document.documentElement,l=document.documentElement.style.overflow,A=document.body.style.overflow,d=document.body.scroll,c=t.dialogType,h=t.alignment,u=function(e){let t="";return pP.forEach((n=>{0!=(n.value&e)&&(t&&(t+=" "),t+=n.text)})),t}(h),p=c===lP.Modal,m=new ResizeObserver((function(n,i){if(n.length<1)return;C&&C.height!==n[0].contentRect.height&&(dn(e),Mt(e,NQ,!0),$Q(e,o,u,t.fitHorizontally,t.fitVertically,f),en((()=>{Mt(e,NQ,!1)})));C=n[0].contentRect}));if(c===lP.Popup)0===h?function(e,t,n){cP.has(e)&&(cP.get(e).disconnect(),cP.delete(e));const i=t.offsetParent;if(!i)return void en((function(){t.style.visibility=""}));const s=i.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.top-s.top,a=s.bottom-r.bottom;let l;const A=window.getComputedStyle(t),d=t.offsetHeight+Math.max(parseFloat(A.marginTop),0)+Math.max(parseFloat(A.marginBottom),0)+dP;if(n===AP.Up)l=!0,s.top+(o-d)<=0&&s.top+o+e.offsetHeight+d+window.pageYOffset<=Math.max(document.body.scrollHeight,window.innerHeight)&&(l=!1);else l=!1,s.bottom-(a-d)>=window.innerHeight&&s.top+o-d+window.pageYOffset>=0&&(l=!0);const c=r.left+t.offsetWidth+dP>=document.body.clientWidth&&r.right-t.offsetWidth-dP>0;en((()=>{hP&&hP.dispose(),hP=l?c?oP(t).rightBottomCorner.anchorTo(aP(e).rightTopCorner):oP(t).leftBottomCorner.anchorTo(aP(e).leftTopCorner):c?oP(t).rightTopCorner.anchorTo(aP(e).rightBottomCorner):oP(t).leftTopCorner.anchorTo(aP(e).leftBottomCorner),t.style.visibility=""}))}(o,e,t.dropDownDirection):$Q(e,o,u,t.fitHorizontally,t.fitVertically,f),t.handleResize&&m.observe(e);else{uP.push(e),e.style.paddingRight=GQ(e)+qQ()+"px";const t=GQ(document.body)+qQ();document.body.style.paddingRight=String(t),document.body.classList.add("dxbl-modal-open")}let g=!1,C=null;function f(n){let i;n.appliedModifierKeys.height===SQ||n.appliedModifierKeys.height===DQ?i=t.bottomAlignmentCssClass:n.appliedModifierKeys.height!==IQ&&n.appliedModifierKeys.height!==xQ||(i=t.topAlignmentCssClass),i&&cn(e,i,!0)}function v(t){const n=t.srcElement;e&&n&&(!e.contains(n)||c===lP.Modal&&e===n)&&w(e)}function b(t){const n=t.target;n&&(a.removeEventListener("focusin",b),null===t.relatedTarget&&e&&e.contains(n)&&n.focus())}function w(e){if(!g){if(g=!0,gn(e))return;y(),s.invokeMethodAsync("CloseDialog").catch((function(t){gn(e)||console.error(t)}))}}function y(){if(a.removeEventListener(tU.TouchUtils.touchMouseDownEventName,v),window.removeEventListener("resize",E),m.disconnect(),c===lP.Modal){if(e){const t=uP.indexOf(e);t>-1&&uP.splice(t,1)}uP.length||(I(c,!1),document.body.classList.remove("dxbl-modal-open"),document.body.style.paddingRight=String(GQ(document.body)-qQ()))}e=null}function B(){if(!e)return;const t=e.querySelector(k);t&&t.focus()}function E(){if(!e||!Lt(e,"modal-dialog-owner"))return;const t=e.firstElementChild;if(!t)return;const n=t.classList,i=function(e,t,n){if(n!==lP.Modal)return-1;const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=Lt(e,"dxbs-gridview"),o=r&&r.querySelector("thead");if(!o)return-1;const a=o.getBoundingClientRect(),l=(a||i).bottom;if(l>.5*t.clientHeight)return l-i.top<.5*t.clientHeight?l-s.top-.5*t.clientHeight:i.top-s.top-2;return-1}(o,a,c),s=a.clientHeight>a.clientWidth?"topVertical":"topHorizontal";qt((function(){n.contains("topVertical")||n.contains("topHorizontal")?n.remove("transition"):n.add("transition"),i&&(a.scrollTop=i),n.remove("topVertical","topHorizontal"),n.add(s)}))}function I(e,t){if(e!==lP.Modal)return;let n,i,s;t?(n="hidden",i="hidden",s=()=>{}):(n=l,i=A,s=d),document.documentElement.style.overflow=n,document.body.style.overflow=i,document.body.scroll=s}return a.addEventListener(tU.TouchUtils.touchMouseDownEventName,v),e.addEventListener("keydown",(function(t){e&&t.keyCode===Ie.KeyCode.Esc&&w(e)})),e.addEventListener("focusout",(function(t){const n=t.relatedTarget;!g&&e&&(n&&!e.contains(n)?function(t){if(!e)return;const n=e.compareDocumentPosition(t);n&window.Node.DOCUMENT_POSITION_PRECEDING?function(){if(!e)return;const t=function(e){const t=e.querySelectorAll(k);return t[t.length-1]}(e);t&&t.focus()}():n&window.Node.DOCUMENT_POSITION_FOLLOWING&&B()}(n):null===n&&a.addEventListener("focusin",b))})),function(e,t,n,i){e&&t.addEventListener("touchmove",(e=>{e.srcElement===t&&e.preventDefault()}));if(i===lP.Modal){let e;n.addEventListener("touchstart",(t=>{e=t})),n.addEventListener("touchmove",(t=>{(function(e,t){if(!t)return!1;const n=Lt(e.srcElement,"modal-header");if(n)return!0;const i=Lt(e.srcElement,"column-chooser-elements-container"),s=Lt(i,"modal-body");if(!i||!s)return!1;if(s.clientHeight>=i.clientHeight)return!0;const r=e.touches[0].pageY-t.touches[0].pageY,o=e=>e.getBoundingClientRect().top,a=i.querySelector(".column-chooser-element-container");if(a&&o(a)===o(s)&&r>=0&&e.cancelable)return!0;const l=e=>Math.round(e.getBoundingClientRect().bottom),A=i.querySelector(".column-chooser-element-container:last-child");return A&&l(A)===l(s)&&r<=0&&e.cancelable})(t,e)&&t.preventDefault(),e=t}))}}(p,e,o,c),function(e){if(CQ.has(e))return CQ.get(e);const t=new Promise((function(t){0===fQ.size&&bQ.observe(gQ,vQ),fQ.set(e,(()=>{t(void 0)}))}));return CQ.set(e,t),t}(e).then((()=>{y(),e=null})),I(c,!0),en((function(){e&&(t.showFocus||(Dn(e),Un(e)),c===lP.Popup&&(B(),function(e,t){const n=Lt(e,t);if(e&&n){const t=Lt(e,"dx-menu-bar");t&&t.classList.contains("vertical")||(on(n,i),i())}function i(){const t=e.getBoundingClientRect(),i=n.getBoundingClientRect(),s=parseFloat(e.style.marginLeft);if(s&&(t.x=t.x-s),Math.round(t.x+t.width)>Math.round(i.x+i.width)&&i.width>t.width){const n=Lt(e.parentNode,"dropdown-menu");if(n){const i=n.getBoundingClientRect(),s=parseFloat(window.getComputedStyle(n,null).getPropertyValue("border-right-width"));e.style.marginLeft="-"+(t.x+t.width-i.x-s)+"px"}else e.style.marginLeft="-"+(t.x+t.width-i.x-i.width)+"px"}else s&&(e.style.marginLeft="")}}(e,r)))})),c===lP.Modal&&(window.addEventListener("resize",E),E()),Promise.resolve()},setInlineModalSize:function(e){if(!(e=kt(e)))return;const t=e.getElementsByClassName("modal-body")[0];t.style.width=t.offsetWidth+"px",t.style.height=t.offsetHeight+"px"}},gP=[],CP={width:0,height:0};function fP(e,t){e.invokeMethodAsync("OnWindowResize",t).catch((e=>console.error(e)))}window.addEventListener("resize",(e=>{const t=window.innerWidth,n=window.innerHeight;CP.height===n&&CP.width===t||(CP.height=n,CP.width=t,gP.forEach((e=>e(CP))))}),{passive:!0});const vP={init:function(e){return function(e){if(gP.indexOf(e)>-1)throw new Error("already subscribed");gP.push(e)}((t=>{fP(e,t.width)})),fP(e,window.innerWidth),Promise.resolve("ok")},dispose:function(){return Promise.resolve("ok")}};function bP(e,t){const n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),n.setAttribute("data-theme-id",t),n}function wP(e,t){const n=document.createElement("style");return n.setAttribute("data-theme-id",t),n.innerHTML=e,n}function yP(e,t){e?e.insertAdjacentElement("afterend",t):document.head.appendChild(t)}const BP={setTheme:async function(e,{paths:t,styles:n}){const i=document.querySelectorAll("[data-theme-id]");let s=i[i.length-1];for(const t of n){const n=wP(t,e);yP(s,n),s=n}const r=[],o=[];for(const n of t){if(!n)continue;const t=bP(n,e);r.push(new Promise((e=>{t.onload=()=>{e()},t.onerror=()=>{o.push(n),e()}}))),yP(s,t),s=t}return await Promise.all(r),i.forEach((e=>e.remove())),o},dispose:function(){return Promise.resolve("ok")}};class EP{constructor(e,t,n,i,s,r,o,a){this.targetWidth=0,this.targetHeight=0,this.targetPositionX=0,this.targetPositionY=0,this.viewPortWidth=0,this.viewPortHeight=0,this.viewPortScrollHeight=0,this.viewPortScrollWidth=0,this.targetWidth=e,this.targetHeight=t,this.targetPositionX=n,this.targetPositionY=i,this.viewPortWidth=s,this.viewPortHeight=r,this.viewPortScrollWidth=o,this.viewPortScrollHeight=a}}const IP={getReference:function(e){return function(e){if(!e)throw new Error("failed");return e}(e)},initResizeHelper:function(e){return vP.init(e)},setTheme:function(e,t){return BP.setTheme(e,t)},setInputValue:function(e,t){e.value=t},getInputValue:function(e){return e.value},getDeviceInfo:function(e,t){return G.getDeviceInfo(e,t)},getLayoutAttributes:function(e){const t=document.querySelector(e);if(null===e)throw new Error("Position target does not exist");if(null===t)return console.warn("Could not find an element by the specified position target"),function(){const e=document.querySelector("body").getBoundingClientRect();return new EP(Math.floor(e.width/2),Math.floor(e.height),Math.floor(e.width/2),Math.floor(e.height),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))}();const n=t.getBoundingClientRect();return new EP(Math.floor(n.width),Math.floor(n.height),Math.floor(n.x),Math.floor(n.y),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))},copyToClipboard:async function(e){if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e);const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",t.style.height="0px",t.style.width="0px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}},showFileSelectorDialog:async function(e){const t=e.isConnected?e:null;return null!==t&&t.showFileSelectorDialog(),Promise.resolve()},waitUntilElementLoaded:async function(e){customElements.get(e)||await customElements.whenDefined(e)},sendFileOptions:async function(e,t){const n=e.isConnected?e:null;if(null!==n){const e=await t.arrayBuffer(),i=new TextDecoder("utf-8").decode(e),s=JSON.parse(i);n.processUploadedFilesOptions(s)}return Promise.resolve()},downloadFileFromStream:async function(e,t){const n=await t.arrayBuffer(),i=URL.createObjectURL(new Blob([n])),s=document.createElement("a");return document.body.appendChild(s),s.href=i,s.download=null!=e?e:"",s.click(),s.remove(),URL.revokeObjectURL(i),Promise.resolve()},scrollIntoView:function(e,t){const n=e.ownerDocument.getElementById(t);if(null!==n){const t=n.getBoundingClientRect(),i=e.getBoundingClientRect();return new Promise(((s,r)=>{requestAnimationFrame((r=>{!(e.compareDocumentPosition(document.body)&Node.DOCUMENT_POSITION_DISCONNECTED)&&t.top>i.top&&n.scrollTop>0&&(n.scrollTop=0),s()}))}))}return Promise.resolve()}};uQ.initializeThemeCssRuntimeVariables(),ZU.showDeprecatedStyleSheetWarningIfNeeded();const SP=vn,xP=SI,DP=II,FP=sB,TP=mP,HP=IP,UP=mQ;function QP(){const e=document.querySelector(tr);if(!e)throw new Error("Error when trying to get CaptureManager in DxPopupRoot");return e.captureManager}const PP=new MutationObserver((e=>{const t=e[0].target;if(t){const e=(h.Browser.Info||"").split(" ").filter((e=>e&&!t.classList.contains(e)));e.length>0&&t.classList.add(...e)}}));PP.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});export{SP as DOMModule,TP as EditorsDropDownModule,xP as FileInputModule,UP as RibbonModule,FP as RollerModule,DP as UploadModule,HP as UtilsModule,QP as getCaptureManagerSingletonForTests};
